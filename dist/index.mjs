function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(o)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function l(t,e,n){t.$$.on_destroy.push(c(e,n))}function u(t,e,n,o){if(t){const i=h(t,e,n,o);return t[0](i)}}function h(t,e,o,i){return t[1]&&i?n(o.ctx.slice(),t[1](i(e))):o.ctx}function d(t,e,n,o,i,r,s){const a=function(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|i[o];return t}return e.dirty|i}return e.dirty}(e,o,i,r);if(a){const i=h(e,n,o,s);t.p(i,a)}}const f="undefined"!=typeof window;let y=f?()=>window.performance.now():()=>Date.now(),p=f?t=>requestAnimationFrame(t):t;const g=new Set;function m(t){g.forEach((e=>{e.c(t)||(g.delete(e),e.f())})),0!==g.size&&p(m)}function x(t,e){t.appendChild(e)}function k(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function b(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function M(t){return document.createTextNode(t)}function $(){return M(" ")}function w(){return M("")}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function T(t,e){for(const n in e)_(t,n,e[n])}function S(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let O;function C(t){O=t}function P(){if(!O)throw new Error("Function called outside component initialization");return O}function I(t){P().$$.before_update.push(t)}function N(t){P().$$.on_mount.push(t)}function A(t){P().$$.after_update.push(t)}function W(t){P().$$.on_destroy.push(t)}function E(t,e){P().$$.context.set(t,e)}function L(t){return P().$$.context.get(t)}const F=[],R=[],j=[],Y=[],z=Promise.resolve();let X=!1;function D(){X||(X=!0,z.then(B))}function q(t){j.push(t)}let H=!1;const G=new Set;function B(){if(!H){H=!0;do{for(let t=0;t<F.length;t+=1){const e=F[t];C(e),Z(e.$$)}for(C(null),F.length=0;R.length;)R.pop()();for(let t=0;t<j.length;t+=1){const e=j[t];G.has(e)||(G.add(e),e())}j.length=0}while(F.length);for(;Y.length;)Y.pop()();X=!1,H=!1,G.clear()}}function Z(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const V=new Set;let J;function K(){J={r:0,c:[],p:J}}function U(){J.r||r(J.c),J=J.p}function Q(t,e){t&&t.i&&(V.delete(t),t.i(e))}function tt(t,e,n,o){if(t&&t.o){if(V.has(t))return;V.add(t),J.c.push((()=>{V.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function et(t,e){t.d(1),e.delete(t.key)}function nt(t,e,n,o,i,r,s,a,c,l,u,h){let d=t.length,f=r.length,y=d;const p={};for(;y--;)p[t[y].key]=y;const g=[],m=new Map,x=new Map;for(y=f;y--;){const t=h(i,r,y),a=n(t);let c=s.get(a);c?o&&c.p(t,e):(c=l(a,t),c.c()),m.set(a,g[y]=c),a in p&&x.set(a,Math.abs(y-p[a]))}const k=new Set,v=new Set;function b(t){Q(t,1),t.m(a,u),s.set(t.key,t),u=t.first,f--}for(;d&&f;){const e=g[f-1],n=t[d-1],o=e.key,i=n.key;e===n?(u=e.first,d--,f--):m.has(i)?!s.has(o)||k.has(o)?b(e):v.has(i)?d--:x.get(o)>x.get(i)?(v.add(o),b(e)):(k.add(i),d--):(c(n,s),d--)}for(;d--;){const e=t[d];m.has(e.key)||c(e,s)}for(;f;)b(g[f-1]);return g}function ot(t,e){const n={},o={},i={$$scope:1};let r=t.length;for(;r--;){const s=t[r],a=e[r];if(a){for(const t in s)t in a||(o[t]=1);for(const t in a)i[t]||(n[t]=a[t],i[t]=1);t[r]=a}else for(const t in s)i[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function it(t){return"object"==typeof t&&null!==t?t:{}}function rt(t){t&&t.c()}function st(t,e,n){const{fragment:i,on_mount:a,on_destroy:c,after_update:l}=t.$$;i&&i.m(e,n),q((()=>{const e=a.map(o).filter(s);c?c.push(...e):r(e),t.$$.on_mount=[]})),l.forEach(q)}function at(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ct(e,n,o,s,a,c,l=[-1]){const u=O;C(e);const h=n.props||{},d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:i(),dirty:l,skip_bound:!1};let f=!1;if(d.ctx=o?o(e,h,((t,n,...o)=>{const i=o.length?o[0]:n;return d.ctx&&a(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),f&&function(t,e){-1===t.$$.dirty[0]&&(F.push(t),D(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],d.update(),f=!0,r(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const t=(y=n.target,Array.from(y.childNodes));d.fragment&&d.fragment.l(t),t.forEach(v)}else d.fragment&&d.fragment.c();n.intro&&Q(e.$$.fragment),st(e,n.target,n.anchor),B()}var y;C(u)}class lt{$destroy(){at(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ut=[];function ht(e,n=t){let o;const i=[];function r(t){if(a(e,t)&&(e=t,o)){const t=!ut.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),ut.push(n,e)}if(t){for(let t=0;t<ut.length;t+=2)ut[t][0](ut[t+1]);ut.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(s,a=t){const c=[s,a];return i.push(c),1===i.length&&(o=n(r)||t),s(e),()=>{const t=i.indexOf(c);-1!==t&&i.splice(t,1),0===i.length&&(o(),o=null)}}}}class dt{constructor({renderer:t}){t||(this._rendererOptions={output:"svg"}),t&&(!function(t){if(t.constructor!==Object||!("output"in t)||!["svg"].includes(t.output))throw new Error(`Invalid renderer options: ${JSON.stringify(t)}`)}(t),this._rendererOptions=t)}output(){return this._rendererOptions.output}}const ft={};function yt(){return L(ft)}function pt(t){const e=void 0===t?0:t;if(e.constructor===Number)return{left:e,right:e,top:e,bottom:e};if(e.constructor===Object){if(4!==Object.keys(e).length)throw gt;for(const t of["left","right","top","bottom"])if(!(t in e))throw gt;return e}throw gt}const gt=new Error("Invalid padding specification");function mt(t,e,n){return function(t,e,n){Math.abs(t[0]-t[1])<e+n&&console.warn("Padding cannot exceed width or height")}(t,e,n),t[0]<t[1]?[t[0]+e,t[1]-n]:[t[0]-n,t[1]+e]}function xt(t,e,n){return t[0]<t[1]?[t[0]-e,t[1]+n]:[t[0]+n,t[1]-e]}function kt(t,e){return e?[t[1],t[0]]:t}function vt(t,e,n){return[t[0]*e+n,t[1]*e+n]}function bt(t){if(t<0)throw new Error("Zoom factors have to be positive")}function Mt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function $t(t){let e=t,n=t;function o(t,e,o,i){for(null==o&&(o=0),null==i&&(i=t.length);o<i;){const r=o+i>>>1;n(t[r],e)<0?o=r+1:i=r}return o}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>Mt(t(e),n)}(t)),{left:o,center:function(t,n,i,r){null==i&&(i=0),null==r&&(r=t.length);const s=o(t,n,i,r-1);return s>i&&e(t[s-1],n)>-e(t[s],n)?s-1:s},right:function(t,e,o,i){for(null==o&&(o=0),null==i&&(i=t.length);o<i;){const r=o+i>>>1;n(t[r],e)>0?i=r:o=r+1}return o}}}const wt=$t(Mt).right;$t((function(t){return null===t?NaN:+t})).center;class _t{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let o=0;o<this._n&&o<32;o++){const i=e[o],r=t+i,s=Math.abs(t)<Math.abs(i)?t-(r-i):i-(r-t);s&&(e[n++]=s),t=r}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,o,i=this._n,r=0;if(i>0){for(r=t[--i];i>0&&(e=r,n=t[--i],r=e+n,o=n-(r-e),!o););i>0&&(o<0&&t[i-1]<0||o>0&&t[i-1]>0)&&(n=2*o,e=r+n,n==e-r&&(r=e))}return r}}var Tt=Math.sqrt(50),St=Math.sqrt(10),Ot=Math.sqrt(2);function Ct(t,e,n){var o,i,r,s,a=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((o=e<t)&&(i=t,t=e,e=i),0===(s=Pt(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),r=new Array(i=Math.ceil(e-t+1));++a<i;)r[a]=(t+a)*s;else for(s=-s,t=Math.ceil(t*s),e=Math.floor(e*s),r=new Array(i=Math.ceil(e-t+1));++a<i;)r[a]=(t+a)/s;return o&&r.reverse(),r}function Pt(t,e,n){var o=(e-t)/Math.max(0,n),i=Math.floor(Math.log(o)/Math.LN10),r=o/Math.pow(10,i);return i>=0?(r>=Tt?10:r>=St?5:r>=Ot?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(r>=Tt?10:r>=St?5:r>=Ot?2:1)}function It(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Nt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function At(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function Wt(){}var Et=1/.7,Lt="\\s*([+-]?\\d+)\\s*",Ft="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jt=/^#([0-9a-f]{3,8})$/,Yt=new RegExp("^rgb\\("+[Lt,Lt,Lt]+"\\)$"),zt=new RegExp("^rgb\\("+[Rt,Rt,Rt]+"\\)$"),Xt=new RegExp("^rgba\\("+[Lt,Lt,Lt,Ft]+"\\)$"),Dt=new RegExp("^rgba\\("+[Rt,Rt,Rt,Ft]+"\\)$"),qt=new RegExp("^hsl\\("+[Ft,Rt,Rt]+"\\)$"),Ht=new RegExp("^hsla\\("+[Ft,Rt,Rt,Ft]+"\\)$"),Gt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Bt(){return this.rgb().formatHex()}function Zt(){return this.rgb().formatRgb()}function Vt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=jt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Jt(e):3===n?new te(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Kt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Kt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Yt.exec(t))?new te(e[1],e[2],e[3],1):(e=zt.exec(t))?new te(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Xt.exec(t))?Kt(e[1],e[2],e[3],e[4]):(e=Dt.exec(t))?Kt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=qt.exec(t))?ie(e[1],e[2]/100,e[3]/100,1):(e=Ht.exec(t))?ie(e[1],e[2]/100,e[3]/100,e[4]):Gt.hasOwnProperty(t)?Jt(Gt[t]):"transparent"===t?new te(NaN,NaN,NaN,0):null}function Jt(t){return new te(t>>16&255,t>>8&255,255&t,1)}function Kt(t,e,n,o){return o<=0&&(t=e=n=NaN),new te(t,e,n,o)}function Ut(t){return t instanceof Wt||(t=Vt(t)),t?new te((t=t.rgb()).r,t.g,t.b,t.opacity):new te}function Qt(t,e,n,o){return 1===arguments.length?Ut(t):new te(t,e,n,null==o?1:o)}function te(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}function ee(){return"#"+oe(this.r)+oe(this.g)+oe(this.b)}function ne(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function oe(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ie(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new se(t,e,n,o)}function re(t){if(t instanceof se)return new se(t.h,t.s,t.l,t.opacity);if(t instanceof Wt||(t=Vt(t)),!t)return new se;if(t instanceof se)return t;var e=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,i=Math.min(e,n,o),r=Math.max(e,n,o),s=NaN,a=r-i,c=(r+i)/2;return a?(s=e===r?(n-o)/a+6*(n<o):n===r?(o-e)/a+2:(e-n)/a+4,a/=c<.5?r+i:2-r-i,s*=60):a=c>0&&c<1?0:s,new se(s,a,c,t.opacity)}function se(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}function ae(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Nt(Wt,Vt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Bt,formatHex:Bt,formatHsl:function(){return re(this).formatHsl()},formatRgb:Zt,toString:Zt}),Nt(te,Qt,At(Wt,{brighter:function(t){return t=null==t?Et:Math.pow(Et,t),new te(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new te(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ee,formatHex:ee,formatRgb:ne,toString:ne})),Nt(se,(function(t,e,n,o){return 1===arguments.length?re(t):new se(t,e,n,null==o?1:o)}),At(Wt,{brighter:function(t){return t=null==t?Et:Math.pow(Et,t),new se(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new se(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,i=2*n-o;return new te(ae(t>=240?t-240:t+120,i,o),ae(t,i,o),ae(t<120?t+240:t-120,i,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ce=t=>()=>t;function le(t){return 1==(t=+t)?ue:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}(e,n,t):ce(isNaN(e)?n:e)}}function ue(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):ce(isNaN(t)?e:t)}var he=function t(e){var n=le(e);function o(t,e){var o=n((t=Qt(t)).r,(e=Qt(e)).r),i=n(t.g,e.g),r=n(t.b,e.b),s=ue(t.opacity,e.opacity);return function(e){return t.r=o(e),t.g=i(e),t.b=r(e),t.opacity=s(e),t+""}}return o.gamma=t,o}(1);function de(t,e){e||(e=[]);var n,o=t?Math.min(e.length,t.length):0,i=e.slice();return function(r){for(n=0;n<o;++n)i[n]=t[n]*(1-r)+e[n]*r;return i}}function fe(t,e){var n,o=e?e.length:0,i=t?Math.min(o,t.length):0,r=new Array(i),s=new Array(o);for(n=0;n<i;++n)r[n]=ve(t[n],e[n]);for(;n<o;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=r[n](t);return s}}function ye(t,e){var n=new Date;return t=+t,e=+e,function(o){return n.setTime(t*(1-o)+e*o),n}}function pe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ge(t,e){var n,o={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?o[n]=ve(t[n],e[n]):i[n]=e[n];return function(t){for(n in o)i[n]=o[n](t);return i}}var me=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xe=new RegExp(me.source,"g");function ke(t,e){var n,o,i,r=me.lastIndex=xe.lastIndex=0,s=-1,a=[],c=[];for(t+="",e+="";(n=me.exec(t))&&(o=xe.exec(e));)(i=o.index)>r&&(i=e.slice(r,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,c.push({i:s,x:pe(n,o)})),r=xe.lastIndex;return r<e.length&&(i=e.slice(r),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,o=0;o<e;++o)a[(n=c[o]).i]=n.x(t);return a.join("")})}function ve(t,e){var n,o,i=typeof e;return null==e||"boolean"===i?ce(e):("number"===i?pe:"string"===i?(n=Vt(e))?(e=n,he):ke:e instanceof Vt?he:e instanceof Date?ye:(o=e,!ArrayBuffer.isView(o)||o instanceof DataView?Array.isArray(e)?fe:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ge:pe:de))(t,e)}function be(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Me(t){return+t}var $e=[0,1];function we(t){return t}function _e(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Te(t,e,n){var o=t[0],i=t[1],r=e[0],s=e[1];return i<o?(o=_e(i,o),r=n(s,r)):(o=_e(o,i),r=n(r,s)),function(t){return r(o(t))}}function Se(t,e,n){var o=Math.min(t.length,e.length)-1,i=new Array(o),r=new Array(o),s=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<o;)i[s]=_e(t[s],t[s+1]),r[s]=n(e[s],e[s+1]);return function(e){var n=wt(t,e,1,o)-1;return r[n](i[n](e))}}function Oe(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ce(){var t,e,n,o,i,r,s=$e,a=$e,c=ve,l=we;function u(){var t,e,n,c=Math.min(s.length,a.length);return l!==we&&(t=s[0],e=s[c-1],t>e&&(n=t,t=e,e=n),l=function(n){return Math.max(t,Math.min(e,n))}),o=c>2?Se:Te,i=r=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=o(s.map(t),a,c)))(t(l(e)))}return h.invert=function(n){return l(e((r||(r=o(a,s.map(t),pe)))(n)))},h.domain=function(t){return arguments.length?(s=Array.from(t,Me),u()):s.slice()},h.range=function(t){return arguments.length?(a=Array.from(t),u()):a.slice()},h.rangeRound=function(t){return a=Array.from(t),c=be,u()},h.clamp=function(t){return arguments.length?(l=!!t||we,u()):l!==we},h.interpolate=function(t){return arguments.length?(c=t,u()):c},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,o){return t=n,e=o,u()}}function Pe(){return Ce()(we,we)}function Ie(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}function Ne(t){return(t=Ie(Math.abs(t)))?t[1]:NaN}var Ae,We=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ee(t){if(!(e=We.exec(t)))throw new Error("invalid format: "+t);var e;return new Le({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Le(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Fe(t,e){var n=Ie(t,e);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}Ee.prototype=Le.prototype,Le.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Re={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Fe(100*t,e),r:Fe,s:function(t,e){var n=Ie(t,e);if(!n)return t+"";var o=n[0],i=n[1],r=i-(Ae=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=o.length;return r===s?o:r>s?o+new Array(r-s+1).join("0"):r>0?o.slice(0,r)+"."+o.slice(r):"0."+new Array(1-r).join("0")+Ie(t,Math.max(0,e+r-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function je(t){return t}var Ye,ze,Xe,De=Array.prototype.map,qe=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function He(t){var e,n,o=void 0===t.grouping||void 0===t.thousands?je:(e=De.call(t.grouping,Number),n=t.thousands+"",function(t,o){for(var i=t.length,r=[],s=0,a=e[0],c=0;i>0&&a>0&&(c+a+1>o&&(a=Math.max(1,o-c)),r.push(t.substring(i-=a,i+a)),!((c+=a+1)>o));)a=e[s=(s+1)%e.length];return r.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?je:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(De.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Ee(t)).fill,n=t.align,h=t.sign,d=t.symbol,f=t.zero,y=t.width,p=t.comma,g=t.precision,m=t.trim,x=t.type;"n"===x?(p=!0,x="g"):Re[x]||(void 0===g&&(g=12),m=!0,x="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var k="$"===d?i:"#"===d&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",v="$"===d?r:/[%p]/.test(x)?c:"",b=Re[x],M=/[defgprs%]/.test(x);function $(t){var i,r,c,d=k,$=v;if("c"===x)$=b(t)+$,t="";else{var w=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:b(Math.abs(t),g),m&&(t=function(t){t:for(var e,n=t.length,o=1,i=-1;o<n;++o)switch(t[o]){case".":i=e=o;break;case"0":0===i&&(i=o),e=o;break;default:if(!+t[o])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),w&&0==+t&&"+"!==h&&(w=!1),d=(w?"("===h?h:l:"-"===h||"("===h?"":h)+d,$=("s"===x?qe[8+Ae/3]:"")+$+(w&&"("===h?")":""),M)for(i=-1,r=t.length;++i<r;)if(48>(c=t.charCodeAt(i))||c>57){$=(46===c?s+t.slice(i+1):t.slice(i))+$,t=t.slice(0,i);break}}p&&!f&&(t=o(t,1/0));var _=d.length+t.length+$.length,T=_<y?new Array(y-_+1).join(e):"";switch(p&&f&&(t=o(T+t,T.length?y-$.length:1/0),T=""),n){case"<":t=d+t+$+T;break;case"=":t=d+T+t+$;break;case"^":t=T.slice(0,_=T.length>>1)+d+t+$+T.slice(_);break;default:t=T+d+t+$}return a(t)}return g=void 0===g?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),$.toString=function(){return t+""},$}return{format:h,formatPrefix:function(t,e){var n=h(((t=Ee(t)).type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(Ne(e)/3))),i=Math.pow(10,-o),r=qe[8+o/3];return function(t){return n(i*t)+r}}}}function Ge(t,e,n,o){var i,r=function(t,e,n){var o=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),r=o/i;return r>=Tt?i*=10:r>=St?i*=5:r>=Ot&&(i*=2),e<t?-i:i}(t,e,n);switch((o=Ee(null==o?",f":o)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=o.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ne(e)/3)))-Ne(Math.abs(t)))}(r,s))||(o.precision=i),Xe(o,s);case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ne(e)-Ne(t))+1}(r,Math.max(Math.abs(t),Math.abs(e))))||(o.precision=i-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(i=function(t){return Math.max(0,-Ne(Math.abs(t)))}(r))||(o.precision=i-2*("%"===o.type))}return ze(o)}function Be(t){var e=t.domain;return t.ticks=function(t){var n=e();return Ct(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var o=e();return Ge(o[0],o[o.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var o,i,r=e(),s=0,a=r.length-1,c=r[s],l=r[a],u=10;for(l<c&&(i=c,c=l,l=i,i=s,s=a,a=i);u-- >0;){if((i=Pt(c,l,n))===o)return r[s]=c,r[a]=l,e(r);if(i>0)c=Math.floor(c/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,l=Math.floor(l*i)/i}o=i}return t},t}function Ze(){var t=Pe();return t.copy=function(){return Oe(t,Ze())},It.apply(t,arguments),Be(t)}function Ve(t,e){if(t){if(t.constructor===Array)return Ze().domain(t).range(e);const n=t.copy().range(e);return n.invert=function(t){if(t.invert)return t.invert;return function(e){const[n,o]=t.range(),i=Math.min(n,o),r=Math.max(n,o),s=o<n,a=t.domain(),c=a.length-1;if(e<i+t.padding()*t.step())return a[0];if(e>r-t.padding()*t.step())return a[c];let l;return function(t){return!("paddingInner"in t)}(t)&&(l=Math.round((e-i-t.padding()*t.step())/t.step())),function(t){return"paddingInner"in t}(t)&&(l=Math.round((e-i-t.padding()*t.step())/t.step()),l>c&&(l=c)),a[s?c-l:l]}}(n),n}if(!t)return Ze().domain(e).range(e)}function Je({rangeX:t,rangeY:e},{finalRangeX:n,finalRangeY:o}){const i=Ze().domain(t).range([0,2*Math.PI]),r=Ze().domain(e).range([0,1]),s=Ze().domain([-1,1]).range(n),a=Ze().domain([-1,1]).range(o),c=function([t,e]){const n=function(t,e){const n=e*Math.sin(t),o=e*Math.cos(t);return[n,o]}(i(t),r(e));return[s(n[0]),a(n[1])]};return c.invert=function([t,e]){const n=[s.invert(t),a.invert(e)],[o,c]=function(t,e){const n=function(t,e){if(t>=0&&e>=0)return 1;if(t<0&&e>=0)return 2;if(t<0&&e<0)return 3;if(t>=0&&e<0)return 4}(t,e),o=Math.sqrt(e**2+t**2);let i=Math.atan(t/e);2===n&&(i+=2*Math.PI);3===n&&(i+=Math.PI);4===n&&(i+=Math.PI);return[i,o]}(...n);return[i.invert(o),r.invert(c)]},c}function Ke(t){return void 0===t?{xNeedsScaling:!0,yNeedsScaling:!0}:t.constructor===Boolean?{xNeedsScaling:t,yNeedsScaling:t}:t.constructor===Object?t:void 0}function Ue(t){const e=pt(t.padding),n=function({coordinates:t}){return{rangeX:[t.x1,t.x2],rangeY:[t.y1,t.y2]}}(t),o=function(t,e,n){const{flipX:o,flipY:i,zoomIdentity:r}=t,{rangeX:s,rangeY:a}=e,{left:c,right:l,top:u,bottom:h}=n;let d=kt(s,o);d=mt(d,c,l),r&&(bt(r.kx),d=vt(d,r.kx,r.x));let f=kt(a,i);return f=mt(f,u,h),r&&(bt(r.ky),f=vt(f,r.ky,r.y)),{finalRangeX:d,finalRangeY:f}}(t,n,e),i=function({scaleX:t,scaleY:e,padding:n,...o},i,r,s,a,c){return{...o,padding:i,...r,...s,...a,...c,bbox:Qe(r),paddedBbox:tn(r,i)}}(t,e,n,o,function({scaleX:t,scaleY:e},{rangeX:n,rangeY:o}){return{scaleX:Ve(t,n),scaleY:Ve(e,o)}}(t,n),function({rangeX:t,rangeY:e},{finalRangeX:n,finalRangeY:o}){return{finalScaleX:Ze().domain(t).range(n),finalScaleY:Ze().domain(e).range(o)}}(n,o));return function(t){const{transformation:e,rangeX:n,rangeY:o,finalRangeX:i,finalRangeY:r,scaleX:s,scaleY:a,finalScaleX:c,finalScaleY:l}=t;if("polar"!==e&&(t.getTotalTransformation=t=>{const{xNeedsScaling:e,yNeedsScaling:n}=Ke(t);return([t,o])=>[c(e?s(t):t),l(n?a(o):o)]},t.inverseTotalTransformation=([t,e])=>[s.invert(c.invert(t)),a.invert(l.invert(e))]),"polar"===e){const e=t=>{const{xNeedsScaling:e,yNeedsScaling:n}=Ke(t);return([t,o])=>[e?s(t):t,n?a(o):o]},c=Je({rangeX:n,rangeY:o},{finalRangeX:i,finalRangeY:r});t.getScaleTransformation=e,t.postScaleTransformation=c,t.getTotalTransformation=t=>{const n=e(t);return t=>c(n(t))};const l=([t,e])=>[s.invert(t),a.invert(e)];t.inverseTotalTransformation=t=>l(c.invert(t))}}(i),i}function Qe({rangeX:t,rangeY:e}){return{minX:Math.min(...t),maxX:Math.max(...t),minY:Math.min(...e),maxY:Math.max(...e)}}function tn({rangeX:t,rangeY:e},{left:n,right:o,top:i,bottom:r}){return{minX:Math.min(...t)+n,maxX:Math.max(...t)-o,minY:Math.min(...e)+i,maxY:Math.max(...e)-r}}Ye=He({thousands:",",grouping:[3],currency:["$",""]}),ze=Ye.format,Xe=Ye.formatPrefix;const en={};function nn(){return L(en)}function on(){const t=ht();return E(en,t),t}function rn(t,e){t.set(Ue(e))}const sn={};const an={};function cn(){return L(an)}function ln(){const t=ht();return E(an,t),t}function un(t,e){t.set(e)}const hn="undefined"!=typeof window?window:{screen:{},navigator:{}},dn=hn.matchMedia||(()=>({matches:!1}));let fn=!1;const yn={get passive(){return fn=!0}},pn=()=>{};hn.addEventListener&&hn.addEventListener("p",pn,yn),hn.removeEventListener&&hn.removeEventListener("p",pn,!1);const gn="ontouchstart"in hn,mn=gn||"TouchEvent"in hn&&dn("(any-pointer: coarse)").matches,xn=(hn.navigator.maxTouchPoints||0)>0||mn,kn=hn.navigator.userAgent||"",vn=dn("(pointer: coarse)").matches&&/iPad|Macintosh/.test(kn)&&Math.min(hn.screen.width||0,hn.screen.height||0)>=768,bn=(dn("(pointer: coarse)").matches||!dn("(pointer: fine)").matches&&gn)&&!/Windows.*Firefox/.test(kn),Mn=dn("(any-pointer: fine)").matches||dn("(any-hover: hover)").matches||vn||!gn,$n=!xn||!Mn&&bn?xn?"touchOnly":"mouseOnly":"hybrid",wn="mouseOnly"===$n?"mouse":"touchOnly"===$n||bn?"touch":"mouse";let _n;class Tn{constructor(t,{eventName:e,nativeEventName:n,useWindow:o,preventDefault:i}){this._eventManager=t,this._eventName=e,this._nativeEventName=n,this._useWindow=o,this._preventDefault=i,this._numberOfActiveListeners=0,this._callbacks={}}setNativeEventName(t){this._nativeEventName=t}addListener(t,e){this._callbacks[t]=e,this._eventManagerHasBeenMounted()&&this._attachNativeListenerIfNecessary()}attachAllListeners(){for(const t in this._callbacks)this._attachNativeListenerIfNecessary()}removeListener(t){delete this._callbacks[t],this._eventManagerHasBeenMounted()&&this._removeNativeListenerIfNecessary()}_eventManagerHasBeenMounted(){return this._eventManager._mounted}_attachNativeListenerIfNecessary(){if(0===this._numberOfActiveListeners){_n=this._handleEvent.bind(this);const t=this._nativeEventName;this._useWindow&&window.addEventListener(t,_n),this._useWindow||this._eventManager._domNode.addEventListener(t,_n)}this._numberOfActiveListeners++}_removeNativeListenerIfNecessary(){if(this._numberOfActiveListeners--,0===this._numberOfActiveListeners){const t=this._nativeEventName;this._useWindow&&window.removeEventListener(t,_n),this._useWindow||this._eventManager._domNode.removeEventListener(t,_n)}}_handleEvent(t){this._preventDefault&&t.preventDefault();const e=this._getScreenCoordinates(t);t.eventName=this._eventName;for(const n in this._callbacks)this._callbacks[n](e,t)}_getScreenCoordinates(t){return this._eventManager._getScreenCoordinates(t)}}class Sn{constructor(t,e){this._domNode=void 0,this._svgPoint=void 0,this._mounted=!1,this._trackers={},this._BROWSER_TYPE=void 0,this._managerType=e;for(const e of t)this._trackers[e.eventName]=new Tn(this,e)}addRootNode(t){this._domNode=t,this._svgPoint=this._domNode.createSVGPoint(),this._BROWSER_TYPE=window.navigator.pointerEnabled?"IE11 / MSEdge":window.navigator.msPointerEnabled?"IE10 / WP8":"other",this._mounted=!0}attachEventListeners(){if(!1===this._mounted)throw new Error("root node must be added first");for(const t in this._trackers)"mouse"===this._managerType&&this._trackers[t].setNativeEventName(this._getNativeMouseEventName(t,this._BROWSER_TYPE)),"touch"===this._managerType&&this._trackers[t].setNativeEventName(this._getNativeTouchEventName(t,this._BROWSER_TYPE)),this._trackers[t].attachAllListeners()}eventTracker(t){return this._trackers[t]}}var On=t=>t.charAt(0).toUpperCase()+t.slice(1);class Cn extends Sn{constructor(){super(Nn,"mouse")}_getNativeMouseEventName(t,e){if("click"===t)return"click";if("wheel"===t)return"wheel";if("IE11 / MSEdge"===e){return"pointer"+An(t)}if("IE10 / WP8"===e){const e=An(t);return"MSPointer"+On(e)}return"other"===e?t:void 0}_getScreenCoordinates(t){return this._svgPoint.x=t.clientX,this._svgPoint.y=t.clientY,this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())}}const Pn=["mousemove","mouseup"],In=["mousedown"],Nn=["mousedown","mouseup","mousemove","mouseout","click","wheel"].map((t=>({eventName:t,nativeEventName:void 0,useWindow:Pn.includes(t),preventDefault:In.includes(t)}))),An=t=>t.slice(5,t.length);class Wn extends Sn{constructor(){super(En,"touch")}_getNativeTouchEventName(t,e){if("IE11 / MSEdge"===e){return"pointer"+Ln(t)}if("IE10 / WP8"===e){const e=Ln(t);return"MSPointer"+On(e)}if("other"===e)return t}_getScreenCoordinates(t){const e=function(t){return t.touches}(t);return 1===e.length?this._getScreenCoordinatesSingle(e[0]):e.length>1?this._getScreenCoordinatesMulti(e):void 0}_getScreenCoordinatesSingle(t){return this._svgPoint.x=t.clientX,this._svgPoint.y=t.clientY,this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())}_getScreenCoordinatesMulti(t){const e=[];for(const n of t)e.push(this._getScreenCoordinatesSingle(n));return e}}const En=["touchstart","touchend","touchmove","touchcancel"].map((t=>({eventName:t,nativeEventName:void 0,useWindow:!1,preventDefault:!0}))),Ln=t=>t.slice(5,t.length);class Fn{constructor(){"mouse"===wn&&(this._mouseEventManager=new Cn),"touch"===wn&&(this._touchEventManager=new Wn)}addRootNode(t){this._forEachManager((e=>{e.addRootNode(t)}))}attachEventListeners(){this._forEachManager((t=>{t.attachEventListeners()}))}mouse(){return this._mouseEventManager}touch(){return this._touchEventManager}_forEachManager(t){this._mouseEventManager&&t(this._mouseEventManager),this._touchEventManager&&t(this._touchEventManager)}}class Rn{constructor(){this._id=void 0,this._eventManager=void 0,this._section=void 0,this._markInteractionInterface=void 0,this._sectionInteractionInterface=void 0}setId(t){this._id=t}linkEventManager(t){this._eventManager=t}loadSection(t){this._section=t}marks(){return this._markInteractionInterface}section(){return this._sectionInteractionInterface}}class jn{constructor(t,e){this._interactionManager=t,this._handlers={};for(const t in e)this._handlers[t]=new e[t](this._interactionManager)}_getHandler(t){const e=Yn(t);return this._handlers[e]}}const Yn=t=>On(t)+"Handler";function zn(t){const e=t.attributes,n=Dn(e);return n.attributes=e,n.markType="Point",n.markId=t.markId,n}function Xn({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=qn(t,r),a=Dn(s);a.key=r,a.index=i,a.attributes=s,a.markType="Point",a.layerId=n,o.push(a)}return o}function Dn(t){const e=t.pixelGeometry.coordinates[0],n=t.pixelGeometry.coordinates[1];return{minX:e-t.radius,maxX:e+t.radius,minY:n-t.radius,maxY:n+t.radius}}function qn(t,e){return{pixelGeometry:t.pixelGeometryObject[e],radius:t.radiusObject[e]}}var Hn=2*Math.PI,Gn=Math.abs,Bn=Math.sqrt;function Zn(){}function Vn(t,e){t&&Kn.hasOwnProperty(t.type)&&Kn[t.type](t,e)}var Jn={Feature:function(t,e){Vn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,o=-1,i=n.length;++o<i;)Vn(n[o].geometry,e)}},Kn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)t=n[o],e.point(t[0],t[1],t[2])},LineString:function(t,e){Un(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)Un(n[o],e,0)},Polygon:function(t,e){Qn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)Qn(n[o],e)},GeometryCollection:function(t,e){for(var n=t.geometries,o=-1,i=n.length;++o<i;)Vn(n[o],e)}};function Un(t,e,n){var o,i=-1,r=t.length-n;for(e.lineStart();++i<r;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function Qn(t,e){var n=-1,o=t.length;for(e.polygonStart();++n<o;)Un(t[n],e,1);e.polygonEnd()}function to(t,e){t&&Jn.hasOwnProperty(t.type)?Jn[t.type](t,e):Vn(t,e)}var eo,no,oo,io,ro=t=>t,so=new _t,ao=new _t,co={point:Zn,lineStart:Zn,lineEnd:Zn,polygonStart:function(){co.lineStart=lo,co.lineEnd=fo},polygonEnd:function(){co.lineStart=co.lineEnd=co.point=Zn,so.add(Gn(ao)),ao=new _t},result:function(){var t=so/2;return so=new _t,t}};function lo(){co.point=uo}function uo(t,e){co.point=ho,eo=oo=t,no=io=e}function ho(t,e){ao.add(io*t-oo*e),oo=t,io=e}function fo(){ho(eo,no)}var yo=1/0,po=yo,go=-yo,mo=go,xo={point:function(t,e){t<yo&&(yo=t);t>go&&(go=t);e<po&&(po=e);e>mo&&(mo=e)},lineStart:Zn,lineEnd:Zn,polygonStart:Zn,polygonEnd:Zn,result:function(){var t=[[yo,po],[go,mo]];return go=mo=-(po=yo=1/0),t}};var ko,vo,bo,Mo,$o=0,wo=0,_o=0,To=0,So=0,Oo=0,Co=0,Po=0,Io=0,No={point:Ao,lineStart:Wo,lineEnd:Fo,polygonStart:function(){No.lineStart=Ro,No.lineEnd=jo},polygonEnd:function(){No.point=Ao,No.lineStart=Wo,No.lineEnd=Fo},result:function(){var t=Io?[Co/Io,Po/Io]:Oo?[To/Oo,So/Oo]:_o?[$o/_o,wo/_o]:[NaN,NaN];return $o=wo=_o=To=So=Oo=Co=Po=Io=0,t}};function Ao(t,e){$o+=t,wo+=e,++_o}function Wo(){No.point=Eo}function Eo(t,e){No.point=Lo,Ao(bo=t,Mo=e)}function Lo(t,e){var n=t-bo,o=e-Mo,i=Bn(n*n+o*o);To+=i*(bo+t)/2,So+=i*(Mo+e)/2,Oo+=i,Ao(bo=t,Mo=e)}function Fo(){No.point=Ao}function Ro(){No.point=Yo}function jo(){zo(ko,vo)}function Yo(t,e){No.point=zo,Ao(ko=bo=t,vo=Mo=e)}function zo(t,e){var n=t-bo,o=e-Mo,i=Bn(n*n+o*o);To+=i*(bo+t)/2,So+=i*(Mo+e)/2,Oo+=i,Co+=(i=Mo*t-bo*e)*(bo+t),Po+=i*(Mo+e),Io+=3*i,Ao(bo=t,Mo=e)}function Xo(t){this._context=t}Xo.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Hn)}},result:Zn};var Do,qo,Ho,Go,Bo,Zo=new _t,Vo={point:Zn,lineStart:function(){Vo.point=Jo},lineEnd:function(){Do&&Ko(qo,Ho),Vo.point=Zn},polygonStart:function(){Do=!0},polygonEnd:function(){Do=null},result:function(){var t=+Zo;return Zo=new _t,t}};function Jo(t,e){Vo.point=Ko,qo=Go=t,Ho=Bo=e}function Ko(t,e){Go-=t,Bo-=e,Zo.add(Bn(Go*Go+Bo*Bo)),Go=t,Bo=e}function Uo(){this._string=[]}function Qo(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function ti(t,e){var n,o,i=4.5;function r(t){return t&&("function"==typeof i&&o.pointRadius(+i.apply(this,arguments)),to(t,n(o))),o.result()}return r.area=function(t){return to(t,n(co)),co.result()},r.measure=function(t){return to(t,n(Vo)),Vo.result()},r.bounds=function(t){return to(t,n(xo)),xo.result()},r.centroid=function(t){return to(t,n(No)),No.result()},r.projection=function(e){return arguments.length?(n=null==e?(t=null,ro):(t=e).stream,r):t},r.context=function(t){return arguments.length?(o=null==t?(e=null,new Uo):new Xo(e=t),"function"!=typeof i&&o.pointRadius(i),r):e},r.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(o.pointRadius(+t),+t),r):i},r.projection(t).context(e)}function ei(t){return null==t||t.constructor===Number&&!isFinite(t)}function ni(t){return void 0!==t}function oi(t){return void 0===t}function ii(t){const e=ri.bounds(t);return{x:[e[0][0],e[1][0]],y:[e[0][1],e[1][1]]}}Uo.prototype={_radius:4.5,_circle:Qo(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Qo(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};const ri=ti();function si(t){return t.constructor===Array}function ai(t){return t.constructor===Object&&"Polygon"===t.type}function ci(t){return t.constructor===Object&&"MultiPolygon"===t.type}function li(t){if(si(t))return ui(t);if(ai(t))return hi(t);if(ci(t))return function(t){let e=0;for(let n=0;n<t.coordinates.length;n++)e+=hi(t.coordinates[n]);return e}(t);throw new Error("Invalid input")}function ui(t){return Math.abs(function(t){let e=0;for(let n=0,o=t.length;n<o;n++){e+=t[n][0]*t[n===t.length-1?0:n+1][1]*.5,e-=t[n===t.length-1?0:n+1][0]*t[n][1]*.5}return e}(t))}function hi(t){let e=ui(t.coordinates[0]);for(let n=1;n<t.coordinates.length;n++){e-=ui(t.coordinates[n])}return e}function di(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function fi(t){let e=0;for(let n=0;n<t.length-1;n++){e+=di(t[n],t[n+1])}return e}function yi(t){return si(t)?pi(t):ai(t)?pi(t.coordinates[0]):ci(t)?function(t){let e=0,n=0,o=0;for(let i=0;i<t.coordinates.length;i++){const r=t.coordinates[i],s=pi(r[0]),a=li(r[0]);e+=s[0]*a,n+=s[1]*a,o+=a}return[e/o,n/o]}(t):function(t){return t.constructor===Object&&"LineString"===t.type}(t)?pi(t.coordinates):function(t){return t.constructor===Object&&"MultiLineString"===t.type}(t)?function(t){let e=0,n=0,o=0;for(let i=0;i<t.coordinates.length;i++){const r=t.coordinates[i],s=pi(r),a=fi(r);e+=s[0]*a,n+=s[1]*a,o+=a}return[e/o,n/o]}(t):void 0}function pi(t){const e=t.length,n=t[0];let o,i,r,s=0,a=0,c=0;for(let l=0,u=e-1;l<e;u=l++)o=t[l],i=t[u],r=(o[0]-n[0])*(i[1]-n[1])-(i[0]-n[0])*(o[1]-n[1]),s+=r,a+=(o[0]+i[0]-2*n[0])*r,c+=(o[1]+i[1]-2*n[1])*r;return r=3*s,[a/r+n[0],c/r+n[1]]}function gi(t,e,n){return function(t,e){const n=function(t,e){const n=t[0],o=t[1],i=e[0][0],r=e[0][1],s=e[1][0],a=e[1][1],c=s-i,l=a-r,u=(n-i)*c+(o-r)*l,h=c*c+l*l;let d,f,y=-1;0!==h&&(y=u/h);y<0?(d=i,f=r):y>1?(d=s,f=a):(d=i+y*c,f=r+y*l);return[d,f]}(t,e);return di(t,n)}(t,e)<n/2}var mi=function(t,e,n){var o=t*e,i=xi*t,r=i-(i-t),s=t-r,a=xi*e,c=a-(a-e),l=e-c,u=s*l-(o-r*c-s*c-r*l);if(n)return n[0]=u,n[1]=o,n;return[u,o]},xi=+(Math.pow(2,27)+1);var ki=function(t,e){var n=0|t.length,o=0|e.length;if(1===n&&1===o)return function(t,e){var n=t+e,o=n-t,i=t-(n-o)+(e-o);if(i)return[i,n];return[n]}(t[0],e[0]);var i,r,s=new Array(n+o),a=0,c=0,l=0,u=Math.abs,h=t[c],d=u(h),f=e[l],y=u(f);d<y?(r=h,(c+=1)<n&&(h=t[c],d=u(h))):(r=f,(l+=1)<o&&(f=e[l],y=u(f)));c<n&&d<y||l>=o?(i=h,(c+=1)<n&&(h=t[c],d=u(h))):(i=f,(l+=1)<o&&(f=e[l],y=u(f)));var p,g,m=i+r,x=m-i,k=r-x,v=k,b=m;for(;c<n&&l<o;)d<y?(i=h,(c+=1)<n&&(h=t[c],d=u(h))):(i=f,(l+=1)<o&&(f=e[l],y=u(f))),(k=(r=v)-(x=(m=i+r)-i))&&(s[a++]=k),v=b-((p=b+m)-(g=p-b))+(m-g),b=p;for(;c<n;)(k=(r=v)-(x=(m=(i=h)+r)-i))&&(s[a++]=k),v=b-((p=b+m)-(g=p-b))+(m-g),b=p,(c+=1)<n&&(h=t[c]);for(;l<o;)(k=(r=v)-(x=(m=(i=f)+r)-i))&&(s[a++]=k),v=b-((p=b+m)-(g=p-b))+(m-g),b=p,(l+=1)<o&&(f=e[l]);v&&(s[a++]=v);b&&(s[a++]=b);a||(s[a++]=0);return s.length=a,s};var vi=function(t,e,n){var o=t+e,i=o-t,r=e-i,s=t-(o-i);if(n)return n[0]=s+r,n[1]=o,n;return[s+r,o]};var bi=function(t,e){var n=t.length;if(1===n){var o=mi(t[0],e);return o[0]?o:[o[1]]}var i=new Array(2*n),r=[.1,.1],s=[.1,.1],a=0;mi(t[0],e,r),r[0]&&(i[a++]=r[0]);for(var c=1;c<n;++c){mi(t[c],e,s);var l=r[1];vi(l,s[0],r),r[0]&&(i[a++]=r[0]);var u=s[1],h=r[1],d=u+h,f=h-(d-u);r[1]=d,f&&(i[a++]=f)}r[1]&&(i[a++]=r[1]);0===a&&(i[a++]=0);return i.length=a,i};var Mi=function(t,e){var n=0|t.length,o=0|e.length;if(1===n&&1===o)return function(t,e){var n=t+e,o=n-t,i=t-(n-o)+(e-o);if(i)return[i,n];return[n]}(t[0],-e[0]);var i,r,s=new Array(n+o),a=0,c=0,l=0,u=Math.abs,h=t[c],d=u(h),f=-e[l],y=u(f);d<y?(r=h,(c+=1)<n&&(h=t[c],d=u(h))):(r=f,(l+=1)<o&&(f=-e[l],y=u(f)));c<n&&d<y||l>=o?(i=h,(c+=1)<n&&(h=t[c],d=u(h))):(i=f,(l+=1)<o&&(f=-e[l],y=u(f)));var p,g,m=i+r,x=m-i,k=r-x,v=k,b=m;for(;c<n&&l<o;)d<y?(i=h,(c+=1)<n&&(h=t[c],d=u(h))):(i=f,(l+=1)<o&&(f=-e[l],y=u(f))),(k=(r=v)-(x=(m=i+r)-i))&&(s[a++]=k),v=b-((p=b+m)-(g=p-b))+(m-g),b=p;for(;c<n;)(k=(r=v)-(x=(m=(i=h)+r)-i))&&(s[a++]=k),v=b-((p=b+m)-(g=p-b))+(m-g),b=p,(c+=1)<n&&(h=t[c]);for(;l<o;)(k=(r=v)-(x=(m=(i=f)+r)-i))&&(s[a++]=k),v=b-((p=b+m)-(g=p-b))+(m-g),b=p,(l+=1)<o&&(f=-e[l]);v&&(s[a++]=v);b&&(s[a++]=b);a||(s[a++]=0);return s.length=a,s};var $i,wi=(function(t){function e(t,e){for(var n=new Array(t.length-1),o=1;o<t.length;++o)for(var i=n[o-1]=new Array(t.length-1),r=0,s=0;r<t.length;++r)r!==e&&(i[s++]=t[o][r]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function o(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],r=0;r<t.length;++r)i.push(["scale(",n(o(e(t,r))),",",(s=r,1&s?"-":""),t[0][r],")"].join(""));return i;var s}function i(t){for(var i=[],r=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var o=0;o<t;++o)e[n][o]=["m",o,"[",t-n-1,"]"].join("")}return e}(t),a=[],c=0;c<t;++c)0==(1&c)?i.push.apply(i,o(e(s,c))):r.push.apply(r,o(e(s,c))),a.push("m"+c);var l=n(i),u=n(r),h="orientation"+t+"Exact",d=["function ",h,"(",a.join(),"){var p=",l,",n=",u,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",d)(ki,mi,bi,Mi)}var r=i(3),s=i(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var o,i=(t[1]-n[1])*(e[0]-n[0]),s=(t[0]-n[0])*(e[1]-n[1]),a=i-s;if(i>0){if(s<=0)return a;o=i+s}else{if(!(i<0))return a;if(s>=0)return a;o=-(i+s)}var c=33306690738754716e-32*o;return a>=c||a<=-c?a:r(t,e,n)},function(t,e,n,o){var i=t[0]-o[0],r=e[0]-o[0],a=n[0]-o[0],c=t[1]-o[1],l=e[1]-o[1],u=n[1]-o[1],h=t[2]-o[2],d=e[2]-o[2],f=n[2]-o[2],y=r*u,p=a*l,g=a*c,m=i*u,x=i*l,k=r*c,v=h*(y-p)+d*(g-m)+f*(x-k),b=7771561172376103e-31*((Math.abs(y)+Math.abs(p))*Math.abs(h)+(Math.abs(g)+Math.abs(m))*Math.abs(d)+(Math.abs(x)+Math.abs(k))*Math.abs(f));return v>b||-v>b?v:s(t,e,n,o)}];function c(t){var e=a[t.length];return e||(e=a[t.length]=i(t.length)),e.apply(void 0,t)}!function(){for(;a.length<=5;)a.push(i(a.length));for(var e=[],n=["slow"],o=0;o<=5;++o)e.push("a"+o),n.push("o"+o);var r=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(o=2;o<=5;++o)r.push("case ",o,":return o",o,"(",e.slice(0,o).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(r.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[c].concat(a)),o=0;o<=5;++o)t.exports[o]=a[o]}()}($i={exports:{}},$i.exports),$i.exports),_i=function(t,e){for(var n=e[0],o=e[1],i=t.length,r=1,s=i,a=0,c=i-1;a<s;c=a++){var l=t[a],u=t[c],h=l[1],d=u[1];if(d<h){if(d<o&&o<h){if(0===(p=wi(l,u,e)))return 0;r^=0<p|0}else if(o===h){var f=(y=t[(a+1)%i])[1];if(h<f){if(0===(p=wi(l,u,e)))return 0;r^=0<p|0}}}else if(h<d){if(h<o&&o<d){if(0===(p=wi(l,u,e)))return 0;r^=p<0|0}else if(o===h){var y=t[(a+1)%i];if((f=y[1])<h){var p;if(0===(p=wi(l,u,e)))return 0;r^=p<0|0}}}else if(o===h){var g=Math.min(l[0],u[0]),m=Math.max(l[0],u[0]);if(0===a){for(;c>0;){var x=(c+i-1)%i;if((b=t[x])[1]!==o)break;var k=b[0];g=Math.min(g,k),m=Math.max(m,k),c=x}if(0===c)return g<=n&&n<=m?0:1;s=c+1}for(var v=t[(c+i-1)%i][1];a+1<s;){var b;if((b=t[a+1])[1]!==o)break;k=b[0];g=Math.min(g,k),m=Math.max(m,k),a+=1}if(g<=n&&n<=m)return 0;var M=t[(a+1)%i][1];n<g&&v<o!=M<o&&(r^=1)}}return 2*r-1};function Ti(t,e){switch(e.type){case"Polygon":return function(t,e){const n=e.coordinates;return Si(t,n)}(t,e);case"MultiPolygon":return function(t,e){const n=e.coordinates;for(let e=0;e<n.length;e++){if(Si(t,n[e]))return!0}return!1}(t,e)}}function Si(t,e){if(!Oi(t,e[0]))return!1;for(let n=1;n<e.length;n++){if(Oi(t,e[n]))return!1}return!0}function Oi(t,e){return-1===_i(e,t)}const Ci=new Error("Invalid input");function Pi(t){if("coordinates"in t)return"geojson";if("x"in t&&"y"in t)return"Point"!==t.type&&function(t,e){if(void 0!==t&&void 0!==e&&t.constructor===Array&&e.constructor===Array&&t.length===e.length&&t.length>1)return;throw Ci}(t.x,t.y),"xy";throw Ci}function Ii([t,e],n){const o=10**n;return[Math.round(t*o)/o,Math.round(e*o)/o]}function Ni(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function Ai(t,e,n){return!n.simplify||t.length<3?function(t,e){const n=[];for(let o=0;o<t.length;o++)n.push(e(t[o]));return n}(t,e):!0===n.simplify?function(t,e,n=1){const o=[e(t[0])];let i,r=o[0];for(let s=1;s<t.length-1;s++){i=e(t[s]);Ni(r,i)>=n&&(o.push(i),r=i)}const s=e(t[t.length-1]);return o.push(s),o}(t,e,n.simplificationTreshold):void 0}function Wi(t,e,n){const o=[];for(let i=0;i<t.length;i++)o.push(Ai(t[i],e,n));return o}function Ei({x:t,y:e},n,o){return!o.simplify||t.length<3?function(t,e,n){const o=[];for(let i=0;i<t.length;i++)o.push(n([t[i],e[i]]));return o}(t,e,n):!0===o.simplify?function(t,e,n,o=1){const i=[n([t[0],e[0]])];let r,s=i[0];for(let a=1;a<t.length-1;a++){r=n([t[a],e[a]]);Ni(s,r)>=o&&(i.push(r),s=r)}const a=t.length-1,c=n([t[a],e[a]]);return i.push(c),i}(t,e,n,o.simplificationTreshold):void 0}const Li={transformPoint:function(t,e){const n=Pi(t);if("geojson"===n)return{type:"Point",coordinates:e(t.coordinates)};if("xy"===n)return{type:"Point",coordinates:e([t.x,t.y])}},transformMultiPoint:function(t,e){const n=Pi(t);if("geojson"===n)return{type:"MultiPoint",coordinates:Ai(t.coordinates,e,{})};if("xy"===n)return{type:"MultiPoint",coordinates:Ei(t,e,{})}},transformLineString:function(t,e,n){const o=Pi(t);if("geojson"===o)return{type:"LineString",coordinates:Ai(t.coordinates,e,n)};if("xy"===o)return{type:"LineString",coordinates:Ei(t,e,n)}},transformMultiLineString:function(t,e,n){const o=Pi(t);if("geojson"===o)return{type:"MultiLineString",coordinates:Wi(t.coordinates,e,n)};if("xy"===o)return{type:"MultiLineString",coordinates:[Ei(t,e,n)]}},transformPolygon:function(t,e,n){const o=Pi(t);if("geojson"===o)return{type:"Polygon",coordinates:Wi(t.coordinates,e,n)};if("xy"===o)return{type:"Polygon",coordinates:[Ei(t,e,n)]}},transformMultiPolygon:function(t,e,n){const o=Pi(t);if("geojson"===o){const o=t.coordinates,i=[];for(let t=0;t<o.length;t++)i.push(Wi(o[t],e,n));return{type:"MultiPolygon",coordinates:i}}if("xy"===o)return{type:"MultiPolygon",coordinates:[[Ei(t,e,n)]]}}};function Fi(t,e,n={}){const o="transform"+t.type,i=n.decimals?t=>Ii(e(t),n.decimals):e;return Li[o](t,i,n)}function Ri(t,e,n,o,{interpolationTreshold:i=1}){const r=n(t),s=n(e),a=function({finalRangeX:t,finalRangeY:e}){const n=Math.abs(t[0]-t[1])/2,o=Math.abs(e[0]-e[1])/2;return Math.max(n,o)}(o);if(function(t,e,n){return Math.abs(t[0]-e[0])*n<1}(r,s,a))return 0;const c=function({a:t,b:e,interval:n}){const[o,i]=n;if(0===t)return(i-o)*e;const r=t**2,s=e**2;return(r*Math.asinh((t*i+e)/t)+(t*i+e)*Math.sqrt(r*i**2+2*t*e*i+s+r)-r*Math.asinh((t*o+e)/t)+(-t*o-e)*Math.sqrt(r*o**2+2*t*e*o+s+r))/(2*t)}(function(t,e){const n=t[0]<e[0]?[t,e]:[e,t],[[o,i],[r,s]]=n,a=(s-i)/(r-o);return{a:a,b:i-o*a,interval:[o,r]}}(r,s))*a/i;return Math.floor(c)}function ji(t,e,n,o,i){const r=function(t,e){const n=e[0]-t[0],o=e[1]-t[1];return e=>[t[0]+e*n,t[1]+e*o]}(e,n);for(let e=0;e<i;e++){const n=(e+1)/(i+1);t.push(o(r(n)))}}function Yi(t,e,n,o){if(!o.simplify||t.length<3)return function(t,e,n,o){const i=[],{scaleTransformation:r,postScaleTransformation:s,toPolar:a}=n;for(let n=0;n<t.length-1;n++){const c=t[n],l=t[n+1],u=r(c),h=r(l);i.push(s(u));const d=Ri(u,h,a,e,o);d>0&&ji(i,u,h,s,d)}const c=t[t.length-1];return i.push(s(r(c))),i}(t,e,n,o);o.simplify}function zi(t,e,n,o){const i=[];for(let r=0;r<t.length;r++)i.push(Yi(t[r],e,n,o));return i}function Xi({x:t,y:e},n,o,i){if(!i.simplify||t.length<3)return function(t,e,n,o,i){const r=[],{scaleTransformation:s,postScaleTransformation:a,toPolar:c}=o;for(let o=0;o<t.length-1;o++){const l=[t[o],e[o]],u=[t[o+1],e[o+1]],h=s(l),d=s(u);r.push(a(h));const f=Ri(h,d,c,n,i);f>0&&ji(r,h,d,a,f)}const l=t.length-1,u=[t[l],e[l]];return r.push(a(s(u))),r}(t,e,n,o,i);i.simplify}const Di={interpolateLineString:function(t,e,n,o){const i=Pi(t);if("geojson"===i)return{type:"LineString",coordinates:Yi(t.coordinates,e,n,o)};if("xy"===i)return{type:"LineString",coordinates:Xi(t,e,n,o)}},interpolateMultiLineString:function(t,e,n,o){const i=Pi(t);if("geojson"===i)return{type:"MultiLineString",coordinates:zi(t.coordinates,e,n,o)};if("xy"===i)return{type:"MultiLineString",coordinates:[Xi(t,e,n,o)]}},interpolatePolygon:function(t,e,n,o){const i=Pi(t);if("geojson"===i)return{type:"Polygon",coordinates:zi(t.coordinates,e,n,o)};if("xy"===i)return{type:"Polygon",coordinates:[Xi(t,e,n,o)]}},interpolateMultiPolygon:function(t,e,n,o){const i=Pi(t);if("geojson"===i){const i=t.coordinates,r=[];for(let t=0;t<i.length;t++)r.push(zi(i[t],e,n,o));return{type:"MultiPolygon",coordinates:r}}if("xy"===i)return{type:"MultiPolygon",coordinates:[[Xi(t,e,n,o)]]}}};function qi(t,e,n,o={}){const i="interpolate"+t.type,{scaleTransformation:r,postScaleTransformation:s}=n,a=void 0!==o.decimals?t=>Ii(s(t),o.decimals):s,c=Ze().domain(e.rangeX).range([0,2*Math.PI]),l=Ze().domain(e.rangeY).range([0,1]),u={scaleTransformation:r,postScaleTransformation:a,toPolar:([t,e])=>[c(t),l(e)]};return Di[i](t,e,u,o)}function Hi(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Gi(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function Bi(){}var Zi=1/.7,Vi="\\s*([+-]?\\d+)\\s*",Ji="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ki="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ui=/^#([0-9a-f]{3,8})$/,Qi=new RegExp("^rgb\\("+[Vi,Vi,Vi]+"\\)$"),tr=new RegExp("^rgb\\("+[Ki,Ki,Ki]+"\\)$"),er=new RegExp("^rgba\\("+[Vi,Vi,Vi,Ji]+"\\)$"),nr=new RegExp("^rgba\\("+[Ki,Ki,Ki,Ji]+"\\)$"),or=new RegExp("^hsl\\("+[Ji,Ki,Ki]+"\\)$"),ir=new RegExp("^hsla\\("+[Ji,Ki,Ki,Ji]+"\\)$"),rr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function sr(){return this.rgb().formatHex()}function ar(){return this.rgb().formatRgb()}function cr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ui.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?lr(e):3===n?new fr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ur(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ur(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Qi.exec(t))?new fr(e[1],e[2],e[3],1):(e=tr.exec(t))?new fr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=er.exec(t))?ur(e[1],e[2],e[3],e[4]):(e=nr.exec(t))?ur(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=or.exec(t))?mr(e[1],e[2]/100,e[3]/100,1):(e=ir.exec(t))?mr(e[1],e[2]/100,e[3]/100,e[4]):rr.hasOwnProperty(t)?lr(rr[t]):"transparent"===t?new fr(NaN,NaN,NaN,0):null}function lr(t){return new fr(t>>16&255,t>>8&255,255&t,1)}function ur(t,e,n,o){return o<=0&&(t=e=n=NaN),new fr(t,e,n,o)}function hr(t){return t instanceof Bi||(t=cr(t)),t?new fr((t=t.rgb()).r,t.g,t.b,t.opacity):new fr}function dr(t,e,n,o){return 1===arguments.length?hr(t):new fr(t,e,n,null==o?1:o)}function fr(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}function yr(){return"#"+gr(this.r)+gr(this.g)+gr(this.b)}function pr(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function gr(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function mr(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new kr(t,e,n,o)}function xr(t){if(t instanceof kr)return new kr(t.h,t.s,t.l,t.opacity);if(t instanceof Bi||(t=cr(t)),!t)return new kr;if(t instanceof kr)return t;var e=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,i=Math.min(e,n,o),r=Math.max(e,n,o),s=NaN,a=r-i,c=(r+i)/2;return a?(s=e===r?(n-o)/a+6*(n<o):n===r?(o-e)/a+2:(e-n)/a+4,a/=c<.5?r+i:2-r-i,s*=60):a=c>0&&c<1?0:s,new kr(s,a,c,t.opacity)}function kr(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}function vr(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function br(t){return function(){return t}}function Mr(t){return 1==(t=+t)?$r:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}(e,n,t):br(isNaN(e)?n:e)}}function $r(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):br(isNaN(t)?e:t)}Hi(Bi,cr,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:sr,formatHex:sr,formatHsl:function(){return xr(this).formatHsl()},formatRgb:ar,toString:ar}),Hi(fr,dr,Gi(Bi,{brighter:function(t){return t=null==t?Zi:Math.pow(Zi,t),new fr(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new fr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yr,formatHex:yr,formatRgb:pr,toString:pr})),Hi(kr,(function(t,e,n,o){return 1===arguments.length?xr(t):new kr(t,e,n,null==o?1:o)}),Gi(Bi,{brighter:function(t){return t=null==t?Zi:Math.pow(Zi,t),new kr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new kr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,i=2*n-o;return new fr(vr(t>=240?t-240:t+120,i,o),vr(t,i,o),vr(t<120?t+240:t-120,i,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var wr=function t(e){var n=Mr(e);function o(t,e){var o=n((t=dr(t)).r,(e=dr(e)).r),i=n(t.g,e.g),r=n(t.b,e.b),s=$r(t.opacity,e.opacity);return function(e){return t.r=o(e),t.g=i(e),t.b=r(e),t.opacity=s(e),t+""}}return o.gamma=t,o}(1);function _r(t,e){e||(e=[]);var n,o=t?Math.min(e.length,t.length):0,i=e.slice();return function(r){for(n=0;n<o;++n)i[n]=t[n]*(1-r)+e[n]*r;return i}}function Tr(t,e){var n,o=e?e.length:0,i=t?Math.min(o,t.length):0,r=new Array(i),s=new Array(o);for(n=0;n<i;++n)r[n]=Ar(t[n],e[n]);for(;n<o;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=r[n](t);return s}}function Sr(t,e){var n=new Date;return t=+t,e=+e,function(o){return n.setTime(t*(1-o)+e*o),n}}function Or(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Cr(t,e){var n,o={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?o[n]=Ar(t[n],e[n]):i[n]=e[n];return function(t){for(n in o)i[n]=o[n](t);return i}}var Pr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ir=new RegExp(Pr.source,"g");function Nr(t,e){var n,o,i,r=Pr.lastIndex=Ir.lastIndex=0,s=-1,a=[],c=[];for(t+="",e+="";(n=Pr.exec(t))&&(o=Ir.exec(e));)(i=o.index)>r&&(i=e.slice(r,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,c.push({i:s,x:Or(n,o)})),r=Ir.lastIndex;return r<e.length&&(i=e.slice(r),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,o=0;o<e;++o)a[(n=c[o]).i]=n.x(t);return a.join("")})}function Ar(t,e){var n,o,i=typeof e;return null==e||"boolean"===i?br(e):("number"===i?Or:"string"===i?(n=cr(e))?(e=n,wr):Nr:e instanceof cr?wr:e instanceof Date?Sr:(o=e,!ArrayBuffer.isView(o)||o instanceof DataView?Array.isArray(e)?Tr:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Cr:Or:_r))(t,e)}var Wr=Lr,Er=Lr;function Lr(t,e,n){n=n||2;var o,i,r,s,a,c,l,u=e&&e.length,h=u?e[0]*n:t.length,d=Fr(t,0,h,n,!0),f=[];if(!d||d.next===d.prev)return f;if(u&&(d=function(t,e,n,o){var i,r,s,a=[];for(i=0,r=e.length;i<r;i++)(s=Fr(t,e[i]*o,i<r-1?e[i+1]*o:t.length,o,!1))===s.next&&(s.steiner=!0),a.push(Zr(s));for(a.sort(qr),i=0;i<a.length;i++)Hr(a[i],n),n=Rr(n,n.next);return n}(t,e,d,n)),t.length>80*n){o=r=t[0],i=s=t[1];for(var y=n;y<h;y+=n)(a=t[y])<o&&(o=a),(c=t[y+1])<i&&(i=c),a>r&&(r=a),c>s&&(s=c);l=0!==(l=Math.max(r-o,s-i))?1/l:0}return jr(d,f,n,o,i,l),f}function Fr(t,e,n,o,i){var r,s;if(i===as(t,e,n,o)>0)for(r=e;r<n;r+=o)s=is(r,t[r],t[r+1],s);else for(r=n-o;r>=e;r-=o)s=is(r,t[r],t[r+1],s);return s&&Ur(s,s.next)&&(rs(s),s=s.next),s}function Rr(t,e){if(!t)return t;e||(e=t);var n,o=t;do{if(n=!1,o.steiner||!Ur(o,o.next)&&0!==Kr(o.prev,o,o.next))o=o.next;else{if(rs(o),(o=e=o.prev)===o.next)break;n=!0}}while(n||o!==e);return e}function jr(t,e,n,o,i,r,s){if(t){!s&&r&&function(t,e,n,o){var i=t;do{null===i.z&&(i.z=Br(i.x,i.y,e,n,o)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,o,i,r,s,a,c,l=1;do{for(n=t,t=null,r=null,s=0;n;){for(s++,o=n,a=0,e=0;e<l&&(a++,o=o.nextZ);e++);for(c=l;a>0||c>0&&o;)0!==a&&(0===c||!o||n.z<=o.z)?(i=n,n=n.nextZ,a--):(i=o,o=o.nextZ,c--),r?r.nextZ=i:t=i,i.prevZ=r,r=i;n=o}r.nextZ=null,l*=2}while(s>1)}(i)}(t,o,i,r);for(var a,c,l=t;t.prev!==t.next;)if(a=t.prev,c=t.next,r?zr(t,o,i,r):Yr(t))e.push(a.i/n),e.push(t.i/n),e.push(c.i/n),rs(t),t=c.next,l=c.next;else if((t=c)===l){s?1===s?jr(t=Xr(Rr(t),e,n),e,n,o,i,r,2):2===s&&Dr(t,e,n,o,i,r):jr(Rr(t),e,n,o,i,r,1);break}}}function Yr(t){var e=t.prev,n=t,o=t.next;if(Kr(e,n,o)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Vr(e.x,e.y,n.x,n.y,o.x,o.y,i.x,i.y)&&Kr(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function zr(t,e,n,o){var i=t.prev,r=t,s=t.next;if(Kr(i,r,s)>=0)return!1;for(var a=i.x<r.x?i.x<s.x?i.x:s.x:r.x<s.x?r.x:s.x,c=i.y<r.y?i.y<s.y?i.y:s.y:r.y<s.y?r.y:s.y,l=i.x>r.x?i.x>s.x?i.x:s.x:r.x>s.x?r.x:s.x,u=i.y>r.y?i.y>s.y?i.y:s.y:r.y>s.y?r.y:s.y,h=Br(a,c,e,n,o),d=Br(l,u,e,n,o),f=t.prevZ,y=t.nextZ;f&&f.z>=h&&y&&y.z<=d;){if(f!==t.prev&&f!==t.next&&Vr(i.x,i.y,r.x,r.y,s.x,s.y,f.x,f.y)&&Kr(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,y!==t.prev&&y!==t.next&&Vr(i.x,i.y,r.x,r.y,s.x,s.y,y.x,y.y)&&Kr(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&Vr(i.x,i.y,r.x,r.y,s.x,s.y,f.x,f.y)&&Kr(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;y&&y.z<=d;){if(y!==t.prev&&y!==t.next&&Vr(i.x,i.y,r.x,r.y,s.x,s.y,y.x,y.y)&&Kr(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function Xr(t,e,n){var o=t;do{var i=o.prev,r=o.next.next;!Ur(i,r)&&Qr(i,o,o.next,r)&&ns(i,r)&&ns(r,i)&&(e.push(i.i/n),e.push(o.i/n),e.push(r.i/n),rs(o),rs(o.next),o=t=r),o=o.next}while(o!==t);return Rr(o)}function Dr(t,e,n,o,i,r){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Jr(s,a)){var c=os(s,a);return s=Rr(s,s.next),c=Rr(c,c.next),jr(s,e,n,o,i,r),void jr(c,e,n,o,i,r)}a=a.next}s=s.next}while(s!==t)}function qr(t,e){return t.x-e.x}function Hr(t,e){if(e=function(t,e){var n,o=e,i=t.x,r=t.y,s=-1/0;do{if(r<=o.y&&r>=o.next.y&&o.next.y!==o.y){var a=o.x+(r-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(a<=i&&a>s){if(s=a,a===i){if(r===o.y)return o;if(r===o.next.y)return o.next}n=o.x<o.next.x?o:o.next}}o=o.next}while(o!==e);if(!n)return null;if(i===s)return n;var c,l=n,u=n.x,h=n.y,d=1/0;o=n;do{i>=o.x&&o.x>=u&&i!==o.x&&Vr(r<h?i:s,r,u,h,r<h?s:i,r,o.x,o.y)&&(c=Math.abs(r-o.y)/(i-o.x),ns(o,t)&&(c<d||c===d&&(o.x>n.x||o.x===n.x&&Gr(n,o)))&&(n=o,d=c)),o=o.next}while(o!==l);return n}(t,e)){var n=os(e,t);Rr(e,e.next),Rr(n,n.next)}}function Gr(t,e){return Kr(t.prev,t,e.prev)<0&&Kr(e.next,t,t.next)<0}function Br(t,e,n,o,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-o)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Zr(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Vr(t,e,n,o,i,r,s,a){return(i-s)*(e-a)-(t-s)*(r-a)>=0&&(t-s)*(o-a)-(n-s)*(e-a)>=0&&(n-s)*(r-a)-(i-s)*(o-a)>=0}function Jr(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Qr(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(ns(t,e)&&ns(e,t)&&function(t,e){var n=t,o=!1,i=(t.x+e.x)/2,r=(t.y+e.y)/2;do{n.y>r!=n.next.y>r&&n.next.y!==n.y&&i<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(o=!o),n=n.next}while(n!==t);return o}(t,e)&&(Kr(t.prev,t,e.prev)||Kr(t,e.prev,e))||Ur(t,e)&&Kr(t.prev,t,t.next)>0&&Kr(e.prev,e,e.next)>0)}function Kr(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ur(t,e){return t.x===e.x&&t.y===e.y}function Qr(t,e,n,o){var i=es(Kr(t,e,n)),r=es(Kr(t,e,o)),s=es(Kr(n,o,t)),a=es(Kr(n,o,e));return i!==r&&s!==a||(!(0!==i||!ts(t,n,e))||(!(0!==r||!ts(t,o,e))||(!(0!==s||!ts(n,t,o))||!(0!==a||!ts(n,e,o)))))}function ts(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function es(t){return t>0?1:t<0?-1:0}function ns(t,e){return Kr(t.prev,t,t.next)<0?Kr(t,e,t.next)>=0&&Kr(t,t.prev,e)>=0:Kr(t,e,t.prev)<0||Kr(t,t.next,e)<0}function os(t,e){var n=new ss(t.i,t.x,t.y),o=new ss(e.i,e.x,e.y),i=t.next,r=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,o.next=n,n.prev=o,r.next=o,o.prev=r,o}function is(t,e,n,o){var i=new ss(t,e,n);return o?(i.next=o.next,i.prev=o,o.next.prev=i,o.next=i):(i.prev=i,i.next=i),i}function rs(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ss(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function as(t,e,n,o){for(var i=0,r=e,s=n-o;r<n;r+=o)i+=(t[s]-t[r])*(t[r+1]+t[s+1]),s=r;return i}function cs(t){return t}function ls(t,e){var n=e.id,o=e.bbox,i=null==e.properties?{}:e.properties,r=us(t,e);return null==n&&null==o?{type:"Feature",properties:i,geometry:r}:null==o?{type:"Feature",id:n,properties:i,geometry:r}:{type:"Feature",id:n,bbox:o,properties:i,geometry:r}}function us(t,e){var n=function(t){if(null==t)return cs;var e,n,o=t.scale[0],i=t.scale[1],r=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var c=2,l=t.length,u=new Array(l);for(u[0]=(e+=t[0])*o+r,u[1]=(n+=t[1])*i+s;c<l;)u[c]=t[c],++c;return u}}(t.transform),o=t.arcs;function i(t,e){e.length&&e.pop();for(var i=o[t<0?~t:t],r=0,s=i.length;r<s;++r)e.push(n(i[r],r));t<0&&function(t,e){for(var n,o=t.length,i=o-e;i<--o;)n=t[i],t[i++]=t[o],t[o]=n}(e,s)}function r(t){return n(t)}function s(t){for(var e=[],n=0,o=t.length;n<o;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function c(t){return t.map(a)}return function t(e){var n,o=e.type;switch(o){case"GeometryCollection":return{type:o,geometries:e.geometries.map(t)};case"Point":n=r(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(r);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=c(e.arcs);break;case"MultiPolygon":n=e.arcs.map(c);break;default:return null}return{type:o,coordinates:n}}(e)}function hs(t,e){var n={},o={},i={},r=[],s=-1;function a(t,e){for(var o in t){var i=t[o];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),r.push(i)}}return e.forEach((function(n,o){var i,r=t.arcs[n<0?~n:n];r.length<3&&!r[1][0]&&!r[1][1]&&(i=e[++s],e[s]=n,e[o]=i)})),e.forEach((function(e){var n,r,s=function(e){var n,o=t.arcs[e<0?~e:e],i=o[0];t.transform?(n=[0,0],o.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=o[o.length-1];return e<0?[n,i]:[i,n]}(e),a=s[0],c=s[1];if(n=i[a])if(delete i[n.end],n.push(e),n.end=c,r=o[c]){delete o[r.start];var l=r===n?n:n.concat(r);o[l.start=n.start]=i[l.end=r.end]=l}else o[n.start]=i[n.end]=n;else if(n=o[c])if(delete o[n.start],n.unshift(e),n.start=a,r=i[a]){delete i[r.end];var u=r===n?n:r.concat(n);o[u.start=r.start]=i[u.end=n.end]=u}else o[n.start]=i[n.end]=n;else o[(n=[e]).start=a]=i[n.end=c]=n})),a(i,o),a(o,i),e.forEach((function(t){n[t<0?~t:t]||r.push([t])})),r}function ds(t,e){var n={},o=[],i=[];function r(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),o.push(t)}function s(e){return function(t){for(var e,n=-1,o=t.length,i=t[o-1],r=0;++n<o;)e=i,i=t[n],r+=e[0]*i[1]-e[1]*i[0];return Math.abs(r)}(us(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":r(e.arcs);break;case"MultiPolygon":e.arcs.forEach(r)}})),o.forEach((function(t){if(!t._){var e=[],o=[t];for(t._=1,i.push(e);t=o.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,o.push(t))}))}))}))}})),o.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var o,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(o=(i=hs(t,i)).length)>1)for(var r,a,c=1,l=s(i[0]);c<o;++c)(r=s(i[c]))>l&&(a=i[0],i[0]=i[c],i[c]=a,l=r);return i})).filter((function(t){return t.length>0}))}}function fs(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function ys(t){let e=0;for(let n=0;n<t.length-1;n++){e+=fs(t[n],t[n+1])}return e}function ps(t,e){const n=[];for(let o=0;o<t.length;o++)n.push(e(t[o],o));return n}function gs(t){const e=ps(t,((t,e)=>e));return e.sort(((e,n)=>t[n]-t[e])),e}function ms(t,e){return ps(e,(e=>t[e]))}function xs(t,e){if(0===t.length)return 0;for(let n=t.length-1;n>=0;n--){if(e<=t[n])return n}return 0}function ks(t){return t.pop(),t}function vs(t){let e=t[0];return t.push(e),t}function bs(t,e){let n=ws(t);return n=ks(n),n=$s(n,e,{ring:!0}),n=vs(n),n}function Ms(t,e){return $s(ws(t),e,{ring:!1})}function $s(t,e,{ring:n}){const o=function(t,e){const n=[],o=e?t.length:t.length-1;for(let e=0;e<o;e++){const o=_s(t,e);n.push(fs(o[0],o[1]))}return n}(t,n);let i=gs(o);for(let n=0;n<e;n++){const e=i[0],n=_s(t,e),r=o[e],s=Ts(n),a=r/2;i.shift(),t[e]=null,o[e]=null,i=Ss(i,o,e,a),t[e]=s[0][0],t.splice(e+1,0,s[1][0]),o[e]=a,o.splice(e+1,0,a)}return t}function ws(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].slice(0));return e}function _s(t,e){return[t[e],t[(e+1)%t.length]]}function Ts(t){const e=Ar(t[0],t[1])(.5);return[[t[0],e],[e,t[1]]]}function Ss(t,e,n,o){let i=!1;for(let r=0;r<t.length;r++){const s=t[r];s>n&&(t[r]=t[r]+1);const a=e[s];if(null!==a&&o>=a){t.splice(r,0,n),t.splice(r+1,0,n+1),i=!0;break}}return i||(t.push(n),t.push(n+1)),t}function Os(t){return t.constructor===Array}function Cs(t){return t.constructor===Object&&"Polygon"===t.type}function Ps(t){return t.constructor===Object&&"MultiPolygon"===t.type}function Is(t){return Cs(t)||Ps(t)}function Ns(t){return function(t){return t.constructor===Object&&"LineString"===t.type}(t)||function(t){return t.constructor===Object&&"MultiLineString"===t.type}(t)}function As(t){if(Os(t))return Ws(t);if(Cs(t))return Ls(t);if(Ps(t))return function(t){let e=0;for(let n=0;n<t.coordinates.length;n++)e+=Ls(t.coordinates[n]);return e}(t);throw new Error("Invalid input")}function Ws(t){return Math.abs(Es(t))}function Es(t){let e=0;for(let n=0,o=t.length;n<o;n++){e+=t[n][0]*t[n===t.length-1?0:n+1][1]*.5,e-=t[n===t.length-1?0:n+1][0]*t[n][1]*.5}return e}function Ls(t){let e=Ws(t.coordinates[0]);for(let n=1;n<t.coordinates.length;n++){e-=Ws(t.coordinates[n])}return e}function Fs(t,e){return t.length>9?ps(t,((t,e)=>e)):function(t,e){const n=ps(t,As),o=ps(e,As),i=gs(n),r=gs(o),s={};for(let t=0;t<r.length;t++){const e=i[t];s[r[t]]=e}const a=[];for(let t=0;t<e.length;t++)a.push(s[t]);return a}(t,e)}function Rs(t){return Os(t)?js(t):Cs(t)?js(t.coordinates[0]):Ps(t)?function(t){let e=0,n=0,o=0;for(let i=0;i<t.coordinates.length;i++){const r=t.coordinates[i],s=js(r[0]),a=As(r[0]);e+=s[0]*a,n+=s[1]*a,o+=a}return[e/o,n/o]}(t):void 0}function js(t){const e=t.length,n=t[0];let o,i,r,s=0,a=0,c=0;for(let l=0,u=e-1;l<e;u=l++)o=t[l],i=t[u],r=(o[0]-n[0])*(i[1]-n[1])-(i[0]-n[0])*(o[1]-n[1]),s+=r,a+=(o[0]+i[0]-2*n[0])*r,c+=(o[1]+i[1]-2*n[1])*r;return r=3*s,[a/r+n[0],c/r+n[1]]}function Ys(t,e){const n=t.coordinates[0],o=e.coordinates[0],[i,r]=zs(n,o);if(function(t,e){return 1===t.coordinates.length&&1===e.coordinates.length}(t,e))return function(t,e,n,o){const i=Ar(n,o);return function(n){if(0===n)return t;if(1===n)return e;return{type:"Polygon",coordinates:[i(n)]}}}(t,e,i,r);return function(t,e,n,o,i){const r=Ar(n,o);return function(n){if(0===n)return t;if(1===n)return e;return{type:"Polygon",coordinates:[r(n),...ps(i,(t=>t(n)))]}}}(t,e,i,r,function(t,e){let n=[];const o=Math.min(t.coordinates.length,e.coordinates.length)-1;o>0&&(n=n.concat(function(t,e,n){const o=[],i=Xs(t,n),r=Xs(e,n),s=ps(Fs(i,r),(t=>i[t]));for(let t=0;t<n;t++){const e=s[t],n=r[t],[i,a]=zs(e,n),c=Ar(i,a);o.push(c)}return o}(t,e,o)));const i=t.coordinates.length-e.coordinates.length;i>0&&(n=n.concat(Ds(t,i)));i<0&&(n=n.concat(function(t,e){return ps(Ds(t,e),(t=>e=>t(1-e)))}(e,-i)));return n}(t,e))}function zs(t,e){const n=t.length-e.length;n>0&&(e=bs(e,n)),n<0&&(t=bs(t,-n));return[function(t,e){let n=ws(t);n=ks(n);const o=n.length;let i,r,s,a=1/0;for(let t=0;t<o;t++)r=0,e.forEach(((e,i)=>{const s=fs(n[(t+i)%o],e);r+=s*s})),r<a&&(a=r,i=t);return i&&(s=n.splice(0,i),n.splice(n.length,0,...s)),n=vs(n),n}(t,e),e]}function Xs(t,e){const n=[];for(let o=1;o<=e;o++)n.push(t.coordinates[o]);return n}function Ds(t,e){const n=[];for(let o=t.coordinates.length-e;o<t.coordinates.length;o++){const e=t.coordinates[o],i=qs(Rs(e)),[r,s]=zs(e,i);n.push(Ar(r,s))}return n}function qs([t,e]){const n=1e-6,o=t-n,i=t+n,r=e-n,s=e+n;return[[o,r],[o,s],[i,s],[i,r],[o,r]]}function Hs(t,e){const n=t[e],o=t[e+1],i=t[e+2];return[[n,o],[o,i],[i,n]]}function Gs(t){return t[0]<t[1]?t.join(","):t[1]+","+t[0]}function Bs(t,e){return[t[2*e],t[2*e+1]]}function Zs(t,e){return{type:"Polygon",area:t,arcs:[e]}}function Vs(t,e){return Math.abs(As(ps(e,(e=>Bs(t,e[0])))))}Lr.deviation=function(t,e,n,o){var i=e&&e.length,r=i?e[0]*n:t.length,s=Math.abs(as(t,0,r,n));if(i)for(var a=0,c=e.length;a<c;a++){var l=e[a]*n,u=a<c-1?e[a+1]*n:t.length;s-=Math.abs(as(t,l,u,n))}var h=0;for(a=0;a<o.length;a+=3){var d=o[a]*n,f=o[a+1]*n,y=o[a+2]*n;h+=Math.abs((t[d]-t[y])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[y+1]-t[d+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},Lr.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},o=0,i=0;i<t.length;i++){for(var r=0;r<t[i].length;r++)for(var s=0;s<e;s++)n.vertices.push(t[i][r][s]);i>0&&(o+=t[i-1].length,n.holes.push(o))}return n},Wr.default=Er;const Js=$t((t=>t.area)).left;function Ks(t,e){const n=t.objects.triangles.geometries;for(;n.length>e;)o();if(e>n.length)throw new RangeError("Can't collapse topology into "+e+" pieces.");return ps(function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return ls(t,e)}))}:ls(t,e)}(t,t.objects.triangles).features,(t=>t.geometry));function o(){const e=n[0],o=function(t){const e=t[0].arcs[0].map((t=>t<0?~t:t));let n;for(let o=1;o<t.length;o++){const i=t[o].arcs[0].map((t=>t<0?~t:t));if(e.some((t=>i.includes(t)))){n=o;break}}return n}(n),i=n[o],r=ds(t,[e,i]);r.area=e.area+i.area,r.type="Polygon",r.arcs=r.arcs[0],n.splice(o,1),n.shift(),n.splice(Js(n,r.area),0,r)}}function Us(t){const e=t.coordinates[0][0],n=t.coordinates[0][1],o=t.coordinates[0][2],i=Ar(e,n)(.5);return[Qs([e,i,o,e]),Qs([n,o,i,n])]}function Qs(t){return{type:"Polygon",coordinates:[t]}}function ta(t,e){if(e<2)throw new Error("Cannot cut polygon in less than 2 pieces");const n=Wr.flatten(t.coordinates),o=Wr(n.vertices,n.holes,2),i=function(t){return t.length/3}(o);if(i>=e){return Ks(function(t,e){const n={},o={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};for(let i=0;i<e.length;i+=3){const r=[],s=Hs(e,i);s.forEach((e=>{const i=Gs(e),s=ps(e,(e=>Bs(t,e)));i in n?r.push(~n[i]):(r.push(n[i]=o.arcs.length),o.arcs.push(s))}));const a=Zs(Vs(t,s),r);o.objects.triangles.geometries.push(a)}return o.objects.triangles.geometries.sort(((t,e)=>t.area-e.area)),o}(n.vertices,o),e)}if(i<e){return function(t,e){const n=ps(t,As),o=gs(n),i=ms(n,o),r=ms(t,o);for(;r.length<e;){i.shift();const t=Us(r.shift()),e=ps(t,As);for(let n=0;n<t.length;n++){const o=e[n],s=t[n],a=xs(i,o);i.splice(a,0,o),r.splice(a,0,s)}}return r}(function(t,e){const n=[];for(let o=0;o<e.length;o+=3){const i=Hs(e,o);let r=ps(i,(e=>Bs(t,e[0])));r.push(Bs(t,i[0][0])),Es(r)<0&&(r=r.reverse()),n.push({type:"Polygon",coordinates:[r]})}return n}(n.vertices,o),e)}}function ea(t,e){if(e<1)throw na;const n=oa(ps(t,As),e);let o=[];for(let e=0;e<t.length;e++){const i=t[e],r=n[e];if(0===r&&o.push(i),r>0){const t=r+1;o=o.concat(ta(i,t))}}return o}const na=new Error("Number of desired additional polygons must be larger than 0");function oa(t,e){const n=[];let o=function(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}(t);for(let i=0;i<t.length;i++){const r=t[i],s=Math.round(r/o*e);n.push(s),o-=r,e-=s}return n}function ia(t){const e=[];for(const n of t.coordinates){const t={type:"Polygon",coordinates:void 0};t.coordinates=n,e.push(t)}return e}function ra(t,e,n,o){const i=Fs(ps(n,(t=>t.coordinates[0])),ps(o,(t=>t.coordinates[0])));n=ps(i,(t=>n[t]));const r=[];for(let t=0;t<n.length;t++){const e=n[t],i=o[t];r.push(Ys(e,i))}return function(n){return 0===n?t:1===n?e:function(t){const e={type:"MultiPolygon",coordinates:[]};for(const n of t)if("Polygon"===n.type&&e.coordinates.push(n.coordinates),"MultiPolygon"===n.type)for(const t of n.coordinates)e.coordinates.push(t);return e}(ps(r,(t=>t(n))))}}function sa(t,e){const n=ia(t);let o=[e];const i=n.length;return i-1>0&&(o=ta(e,i)),ra(t,e,n,o)}function aa(t,e){const[n,o]=ca(t.coordinates,e.coordinates);return function(t,e,n,o){const i=Ar(n,o);return function(n){return 0===n?t:1===n?e:{type:"LineString",coordinates:i(n)}}}(t,e,n,o)}function ca(t,e){const n=t.length-e.length;let o=t,i=e;return n>0&&(i=Ms(e,n)),n<0&&(o=Ms(t,-n)),o=function(t,e){const n=la(t,e),o=ws(t).reverse(),i=la(o,e);return n<=i?t:o}(o,i),[o,i]}function la(t,e){let n=0;for(let o=0;o<t.length;o++)n+=fs(t[o],e[o]);return n}function ua(t,e,n){return function(t,e,n){return[t[0]+e[0]*n,t[1]+e[1]*n]}(t,function(t,e){const n=fs(t,e),o=e[0]-t[0],i=e[1]-t[1];return[o/n,i/n]}(t,e),n)}function ha(t,e){const n=t.coordinates.length,o=da(e.coordinates,n);return ga(t,e,pa(t.coordinates,o))}function da(t,e){const n=[],o=ys(t)/e,i=t.length-1;let r=[],s=0;for(let e=0;e<i;e++){const i=t[e];r.push(i);const a=t[e+1],c=fs(i,a),l=s+c;if(l<o&&(s+=c),l>=o){const t=fa(i,a,s,o,Math.floor(l/o));r=r.concat(t),n.push(r);const e=t[t.length-1];r=ya(e,a)?[]:[e],s=fs(e,a)}}return n}function fa(t,e,n,o,i){const r=[];for(let s=1;s<=i;s++)r.push(ua(t,e,o*s-n));return r}function ya(t,e){return t[0]===e[0]&&t[1]===e[1]}function pa(t,e){const n=[];for(let o=0;o<t.length;o++){const i=t[o],r=e[o],[s,a]=ca(i,r),c=Ar(s,a);n.push(c)}return n}function ga(t,e,n){return function(o){return 0===o?t:1===o?e:{type:"MultiLineString",coordinates:ps(n,(t=>t(o)))}}}function ma(t,e){return function(t,e){const n=ps(t,ys),o=ps(e,ys),i=gs(n),r=gs(o),s={};for(let t=0;t<r.length;t++){const e=i[t],n=r[t];s[e]=n}const a=[];for(let t=0;t<e.length;t++)a.push(s[t]);return a}(t,e).map((e=>t[e]))}function xa(t,e){const n=oa(function(t){const e=[];for(let n=0;n<t.length;n++)e.push(ys(t[n]));return e}(t),e);let o=[];for(let e=0;e<n.length;e++){const i=t[e],r=n[e];if(0===r&&o.push(i),r>0){const t=r+1;o=o.concat(da(i,t))}}return o}function ka(t,e){return function(t,e){if(function(t,e){return Is(t)&&Is(e)}(t,e)||function(t,e){return Ns(t)&&Ns(e)}(t,e))return;throw new Error("Invalid input")}(t,e),"Polygon"===t.type&&"Polygon"===e.type?Ys(t,e):"MultiPolygon"===t.type&&"Polygon"===e.type?sa(t,e):"Polygon"===t.type&&"MultiPolygon"===e.type?function(t,e){const n=sa(e,t);return function(t){return n(1-t)}}(t,e):"MultiPolygon"===t.type&&"MultiPolygon"===e.type?function(t,e){let n=ia(t),o=ia(e);const i=n.length-o.length;return i>0&&(o=ea(o,i)),i<0&&(n=ea(n,-i)),ra(t,e,n,o)}(t,e):"LineString"===t.type&&"LineString"===e.type?aa(t,e):"MultiLineString"===t.type&&"LineString"===e.type?ha(t,e):"LineString"===t.type&&"MultiLineString"===e.type?function(t,e){const n=ha(e,t);return function(t){return n(1-t)}}(t,e):"MultiLineString"===t.type&&"MultiLineString"===e.type?function(t,e){let n=t.coordinates,o=e.coordinates;const i=n.length-o.length;return i>0&&(o=xa(o,i)),i<0&&(n=xa(n,-i)),n=ma(n,o),ga(t,e,pa(n,o))}(t,e):void 0}function va(t,e){if(Ma(t,e))return ve(t,e);if(wa(t,e))return ka(t,e);if(Ta(t,e))return ka(t,e);throw new Error("Invalid input")}function ba(t,e){const n=Sa(t),o=Sa(e);if(Ma(n,o))return Oa(t,e,ve);if(wa(n,o))return Oa(t,e,ka);if(Ta(n,o))return Oa(t,e,ka);throw new Error("Invalid input")}function Ma(t,e){return"Point"===t.type&&"Point"===e.type}const $a=["Polygon","MultiPolygon"];function wa(t,e){return $a.includes(t.type)&&$a.includes(e.type)}const _a=["LineString","MultiLineString"];function Ta(t,e){return _a.includes(t.type)&&_a.includes(e.type)}function Sa(t){return t[Object.keys(t)[0]]}function Oa(t,e,n){const o={};for(const i in e)o[i]=i in t?n(t[i],e[i]):()=>e[i];return function(n){if(0===n)return t;if(1===n)return e;const i={};for(const t in o)i[t]=o[t](n);return i}}function Ca(t){return{minX:t.x[0],maxX:t.x[1],minY:t.y[0],maxY:t.y[1]}}function Pa(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Ia(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Na(t,e,n,o){const i=[];for(let r=0;r<t.length-1;r++){const s=Wa([t[r],t[r+1]],e,r);o&&(s.lineStringIndex=o),s.markId=n,i.push(s)}return i}function Aa(t,e,n){let o=[];for(let i=0;i<t.length;i++)o=o.concat(Na(t[i],e,n,i));return o}function Wa(t,e,n){const o={type:"LineString",coordinates:t};let i=Ca(ii(o));return i=function(t,e){const n=e/2,o={minX:t.minX-n,maxX:t.maxX+n,minY:t.minY-n,maxY:t.maxY+n};return Object.assign(t,o)}(i,e.strokeWidth),i.attributes={},i.attributes.strokeWidth=e.strokeWidth,i.attributes.segmentGeometry=o,i.markType="Line",i.segmentIndex=n,i}function Ea(t,e){return{pixelGeometry:t.pixelGeometryObject[e],strokeWidth:t.strokeWidthObject[e]}}function La(t,e,n,o){for(let i=0;i<t.length;i++){const r=t[i];delete r.markId,r.layerId=e,r.key=n,r.index=o}return t}function Fa(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Ra(t,e){return{screenGeometry:t.screenGeometryObject[e]}}const ja={Point:zn,Rectangle:function(t){const e=t.attributes,n=Ca(ii(e.screenGeometry));return n.attributes=e,n.markType="Rectangle",n.markId=t.markId,n},Polygon:function(t){const e=t.attributes,n=Ca(ii(e.screenGeometry));return n.attributes=e,n.markType="Polygon",n.markId=t.markId,n},Line:function(t){const e=t.attributes,n=t.markId,o=e.pixelGeometry,i=o.coordinates;return"LineString"===o.type?Na(i,e,n):"MultiLineString"===o.type?Aa(i,e,n):void 0},Label:zn,Area:function(t){const e=t.attributes,n=Ca(ii(e.screenGeometry));return n.attributes=e,n.markType="Area",n.markId=t.markId,n},Symbol:function(t){const e=t.attributes,n=Ca(ii(e.screenGeometry));return n.attributes=e,n.markType="Symbol",n.markId=t.markId,n}},Ya={Point:Xn,Rectangle:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Pa(t,r),a=Ca(ii(s.screenGeometry));a.key=r,a.index=i,a.attributes=s,a.markType="Rectangle",a.layerId=n,o.push(a)}return o},Polygon:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Ia(t,r),a=Ca(ii(s.screenGeometry));a.key=r,a.index=i,a.attributes=s,a.markType="Polygon",a.layerId=n,o.push(a)}return o},Line:function({layerAttributes:t,keyArray:e,layerId:n}){let o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Ea(t,r),a=s.pixelGeometry,c=a.coordinates;if("LineString"===a.type){let t=Na(c,s,r);t=La(t,n,r,i),o=o.concat(t)}if("MultiLineString"===a.type){let t=Aa(c,s,r);t=La(t,n,r,i),o=o.concat(t)}}return o},Label:Xn,Area:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Fa(t,r),a=Ca(ii(s.screenGeometry));a.key=r,a.index=i,a.attributes=s,a.markType="Area",a.layerId=n,o.push(a)}return o},Symbol:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Ra(t,r),a=Ca(ii(s.screenGeometry));a.key=r,a.index=i,a.attributes=s,a.markType="Symbol",a.layerId=n,o.push(a)}return o}};class za extends jn{constructor(t,e){super(t,e),this._indexableMarks={},this._indexableLayers={}}loadMark(t,e){const n=(0,ja[t])(e),o=e.markId;this._indexableMarks[o]=n}markIsLoaded(t){return t in this._indexableMarks}removeMark(t){delete this._indexableMarks[t]}loadLayer(t,e){const n=(0,Ya[t])(e),o=e.layerId;this._indexableLayers[o]=n}layerIsLoaded(t){return t in this._indexableLayers}removeLayer(t){delete this._indexableLayers[t]}addMarkInteraction(t,e,n){this._getHandler(t).addMarkInteraction(e,n)}removeAllMarkInteractions(t){for(const e in this._handlers){const n=this._handlers[e];n.hasMark(t)&&n.removeMarkInteraction(t)}}addLayerInteraction(t,e,n){this._getHandler(t).addLayerInteraction(e,n)}removeAllLayerInteractions(t){for(const e in this._handlers){const n=this._handlers[e];n.hasLayer(t)&&n.removeLayerInteraction(t)}}}class Xa extends jn{addInteraction(t,e){this._getHandler(t).addInteraction(e)}removeAllInteractions(){for(const t in this._handlers){const e=this._handlers[t];e.hasInteraction()&&e.removeInteraction()}}}class Da{constructor(t,{eventName:e,interactionName:n}){this._interactionManager=t,this._eventName=e,this._interactionName=n}interactionManager(){return this._interactionManager}eventManager(){return this._interactionManager._eventManager}section(){return this._interactionManager._section}id(){return this._interactionManager._id}_addEventListener(){const t=this._handleEvent.bind(this),e=this.eventManager(),n=this.getId(),o=qa(this._eventName)?this._eventName:[this._eventName];for(const i of o)e.eventTracker(i).addListener(n,t)}_removeEventListener(){const t=this.eventManager(),e=this.getId(),n=qa(this._eventName)?this._eventName:[this._eventName];for(const o of n)t.eventTracker(o).removeListener(e)}}function qa(t){return t.constructor===Array}function Ha(t,e,n,o,i){Ga(t,e,n||0,o||t.length-1,i||Za)}function Ga(t,e,n,o,i){for(;o>n;){if(o-n>600){var r=o-n+1,s=e-n+1,a=Math.log(r),c=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*c*(r-c)/r)*(s-r/2<0?-1:1);Ga(t,e,Math.max(n,Math.floor(e-s*c/r+l)),Math.min(o,Math.floor(e+(r-s)*c/r+l)),i)}var u=t[e],h=n,d=o;for(Ba(t,n,e),i(t[o],u)>0&&Ba(t,n,o);h<d;){for(Ba(t,h,d),h++,d--;i(t[h],u)<0;)h++;for(;i(t[d],u)>0;)d--}0===i(t[n],u)?Ba(t,n,d):Ba(t,++d,o),d<=e&&(n=d+1),e<=d&&(o=d-1)}}function Ba(t,e,n){var o=t[e];t[e]=t[n],t[n]=o}function Za(t,e){return t<e?-1:t>e?1:0}class Va{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!sc(t,e))return n;const o=this.toBBox,i=[];for(;e;){for(let r=0;r<e.children.length;r++){const s=e.children[r],a=e.leaf?o(s):s;sc(t,a)&&(e.leaf?n.push(s):rc(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n}collides(t){let e=this.data;if(!sc(t,e))return!1;const n=[];for(;e;){for(let o=0;o<e.children.length;o++){const i=e.children[o],r=e.leaf?this.toBBox(i):i;if(sc(t,r)){if(e.leaf||rc(t,r))return!0;n.push(i)}}e=n.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let e=0;e<t.length;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=ac([]),this}remove(t,e){if(!t)return this;let n=this.data;const o=this.toBBox(t),i=[],r=[];let s,a,c;for(;n||i.length;){if(n||(n=i.pop(),a=i[i.length-1],s=r.pop(),c=!0),n.leaf){const o=Ja(t,n.children,e);if(-1!==o)return n.children.splice(o,1),i.push(n),this._condense(i),this}c||n.leaf||!rc(n,o)?a?(s++,n=a.children[s],c=!1):n=null:(i.push(n),r.push(s),s=0,a=n,n=n.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,o){const i=n-e+1;let r,s=this._maxEntries;if(i<=s)return r=ac(t.slice(e,n+1)),Ka(r,this.toBBox),r;o||(o=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,o-1))),r=ac([]),r.leaf=!1,r.height=o;const a=Math.ceil(i/s),c=a*Math.ceil(Math.sqrt(s));cc(t,e,n,c,this.compareMinX);for(let i=e;i<=n;i+=c){const e=Math.min(i+c-1,n);cc(t,i,e,a,this.compareMinY);for(let n=i;n<=e;n+=a){const i=Math.min(n+a-1,e);r.children.push(this._build(t,n,i,o-1))}}return Ka(r,this.toBBox),r}_chooseSubtree(t,e,n,o){for(;o.push(e),!e.leaf&&o.length-1!==n;){let n,o=1/0,s=1/0;for(let a=0;a<e.children.length;a++){const c=e.children[a],l=nc(c),u=(i=t,r=c,(Math.max(r.maxX,i.maxX)-Math.min(r.minX,i.minX))*(Math.max(r.maxY,i.maxY)-Math.min(r.minY,i.minY))-l);u<s?(s=u,o=l<o?l:o,n=c):u===s&&l<o&&(o=l,n=c)}e=n||e.children[0]}var i,r;return e}_insert(t,e,n){const o=n?t:this.toBBox(t),i=[],r=this._chooseSubtree(o,this.data,e,i);for(r.children.push(t),Qa(r,o);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(o,i,e)}_split(t,e){const n=t[e],o=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,o);const r=this._chooseSplitIndex(n,i,o),s=ac(n.children.splice(r,n.children.length-r));s.height=n.height,s.leaf=n.leaf,Ka(n,this.toBBox),Ka(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)}_splitRoot(t,e){this.data=ac([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ka(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let o,i=1/0,r=1/0;for(let s=e;s<=n-e;s++){const e=Ua(t,0,s,this.toBBox),a=Ua(t,s,n,this.toBBox),c=ic(e,a),l=nc(e)+nc(a);c<i?(i=c,o=s,r=l<r?l:r):c===i&&l<r&&(r=l,o=s)}return o||n-e}_chooseSplitAxis(t,e,n){const o=t.leaf?this.compareMinX:tc,i=t.leaf?this.compareMinY:ec;this._allDistMargin(t,e,n,o)<this._allDistMargin(t,e,n,i)&&t.children.sort(o)}_allDistMargin(t,e,n,o){t.children.sort(o);const i=this.toBBox,r=Ua(t,0,e,i),s=Ua(t,n-e,n,i);let a=oc(r)+oc(s);for(let o=e;o<n-e;o++){const e=t.children[o];Qa(r,t.leaf?i(e):e),a+=oc(r)}for(let o=n-e-1;o>=e;o--){const e=t.children[o];Qa(s,t.leaf?i(e):e),a+=oc(s)}return a}_adjustParentBBoxes(t,e,n){for(let o=n;o>=0;o--)Qa(e[o],t)}_condense(t){for(let e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():Ka(t[n],this.toBBox)}}function Ja(t,e,n){if(!n)return e.indexOf(t);for(let o=0;o<e.length;o++)if(n(t,e[o]))return o;return-1}function Ka(t,e){Ua(t,0,t.children.length,e,t)}function Ua(t,e,n,o,i){i||(i=ac(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let r=e;r<n;r++){const e=t.children[r];Qa(i,t.leaf?o(e):e)}return i}function Qa(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function tc(t,e){return t.minX-e.minX}function ec(t,e){return t.minY-e.minY}function nc(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function oc(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ic(t,e){const n=Math.max(t.minX,e.minX),o=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),r=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,r-o)}function rc(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function sc(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ac(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function cc(t,e,n,o,i){const r=[e,n];for(;r.length;){if((n=r.pop())-(e=r.pop())<=o)continue;const s=e+Math.ceil((n-e)/o/2)*o;Ha(t,s,e,n,i),r.push(e,s,s,n)}}function lc(t,e){return di([t.x,t.y],e.pixelGeometry.coordinates)<e.radius}var uc={Point:lc,Rectangle:function(t,e){return Ti([t.x,t.y],e.screenGeometry)},Polygon:function(t,e){return Ti([t.x,t.y],e.screenGeometry)},Line:function(t,e){return gi([t.x,t.y],e.segmentGeometry.coordinates,e.strokeWidth)},Label:lc,Symbol:function(t,e){return Ti([t.x,t.y],e.screenGeometry)},Area:function(t,e){return Ti([t.x,t.y],e.screenGeometry)}};class hc{constructor(t,e,n){this._rbush=new Va,this._interactionHandler=t,this._getMark=e.bind(t),this._getLayer=n.bind(t)}indexLayer(t){const e=this._getLayer(t);this._rbush.load(e)}unindexLayer(t){const e=this._getLayer(t);for(let t=0;t<e.length;t++){const n=e[t];this._rbush.remove(n)}}indexMark(t){const e=this._getMark(t);dc(e)?this._rbush.load(e):this._rbush.insert(e)}unindexMark(t){const e=this._getMark(t);if(dc(e))for(let t=0;t<e.length;t++){const n=e[t];this._rbush.remove(n)}else this._rbush.remove(e)}queryMouseCoordinates(t,e){const n=function(t,e=3){return{minX:t.x-e,maxX:t.x+e,minY:t.y-e,maxY:t.y+e}}(t,e),o=this._rbush.search(n);return this._getHits(t,o)}queryBoundingBox(t){return this._rbush.search(t)}_getHits(t,e){const n=[];for(let o=0;o<e.length;o++){const i=e[o];(0,uc[i.markType])(t,i.attributes)&&n.push(i)}return n}}function dc(t){return t.constructor===Array}class fc extends Da{constructor(t,e){super(t,e);this._spatialIndex=new hc(this,(function(t){return this._interactionManager.marks()._indexableMarks[t]}),(function(t){return this._interactionManager.marks()._indexableLayers[t]})),this._numberOfInteractions=0,this._markCallbacks={},this._layerCallbacks={}}addMarkInteraction(t,e){this._addEventListenerIfNecessary(),this._numberOfInteractions++,this._markCallbacks[t]=e,this._spatialIndex.indexMark(t)}hasMark(t){return t in this._markCallbacks}removeMarkInteraction(t){this._removeEventListenerIfNecessary(),delete this._markCallbacks[t],this._numberOfInteractions--,this._spatialIndex.unindexMark(t)}addLayerInteraction(t,e){t in this._layerCallbacks||(this._addEventListenerIfNecessary(),this._numberOfInteractions++,this._layerCallbacks[t]=e,this._spatialIndex.indexLayer(t))}hasLayer(t){return t in this._layerCallbacks}removeLayerInteraction(t){t in this._layerCallbacks&&(this._numberOfInteractions--,delete this._layerCallbacks[t],this._removeEventListenerIfNecessary(),this._spatialIndex.unindexLayer(t))}_addEventListenerIfNecessary(){0===this._numberOfInteractions&&this._addEventListener()}_removeEventListenerIfNecessary(){0===this._numberOfInteractions&&this._removeEventListener()}getId(){return`${this.id()}-mark-${this._interactionName}`}}function yc(t,e,n,o){return e.markType=n.markType,e.hitBbox=mc(n),e.hitSource="mark",xc(t,e,o)}function pc(t,e,n,o){return e.markType=n.markType,e.hitBbox=mc(n),e.key=n.key,e.index=n.index,e.hitSource="layer",xc(t,e,o)}function gc(t,e,n){return e.hitSource="section",xc(t,e,n)}function mc(t){return{minX:t.minX,maxX:t.maxX,minY:t.minY,maxY:t.maxY}}function xc(t,e,n){const o=e;o.type=t,o.nativeType=n.type;for(const t of kc)o[t]=n[t];return o}const kc=["altKey","ctrlKey","shiftKey","clientX","clientY","pageX","pageY","screenX","screenY","timeStamp"];function vc(t,e){return{type:t,markType:e.markType,hitSource:"mark"}}function bc(t,e){return{type:t,markType:e.markType,key:e.key,index:e.index,hitSource:"layer"}}function Mc(t,e){const n=e._section,o=n.inverseTotalTransformation,{minX:i,maxX:r,minY:s,maxY:a}=n.paddedBbox,c=$c(t.x,i,r),l=$c(t.y,s,a),[u,h]=o([c,l]);return{x:u,y:h}}function $c(t,e,n){return Math.max(e,Math.min(t,n))}function wc(t,e){const n=e.bbox;return t.x>=n.minX&&t.x<=n.maxX&&t.y>=n.minY&&t.y<=n.maxY}function _c(t){return"markId"in t}function Tc(t){return"layerId"in t}function Sc(t){return _c(t)?t.markId:Tc(t)?t.layerId+"-"+t.key:void 0}var Oc=Object.freeze({__proto__:null,ClickHandler:class extends fc{constructor(t){super(t,{interactionName:"click",eventName:"click"})}_handleEvent(t,e){if(!wc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=Mc(t,this.interactionManager());for(let i=0;i<n.length;i++){const r=n[i];if(_c(r)){const n=yc("click",{screenCoordinates:t,localCoordinates:o},r,e);this._markCallbacks[r.markId](n)}if(Tc(r)){const n=pc("click",{screenCoordinates:t,localCoordinates:o},r,e);this._layerCallbacks[r.layerId](n)}}}},MouseoverHandler:class extends fc{constructor(t){super(t,{interactionName:"mouseover",eventName:"mousemove"}),this._previousMouseoverIds={},this._currentMouseoverIds={}}_handleEvent(t,e){const n=this._spatialIndex.queryMouseCoordinates(t);for(let o=0;o<n.length;o++){const i=n[o],r=Sc(i);this._currentMouseoverIds[r]=!0,r in this._previousMouseoverIds||this._fireCallback(i,t,e)}this._previousMouseoverIds=this._currentMouseoverIds,this._currentMouseoverIds={}}_fireCallback(t,e,n){const o=Mc(e,this.interactionManager());if(_c(t)){const i=yc("mouseover",{screenCoordinates:e,localCoordinates:o},t,n);this._markCallbacks[t.markId](i)}if(Tc(t)){const i=pc("mouseover",{screenCoordinates:e,localCoordinates:o},t,n);this._layerCallbacks[t.layerId](i)}}},MouseoutHandler:class extends fc{constructor(t){super(t,{interactionName:"mouseout",eventName:"mousemove"}),this._previousMouseoverHits={},this._currentMouseoverHits={}}_handleEvent(t,e){const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=n[t],o=Sc(e);this._currentMouseoverHits[o]=e}for(const n in this._previousMouseoverHits)if(!(n in this._currentMouseoverHits)){const o=this._previousMouseoverHits[n];this._fireCallback(o,t,e)}this._previousMouseoverHits=this._currentMouseoverHits,this._currentMouseoverHits={}}_fireCallback(t,e,n){const o=Mc(e,this.interactionManager());if(_c(t)){const i=yc("mouseout",{screenCoordinates:e,localCoordinates:o},t,n);this._markCallbacks[t.markId](i)}if(Tc(t)){const i=pc("mouseout",{screenCoordinates:e,localCoordinates:o},t,n);this._layerCallbacks[t.layerId](i)}}},MousedownHandler:class extends fc{constructor(t){super(t,{interactionName:"mousedown",eventName:"mousedown"})}_handleEvent(t,e){if(!wc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=Mc(t,this.interactionManager());for(let i=0;i<n.length;i++){const r=n[i];if(_c(r)){const n=yc("mousedown",{screenCoordinates:t,localCoordinates:o},r,e);this._markCallbacks[r.markId](n)}if(Tc(r)){const n=pc("mousedown",{screenCoordinates:t,localCoordinates:o},r,e);this._layerCallbacks[r.layerId](n)}}}},MouseupHandler:class extends fc{constructor(t){super(t,{interactionName:"mouseup",eventName:"mouseup"})}_handleEvent(t,e){if(!wc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=Mc(t,this.interactionManager());for(let i=0;i<n.length;i++){const r=n[i];if(_c(r)){const n=yc("mouseup",{screenCoordinates:t,localCoordinates:o},r,e);this._markCallbacks[r.markId](n)}if(Tc(r)){const n=pc("mouseup",{screenCoordinates:t,localCoordinates:o},r,e);this._layerCallbacks[r.layerId](n)}}}},MousedragHandler:class extends fc{constructor(t){super(t,{interactionName:"mousedrag",eventName:["mousedown","mousemove","mouseup"]}),this._currentHits={}}_handleEvent(t,e){"mousedown"===e.eventName&&this._handleMousedown(t,e),"mousemove"===e.eventName&&this._handleMousemove(t,e),"mouseup"===e.eventName&&this._handleMouseup(t,e)}_handleMousedown(t,e){if(!wc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let o=0;o<n.length;o++){const i=n[o],r=Sc(i);this._currentHits[r]=i,this._fireCallback(i,t,e,"start")}}_handleMousemove(t,e){if(wc(t,this.section()))for(const n in this._currentHits){const o=this._currentHits[n];this._fireCallback(o,t,e,"drag")}}_handleMouseup(t,e){for(const n in this._currentHits){const o=this._currentHits[n];this._fireCallback(o,t,e,"end")}this._currentHits={}}_fireCallback(t,e,n,o){const i=Mc(e,this.interactionManager());if(_c(t)){const r=yc("mousedrag",{screenCoordinates:e,localCoordinates:i,dragType:o},t,n);this._markCallbacks[t.markId](r)}if(Tc(t)){const r=pc("mousedrag",{screenCoordinates:e,localCoordinates:i,dragType:o},t,n);this._layerCallbacks[t.layerId](r)}}}});class Cc extends Da{constructor(t,e){super(t,e),this._callback=void 0}addInteraction(t){this._addEventListener(),this._callback=t}hasInteraction(){return void 0!==this._callback}removeInteraction(){this._callback&&(this._callback=void 0,this._removeEventListener())}getId(){return`${this.id()}-section-${this._interactionName}`}}let Pc;var Ic=Object.freeze({__proto__:null,WheelHandler:class extends Cc{constructor(t){super(t,{interactionName:"wheel",eventName:"wheel"})}_handleEvent(t,e){e.preventDefault(),e.stopPropagation();const n=this.interactionManager();if(wc(t,this.section())){const o=gc("wheel",{screenCoordinates:t,localCoordinates:Mc(t,n),delta:function(t){let e;"wheelDelta"in t&&0!==t.wheelDelta&&(e=-t.wheelDelta);"detail"in t&&0!==t.detail&&(e=-t.detail);"deltaY"in t&&0!==t.deltaY&&(e=-t.deltaY);Pc||(Pc=function(){var t,e=document.createElement("iframe");e.src="#",document.body.appendChild(e);var n=e.contentWindow.document;return n.open(),n.write("<!DOCTYPE html><html><head></head><body><span>a</span></body></html>"),n.close(),t=n.body.firstElementChild.offsetHeight,document.body.removeChild(e),t}());return e*(t.deltaMode?Pc:1)/500}(e)},e);this._callback(o)}}},ClickHandler:class extends Cc{constructor(t){super(t,{interactionName:"click",eventName:"click"})}_handleEvent(t,e){const n=this.interactionManager();if(wc(t,this.section())){const o=gc("click",{screenCoordinates:t,localCoordinates:Mc(t,n)},e);this._callback(o)}}},MousedownHandler:class extends Cc{constructor(t){super(t,{interactionName:"mousedown",eventName:"mousedown"})}_handleEvent(t,e){const n=this.interactionManager();if(wc(t,this.section())){const o=gc("mousedown",{screenCoordinates:t,localCoordinates:Mc(t,n)},e);this._callback(o)}}},MouseupHandler:class extends Cc{constructor(t){super(t,{interactionName:"mouseup",eventName:"mouseup"})}_handleEvent(t,e){const n=this.interactionManager();if(wc(t,this.section())){const o=gc("mouseup",{screenCoordinates:t,localCoordinates:Mc(t,n)},e);this._callback(o)}}},MouseoverHandler:class extends Cc{constructor(t){super(t,{interactionName:"mouseover",eventName:"mousemove"}),this._mouseCurrentlyOverSection=!1}_handleEvent(t,e){const n=this.interactionManager();if(wc(t,this.section())){if(!this._mouseCurrentlyOverSection){const o=gc("mouseover",{screenCoordinates:t,localCoordinates:Mc(t,n)},e);this._callback(o),this._mouseCurrentlyOverSection=!0}}else this._mouseCurrentlyOverSection&&(this._mouseCurrentlyOverSection=!1)}},MouseoutHandler:class extends Cc{constructor(t){super(t,{interactionName:"mouseout",eventName:"mousemove"}),this._mouseCurrentlyOverSection=!1}_handleEvent(t,e){const n=this.interactionManager();if(wc(t,this.section()))this._mouseCurrentlyOverSection||(this._mouseCurrentlyOverSection=!0);else if(this._mouseCurrentlyOverSection){const o=gc("mouseout",{screenCoordinates:t,localCoordinates:Mc(t,n)},e);this._callback(o),this._mouseCurrentlyOverSection=!1}}},MousemoveHandler:class extends Cc{constructor(t){super(t,{interactionName:"mouseover",eventName:"mousemove"})}_handleEvent(t,e){const n=this.interactionManager();if(wc(t,this.section())){const o=gc("mousemove",{screenCoordinates:t,localCoordinates:Mc(t,n)},e);this._callback(o)}}}});class Nc extends Rn{constructor(){super(),this._markInteractionInterface=new za(this,Oc),this._sectionInteractionInterface=new Xa(this,Ic)}}function Ac(t){return t.constructor===Object?1:t.length}var Wc=Object.freeze({__proto__:null,TouchdownHandler:class extends fc{constructor(t){super(t,{interactionName:"touchdown",eventName:"touchstart"})}_handleEvent(t,e){if(1!==Ac(t))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=Mc(t,this.interactionManager());for(let i=0;i<n.length;i++){const r=n[i];if(_c(r)){const n=yc("touchdown",{screenCoordinates:t,localCoordinates:o},r,e);this._markCallbacks[r.markId](n)}if(Tc(r)){const n=pc("touchdown",{screenCoordinates:t,localCoordinates:o},r,e);this._layerCallbacks[r.layerId](n)}}}},TouchupHandler:class extends fc{constructor(t){super(t,{interactionName:"touchup",eventName:["touchend","touchcancel"]})}_handleEvent(t,e){if(1!==Ac(t))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=Mc(t,this.interactionManager());for(let i=0;i<n.length;i++){const r=n[i];if(_c(r)){const n=yc("touchup",{screenCoordinates:t,localCoordinates:o},r,e);this._markCallbacks[r.markId](n)}if(Tc(r)){const n=pc("touchup",{screenCoordinates:t,localCoordinates:o},r,e);this._layerCallbacks[r.layerId](n)}}}},TouchoverHandler:class extends fc{constructor(t){super(t,{interactionName:"touchover",eventName:["touchstart","touchmove"]}),this._previousHits={},this._currentHits={}}_handleEvent(t,e){1===Ac(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e))}_handleTouchstart(t,e){if(!wc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=Sc(n[t]);this._previousHits[e]=!0}}_handleTouchmove(t,e){if(!wc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let o=0;o<n.length;o++){const i=n[o],r=Sc(i);this._currentHits[r]=!0,r in this._previousHits||this._fireCallback(i,t,e)}this._previousHits=this._currentHits,this._currentHits={}}_fireCallback(t,e,n){const o=Mc(e,this.interactionManager());if(_c(t)){const i=yc("touchover",{screenCoordinates:e,localCoordinates:o},t,n);this._markCallbacks[t.markId](i)}if(Tc(t)){const i=pc("touchover",{screenCoordinates:e,localCoordinates:o},t,n);this._layerCallbacks[t.layerId](i)}}},TouchoutHandler:class extends fc{constructor(t){super(t,{interactionName:"touchout",eventName:["touchstart","touchmove","touchend"]}),this._previousHits={},this._currentHits={}}_handleEvent(t,e){1===Ac(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e),"touchend"===e.eventName&&this._handleTouchend())}_handleTouchstart(t,e){if(!wc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=n[t],o=Sc(e);this._previousHits[o]=e}}_handleTouchmove(t,e){if(!wc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=n[t],o=Sc(e);this._currentHits[o]=e}for(const n in this._previousHits)if(!(n in this._currentHits)){const o=this._previousHits[n];this._fireCallback(o,t,e)}this._previousHits=this._currentHits,this._currentHits={}}_handleTouchend(){this._previousHits={},this._currentHits={}}_fireCallback(t,e,n){const o=Mc(e,this.interactionManager());if(_c(t)){const i=yc("touchout",{screenCoordinates:e,localCoordinates:o},t,n);this._markCallbacks[t.markId](i)}if(Tc(t)){const i=pc("touchout",{screenCoordinates:e,localCoordinates:o},t,n);this._layerCallbacks[t.layerId](i)}}},TouchdragHandler:class extends fc{constructor(t){super(t,{interactionName:"touchdrag",eventName:["touchstart","touchmove","touchend"]}),this._currentHits={}}_handleEvent(t,e){1===Ac(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e),"touchend"===e.eventName&&this._handleTouchend(t,e))}_handleTouchstart(t,e){if(!wc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let o=0;o<n.length;o++){const i=n[o],r=Sc(i);this._currentHits[r]=i,this._fireCallback(i,t,e,"start")}}_handleTouchmove(t,e){if(wc(t,this.section()))for(const n in this._currentHits){const o=this._currentHits[n];this._fireCallback(o,t,e,"drag")}}_handleTouchend(t,e){for(const n in this._currentHits){const o=this._currentHits[n];this._fireCallback(o,t,e,"end")}this._currentHits={}}_fireCallback(t,e,n,o){const i=Mc(e,this.interactionManager());if(_c(t)){const r=yc("touchdrag",{screenCoordinates:e,localCoordinates:i,dragType:o},t,n);this._markCallbacks[t.markId](r)}if(Tc(t)){const r=pc("touchdrag",{screenCoordinates:e,localCoordinates:i,dragType:o},t,n);this._layerCallbacks[t.layerId](r)}}}});function Ec(t,e){return t.every((t=>wc(t,e)))}function Lc(t){const[e,n]=t;return Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2)}var Fc=Object.freeze({__proto__:null,TouchdownHandler:class extends Cc{constructor(t){super(t,{interactionName:"touchdown",eventName:"touchstart"})}_handleEvent(t,e){if(1!==Ac(t))return;const n=this.interactionManager();if(wc(t,this.section())){const o=gc("touchdown",{screenCoordinates:t,localCoordinates:Mc(t,n)},e);this._callback(o)}}},TouchmoveHandler:class extends Cc{constructor(t){super(t,{interactionName:"touchmove",eventName:"touchmove"})}_handleEvent(t,e){if(1!==Ac(t))return;const n=this.interactionManager();if(wc(t,this.section())){const o=gc("touchmove",{screenCoordinates:t,localCoordinates:Mc(t,n)},e);this._callback(o)}}},TouchupHandler:class extends Cc{constructor(t){super(t,{interactionName:"touchup",eventName:["touchend","touchcancel"]})}_handleEvent(t,e){if(1!==Ac(t))return;const n=this.interactionManager();if(wc(t,this.section())){const o=gc("touchup",{screenCoordinates:t,localCoordinates:Mc(t,n)},e);this._callback(o)}}},TouchoverHandler:class extends Cc{constructor(t){super(t,{interactionName:"touchover",eventName:["touchstart","touchmove"]}),this._fingerCurrentlyOverSection=!1}_handleEvent(t,e){1===Ac(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e))}_handleTouchstart(t,e){wc(t,this.section())&&(this._fingerCurrentlyOverSection=!0)}_handleTouchmove(t,e){const n=this.interactionManager();if(wc(t,this.section())){if(!this._fingerCurrentlyOverSection){const o=gc("touchover",{screenCoordinates:t,localCoordinates:Mc(t,n)},e);this._callback(o),this._fingerCurrentlyOverSection=!0}}else this._fingerCurrentlyOverSection&&(this._fingerCurrentlyOverSection=!1)}},TouchoutHandler:class extends Cc{constructor(t){super(t,{interactionName:"touchout",eventName:["touchstart","touchmove","touchend"]}),this._fingerCurrentlyOverSection=!1}_handleEvent(t,e){1===Ac(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e),"touchend"===e.eventName&&this._handleTouchend())}_handleTouchstart(t,e){wc(t,this.section())&&(this._fingerCurrentlyOverSection=!0)}_handleTouchmove(t,e){const n=this.interactionManager();if(wc(t,this.section()))this._fingerCurrentlyOverSection||(this._fingerCurrentlyOverSection=!0);else if(this._fingerCurrentlyOverSection){const o=gc("touchout",{screenCoordinates:t,localCoordinates:Mc(t,n)},e);this._callback(o),this._fingerCurrentlyOverSection=!1}}_handleTouchend(){this._fingerCurrentlyOverSection=!1}},PinchHandler:class extends Cc{constructor(t){super(t,{interactionName:"pinch",eventName:["touchstart","touchmove","touchend"]}),this._previousTouchDistance=void 0}_handleEvent(t,e){"touchstart"===e.type&&this._handleTouchstart(t,e),"touchmove"===e.type&&this._handleTouchmove(t,e),"touchend"===e.type&&this._handleTouchend(t,e)}_handleTouchstart(t,e){if(2!==Ac(t))return;Ec(t,this.section())&&(this._previousTouchDistance=Lc(t))}_handleTouchmove(t,e){if(2!==Ac(t))return;if(void 0===this._previousTouchDistance)return;const n=this.section();if(Ec(t,n)){const o=n.maxY-n.minY,i=function(t){const[e,n]=t;return{x:(n.x+e.x)/2,y:(n.y+e.y)/2}}(t),r=Lc(t),s=(this._previousTouchDistance-r)/o;this._previousTouchDistance=r,this._fireCallback(t,e,s,i)}}_handleTouchend(t,e){this._previousTouchDistance=void 0}_fireCallback(t,e,n,o){const i=gc("pinch",{screenCenter:o,localCenter:Mc(o,this.interactionManager()),screenCoordinates:t,localCoordinates:t.map((t=>Mc(t,this.interactionManager()))),delta:n},e);this._callback(i)}}});class Rc extends Rn{constructor(){super(),this._markInteractionInterface=new za(this,Wc),this._sectionInteractionInterface=new Xa(this,Fc)}}function jc(t){return{x:[t[0],t[0]],y:[t[1],t[1]]}}function Yc(t){const e=t.attributes,n=Ca(jc(e.pixelGeometry.coordinates));return n.attributes=e,n.markType="Point",n.markId=t.markId,n}function zc({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Xc(t,r),a=Ca(jc(s.pixelGeometry.coordinates));a.key=r,a.index=i,a.attributes=s,a.markType="Point",a.layerId=n,o.push(a)}return o}function Xc(t,e){return{pixelGeometry:t.pixelGeometryObject[e],radius:t.radiusObject[e]}}function Dc(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function qc(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Hc(t,e){return{screenGeometry:t.pixelGeometryObject[e]}}function Gc(t,e){return{screenGeometry:t.screenGeometryObject[e]}}const Bc={Point:Yc,Rectangle:function(t){const e=t.attributes,n=Ca(jc(yi(e.screenGeometry)));return n.attributes=e,n.markType="Rectangle",n.markId=t.markId,n},Polygon:function(t){const e=t.attributes,n=Ca(jc(yi(e.screenGeometry)));return n.attributes=e,n.markType="Polygon",n.markId=t.markId,n},Line:function(t){const e=t.attributes,n=Ca(jc(yi(e.pixelGeometry)));return n.attributes=e,n.markType="Line",n.markId=t.markId,n},Label:Yc,Area:function(t){const e=t.attributes,n=Ca(jc(yi(e.screenGeometry)));return n.attributes=e,n.markType="Area",n.markId=t.markId,n}},Zc={Point:zc,Rectangle:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Dc(t,r),a=Ca(jc(yi(s.screenGeometry)));a.key=r,a.index=i,a.attributes=s,a.markType="Rectangle",a.layerId=n,o.push(a)}return o},Polygon:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=qc(t,r),a=Ca(jc(yi(s.screenGeometry)));a.key=r,a.index=i,a.attributes=s,a.markType="Polygon",a.layerId=n,o.push(a)}return o},Line:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Hc(t,r),a=Ca(jc(yi(s.screenGeometry)));a.key=r,a.index=i,a.attributes=s,a.markType="Line",a.layerId=n,o.push(a)}return o},Label:zc,Area:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Gc(t,r),a=Ca(jc(yi(s.screenGeometry)));a.key=r,a.index=i,a.attributes=s,a.markType="Area",a.layerId=n,o.push(a)}return o}};class Vc{constructor(){this._selectableMarks={},this._selectableLayers={},this._markCallbacks={},this._layerCallbacks={},this._previousSelection={},this._currentSelection={};this._spatialIndex=new hc(this,(function(t){return this._selectableMarks[t]}),(function(t){return this._selectableLayers[t]})),this._selectPolygon={start:void 0,points:[]}}loadMark(t,e,n){const o=(0,Bc[t])(e),i=e.markId;this._selectableMarks[i]=o,this._markCallbacks[i]=n,this._spatialIndex.indexMark(i)}markIsLoaded(t){return t in this._selectableMarks}removeMark(t){this._spatialIndex.unindexMark(t),delete this._selectableMarks[t],delete this._markCallbacks[t]}loadLayer(t,e,n){const o=(0,Zc[t])(e),i=e.layerId;this._selectableLayers[i]=o,this._layerCallbacks[i]=n,this._spatialIndex.indexLayer(i)}layerIsLoaded(t){return t in this._selectableLayers}removeLayer(t){this._spatialIndex.unindexLayer(t),delete this._selectableLayers[t],delete this._layerCallbacks[t]}selectRectangle(t){const e=this._spatialIndex.queryBoundingBox(Jc(t));for(let t=0;t<e.length;t++){const n=e[t],o=Sc(n);this._currentSelection[o]=n,this._fireSelectCallback(n)}}updateSelectRectangle(t){this._previousSelection=this._currentSelection,this._currentSelection={};const e=this._spatialIndex.queryBoundingBox(Jc(t));for(let t=0;t<e.length;t++){const n=e[t],o=Sc(n);this._currentSelection[o]=n,o in this._previousSelection||this._fireSelectCallback(n)}for(const t in this._previousSelection)if(!(t in this._currentSelection)){const e=this._previousSelection[t];this._fireDeselectCallback(e)}}resetSelectRectangle(){for(const t in this._currentSelection){const e=this._currentSelection[t];this._fireDeselectCallback(e)}this._previousSelection={},this._currentSelection={}}startSelectPolygon(t){this._selectPolygon.start=Kc(t)}addPointToSelectPolygon(t){if(this._selectPolygon.points.push(Kc(t)),this._selectPolygon.points.length>1){const t=this._getLastThreePointsPolygon(),e=ii(t),n=this._spatialIndex.queryBoundingBox(Uc(e));for(let e=0;e<n.length;e++){const o=n[e];if(Ti([o.minX,o.minY],t)){const t=Sc(o);t in this._currentSelection?(this._fireDeselectCallback(o),delete this._currentSelection[t]):(this._fireSelectCallback(o),this._currentSelection[t]=o)}}}}moveSelectPolygon(t){this._previousSelection=this._currentSelection,this._currentSelection={};const e=Kc(t),n=this._selectPolygon.start,o=this._selectPolygon.points;this._selectPolygon.start=[n[0]+e[0],n[1]+e[1]],this._selectPolygon.points=o.map((t=>[t[0]+e[0],t[1]+e[1]]));const i=this.getSelectPolygon(),r=ii(i),s=this._spatialIndex.queryBoundingBox(Uc(r));for(let t=0;t<s.length;t++){const e=s[t];if(Ti([e.minX,e.minY],i)){const t=Sc(e);this._currentSelection[t]=e,t in this._previousSelection||this._fireSelectCallback(e)}}for(const t in this._previousSelection)if(!(t in this._currentSelection)){const e=this._previousSelection[t];this._fireDeselectCallback(e)}}getSelectPolygon(){if(this._selectPolygon.start)return{type:"Polygon",coordinates:[[this._selectPolygon.start,...this._selectPolygon.points,this._selectPolygon.start]]}}resetSelectPolygon(){for(const t in this._currentSelection){const e=this._currentSelection[t];this._fireDeselectCallback(e)}this._selectPolygon={start:void 0,points:[]},this._currentSelection={}}_fireSelectCallback(t){if(_c(t)){const e=vc("select",t),n=this._markCallbacks[t.markId].onSelect;n&&n(e)}if(Tc(t)){const e=bc("select",t),n=this._layerCallbacks[t.layerId].onSelect;n&&n(e)}}_fireDeselectCallback(t){if(_c(t)){const e=vc("deselect",t),n=this._markCallbacks[t.markId].onDeselect;n&&n(e)}if(Tc(t)){const e=bc("deselect",t),n=this._layerCallbacks[t.layerId].onDeselect;n&&n(e)}}_getLastThreePointsPolygon(){const t=this._selectPolygon.points,e=t.length-1,n=this._selectPolygon.start;return{type:"Polygon",coordinates:[[n,t[e-1],t[e],n]]}}}function Jc(t){return{minX:Math.min(t.x1,t.x2),maxX:Math.max(t.x1,t.x2),minY:Math.min(t.y1,t.y2),maxY:Math.max(t.y1,t.y2)}}function Kc(t){if(function(t){return t.constructor===Array&&2===t.length&&t.every((t=>t&&t.constructor===Number))}(t))return t;if(function(t){return"x"in t&&"y"in t&&t.x.constructor===Number&&t.y.constructor===Number}(t))return[t.x,t.y];throw new Error(`Invalid input: ${t}`)}function Uc(t){return{minX:Math.min(...t.x),maxX:Math.max(...t.x),minY:Math.min(...t.y),maxY:Math.max(...t.y)}}class Qc{constructor(){"mouse"===wn&&(this._mouseInteractionManager=new Nc),"touch"===wn&&(this._touchInteractionManager=new Rc),this._selectManager=new Vc}setId(t){this._forEachManager((e=>{e.setId(t)}))}linkEventManager(t){this._mouseInteractionManager&&this._mouseInteractionManager.linkEventManager(t.mouse()),this._touchInteractionManager&&this._touchInteractionManager.linkEventManager(t.touch())}loadSection(t){this._forEachManager((e=>{e.loadSection(t)}))}mouse(){return this._mouseInteractionManager}touch(){return this._touchInteractionManager}select(){return this._selectManager}_forEachManager(t){this._mouseInteractionManager&&t(this._mouseInteractionManager),this._touchInteractionManager&&t(this._touchInteractionManager)}}function tl({x1:t,x2:e,y1:n,y2:o}){return{x:Math.min(t,e),y:Math.min(n,o),width:Math.abs(t-e),height:Math.abs(n-o)}}function el({x1:t,x2:e,y1:n,y2:o},i){const{left:r,right:s,top:a,bottom:c}=pt(i);return{x:Math.min(t,e)+r,y:Math.min(n,o)+a,width:Math.abs(t-e)-(r+s),height:Math.abs(n-o)-(a+c)}}function nl(t){let e,o=[{class:"content-background"},t[7],{fill:t[4]}],i={};for(let t=0;t<o.length;t+=1)i=n(i,o[t]);return{c(){e=b("rect"),T(e,i)},m(t,n){k(t,e,n)},p(t,n){T(e,i=ot(o,[{class:"content-background"},128&n[0]&&t[7],16&n[0]&&{fill:t[4]}]))},d(t){t&&v(e)}}}function ol(t){let e,o,i=[{class:"padding-background"},{mask:o=`url(#${t[9]}-mask-padding-bg)`},t[8],{fill:t[5]}],r={};for(let t=0;t<i.length;t+=1)r=n(r,i[t]);return{c(){e=b("rect"),T(e,r)},m(t,n){k(t,e,n)},p(t,n){T(e,r=ot(i,[{class:"padding-background"},{mask:o},256&n[0]&&t[8],32&n[0]&&{fill:t[5]}]))},d(t){t&&v(e)}}}function il(t){let e,o,i,r,s,a,c,l,h,f=[t[8],{fill:"white"}],y={};for(let t=0;t<f.length;t+=1)y=n(y,f[t]);let p=[t[7],{fill:"black"}],g={};for(let t=0;t<p.length;t+=1)g=n(g,p[t]);let m=t[4]&&nl(t),M=t[5]&&ol(t);const $=t[22].default,S=u($,t,t[21],null);return{c(){e=b("svg"),o=b("defs"),i=b("mask"),r=b("rect"),s=b("rect"),m&&m.c(),c=w(),M&&M.c(),l=w(),S&&S.c(),T(r,y),T(s,g),_(i,"id",a=`${t[9]}-mask-padding-bg`),_(e,"id",t[9]),_(e,"width",t[1]),_(e,"height",t[2]),_(e,"viewBox",t[0]),_(e,"preserveAspectRatio",t[3])},m(n,a){k(n,e,a),x(e,o),x(o,i),x(i,r),x(i,s),m&&m.m(e,null),x(e,c),M&&M.m(e,null),x(e,l),S&&S.m(e,null),t[23](e),h=!0},p(t,n){T(r,y=ot(f,[256&n[0]&&t[8],{fill:"white"}])),T(s,g=ot(p,[128&n[0]&&t[7],{fill:"black"}])),t[4]?m?m.p(t,n):(m=nl(t),m.c(),m.m(e,c)):m&&(m.d(1),m=null),t[5]?M?M.p(t,n):(M=ol(t),M.c(),M.m(e,l)):M&&(M.d(1),M=null),S&&S.p&&2097152&n[0]&&d(S,$,t,t[21],n,null,null),(!h||2&n[0])&&_(e,"width",t[1]),(!h||4&n[0])&&_(e,"height",t[2]),(!h||1&n[0])&&_(e,"viewBox",t[0]),(!h||8&n[0])&&_(e,"preserveAspectRatio",t[3])},i(t){h||(Q(S,t),h=!0)},o(t){tt(S,t),h=!1},d(n){n&&v(e),m&&m.d(),M&&M.d(),S&&S.d(n),t[23](null)}}}let rl=0;function sl(t,e,n){let o,i,{$$slots:r={},$$scope:s}=e;const a="gr"+rl++;let{renderer:c}=e,{width:u=500}=e,{height:h=500}=e,{viewBox:d}=e,{preserveAspectRatio:f="xMidYMid meet"}=e,{scaleX:y}=e,{scaleY:p}=e,{transformation:g}=e,{flipX:m=!1}=e,{flipY:x=!1}=e,{padding:k=0}=e,{zoomIdentity:v}=e,{blockReindexing:b=!1}=e,{backgroundColor:M}=e,{paddingColor:$}=e;const w=function(){const t=ht();return E(ft,t),t}(),_=on();l(t,_,(t=>n(29,i=t)));const T=function(){const t=ht();return E(sn,t),t}(),S=ln();let O;l(t,S,(t=>n(28,o=t)));const C=new Fn;!function(t,e){t.set(e)}(T,C);const P=new Qc;P.setId(a),P.linkEventManager(C),un(S,P);let I=u,A=h;const W=d;let L,F,j,Y;return void 0!==W&&(L=W.split(" ")),N((()=>{let t=O||document.getElementById(a);C.addRootNode(t),C.attachEventListeners()})),t.$$set=t=>{"renderer"in t&&n(12,c=t.renderer),"width"in t&&n(1,u=t.width),"height"in t&&n(2,h=t.height),"viewBox"in t&&n(0,d=t.viewBox),"preserveAspectRatio"in t&&n(3,f=t.preserveAspectRatio),"scaleX"in t&&n(13,y=t.scaleX),"scaleY"in t&&n(14,p=t.scaleY),"transformation"in t&&n(15,g=t.transformation),"flipX"in t&&n(16,m=t.flipX),"flipY"in t&&n(17,x=t.flipY),"padding"in t&&n(18,k=t.padding),"zoomIdentity"in t&&n(19,v=t.zoomIdentity),"blockReindexing"in t&&n(20,b=t.blockReindexing),"backgroundColor"in t&&n(4,M=t.backgroundColor),"paddingColor"in t&&n(5,$=t.paddingColor),"$$scope"in t&&n(21,s=t.$$scope)},t.$$.update=()=>{if(4096&t.$$.dirty[0]&&function(t,e){t.set(new dt(e))}(w,{renderer:c}),67108870&t.$$.dirty[0]&&(u.constructor===Number&&h.constructor===Number?(n(24,I=u),n(25,A=h)):void 0!==W?(n(24,I=Number(L[2])),n(25,A=Number(L[3]))):void 0===W&&(n(24,I=100),n(25,A=100))),50331648&t.$$.dirty[0]&&n(27,F={x1:0,y1:0,x2:I,y2:A}),941613056&t.$$.dirty[0]){rn(_,{sectionId:a,coordinates:F,scaleX:y,scaleY:p,padding:k,flipX:m,flipY:x,blockReindexing:b,transformation:g,zoomIdentity:v}),o.loadSection(i)}134479872&t.$$.dirty[0]&&n(7,j=el(F,k)),134217728&t.$$.dirty[0]&&n(8,Y=tl(F)),50331648&t.$$.dirty[0]&&void 0===W&&n(0,d=`0 0 ${I} ${A}`)},[d,u,h,f,M,$,O,j,Y,a,_,S,c,y,p,g,m,x,k,v,b,s,r,function(t){R[t?"unshift":"push"]((()=>{O=t,n(6,O)}))}]}class al extends lt{constructor(t){super(),ct(this,t,sl,il,a,{renderer:12,width:1,height:2,viewBox:0,preserveAspectRatio:3,scaleX:13,scaleY:14,transformation:15,flipX:16,flipY:17,padding:18,zoomIdentity:19,blockReindexing:20,backgroundColor:4,paddingColor:5},[-1,-1])}}function cl(t,e){if(t){if(t.constructor!==Array)throw new Error("'key' must be Array");if(t.length!==e)throw new Error("'key' must be of same length as positioning props");if(t.some((t=>t.constructor!==String)))throw new Error("Keys can only be Strings");return t}return new Array(e).fill(0).map(((t,e)=>e.toString()))}function ll(t,e,n,o){!function(t){if(ni(t)&&t.constructor===Object&&"type"in t&&"coordinates"in t)return;throw new Error("Invalid geometry")}(t);const i="polar"===e.transformation&&!0===n.interpolate;if(i){const i=e.getScaleTransformation(o);return qi(t,e,{scaleTransformation:i,postScaleTransformation:e.postScaleTransformation},n)}if(!i){return Fi(t,e.getTotalTransformation(o),n)}}function ul(t,e,n,o,i){const r=cl(e,t.length),s={};for(let e=0;e<r.length;e++){s[r[e]]=ll(t[e],n,o,i)}return s}function hl(t,e){fl(t),function(t){for(const e in t){const n=t[e];if(ni(n)){if(ei(n))throw pl(n,e);if(![Number,String,Date,Function].includes(n.constructor))throw pl(n,e)}}}(t);const{x1:n,x2:o,y1:i,y2:r}=t,s={};return gl(n,o)?(s.x1=ml(n,"x1",e),s.x2=ml(o,"x2",e)):(s.x1=e.rangeX[0],s.x2=e.rangeX[1]),gl(i,r)?(s.y1=ml(i,"y1",e),s.y2=ml(r,"y2",e)):(s.y1=e.rangeY[0],s.y2=e.rangeY[1]),s}const dl=JSON.stringify;function fl(t){if(yl(t.x1,t.x2))throw new Error(`Rectangle: invalid combination of 'x1' and 'x2': ${dl(t.x1)}, ${dl(t.x2)}. Either provide both or none.`);if(yl(t.y1,t.y2))throw new Error(`Rectangle: invalid combination of 'y1' and 'y2': ${dl(t.y1)}, ${dl(t.y2)}. Either provide both or none.`)}function yl(t,e){return oi(t)?ni(e):oi(e)}const pl=(t,e)=>new Error(`Rectangle: invalid coordinate value for '${e}': ${dl(t)}`);function gl(t,e){return ni(t)&&ni(e)}function ml(t,e,n){if(t.constructor===Function)return t(n);{const o=(["x1","x2"].includes(e)?n.scaleX:n.scaleY)(t);return function(t,e,n){const o=["x1","x2"].includes(n)?"scaleX":"scaleY";if(ei(e))throw new Error(`Scale '${o}' received '${dl(t)}' and returned '${dl(e)}`)}(t,o,e),o}}function xl(t){return{type:"Polygon",coordinates:[[[t.x1,t.y1],[t.x2,t.y1],[t.x2,t.y2],[t.x1,t.y2],[t.x1,t.y1]]]}}function kl(t,e){if(e.transformation)throw new Error("Cannot nest coordinate transformations");return function({x1:t,x2:e,y1:n,y2:o},{finalScaleX:i,finalScaleY:r}){return{x1:i(t),x2:i(e),y1:r(n),y2:r(o)}}(hl(t,e),e)}function vl(t){let e,o=[{class:"content-background"},t[3],{fill:t[0]}],i={};for(let t=0;t<o.length;t+=1)i=n(i,o[t]);return{c(){e=b("rect"),T(e,i)},m(t,n){k(t,e,n)},p(t,n){T(e,i=ot(o,[{class:"content-background"},8&n[0]&&t[3],1&n[0]&&{fill:t[0]}]))},d(t){t&&v(e)}}}function bl(t){let e,o,i=[{class:"padding-background"},{mask:o=`url(#mask-${t[4]}-padding-bg)`},t[2],{fill:t[1]}],r={};for(let t=0;t<i.length;t+=1)r=n(r,i[t]);return{c(){e=b("rect"),T(e,r)},m(t,n){k(t,e,n)},p(t,n){T(e,r=ot(i,[{class:"padding-background"},{mask:o},4&n[0]&&t[2],2&n[0]&&{fill:t[1]}]))},d(t){t&&v(e)}}}function Ml(t){let e,o,i,r,s,a,c,l,h,f,y,p,g,m=[t[2]],M={};for(let t=0;t<m.length;t+=1)M=n(M,m[t]);let S=[t[2],{fill:"white"}],O={};for(let t=0;t<S.length;t+=1)O=n(O,S[t]);let C=[t[3],{fill:"black"}],P={};for(let t=0;t<C.length;t+=1)P=n(P,C[t]);let I=t[0]&&vl(t),N=t[1]&&bl(t);const A=t[43].default,W=u(A,t,t[42],null);return{c(){e=b("defs"),o=b("clipPath"),i=b("rect"),s=b("mask"),a=b("rect"),c=b("rect"),h=$(),f=b("g"),I&&I.c(),y=w(),N&&N.c(),p=w(),W&&W.c(),T(i,M),_(o,"id",r=`clip-${t[4]}`),T(a,O),T(c,P),_(s,"id",l=`mask-${t[4]}-padding-bg`),_(f,"class","section")},m(t,n){k(t,e,n),x(e,o),x(o,i),x(e,s),x(s,a),x(s,c),k(t,h,n),k(t,f,n),I&&I.m(f,null),x(f,y),N&&N.m(f,null),x(f,p),W&&W.m(f,null),g=!0},p(t,e){T(i,M=ot(m,[4&e[0]&&t[2]])),T(a,O=ot(S,[4&e[0]&&t[2],{fill:"white"}])),T(c,P=ot(C,[8&e[0]&&t[3],{fill:"black"}])),t[0]?I?I.p(t,e):(I=vl(t),I.c(),I.m(f,y)):I&&(I.d(1),I=null),t[1]?N?N.p(t,e):(N=bl(t),N.c(),N.m(f,p)):N&&(N.d(1),N=null),W&&W.p&&2048&e[1]&&d(W,A,t,t[42],e,null,null)},i(t){g||(Q(W,t),g=!0)},o(t){tt(W,t),g=!1},d(t){t&&v(e),t&&v(h),t&&v(f),I&&I.d(),N&&N.d(),W&&W.d(t)}}}let $l=0;function wl(t,e,n){let o,i,r,s,{$$slots:a={},$$scope:c}=e;const u="sc"+$l++;let{x1:h}=e,{x2:d}=e,{y1:f}=e,{y2:y}=e,{padding:p=0}=e,{scaleX:g}=e,{scaleY:m}=e,{flipX:x=!1}=e,{flipY:k=!1}=e,{zoomIdentity:v}=e,{transformation:b}=e,{blockReindexing:M=!1}=e,{backgroundColor:$}=e,{paddingColor:w}=e,{onClick:_}=e,{onWheel:T}=e,{onMousedown:S}=e,{onMouseup:O}=e,{onMouseover:C}=e,{onMouseout:P}=e,{onMousemove:I}=e,{onPinch:N}=e,{onTouchdown:A}=e,{onTouchmove:W}=e,{onTouchup:E}=e,{onTouchover:F}=e,{onTouchout:R}=e;const j=nn();l(t,j,(t=>n(46,i=t)));const Y=on();l(t,Y,(t=>n(48,s=t)));const z=L(sn);l(t,z,(t=>n(44,o=t)));const X=ln();l(t,X,(t=>n(47,r=t)));const D=new Qc;let q,H,G;return D.setId(u),D.linkEventManager(o),un(X,D),t.$$set=t=>{"x1"in t&&n(9,h=t.x1),"x2"in t&&n(10,d=t.x2),"y1"in t&&n(11,f=t.y1),"y2"in t&&n(12,y=t.y2),"padding"in t&&n(13,p=t.padding),"scaleX"in t&&n(14,g=t.scaleX),"scaleY"in t&&n(15,m=t.scaleY),"flipX"in t&&n(16,x=t.flipX),"flipY"in t&&n(17,k=t.flipY),"zoomIdentity"in t&&n(18,v=t.zoomIdentity),"transformation"in t&&n(19,b=t.transformation),"blockReindexing"in t&&n(20,M=t.blockReindexing),"backgroundColor"in t&&n(0,$=t.backgroundColor),"paddingColor"in t&&n(1,w=t.paddingColor),"onClick"in t&&n(21,_=t.onClick),"onWheel"in t&&n(22,T=t.onWheel),"onMousedown"in t&&n(23,S=t.onMousedown),"onMouseup"in t&&n(24,O=t.onMouseup),"onMouseover"in t&&n(25,C=t.onMouseover),"onMouseout"in t&&n(26,P=t.onMouseout),"onMousemove"in t&&n(27,I=t.onMousemove),"onPinch"in t&&n(28,N=t.onPinch),"onTouchdown"in t&&n(29,A=t.onTouchdown),"onTouchmove"in t&&n(30,W=t.onTouchmove),"onTouchup"in t&&n(31,E=t.onTouchup),"onTouchover"in t&&n(32,F=t.onTouchover),"onTouchout"in t&&n(33,R=t.onTouchout),"$$scope"in t&&n(42,c=t.$$scope)},t.$$.update=()=>{if(7680&t.$$.dirty[0]|32768&t.$$.dirty[1]&&n(45,q=kl({x1:h,x2:d,y1:f,y2:y},i)),2088960&t.$$.dirty[0]|212992&t.$$.dirty[1]){rn(Y,{sectionId:u,coordinates:q,scaleX:g,scaleY:m,padding:p,flipX:x,flipY:k,blockReindexing:M,transformation:b,zoomIdentity:v}),r.loadSection(s)}16384&t.$$.dirty[1]&&n(2,H=tl(q)),8192&t.$$.dirty[0]|16384&t.$$.dirty[1]&&n(3,G=el(q,p)),2011168768&t.$$.dirty[0]|7&t.$$.dirty[1]&&function(){if("mouse"===wn){const t=r.mouse().section();t.removeAllInteractions(),T&&t.addInteraction("wheel",T),_&&t.addInteraction("click",_),S&&t.addInteraction("mousedown",S),O&&t.addInteraction("mouseup",O),C&&t.addInteraction("mouseover",C),P&&t.addInteraction("mouseout",P),I&&t.addInteraction("mousemove",I)}if("touch"===wn){const t=r.touch().section();t.removeAllInteractions(),A&&t.addInteraction("touchdown",A),W&&t.addInteraction("touchmove",W),E&&t.addInteraction("touchup",E),F&&t.addInteraction("touchover",F),R&&t.addInteraction("touchout",R),N&&t.addInteraction("pinch",N)}}()},[$,w,H,G,u,j,Y,z,X,h,d,f,y,p,g,m,x,k,v,b,M,_,T,S,O,C,P,I,N,A,W,E,F,R,function(t){r.select().selectRectangle(t)},function(t){r.select().updateSelectRectangle(t)},function(){r.select().resetSelectRectangle()},function(t){r.select().startSelectPolygon(t)},function(t){r.select().addPointToSelectPolygon(t)},function(t){r.select().moveSelectPolygon(t)},function(){return r.select().getSelectPolygon()},function(){r.select().resetSelectPolygon()},c,a]}class _l extends lt{constructor(t){super(),ct(this,t,wl,Ml,a,{x1:9,x2:10,y1:11,y2:12,padding:13,scaleX:14,scaleY:15,flipX:16,flipY:17,zoomIdentity:18,transformation:19,blockReindexing:20,backgroundColor:0,paddingColor:1,onClick:21,onWheel:22,onMousedown:23,onMouseup:24,onMouseover:25,onMouseout:26,onMousemove:27,onPinch:28,onTouchdown:29,onTouchmove:30,onTouchup:31,onTouchover:32,onTouchout:33,selectRectangle:34,updateSelectRectangle:35,resetSelectRectangle:36,startSelectPolygon:37,addPointToSelectPolygon:38,moveSelectPolygon:39,getSelectPolygon:40,resetSelectPolygon:41},[-1,-1])}get selectRectangle(){return this.$$.ctx[34]}get updateSelectRectangle(){return this.$$.ctx[35]}get resetSelectRectangle(){return this.$$.ctx[36]}get startSelectPolygon(){return this.$$.ctx[37]}get addPointToSelectPolygon(){return this.$$.ctx[38]}get moveSelectPolygon(){return this.$$.ctx[39]}get getSelectPolygon(){return this.$$.ctx[40]}get resetSelectPolygon(){return this.$$.ctx[41]}}function Tl(t,e,n,o){return t||e?t&&!e?{nrows:t,ncolumns:Math.ceil(n/t)}:!t&&e?{nrows:Math.ceil(n/e),ncolumns:e}:{nrows:t,ncolumns:e}:function(t,e){let n=1,o=1;for(;n*o<t;){const t=(n+1)/o,i=n/(o+1);Math.abs(e-t)<Math.abs(e-i)?n++:o++}return{nrows:o,ncolumns:n}}(n,o)}function Sl(t,e,n,o,i){let r;const s=function(t,e,n){let o=n.y1;const i=[];if((t=Nl(t,"gridTemplateColumns")).constructor===String){const e=t.split(/\s/),o=Cl(e,n.y2-n.y1);for(const t of e)t.endsWith("px")?i.push(parseInt(t.slice(0,-2))):t.endsWith("fr")&&i.push(o*parseInt(t.slice(0,-2)))}else if(t.constructor===Array){const e=(n.y2-n.y1)/t.length;for(let n=0;n<t.length;n++)i.push(e)}else if(t.constructor===Number){const e=(n.y2-n.y1)/t;for(let n=0;n<t;n++)i.push(e)}const r=i.length,s=[];for(let t=0;t<r;t++)s.push({y1:o,y2:o+i[t]-e/2,x1:n.x1,x2:n.x2}),o=o+i[t]+e/2;return s}(t,n,i),a=s.length;let c=[];const l=[];let u=[];for(const t of s){const n=Ol(e,o,t);u=u.concat(n),l.push(t),c=n,r=n.length}return[u,l,c,a,r]}function Ol(t,e,n){let o=n.x1;const i=[];if((t=Nl(t,"gridTemplateColumns")).constructor===String){const e=t.split(/\s/),o=Cl(e,n.x2-n.x1);for(const t of e){const e=parseInt(t.slice(0,-2));t.endsWith("px")?i.push(e):t.endsWith("fr")&&i.push(o*e)}}else if(t.constructor===Array){const e=(n.x2-n.x1)/t.length;for(let n=0;n<t.length;n++)i.push(e)}else if(t.constructor===Number){const e=(n.x2-n.x1)/t;for(let n=0;n<t;n++)i.push(e)}const r=i.length,s=[];for(let t=0;t<r;t++)s.push({x1:o,x2:o+i[t]-e/2,y1:n.y1,y2:n.y2}),o=o+i[t]+e/2;return s}function Cl(t,e){let n=0;for(const o of t){const t=parseInt(o.slice(0,-2));o.endsWith("px")?e-=t:o.endsWith("fr")?n+=t:console.warn(`Grid cell size should be specified in -px or -fr. Ignoring input ${o}`)}return 0===n?0:e/n}function Pl(t,e,n){const o=t.length,i=e.length;if(o<i){console.warn("Cell names do not match up with number of cells specified, this may cause errors in your chart.");for(let e=0;e<i;e++)t[e]||t.push(e)}else o>i&&console.warn("Cell names do not match up with number of cells specified, this may cause errors in your chart.");const r={},s={};for(let o=0;o<i;o++){const i=t[o];if(void 0===i)r[o]=e[o];else if(i in r){r[i]=Il(i,r[i],e[o]);const t=Math.floor(o/n),a=o%n,c=s[i].endRow,l=s[i].endCol;s[i].endRow=t>c?t:c,s[i].endCol=a>l?a:l}else r[i]=e[o],s[i]={startRow:Math.floor(o/n),startCol:o%n,endRow:Math.floor(o/n),endCol:o%n}}return function(t,e,n){for(const o in t){const i=t[o],r=i.startRow,s=i.startCol,a=i.endRow,c=i.endCol;for(let t=r;t<=a;t++)for(let i=s;i<=c;i++){e[t*n+i]!==o&&console.warn(`Area ${o} may not be rectangular in prop gridTemplateAreas, this can cause errors in your chart.`)}}}(s,t,n),r}function Il(t,e,n){const o={};return o.x1=e.x1<n.x1?e.x1:n.x1,o.x2=e.x2>n.x2?e.x2:n.x2,o.y1=e.y1<n.y1?e.y1:n.y1,o.y2=e.y2>n.y2?e.y2:n.y2,o}function Nl(t,e){return t.constructor===String&&""===t?(console.warn(`Please specify at least one cell in ${e}. Automatically adding 1 cell to ${e}.`),"1fr"):t.constructor===Number&&0===t?(console.warn(`Please specify at least one cell in ${e}. Automatically adding 1 cell to ${e}.`),1):t.constructor===Number&&t%1!=0?(console.warn(`Please specify ${e} with integers only. Using rounded value ${Math.ceil(t)}.`),Math.ceil(t)):t.constructor===Array&&0===t.length?(console.warn(`Please specify at least one cell in ${e}. Automatically adding 1 cell to ${e}.`),[0]):-1===[Array,Number,String].indexOf(t.constructor)?(console.warn(`Please specify ${e} with Number, String or Array. Assuming 1 cell specified.`),1):t}const Al=t=>({cells:1&t}),Wl=t=>({cells:t[0]});function El(t){let e,n;const o=t[14].default,i=u(o,t,t[13],Wl);return{c(){e=b("g"),i&&i.c()},m(t,o){k(t,e,o),i&&i.m(e,null),n=!0},p(t,[e]){i&&i.p&&8193&e&&d(i,o,t,t[13],e,Al,Wl)},i(t){n||(Q(i,t),n=!0)},o(t){tt(i,t),n=!1},d(t){t&&v(e),i&&i.d(t)}}}function Ll(t,e,n){let o,{$$slots:i={},$$scope:r}=e,{x1:s}=e,{x2:a}=e,{y1:c}=e,{y2:u}=e,{rows:h}=e,{columns:d}=e,{rowGap:f=0}=e,{columnGap:y=0}=e,{names:p}=e,{viewGridTemplate:g=!1}=e,{viewGridShape:m=!1}=e;const x=nn();l(t,x,(t=>n(18,o=t)));let k,v,b,M,$,w,_,T,S,O=kl({x1:s,x2:a,y1:c,y2:u},o);return t.$$set=t=>{"x1"in t&&n(2,s=t.x1),"x2"in t&&n(3,a=t.x2),"y1"in t&&n(4,c=t.y1),"y2"in t&&n(5,u=t.y2),"rows"in t&&n(6,h=t.rows),"columns"in t&&n(7,d=t.columns),"rowGap"in t&&n(8,f=t.rowGap),"columnGap"in t&&n(9,y=t.columnGap),"names"in t&&n(10,p=t.names),"viewGridTemplate"in t&&n(11,g=t.viewGridTemplate),"viewGridShape"in t&&n(12,m=t.viewGridShape),"$$scope"in t&&n(13,r=t.$$scope)},t.$$.update=()=>{if(262204&t.$$.dirty&&n(15,O=kl({x1:s,x2:a,y1:c,y2:u},o)),32768&t.$$.dirty&&n(19,b=function({x1:t,x2:e,y1:n,y2:o}){return Math.abs(e-t)/Math.abs(o-n)}(O)),722112&t.$$.dirty){let t=Tl(h,d,p.length,b);if(n(16,k=t.nrows),n(17,v=t.ncolumns),k*v<p.length)throw new Error(`Not enough rows (${k}) and columns (${v}) for number of cells (${p.length})`)}230144&t.$$.dirty&&n(20,[M,$,w,_,T]=Sl(k,v,f,y,O),M,(n(21,$),n(16,k),n(17,v),n(8,f),n(9,y),n(15,O),n(6,h),n(7,d),n(10,p),n(19,b),n(2,s),n(3,a),n(4,c),n(5,u),n(18,o)),(n(22,w),n(16,k),n(17,v),n(8,f),n(9,y),n(15,O),n(6,h),n(7,d),n(10,p),n(19,b),n(2,s),n(3,a),n(4,c),n(5,u),n(18,o)),(n(23,_),n(16,k),n(17,v),n(8,f),n(9,y),n(15,O),n(6,h),n(7,d),n(10,p),n(19,b),n(2,s),n(3,a),n(4,c),n(5,u),n(18,o)),(n(24,T),n(16,k),n(17,v),n(8,f),n(9,y),n(15,O),n(6,h),n(7,d),n(10,p),n(19,b),n(2,s),n(3,a),n(4,c),n(5,u),n(18,o))),6293504&t.$$.dirty&&g&&function(t,e){let n,o,i="",r="",s="",a="";for(const t of e){n=t.x2-t.x1;const e=Math.round(n).toString()+"px",o=e.length;r=r+"-- "+e+" --|",s=s+"---"+new Array(o+1).join("-")+"---|",a=a+"   "+new Array(o+1).join(" ")+"   |"}i=r+"\n";for(const e of t){o=e.y2-e.y1;const t=Math.round(o).toString()+"px",n=t.length,r=a.substring(1)+"\n";i=i+"|"+r+t+a.substring(n)+"\n|"+r+s+"\n"}console.log(i)}($,w),25169920&t.$$.dirty&&m&&console.log("rows:",_," columns:",T),17826816&t.$$.dirty&&n(0,S=Pl(p,M,T))},[S,x,s,a,c,u,h,d,f,y,p,g,m,r,i]}class Fl extends lt{constructor(t){super(),ct(this,t,Ll,El,a,{x1:2,x2:3,y1:4,y2:5,rows:6,columns:7,rowGap:8,columnGap:9,names:10,viewGridTemplate:11,viewGridShape:12})}}var Rl={x:{required:!1},y:{required:!1},geometry:{required:!1},radius:{required:!1,default:3},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},jl={x1:{required:!1},x2:{required:!1},y1:{required:!1},y2:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},Yl={x:{required:!1},y:{required:!1},geometry:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},zl={x:{required:!1},y:{required:!1},geometry:{required:!1},strokeWidth:{required:!1,default:3},stroke:{required:!1,default:"black"},opacity:{required:!1,default:1}},Xl={x:{required:!1},y:{required:!1},geometry:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1},text:{required:!1},fontFamily:{required:!1,default:"Helvetica"},fontSize:{required:!1,default:16},fontWeight:{required:!1,default:"normal"},rotation:{required:!1,default:0},anchorPoint:{required:!1,default:"center"}},Dl={x:{required:!1},y:{required:!1},geometry:{required:!1},shape:{required:!1},size:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},ql={x1:{required:!1},x2:{required:!1},y1:{required:!1},y2:{required:!1},independentAxis:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},strokeOpacity:{required:!1},fillOpacity:{required:!1},opacity:{required:!1,default:1}};function Hl(t,e){return"Point"===t?Gl(e,Rl):"Rectangle"===t?Gl(e,jl):"Polygon"===t?Gl(e,Yl):"Line"===t?Gl(e,zl):"Label"===t?Gl(e,Xl):"Symbol"===t?Gl(e,Dl):"Area"===t?Gl(e,ql):void 0}function Gl(t,e){const n={};for(const o in t){const i=t[o],r=e[o];if(ni(i)){if(!(o in e))throw Bl(o);n[o]=i}if(oi(i)&&o in e){if(r.required)throw Zl(o);ni(r.default)?n[o]=r.default:n[o]=i}}return n}const Bl=t=>new Error(`Aesthetic '${t}' not allowed`),Zl=t=>new Error(`Required aesthetic '${t}' is missing`);function Vl({x:t,y:e,geometry:n},o){if(!(ni(t)&&ni(e)&&oi(n)||oi(t)&&oi(e)&&ni(n)))throw new Error(`${o}: Invalid combination of 'x', 'y', and 'geometry' props`)}function Jl({x:t,y:e,geometry:n}){return oi(n)?"xy":ni(n)?"geometry":void 0}function Kl(t){return t.constructor!==Function}function Ul(t,e,n){Vl(t);const o=Jl(t);if("xy"===o){const o=Kl(t.x),i=Kl(t.y);return Fi({type:"Point",x:o?t.x:t.x(e),y:i?t.y:t.y(e)},e.getTotalTransformation({xNeedsScaling:o,yNeedsScaling:i}),n)}if("geometry"===o){const o=Kl(t.geometry);return Fi(o?t.geometry:t.geometry(e),e.getTotalTransformation(o),n)}}function Ql({x:t,y:e},n,o,i,r){tu(t,e);const s=function(t,e,n){return{type:n,x:t,y:e}}(t,e,i),a="polar"===n.transformation&&!0===o.interpolate;if(a){const t=n.getScaleTransformation(r);return qi(s,n,{scaleTransformation:t,postScaleTransformation:n.postScaleTransformation},o)}if(!a){return Fi(s,n.getTotalTransformation(r),o)}}function tu(t,e){if(t.constructor!==Array)throw new Error("'x' prop must be Array or function that returns array");if(e.constructor!==Array)throw new Error("'y' prop must be Array or function that returns array");if(t.length!==e.length)throw new Error("Arrays passed to 'x' and 'y' must have the same length")}function eu({x:t,y:e},n,o,i,r,s){tu(t,e);const a=cl(n,t.length),c={};for(let n=0;n<a.length;n++){c[a[n]]=Ql({x:t[n],y:e[n]},o,i,r,s)}return c}var nu={cross:[[-.5,-1],[.5,-1],[.5,-.5],[1,-.5],[1,.5],[.5,.5],[.5,1],[-.5,1],[-.5,.5],[-1,.5],[-1,-.5],[-.5,-.5],[-.5,-1],[-.5,-1]],"cross-sharp":[[0,-1],[.2,-.2],[1,0],[.2,.2],[0,1],[-.2,.2],[-1,0],[-.2,-.2],[0,-1]],diamond:[[0,-1],[1,0],[0,1],[-1,0],[0,-1],[0,-1]],"triangle-up":[[0,-1],[1,1],[-1,1],[0,-1],[0,-1]],"triangle-down":[[1,-1],[0,1],[-1,-1],[1,-1],[1,-1]],"triangle-right":[[-1,-1],[1,0],[-1,1],[-1,-1],[-1,-1]],"triangle-left":[[1,-1],[-1,0],[1,1],[1,-1],[1,-1]],star4:[[0,.71],[1,1],[.71,0],[1,-1],[0,-.71],[-1,-1],[-.71,0],[-1,1],[0,.71],[0,.71]],star5:[[0,.5],[.6,.8],[.5,.1],[1,-.3],[.3,-.4],[0,-1],[-.3,-.4],[-1,-.3],[-.5,.1],[-.6,.8],[0,.5],[0,.5]],star:[[0,.5],[.6,.8],[.5,.1],[1,-.3],[.3,-.4],[0,-1],[-.3,-.4],[-1,-.3],[-.5,.1],[-.6,.8],[0,.5],[0,.5]],star6:[[0,.58],[.5,1],[.43,.29],[1,0],[.43,-.29],[.5,-1],[0,-.58],[-.5,-1],[-.43,-.29],[-1,0],[-.43,.29],[-.5,1],[0,.58]],star8:[[0,.54],[.41,1],[.38,.38],[1,.41],[.54,0],[1,-.41],[.38,-.38],[.41,-1],[0,-.54],[-.41,-1],[-.38,-.38],[-1,-.41],[-.54,0],[-1,.41],[-.38,.38],[-.41,1],[0,.54]],pentagon:[[-1,-.24],[0,-1],[1,-.24],[.62,1],[-.62,1],[-1,-.24],[-1,-.24]],hexagon:[[-1,0],[-.57,-1],[.57,-1],[1,0],[.57,1],[-.57,1],[-1,0],[-1,0]],heptagon:[[-1,.29],[-.8,-.6],[0,-1],[.8,-.6],[1,.29],[.45,1],[-.45,1],[-1,.29],[-1,.29]],septagon:[[-1,.29],[-.8,-.6],[0,-1],[.8,-.6],[1,.29],[.45,1],[-.45,1],[-1,.29],[-1,.29]],octagon:[[-1,-.41],[-.41,-1],[.41,-1],[1,-.41],[1,.41],[.41,1],[-.41,1],[-1,.41],[-1,-.41],[-1,-.41]],nonagon:[[.35,-1],[.88,-.55],[1,.15],[.65,.76],[0,1],[-.65,.76],[-1,.15],[-.88,-.55],[-.35,-1],[.35,-1],[.35,-1]],decagon:[[-1,0],[-.81,-.62],[-.31,-1],[.31,-1],[.81,-.62],[1,0],[.81,.62],[.31,1],[-.31,1],[-.81,.62],[-1,0],[-1,0]]};function ou(t,{radius:e}){const n=t.coordinates[0],o=t.coordinates[1],i=2*Math.PI*e,r=Math.max(Math.ceil(i),9),s={type:"Polygon",coordinates:[[]]};for(let t=0;t<r;t++)s.coordinates[0].push([n+e*Math.cos(Math.PI*t/r*2-Math.PI/2),o+e*Math.sin(Math.PI*t/r*2-Math.PI/2)]);return s.coordinates[0].push(s.coordinates[0][0]),s}function iu(t,e){const[n,o]=t.coordinates,i=e.shape||"circle",r=e.size||8;if("circle"===i)return function(t,e,n){return ou({type:"Point",coordinates:[t,e]},{radius:n/2})}(n,o,r);if("square"===i)return function(t,e,n){const o=n/2;return xl({x1:t-o,x2:t+o,y1:e-o,y2:e+o})}(n,o,r);if(i in nu){return ru(n,o,{type:"Polygon",coordinates:[nu[i]]},r)}return ru(n,o,i,r)}function ru(t,e,n,o){const i=o/2;return Fi(n,(n=>[n[0]*i+t,n[1]*i+e]))}function su(t){const{independentAxis:e,...n}=t,o=["singleton","array"],i=Object.entries(n).filter((([t,e])=>o.includes(e.type))).reduce(((t,[e,o])=>(t[e]=n[e],t)),{}),r=Object.keys(i);if(!["x1","y1"].every((t=>r.includes(t))))throw new Error("At least x1 and y1 must be provided");if("singleton"===i.x1.type&&"singleton"===i.y1.type)throw new Error("At least x1 or y1 must be passed an array");if(e&&"x"!==e){if("y"!==e)throw new Error('independentAxis must be passed "x" or "y" or left blank');if("singleton"===i.y1.type||"array"===i.y1.type&&i.y1.arrayLength<2)throw new Error('y1 must be passed an array of at least length 2 when independentAxis is "y"');if(r.includes("y2"))throw new Error('independentAxis must be "x" when x1, y1 and y2 are specified')}else{if("singleton"===i.x1.type||"array"===i.x1.type&&i.x1.arrayLength<2)throw new Error('x1 must be passed an array of at least length 2 when independentAxis is "x" or undefined');if(r.includes("x2"))throw new Error('independentAxis must be "y" when x1, y1 and x2 are specified')}if(!Object.values(i).filter((t=>"array"===t.type)).map((t=>t.value.length)).every(((t,e,n)=>t===n[0])))throw new Error("Arrays given must be of equal length");return t}function au({independentAxis:t,x1:e,y1:n,x2:o,y2:i}){const r=t&&"x"!==t?"y":"x",[s,a]="x"===r?["x1",e]:["y1",n],[c,l]="x"===r?["y1",n]:["x1",e],[u,h]="x"===r?["y2",i]:["x2",o],d=a.arrayLength,f={singleton:{value:Array(d).fill(l.value),type:"array",arrayLength:d},array:l},y={singleton:{value:Array(d).fill(h.value),type:"array",arrayLength:d},none:{value:Array(d).fill(0),type:"array",arrayLength:d},array:h};return{independentAxis:r,[s]:a,[c]:f[l.type],[u]:y[h.type]}}const cu={x1:"scaleX",y1:"scaleY",x2:"scaleX",y2:"scaleY"};function lu({independentAxis:t,...e},n){return{independentAxis:t,...Object.entries(e).reduce(((t,[e,o])=>{if(o.scaled)t[e]=o.value;else{const i=n[cu[e]];t[e]=o.value.map((t=>i(t)))}return t}),{})}}function uu({x1:t,y1:e,x2:n,y2:o,independentAxis:i}){let r,s;"x"===i?(r=o.map(((e,n)=>[t[n],e])),s=e.map(((e,n)=>[t[n],e])).reverse()):(r=n.map(((t,n)=>[t,e[n]])),s=t.map(((t,n)=>[t,e[n]])).reverse());const a=[r[0]];return{type:"Polygon",coordinates:[r.concat(s,a)]}}function hu(t,e,n,o){Vl(t);const i=Jl(t);return"xy"===i?function({x:t,y:e},n,o,i){!function(t,e){if(![Array,Function].includes(t.constructor))throw new Error("'x' prop must be Array or Function");if(![Array,Function].includes(e.constructor))throw new Error("'y' prop must be Array or Function")}(t,e);const r=Kl(t),s=Kl(e),a=r?t:t(o),c=s?e:e(o),{xArray:l,yArray:u}=function(t,e){if(t.constructor!==Array&&e.constructor!==Array)throw new Error("Invalid input: cannot recycle all geometry props");return{xArray:t.constructor===Array?t:du(t,e.length),yArray:e.constructor===Array?e:du(e,t.length)}}(a,c);tu(l,u);const h=cl(n,l.length),d=o.getTotalTransformation({xNeedsScaling:r,yNeedsScaling:s});return function(t,e,n,o){const i={};for(let r=0;r<n.length;r++){i[n[r]]={type:"Point",coordinates:o([t[r],e[r]])}}return i}(l,u,h,d)}(t,e,n):"geometry"===i?function(t,e,n,o){!function(t){if(![Array,Function].includes(t.constructor))throw new Error("'geometry' prop must be Array or Function")}(t.geometry);const i=Kl(t.geometry),r=i?t.geometry:t.geometry(n),s=cl(e,r.length),a=n.getTotalTransformation(i);return function(t,e,n){const o={};for(let i=0;i<e.length;i++){o[e[i]]={type:"Point",coordinates:n(t[i].coordinates)}}return o}(r,s,a)}(t,e,n):void 0}function du(t,e){return new Array(e).fill(t)}function fu(t,e){return new Array(e).fill(t)}const yu=["x1","x2","y1","y2"];const pu={x1:"minX",x2:"maxX",y1:"minY",y2:"maxY"};function gu(t,e){return e.paddedBbox[pu[t]]}const mu=new Error("RectangleLayer: invalid coordinate specification");function xu(t,e,n,o,i){const r={};for(const s in t){const a=t[s];let c;const l=s.startsWith("x")?e.scaleX:e.scaleY;o[s]&&(c=fu(a,i)),o[s]||(c=a),r[s]=n[s]?c.map(l):c}return r}function ku(t,e){if(void 0===t)return()=>{};if(t.constructor===Function)return t;const n=function(t,e){const n=e.length,o={};if(t.constructor===Array){!function(t,e){if(t.length!==e)throw new Error("If provided as Arrays, all positioning props must be the same length")}(t,n);for(let i=0;i<n;i++){o[e[i]]=t[i]}}else for(let i=0;i<n;i++){o[e[i]]=t}return o}(t,e);return t=>n[t]}const vu=new Proxy({Point:Ul,Rectangle:function(t,e,n){return ll(xl(hl(t,e)),e,n,!1)},Polygon:function(t,e,n){Vl(t);const o=Jl(t);if("xy"===o){const o=Kl(t.x),i=Kl(t.y);return Ql({x:o?t.x:t.x(e),y:i?t.y:t.y(e)},e,n,"Polygon",{xNeedsScaling:o,yNeedsScaling:i})}if("geometry"===o){const o=Kl(t.geometry);return ll(o?t.geometry:t.geometry(e),e,n,o)}},Line:function(t,e,n){Vl(t);const o=Jl(t);if("xy"===o){const o=Kl(t.x),i=Kl(t.y);return Ql({x:o?t.x:t.x(e),y:i?t.y:t.y(e)},e,n,"LineString",{xNeedsScaling:o,yNeedsScaling:i})}if("geometry"===o){const o=Kl(t.geometry);return ll(o?t.geometry:t.geometry(e),e,n,o)}},Label:Ul,Symbol:function(t,e,n){return iu(Ul(t,e,n),t)},Area:function(t,e,n){return ll(uu(lu(au(su(function({independentAxis:t,...e},n){const o=Object.entries(e).reduce(((t,[e,o])=>{const i="function"==typeof o?o(n):o;return t[e]={type:void 0===i?"none":Array.isArray(i)?"array":"singleton",...Array.isArray(i)&&{arrayLength:i.length},value:i,scaled:"function"==typeof o},t}),{});return o.independentAxis=t&&t.toLowerCase(),o}((({x1:t,y1:e,x2:n,y2:o,independentAxis:i})=>({x1:t,y1:e,x2:n,y2:o,independentAxis:i}))(t),e))),e)),e,n,!1)}},{get:(t,e)=>{if(e in t)return t[e];throw new Error(`Invalid Mark type: '${e}'`)}}),bu=new Proxy({Point:hu,Rectangle:function(t,e,n,o){const{scaledCoordinates:i,length:r}=function(t,e){fl(t);const n=function(t){const e={};for(const n of yu){const o=t[n];e[n]=ni(o)&&o.constructor!==Function}return e}(t),o=function(t,e){const n={};for(const o in t){const i=t[o];i.constructor===Function?n[o]=i(e):n[o]=i}return n}(function(t,e){const n={};for(const o of yu){const i=t[o];n[o]=oi(i)?gu(o,e):i}return n}(t,e),e),i=function(t){let e,n=!1;for(const o in t){const i=t[o];if(i.constructor===Array&&(n=!0,e=e||i.length,e!==i.length))throw mu}if(!n)throw mu;return e}(o),r=function(t){const e={};for(const n in t){const o=t[n];e[n]=o.constructor!==Array}return e}(o);return{scaledCoordinates:xu(o,e,n,r,i),length:i}}(t,n);return ul(function(t,e){const n=[];for(let o=0;o<e;o++)n.push(xl({x1:t.x1[o],x2:t.x2[o],y1:t.y1[o],y2:t.y2[o]}));return n}(i,r),e,n,o,!1)},Polygon:function(t,e,n,o){Vl(t);const i=Jl(t);if("xy"===i){const i=Kl(t.x),r=Kl(t.y);return eu({x:i?t.x:t.x(n),y:r?t.y:t.y(n)},e,n,o,"Polygon",{xNeedsScaling:i,yNeedsScaling:r})}if("geometry"===i){const i=Kl(t.geometry);return ul(i?t.geometry:t.geometry(n),e,n,o,i)}},Line:function(t,e,n,o){Vl(t);const i=Jl(t);if("xy"===i){const i=Kl(t.x),r=Kl(t.y);return eu({x:i?t.x:t.x(n),y:r?t.y:t.y(n)},e,n,o,"LineString",{xNeedsScaling:i,yNeedsScaling:r})}if("geometry"===i){const i=Kl(t.geometry);return ul(i?t.geometry:t.geometry(n),e,n,o,i)}},Label:hu,Symbol:function(t,e,n,o){return function(t,e){const n=Object.keys(t),o=ku(e.shape,n),i=ku(e.size,n),r={};for(const e in t){const n=o(e),s=i(e);r[e]=iu(t[e],{shape:n,size:s})}return r}(hu(t,e,n),t)},Area:function(t,e,n,o){const i=(({x1:t,y1:e,x2:n,y2:o,independentAxis:i})=>({x1:t,y1:e,x2:n,y2:o,independentAxis:i}))(t),{numAreas:r,independentAxis:s,...a}=function({numAreas:t,independentAxis:e,x1:n,y1:o,x2:i,y2:r}){const s=e&&"x"!==e?"y":"x",[a,c]="x"===s?["x1",n]:["y1",o],[l,u]="x"===s?["x2",i]:["y2",r],[h,d]="x"===s?["y1",o]:["x1",n],[f,y]="x"===s?["y2",r]:["x2",i],p={array:{value:Array(t).fill(c.value),type:"array of arrays",numAreas:t,scaled:c.scaled},"array of arrays":c};return{numAreas:t,independentAxis:s,[a]:p[c.type],[l]:u,[h]:d,[f]:y}}(function(t){const{independentAxis:e,...n}=t,{x1:o,x2:i,y1:r,y2:s}=n;Object.values(n).forEach((t=>{if("singleton"===t.type)throw new Error("Props passed to the AreaLayer must be either an array or an array of arrays")}));const a=e&&"x"!==e?"y":"x",[c,l]="x"===a?["y1",r]:["x1",o],[u,h]="x"===a?["y2",s]:["x2",i];if("array"===l.type||"array"===h.type)throw new Error(`${c} and ${u} must be passed an array of arrays when independentAxis is "${a}"`);const d=Object.values(n).filter((t=>"array of arrays"===t.type)).map((t=>t.numAreas));if(!d.every(((t,e,n)=>t===n[0])))throw new Error("Number of areas declared per prop must be equal");return{numAreas:d[0],independentAxis:e,...t}}(function({independentAxis:t,...e},n){const o=Object.entries(e).reduce(((t,[e,o])=>{const i="function"==typeof o?o(n):o,r=t=>void 0===t,s=t=>!r(t)&&!Array.isArray(t),a=t=>!r(t)&&!s(t)&&t.every((t=>Array.isArray(t)));return t[e]={type:r(i)?"none":s(i)?"singleton":a(i)?"array of arrays":"array",...a(i)&&{numAreas:i.length},value:i,scaled:"function"==typeof o},t}),{});return o.independentAxis=t&&t.toLowerCase(),o}(i,n)));return ul([...Array(r).keys()].map((t=>Object.entries(a).reduce(((e,[n,o])=>{const i="array of arrays"===o.type;return e[n]={type:i?"array":"none",value:i?o.value[t]:o.value,...i&&{arrayLength:o.value[t].length},scaled:o.scaled},e.independentAxis=s,e}),{}))).map((t=>uu(lu(au(su(t)),n)))),e,n,o,!1)}},{get:(t,e)=>{if(e in t)return t[e];throw new Error(`Invalid Layer type: '${e}'`)}});function Mu(t,{strokeWidth:e}){const n=t.coordinates;if("LineString"===t.type){return{type:"Polygon",coordinates:[$u(n,e)]}}if("MultiLineString"===t.type){const t=[];for(let o=0;o<n.length;o++)t.push([$u(n[o],e)]);return{type:"MultiPolygon",coordinates:t}}}function $u(t,e){const n=t.length,o=n-1,i=e/2,r=new Array(n),s=new Array(n);for(let e=0;e<n;e++){if(0===e){const[e,n]=wu(t,i);r[0]=e,s[o]=n}if(e===o){const[e,n]=_u(t,i);r[o]=e,s[0]=n}if(e>0&&e<o){const[n,a]=Tu(t,e,i);r[e]=n,s[o-e]=a}}const a=r.concat(s);return function(t){const e=t[0],n=t[t.length-1];return!(e[0]===n[0]&&e[1]===n[1])}(a)&&a.push(a[0]),a}function wu(t,e){const n=Ou(0,t);return Iu(n,n[0],e)}function _u(t,e){const n=Su(t.length-1,t);return Iu(n,n[1],e)}function Tu(t,e,n){const o=Su(e,t),i=Ou(e,t),r=Cu(o),s=Cu(i);if(r[0]===s[0]&&r[1]===s[1]){return Iu(o,o[1],n)}{const t=Iu(o,o[0],n),e=Iu(i,i[1],n);return[Nu(t[0],r,e[0],s),Nu(t[1],r,e[1],s)]}}const Su=(t,e)=>[e[t-1],e[t]],Ou=(t,e)=>[e[t],e[t+1]];function Cu(t){const[e,n]=t,o=di(e,n);return[(n[0]-e[0])/o,(n[1]-e[1])/o]}function Pu(t,e,n){return[t[0]+e[0]*n,t[1]+e[1]*n]}function Iu(t,e,n){const o=Cu(t),i=[-(r=o)[1],r[0]];var r;return[Pu(e,i,n),Pu(e,i,-n)]}function Nu(t,e,n,o){const i=function(t,e,n,o){const i=t[0]-n[0],r=t[1]-n[1],s=e[0],a=o[0],c=e[1],l=o[1];return(a*r-i*l)/(s*l-a*c)}(t,e,n,o);return[t[0]+e[0]*i,t[1]+e[1]*i]}const Au={Point:ou,Line:Mu},Wu={Point:function(t,{radiusObject:e}){const n={};for(const o in t)n[o]=ou(t[o],{radius:e[o]});return n},Line:function(t,{strokeWidthObject:e}){const n={};for(const o in t)n[o]=Mu(t[o],{strokeWidth:e[o]});return n}};function Eu(t,e,n,o){const i={markId:e};let r;return"Point"===t&&(r={pixelGeometry:n.pixelGeometry,radius:o.radius}),"Label"===t&&(r={pixelGeometry:n.pixelGeometry,radius:o.fontSize}),"Rectangle"===t&&(r={screenGeometry:n.screenGeometry}),"Polygon"===t&&(r={screenGeometry:n.screenGeometry}),"Line"===t&&(r={pixelGeometry:n.pixelGeometry,strokeWidth:o.strokeWidth}),"Symbol"===t&&(r={screenGeometry:n.screenGeometry}),"Area"===t&&(r={screenGeometry:n.screenGeometry}),i.attributes=r,i}function Lu(t){const e=t-1;return e*e*e+1}function Fu(t){return"[object Date]"===Object.prototype.toString.call(t)}function Ru(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map(((e,n)=>Ru(t[n],e)));return t=>n.map((e=>e(t)))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(Fu(t)&&Fu(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),o={};return n.forEach((n=>{o[n]=Ru(t[n],e[n])})),t=>{const e={};return n.forEach((n=>{e[n]=o[n](t)})),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}function ju(t,o={}){const i=ht(t);let r,s=t;function a(a,c){if(null==t)return i.set(t=a),Promise.resolve();s=a;let l=r,u=!1,{delay:h=0,duration:d=400,easing:f=e,interpolate:x=Ru}=n(n({},o),c);if(0===d)return l&&(l.abort(),l=null),i.set(t=s),Promise.resolve();const k=y()+h;let v;return r=function(t){let e;return 0===g.size&&p(m),{promise:new Promise((n=>{g.add(e={c:t,f:n})})),abort(){g.delete(e)}}}((e=>{if(e<k)return!0;u||(v=x(t,a),"function"==typeof d&&(d=d(t,a)),u=!0),l&&(l.abort(),l=null);const n=e-k;return n>d?(i.set(t=a),!1):(i.set(t=v(f(n/d))),!0)})),r.promise}return{set:a,update:(e,n)=>a(e(s,t),n),subscribe:i.subscribe}}function Yu(t,e,n){if(oi(n)||oi(e))return ht(e);if(n.constructor===Number){return ju(e,zu(t,n))}if(n.constructor===Object){if(!(t in n))return ht(e);const o=n[t];if(o&&o.constructor===Number){return ju(e,zu(t,o))}if(o&&o.constructor===Object){return ju(e,function(t,e){if("geometry"===t){const t={delay:0,duration:400,easing:Lu,interpolate:va};return Object.assign(t,e)}{const t={delay:0,duration:400,easing:Lu,interpolate:ve};return Object.assign(t,e)}}(t,o))}}throw new Error(`Invalid transition for ${t}`)}function zu(t,e){return"geometry"===t?{duration:e,easing:Lu,interpolate:va}:{duration:e,easing:Lu,interpolate:ve}}function Xu(t,e){return void 0===t||void 0===e||t.constructor!==Object?t===e:function(t,e){if(e.constructor!==Object)return!1;if(qu(t)!==qu(e))return!1;for(const n in t){const o=t[n],i=e[n];if(o.constructor!==Object)return o===i;if(!Du(o,i))return!1}return!0}(t,e)}function Du(t,e){if(e.constructor!==Object)return!1;if(qu(t)!==qu(e))return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function qu(t){return Object.keys(t).length}function Hu(t,e,n){if(oi(n)||oi(e))return ht(e);if(n.constructor===Number){return ju(e,Gu(t,n))}if(n.constructor===Object){if(!(t in n))return ht(e);const o=n[t];if(o&&o.constructor===Number){return ju(e,Gu(t,o))}if(o&&o.constructor===Object){return ju(e,function(t,e){return"geometry"===t?Object.assign({interpolate:ba},e):Object.assign({interpolate:Bu},e)}(t,o))}}throw new Error(`Invalid transition for ${t}`)}function Gu(t,e){return"geometry"===t?{duration:e,easing:Lu,interpolate:ba}:{duration:e,easing:Lu,interpolate:Bu}}function Bu(t,e){const n={};for(const o in t)o in e&&(n[o]=t[o]);return ve(n,e)}function Zu(...t){for(const e of t)if(void 0!==e)return!0;return!1}function Vu(t){return Object.assign({simplify:!1,simplificationTreshold:1,interpolate:!0,interpolationTreshold:5,decimals:2},t)}const Ju=ti();function Ku(t){return Ju(t)}function Uu(t){switch(t){case"center":return{textAnchor:"middle",dominantBaseline:"middle"};case"lb":return{textAnchor:"start",dominantBaseline:"alphabetic"};case"lt":return{textAnchor:"start",dominantBaseline:"hanging"};case"rt":return{textAnchor:"end",dominantBaseline:"hanging"};case"rb":return{textAnchor:"end",dominantBaseline:"alphabetic"};case"l":return{textAnchor:"start",dominantBaseline:"middle"};case"r":return{textAnchor:"end",dominantBaseline:"middle"};case"b":return{textAnchor:"middle",dominantBaseline:"alphabetic"};case"t":return{textAnchor:"middle",dominantBaseline:"hanging"};default:return{textAnchor:"middle",dominantBaseline:"middle"}}}function Qu(t){let e,n,o,i,r=t[28]&&th(t),s=t[29]&&eh(t),a=t[30]&&nh(t),c=t[31]&&oh(t);return{c(){r&&r.c(),e=$(),s&&s.c(),n=$(),a&&a.c(),o=$(),c&&c.c(),i=w()},m(t,l){r&&r.m(t,l),k(t,e,l),s&&s.m(t,l),k(t,n,l),a&&a.m(t,l),k(t,o,l),c&&c.m(t,l),k(t,i,l)},p(t,l){t[28]?r?r.p(t,l):(r=th(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),t[29]?s?s.p(t,l):(s=eh(t),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),t[30]?a?a.p(t,l):(a=nh(t),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null),t[31]?c?c.p(t,l):(c=oh(t),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},d(t){r&&r.d(t),t&&v(e),s&&s.d(t),t&&v(n),a&&a.d(t),t&&v(o),c&&c.d(t),t&&v(i)}}}function th(t){let e,n,o,i;return{c(){e=b("path"),_(e,"clip-path",n=t[2]?`url(#clip-${t[17].sectionId})`:"none"),_(e,"class",o=t[0].toLowerCase()),_(e,"d",i=Ku(t[18])),_(e,"fill",t[20]),_(e,"stroke",t[21]),_(e,"stroke-width",t[22]),_(e,"fill-opacity",t[23]),_(e,"stroke-opacity",t[24]),_(e,"opacity",t[25])},m(t,n){k(t,e,n)},p(t,r){131076&r[0]&&n!==(n=t[2]?`url(#clip-${t[17].sectionId})`:"none")&&_(e,"clip-path",n),1&r[0]&&o!==(o=t[0].toLowerCase())&&_(e,"class",o),262144&r[0]&&i!==(i=Ku(t[18]))&&_(e,"d",i),1048576&r[0]&&_(e,"fill",t[20]),2097152&r[0]&&_(e,"stroke",t[21]),4194304&r[0]&&_(e,"stroke-width",t[22]),8388608&r[0]&&_(e,"fill-opacity",t[23]),16777216&r[0]&&_(e,"stroke-opacity",t[24]),33554432&r[0]&&_(e,"opacity",t[25])},d(t){t&&v(e)}}}function eh(t){let e,n,o,i;return{c(){e=b("circle"),_(e,"clip-path",n=t[2]?`url(#clip-${t[17].sectionId})`:"none"),_(e,"class","point"),_(e,"cx",o=t[18].coordinates[0]),_(e,"cy",i=t[18].coordinates[1]),_(e,"r",t[19]),_(e,"fill",t[20]),_(e,"stroke",t[21]),_(e,"stroke-width",t[22]),_(e,"fill-opacity",t[23]),_(e,"stroke-opacity",t[24]),_(e,"opacity",t[25])},m(t,n){k(t,e,n)},p(t,r){131076&r[0]&&n!==(n=t[2]?`url(#clip-${t[17].sectionId})`:"none")&&_(e,"clip-path",n),262144&r[0]&&o!==(o=t[18].coordinates[0])&&_(e,"cx",o),262144&r[0]&&i!==(i=t[18].coordinates[1])&&_(e,"cy",i),524288&r[0]&&_(e,"r",t[19]),1048576&r[0]&&_(e,"fill",t[20]),2097152&r[0]&&_(e,"stroke",t[21]),4194304&r[0]&&_(e,"stroke-width",t[22]),8388608&r[0]&&_(e,"fill-opacity",t[23]),16777216&r[0]&&_(e,"stroke-opacity",t[24]),33554432&r[0]&&_(e,"opacity",t[25])},d(t){t&&v(e)}}}function nh(t){let e,n,o;return{c(){e=b("path"),_(e,"clip-path",n=t[2]?`url(#clip-${t[17].sectionId})`:"none"),_(e,"class","line"),_(e,"d",o=Ku(t[18])),_(e,"fill","none"),_(e,"stroke-width",t[22]),_(e,"stroke",t[21]),_(e,"opacity",t[25])},m(t,n){k(t,e,n)},p(t,i){131076&i[0]&&n!==(n=t[2]?`url(#clip-${t[17].sectionId})`:"none")&&_(e,"clip-path",n),262144&i[0]&&o!==(o=Ku(t[18]))&&_(e,"d",o),4194304&i[0]&&_(e,"stroke-width",t[22]),2097152&i[0]&&_(e,"stroke",t[21]),33554432&i[0]&&_(e,"opacity",t[25])},d(t){t&&v(e)}}}function oh(t){let e,n,o,i,r,s,a,c,l=t[3].text+"";return{c(){e=b("text"),n=M(l),_(e,"clip-path",o=t[2]?`url(#clip-${t[17].sectionId})`:"none"),_(e,"class","label"),_(e,"x",i=t[18].coordinates[0]),_(e,"y",r=t[18].coordinates[1]),_(e,"fill",t[20]),_(e,"stroke",t[21]),_(e,"stroke-width",t[22]),_(e,"fill-opacity",t[23]),_(e,"stroke-opacity",t[24]),_(e,"opacity",t[25]),_(e,"transform",t[15]),_(e,"font-family",t[1]),_(e,"font-size",s=t[26]+"px"),_(e,"font-weight",t[27]),_(e,"text-anchor",a=t[16].textAnchor),_(e,"dominant-baseline",c=t[16].dominantBaseline)},m(t,o){k(t,e,o),x(e,n)},p(t,u){8&u[0]&&l!==(l=t[3].text+"")&&S(n,l),131076&u[0]&&o!==(o=t[2]?`url(#clip-${t[17].sectionId})`:"none")&&_(e,"clip-path",o),262144&u[0]&&i!==(i=t[18].coordinates[0])&&_(e,"x",i),262144&u[0]&&r!==(r=t[18].coordinates[1])&&_(e,"y",r),1048576&u[0]&&_(e,"fill",t[20]),2097152&u[0]&&_(e,"stroke",t[21]),4194304&u[0]&&_(e,"stroke-width",t[22]),8388608&u[0]&&_(e,"fill-opacity",t[23]),16777216&u[0]&&_(e,"stroke-opacity",t[24]),33554432&u[0]&&_(e,"opacity",t[25]),32768&u[0]&&_(e,"transform",t[15]),2&u[0]&&_(e,"font-family",t[1]),67108864&u[0]&&s!==(s=t[26]+"px")&&_(e,"font-size",s),134217728&u[0]&&_(e,"font-weight",t[27]),65536&u[0]&&a!==(a=t[16].textAnchor)&&_(e,"text-anchor",a),65536&u[0]&&c!==(c=t[16].dominantBaseline)&&_(e,"dominant-baseline",c)},d(t){t&&v(e)}}}function ih(e){let n,o="svg"===e[32].output(),i=o&&Qu(e);return{c(){i&&i.c(),n=w()},m(t,e){i&&i.m(t,e),k(t,n,e)},p(t,e){2&e[1]&&(o="svg"===t[32].output()),o?i?i.p(t,e):(i=Qu(t),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:t,o:t,d(t){i&&i.d(t),t&&v(n)}}}let rh=0;function sh(e,n,o){let i,r,s,a,u,h,d,f,y,p,g,m,x,k,v=t,b=()=>(v(),v=c(ie,(t=>o(85,r=t))),ie),M=t,$=()=>(M(),M=c(Zt,(t=>o(18,s=t))),Zt),w=t,_=()=>(w(),w=c(Vt,(t=>o(19,a=t))),Vt),T=t,S=()=>(T(),T=c(Jt,(t=>o(20,u=t))),Jt),O=t,C=()=>(O(),O=c(Kt,(t=>o(21,h=t))),Kt),P=t,E=()=>(P(),P=c(Ut,(t=>o(22,d=t))),Ut),L=t,F=()=>(L(),L=c(Qt,(t=>o(23,f=t))),Qt),R=t,j=()=>(R(),R=c(te,(t=>o(24,y=t))),te),Y=t,z=()=>(Y(),Y=c(ee,(t=>o(25,p=t))),ee),X=t,D=()=>(X(),X=c(ne,(t=>o(26,g=t))),ne),q=t,H=()=>(q(),q=c(oe,(t=>o(27,m=t))),oe);e.$$.on_destroy.push((()=>v())),e.$$.on_destroy.push((()=>M())),e.$$.on_destroy.push((()=>w())),e.$$.on_destroy.push((()=>T())),e.$$.on_destroy.push((()=>O())),e.$$.on_destroy.push((()=>P())),e.$$.on_destroy.push((()=>L())),e.$$.on_destroy.push((()=>R())),e.$$.on_destroy.push((()=>Y())),e.$$.on_destroy.push((()=>X())),e.$$.on_destroy.push((()=>q()));const G="mark"+rh++;let B=!0;const Z=()=>!B;let{type:V}=n,{x:J}=n,{y:K}=n,{x1:U}=n,{x2:Q}=n,{y1:tt}=n,{y2:et}=n,{geometry:nt}=n,{shape:ot}=n,{size:it}=n,{independentAxis:rt}=n,{radius:st}=n,{fill:at}=n,{stroke:ct}=n,{strokeWidth:lt}=n,{strokeOpacity:ut}=n,{fillOpacity:ht}=n,{opacity:dt}=n,{text:ft}=n,{fontFamily:pt}=n,{fontSize:gt}=n,{fontWeight:mt}=n,{rotation:xt}=n,{anchorPoint:kt}=n,{transition:vt}=n,{onClick:bt}=n,{onMousedown:Mt}=n,{onMouseup:$t}=n,{onMouseover:wt}=n,{onMouseout:_t}=n,{onMousedrag:Tt}=n,{onTouchdown:St}=n,{onTouchup:Ot}=n,{onTouchover:Ct}=n,{onTouchout:Pt}=n,{onTouchdrag:It}=n,{onSelect:Nt}=n,{onDeselect:At}=n,{renderSettings:Wt}=n,{blockReindexing:Et=!1}=n,{_asPolygon:Lt=!0}=n,{clip:Ft=!0}=n,Rt=Hl(V,{x:J,y:K,x1:U,x2:Q,y1:tt,y2:et,geometry:nt,shape:ot,size:it,independentAxis:rt,radius:st,fill:at,stroke:ct,strokeWidth:lt,strokeOpacity:ut,fillOpacity:ht,opacity:dt,text:ft,fontFamily:pt,fontSize:gt,fontWeight:mt,rotation:xt,anchorPoint:kt}),jt={x:J,y:K,x1:U,x2:Q,y1:tt,y2:et,geometry:nt,shape:ot,size:it,independentAxis:rt},Yt=vu[V],zt=Au[V],Xt=!0===Lt&&void 0!==Au[V];const Dt=yt();l(e,Dt,(t=>o(32,k=t)));const qt=nn();l(e,qt,(t=>o(17,i=t)));const Ht=cn();let Gt,Bt;l(e,Ht,(t=>o(89,x=t))),me(),xe();let Zt=Yu("geometry",Bt,vt);$();let Vt=Yu("radius",Rt.radius,vt);_();let Jt=Yu("fill",Rt.fill,vt);S();let Kt=Yu("stroke",Rt.stroke,vt);C();let Ut=Yu("strokeWidth",Rt.strokeWidth,vt);E();let Qt=Yu("fillOpacity",Rt.fillOpacity,vt);F();let te=Yu("strokeOpacity",Rt.strokeOpacity,vt);j();let ee=Yu("opacity",Rt.opacity,vt);z();let ne=Yu("fontSize",Rt.fontSize,vt);D();let oe=Yu("fontWeight",Rt.fontWeight,vt);H();let ie=Yu("rotation",Rt.rotation,vt);b();let re,se,ae,ce,le,ue,he,de,fe=`rotate(${r}, ${s.coordinates[0]}, ${s.coordinates[1]})`,ye=Uu(Rt.anchorPoint),pe=!1,ge=!1;function me(){Gt=Yt(jt,i,Vu(Wt))}function xe(){o(81,Bt=Xt?zt(Gt,Rt):Gt)}function ke(){if(B||!Et&&!i.blockReindexing){if(ve(),se){const t=x.mouse().marks();t.loadMark(V,be()),bt&&t.addMarkInteraction("click",G,bt),Mt&&t.addMarkInteraction("mousedown",G,Mt),$t&&t.addMarkInteraction("mouseup",G,$t),_t&&t.addMarkInteraction("mouseout",G,_t),wt&&t.addMarkInteraction("mouseover",G,wt),Tt&&t.addMarkInteraction("mousedrag",G,Tt)}if(ae){const t=x.touch().marks();t.loadMark(V,be()),St&&t.addMarkInteraction("touchdown",G,St),Ot&&t.addMarkInteraction("touchup",G,Ot),Ct&&t.addMarkInteraction("touchover",G,Ct),Pt&&t.addMarkInteraction("touchout",G,Pt),It&&t.addMarkInteraction("touchdrag",G,It)}}if(function(){const t=x.select();t.markIsLoaded(G)&&t.removeMark(G)}(),ce){x.select().loadMark(V,be(),{onSelect:Nt,onDeselect:At})}}function ve(){if("mouse"===wn){const t=x.mouse().marks();t.markIsLoaded(G)&&(t.removeAllMarkInteractions(G),t.removeMark(G))}if("touch"===wn){const t=x.touch().marks();t.markIsLoaded(G)&&(t.removeAllMarkInteractions(G),t.removeMark(G))}}function be(){return Eu(V,G,{screenGeometry:Bt,pixelGeometry:Gt},Rt)}return I((()=>{Xu(re,vt)||(re=vt,$(o(4,Zt=Yu("geometry",s,vt))),_(o(5,Vt=Yu("radius",a,vt))),S(o(6,Jt=Yu("fill",u,vt))),C(o(7,Kt=Yu("stroke",h,vt))),E(o(8,Ut=Yu("strokeWidth",d,vt))),F(o(9,Qt=Yu("fillOpacity",f,vt))),j(o(10,te=Yu("strokeOpacity",y,vt))),z(o(11,ee=Yu("opacity",p,vt))),D(o(12,ne=Yu("fontSize",g,vt))),H(o(13,oe=Yu("fontWeight",m,vt))),b(o(14,ie=Yu("rotation",r,vt))))})),A((()=>{B=!1})),N((()=>{ke()})),W((()=>{ve()})),e.$$set=t=>{"type"in t&&o(0,V=t.type),"x"in t&&o(36,J=t.x),"y"in t&&o(37,K=t.y),"x1"in t&&o(38,U=t.x1),"x2"in t&&o(39,Q=t.x2),"y1"in t&&o(40,tt=t.y1),"y2"in t&&o(41,et=t.y2),"geometry"in t&&o(42,nt=t.geometry),"shape"in t&&o(43,ot=t.shape),"size"in t&&o(44,it=t.size),"independentAxis"in t&&o(45,rt=t.independentAxis),"radius"in t&&o(46,st=t.radius),"fill"in t&&o(47,at=t.fill),"stroke"in t&&o(48,ct=t.stroke),"strokeWidth"in t&&o(49,lt=t.strokeWidth),"strokeOpacity"in t&&o(50,ut=t.strokeOpacity),"fillOpacity"in t&&o(51,ht=t.fillOpacity),"opacity"in t&&o(52,dt=t.opacity),"text"in t&&o(53,ft=t.text),"fontFamily"in t&&o(1,pt=t.fontFamily),"fontSize"in t&&o(54,gt=t.fontSize),"fontWeight"in t&&o(55,mt=t.fontWeight),"rotation"in t&&o(56,xt=t.rotation),"anchorPoint"in t&&o(57,kt=t.anchorPoint),"transition"in t&&o(58,vt=t.transition),"onClick"in t&&o(59,bt=t.onClick),"onMousedown"in t&&o(60,Mt=t.onMousedown),"onMouseup"in t&&o(61,$t=t.onMouseup),"onMouseover"in t&&o(62,wt=t.onMouseover),"onMouseout"in t&&o(63,_t=t.onMouseout),"onMousedrag"in t&&o(64,Tt=t.onMousedrag),"onTouchdown"in t&&o(65,St=t.onTouchdown),"onTouchup"in t&&o(66,Ot=t.onTouchup),"onTouchover"in t&&o(67,Ct=t.onTouchover),"onTouchout"in t&&o(68,Pt=t.onTouchout),"onTouchdrag"in t&&o(69,It=t.onTouchdrag),"onSelect"in t&&o(70,Nt=t.onSelect),"onDeselect"in t&&o(71,At=t.onDeselect),"renderSettings"in t&&o(72,Wt=t.renderSettings),"blockReindexing"in t&&o(73,Et=t.blockReindexing),"_asPolygon"in t&&o(74,Lt=t._asPolygon),"clip"in t&&o(2,Ft=t.clip)},e.$$.update=()=>{3&e.$$.dirty[0]|134217696&e.$$.dirty[1]&&Z()&&o(3,Rt=Hl(V,{x:J,y:K,x1:U,x2:Q,y1:tt,y2:et,geometry:nt,shape:ot,size:it,independentAxis:rt,radius:st,fill:at,stroke:ct,strokeWidth:lt,strokeOpacity:ut,fillOpacity:ht,opacity:dt,text:ft,fontFamily:pt,fontSize:gt,fontWeight:mt,rotation:xt,anchorPoint:kt})),32736&e.$$.dirty[1]&&Z()&&o(76,jt={x:J,y:K,x1:U,x2:Q,y1:tt,y2:et,geometry:nt,shape:ot,size:it,independentAxis:rt}),1&e.$$.dirty[0]&&Z()&&(Yt=vu[V],zt=Au[V]),1&e.$$.dirty[0]|4096&e.$$.dirty[2]&&Z()&&o(79,Xt=!0===Lt&&void 0!==Au[V]),131072&e.$$.dirty[0]|17408&e.$$.dirty[2]&&Z()&&(Vu(Wt),o(83,pe=!0),o(84,ge=!0)),296&e.$$.dirty[0]|131072&e.$$.dirty[2]&&Z()&&(Xt||(Vt.set(Rt.radius),Ut.set(Rt.strokeWidth)),Xt&&o(84,ge=!0)),72&e.$$.dirty[0]&&Z()&&Jt.set(Rt.fill),136&e.$$.dirty[0]&&Z()&&Kt.set(Rt.stroke),264&e.$$.dirty[0]&&Z()&&Ut.set(Rt.strokeWidth),520&e.$$.dirty[0]&&Z()&&Qt.set(Rt.fillOpacity),1032&e.$$.dirty[0]&&Z()&&te.set(Rt.strokeOpacity),2056&e.$$.dirty[0]&&Z()&&ee.set(Rt.opacity),4104&e.$$.dirty[0]&&Z()&&ne.set(Rt.fontSize),8200&e.$$.dirty[0]&&Z()&&oe.set(Rt.fontWeight),16392&e.$$.dirty[0]&&Z()&&ie.set(Rt.rotation),16&e.$$.dirty[0]|6815744&e.$$.dirty[2]&&Z()&&(pe&&me(),ge&&(xe(),Zt.set(Bt),ke()),o(83,pe=!1),o(84,ge=!1)),262144&e.$$.dirty[0]|8388608&e.$$.dirty[2]&&Z()&&o(15,fe=`rotate(${r}, ${s.coordinates[0]}, ${s.coordinates[1]})`),8&e.$$.dirty[0]&&Z()&&o(16,ye=Uu(Rt.anchorPoint)),1879048192&e.$$.dirty[1]|7&e.$$.dirty[2]&&(se="mouse"===wn&&Zu(bt,Mt,$t,wt,_t,Tt)),248&e.$$.dirty[2]&&(ae="touch"===wn&&Zu(St,Ot,Ct,Pt,It)),768&e.$$.dirty[2]&&(ce=void 0!==Nt||void 0!==At),1&e.$$.dirty[0]|131072&e.$$.dirty[2]&&o(28,le=!["Point","Line","Label"].includes(V)||Xt),1&e.$$.dirty[0]|131072&e.$$.dirty[2]&&o(29,ue="Point"===V&&!Xt),1&e.$$.dirty[0]|131072&e.$$.dirty[2]&&o(30,he="Line"===V&&!Xt),1&e.$$.dirty[0]&&o(31,de="Label"===V)},[V,pt,Ft,Rt,Zt,Vt,Jt,Kt,Ut,Qt,te,ee,ne,oe,ie,fe,ye,i,s,a,u,h,d,f,y,p,g,m,le,ue,he,de,k,Dt,qt,Ht,J,K,U,Q,tt,et,nt,ot,it,rt,st,at,ct,lt,ut,ht,dt,ft,gt,mt,xt,kt,vt,bt,Mt,$t,wt,_t,Tt,St,Ot,Ct,Pt,It,Nt,At,Wt,Et,Lt]}class ah extends lt{constructor(t){super(),ct(this,t,sh,ih,a,{type:0,x:36,y:37,x1:38,x2:39,y1:40,y2:41,geometry:42,shape:43,size:44,independentAxis:45,radius:46,fill:47,stroke:48,strokeWidth:49,strokeOpacity:50,fillOpacity:51,opacity:52,text:53,fontFamily:1,fontSize:54,fontWeight:55,rotation:56,anchorPoint:57,transition:58,onClick:59,onMousedown:60,onMouseup:61,onMouseover:62,onMouseout:63,onMousedrag:64,onTouchdown:65,onTouchup:66,onTouchover:67,onTouchout:68,onTouchdrag:69,onSelect:70,onDeselect:71,renderSettings:72,blockReindexing:73,_asPolygon:74,clip:2},[-1,-1,-1,-1])}}function ch(t,e){let n=0;for(const o in[t,e])lh(o)&&(n+=1);if(n<2)throw new Error("Couldn't construct legend because of invalid x, y inputs.");return 2!==n||void 0!==t||void 0!==e}function lh(t){return!isNaN(t)||"[object Function]"==={}.toString.call(t)||void 0===t}function uh(t){let e,n;return e=new ah({props:{type:"Label",x:t[40],y:t[41],geometry:t[4],fill:t[6],stroke:t[7],strokeWidth:t[8],strokeOpacity:t[9],fillOpacity:t[10],opacity:t[11],text:t[5],fontFamily:t[12],fontSize:t[13],fontWeight:t[14],rotation:t[15],anchorPoint:t[16],transition:t[29],onClick:t[30],onMouseover:t[31],onMouseout:t[32],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,n){const o={};1&n[0]&&(o.x=t[40]),2&n[0]&&(o.y=t[41]),16&n[0]&&(o.geometry=t[4]),64&n[0]&&(o.fill=t[6]),128&n[0]&&(o.stroke=t[7]),256&n[0]&&(o.strokeWidth=t[8]),512&n[0]&&(o.strokeOpacity=t[9]),1024&n[0]&&(o.fillOpacity=t[10]),2048&n[0]&&(o.opacity=t[11]),32&n[0]&&(o.text=t[5]),4096&n[0]&&(o.fontFamily=t[12]),8192&n[0]&&(o.fontSize=t[13]),16384&n[0]&&(o.fontWeight=t[14]),32768&n[0]&&(o.rotation=t[15]),65536&n[0]&&(o.anchorPoint=t[16]),536870912&n[0]&&(o.transition=t[29]),1073741824&n[0]&&(o.onClick=t[30]),1&n[1]&&(o.onMouseover=t[31]),2&n[1]&&(o.onMouseout=t[32]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function hh(t){let e,n,o,i=ch(t[0],t[1])&&t[5].length>0,r=i&&uh(t);return n=new ah({props:{type:"Label",x:t[42],y:t[43],geometry:t[4],fill:t[18],stroke:t[19],strokeWidth:t[20],strokeOpacity:t[21],fillOpacity:t[22],opacity:t[23],text:t[17],fontFamily:t[24],fontSize:t[25],fontWeight:t[26],rotation:t[27],anchorPoint:t[28],transition:t[29],onClick:t[30],onMouseover:t[31],onMouseout:t[32],_asPolygon:!1}}),{c(){r&&r.c(),e=$(),rt(n.$$.fragment)},m(t,i){r&&r.m(t,i),k(t,e,i),st(n,t,i),o=!0},p(t,o){35&o[0]&&(i=ch(t[0],t[1])&&t[5].length>0),i?r?(r.p(t,o),35&o[0]&&Q(r,1)):(r=uh(t),r.c(),Q(r,1),r.m(e.parentNode,e)):r&&(K(),tt(r,1,1,(()=>{r=null})),U());const s={};4&o[0]&&(s.x=t[42]),8&o[0]&&(s.y=t[43]),16&o[0]&&(s.geometry=t[4]),262144&o[0]&&(s.fill=t[18]),524288&o[0]&&(s.stroke=t[19]),1048576&o[0]&&(s.strokeWidth=t[20]),2097152&o[0]&&(s.strokeOpacity=t[21]),4194304&o[0]&&(s.fillOpacity=t[22]),8388608&o[0]&&(s.opacity=t[23]),131072&o[0]&&(s.text=t[17]),16777216&o[0]&&(s.fontFamily=t[24]),33554432&o[0]&&(s.fontSize=t[25]),67108864&o[0]&&(s.fontWeight=t[26]),134217728&o[0]&&(s.rotation=t[27]),268435456&o[0]&&(s.anchorPoint=t[28]),536870912&o[0]&&(s.transition=t[29]),1073741824&o[0]&&(s.onClick=t[30]),1&o[1]&&(s.onMouseover=t[31]),2&o[1]&&(s.onMouseout=t[32]),n.$set(s)},i(t){o||(Q(r),Q(n.$$.fragment,t),o=!0)},o(t){tt(r),tt(n.$$.fragment,t),o=!1},d(t){r&&r.d(t),t&&v(e),at(n,t)}}}function dh(t,e,n){let o,i,{x:r}=e,{y:s}=e,{geometry:a}=e,{vjust:c="top"}=e,{hjust:u="center"}=e,{xOffset:h=0}=e,{yOffset:d=0}=e,{usePadding:f=!1}=e,{title:y="Title Text"}=e,{titleFill:p="black"}=e,{titleStroke:g}=e,{titleStrokeWidth:m}=e,{titleStrokeOpacity:x}=e,{titleFillOpacity:k}=e,{titleOpacity:v=1}=e,{titleFontFamily:b="Helvetica"}=e,{titleFontSize:M=18}=e,{titleFontWeight:$="bold"}=e,{titleRotation:w=0}=e,{titleAnchorPoint:_="center"}=e,{subtitle:T=""}=e,{subtitleFill:S="black"}=e,{subtitleStroke:O}=e,{subtitleStrokeWidth:C}=e,{subtitleStrokeOpacity:P}=e,{subtitleFillOpacity:I}=e,{subtitleOpacity:N=1}=e,{subtitleFontFamily:A="Helvetica"}=e,{subtitleFontSize:W=14}=e,{subtitleFontWeight:E="normal"}=e,{subtitleRotation:L=0}=e,{subtitleX:F}=e,{subtitleY:R}=e,{subtitleAnchorPoint:j="center"}=e,{transition:Y}=e,{onClick:z}=e,{onMouseover:X}=e,{onMouseout:D}=e;const q=nn();l(t,q,(t=>n(48,o=t)));const H=yt();let G;l(t,H,(t=>n(49,i=t)));let B,Z=o.scaleX.range(),V=o.scaleY.range();return t.$$set=t=>{"x"in t&&n(0,r=t.x),"y"in t&&n(1,s=t.y),"geometry"in t&&n(4,a=t.geometry),"vjust"in t&&n(35,c=t.vjust),"hjust"in t&&n(36,u=t.hjust),"xOffset"in t&&n(37,h=t.xOffset),"yOffset"in t&&n(38,d=t.yOffset),"usePadding"in t&&n(39,f=t.usePadding),"title"in t&&n(5,y=t.title),"titleFill"in t&&n(6,p=t.titleFill),"titleStroke"in t&&n(7,g=t.titleStroke),"titleStrokeWidth"in t&&n(8,m=t.titleStrokeWidth),"titleStrokeOpacity"in t&&n(9,x=t.titleStrokeOpacity),"titleFillOpacity"in t&&n(10,k=t.titleFillOpacity),"titleOpacity"in t&&n(11,v=t.titleOpacity),"titleFontFamily"in t&&n(12,b=t.titleFontFamily),"titleFontSize"in t&&n(13,M=t.titleFontSize),"titleFontWeight"in t&&n(14,$=t.titleFontWeight),"titleRotation"in t&&n(15,w=t.titleRotation),"titleAnchorPoint"in t&&n(16,_=t.titleAnchorPoint),"subtitle"in t&&n(17,T=t.subtitle),"subtitleFill"in t&&n(18,S=t.subtitleFill),"subtitleStroke"in t&&n(19,O=t.subtitleStroke),"subtitleStrokeWidth"in t&&n(20,C=t.subtitleStrokeWidth),"subtitleStrokeOpacity"in t&&n(21,P=t.subtitleStrokeOpacity),"subtitleFillOpacity"in t&&n(22,I=t.subtitleFillOpacity),"subtitleOpacity"in t&&n(23,N=t.subtitleOpacity),"subtitleFontFamily"in t&&n(24,A=t.subtitleFontFamily),"subtitleFontSize"in t&&n(25,W=t.subtitleFontSize),"subtitleFontWeight"in t&&n(26,E=t.subtitleFontWeight),"subtitleRotation"in t&&n(27,L=t.subtitleRotation),"subtitleX"in t&&n(2,F=t.subtitleX),"subtitleY"in t&&n(3,R=t.subtitleY),"subtitleAnchorPoint"in t&&n(28,j=t.subtitleAnchorPoint),"transition"in t&&n(29,Y=t.transition),"onClick"in t&&n(30,z=t.onClick),"onMouseover"in t&&n(31,X=t.onMouseover),"onMouseout"in t&&n(32,D=t.onMouseout)},t.$$.update=()=>{if(33693711&t.$$.dirty[0]|516592&t.$$.dirty[1]){if(!0===f&&(n(44,G=o.padding),void 0===G&&n(44,G=i.padding),n(45,Z=xt(Z,G.left,G.right)),n(46,V=xt(V,G.top,G.bottom))),n(47,B=T.length>0?M+W:M),ch(r,s)){let t,e;t="[object Function]"==={}.toString.call(r)?r():o.scaleX(r),e="[object Function]"==={}.toString.call(s)?s():o.scaleY(s),n(0,r=t),n(1,s=e)}else n(0,r=function(t,e,n,o,i){if(n)return n;const r=e[0],s=e[1],a=Math.abs(s-r);let c;if("center"!==t&&"centre"!==t||(c=.5),"left"===t&&(c=0),"right"===t&&(c=1),isNaN(t)||(c=t),void 0===c&&(c=.5),!["left","center","right"].includes(t)&&isNaN(t))throw Error("Please specify either `left`, `center`, `right` or a number from 0 to 1 for `hjust`");return i?s-(a*c+o):r+(a*c+o)}(u,Z,r,h,o.flipX)),n(1,s=function(t,e,n,o,i,r){if(n)return n;const s=e[0],a=e[1],c=Math.abs(a-s);let l;if("center"===t&&(l=.5),"bottom"===t&&(l=r?i/c:1-i/c),"top"===t&&(l=r?1-i/c:i/c),isNaN(t)||(l=t),void 0===l&&(l=.5),!["center","bottom","top"].includes(t)&&isNaN(t))throw Error("Please specify either `top`, `center`, `bottom` or a number for `vjust`");return s+c*l+o}(c,V,s,d,B,o.flipY));T.length>0&&(ch(F,R)||(n(46,V=o.scaleY.range()),n(2,F=r),n(3,R=o.flipY?s-1.5*M:s+1.5*M)))}},[r,s,F,R,a,y,p,g,m,x,k,v,b,M,$,w,_,T,S,O,C,P,I,N,A,W,E,L,j,Y,z,X,D,q,H,c,u,h,d,f,()=>r,()=>s,()=>F,()=>R]}class fh extends lt{constructor(t){super(),ct(this,t,dh,hh,a,{x:0,y:1,geometry:4,vjust:35,hjust:36,xOffset:37,yOffset:38,usePadding:39,title:5,titleFill:6,titleStroke:7,titleStrokeWidth:8,titleStrokeOpacity:9,titleFillOpacity:10,titleOpacity:11,titleFontFamily:12,titleFontSize:13,titleFontWeight:14,titleRotation:15,titleAnchorPoint:16,subtitle:17,subtitleFill:18,subtitleStroke:19,subtitleStrokeWidth:20,subtitleStrokeOpacity:21,subtitleFillOpacity:22,subtitleOpacity:23,subtitleFontFamily:24,subtitleFontSize:25,subtitleFontWeight:26,subtitleRotation:27,subtitleX:2,subtitleY:3,subtitleAnchorPoint:28,transition:29,onClick:30,onMouseover:31,onMouseout:32},[-1,-1])}}function yh(t){let e,n;return e=new ah({props:{type:"Point",x:t[0],y:t[1],geometry:t[2],radius:t[3],fill:t[4],stroke:t[5],strokeWidth:t[6],strokeOpacity:t[7],fillOpacity:t[8],opacity:t[9],transition:t[10],onClick:t[11],onMousedown:t[12],onMouseup:t[13],onMouseover:t[14],onMouseout:t[15],onMousedrag:t[16],onTouchdown:t[17],onTouchup:t[18],onTouchover:t[19],onTouchout:t[20],onTouchdrag:t[21],onSelect:t[22],onDeselect:t[23],renderSettings:t[24],blockReindexing:t[25],clip:t[26],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x=t[0]),2&n&&(o.y=t[1]),4&n&&(o.geometry=t[2]),8&n&&(o.radius=t[3]),16&n&&(o.fill=t[4]),32&n&&(o.stroke=t[5]),64&n&&(o.strokeWidth=t[6]),128&n&&(o.strokeOpacity=t[7]),256&n&&(o.fillOpacity=t[8]),512&n&&(o.opacity=t[9]),1024&n&&(o.transition=t[10]),2048&n&&(o.onClick=t[11]),4096&n&&(o.onMousedown=t[12]),8192&n&&(o.onMouseup=t[13]),16384&n&&(o.onMouseover=t[14]),32768&n&&(o.onMouseout=t[15]),65536&n&&(o.onMousedrag=t[16]),131072&n&&(o.onTouchdown=t[17]),262144&n&&(o.onTouchup=t[18]),524288&n&&(o.onTouchover=t[19]),1048576&n&&(o.onTouchout=t[20]),2097152&n&&(o.onTouchdrag=t[21]),4194304&n&&(o.onSelect=t[22]),8388608&n&&(o.onDeselect=t[23]),16777216&n&&(o.renderSettings=t[24]),33554432&n&&(o.blockReindexing=t[25]),67108864&n&&(o.clip=t[26]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function ph(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{radius:s}=e,{fill:a}=e,{stroke:c}=e,{strokeWidth:l}=e,{strokeOpacity:u}=e,{fillOpacity:h}=e,{opacity:d}=e,{transition:f}=e,{onClick:y}=e,{onMousedown:p}=e,{onMouseup:g}=e,{onMouseover:m}=e,{onMouseout:x}=e,{onMousedrag:k}=e,{onTouchdown:v}=e,{onTouchup:b}=e,{onTouchover:M}=e,{onTouchout:$}=e,{onTouchdrag:w}=e,{onSelect:_}=e,{onDeselect:T}=e,{renderSettings:S}=e,{blockReindexing:O=!1}=e,{clip:C=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"radius"in t&&n(3,s=t.radius),"fill"in t&&n(4,a=t.fill),"stroke"in t&&n(5,c=t.stroke),"strokeWidth"in t&&n(6,l=t.strokeWidth),"strokeOpacity"in t&&n(7,u=t.strokeOpacity),"fillOpacity"in t&&n(8,h=t.fillOpacity),"opacity"in t&&n(9,d=t.opacity),"transition"in t&&n(10,f=t.transition),"onClick"in t&&n(11,y=t.onClick),"onMousedown"in t&&n(12,p=t.onMousedown),"onMouseup"in t&&n(13,g=t.onMouseup),"onMouseover"in t&&n(14,m=t.onMouseover),"onMouseout"in t&&n(15,x=t.onMouseout),"onMousedrag"in t&&n(16,k=t.onMousedrag),"onTouchdown"in t&&n(17,v=t.onTouchdown),"onTouchup"in t&&n(18,b=t.onTouchup),"onTouchover"in t&&n(19,M=t.onTouchover),"onTouchout"in t&&n(20,$=t.onTouchout),"onTouchdrag"in t&&n(21,w=t.onTouchdrag),"onSelect"in t&&n(22,_=t.onSelect),"onDeselect"in t&&n(23,T=t.onDeselect),"renderSettings"in t&&n(24,S=t.renderSettings),"blockReindexing"in t&&n(25,O=t.blockReindexing),"clip"in t&&n(26,C=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_,T,S,O,C]}class gh extends lt{constructor(t){super(),ct(this,t,ph,yh,a,{x:0,y:1,geometry:2,radius:3,fill:4,stroke:5,strokeWidth:6,strokeOpacity:7,fillOpacity:8,opacity:9,transition:10,onClick:11,onMousedown:12,onMouseup:13,onMouseover:14,onMouseout:15,onMousedrag:16,onTouchdown:17,onTouchup:18,onTouchover:19,onTouchout:20,onTouchdrag:21,onSelect:22,onDeselect:23,renderSettings:24,blockReindexing:25,clip:26})}}function mh(t){let e,n;return e=new ah({props:{type:"Rectangle",x1:t[0],x2:t[1],y1:t[2],y2:t[3],fill:t[4],stroke:t[5],strokeWidth:t[6],strokeOpacity:t[7],fillOpacity:t[8],opacity:t[9],transition:t[10],onClick:t[11],onMousedown:t[12],onMouseup:t[13],onMouseover:t[14],onMouseout:t[15],onMousedrag:t[16],onTouchdown:t[17],onTouchup:t[18],onTouchover:t[19],onTouchout:t[20],onTouchdrag:t[21],onSelect:t[22],onDeselect:t[23],renderSettings:t[24],blockReindexing:t[25],clip:t[26],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x1=t[0]),2&n&&(o.x2=t[1]),4&n&&(o.y1=t[2]),8&n&&(o.y2=t[3]),16&n&&(o.fill=t[4]),32&n&&(o.stroke=t[5]),64&n&&(o.strokeWidth=t[6]),128&n&&(o.strokeOpacity=t[7]),256&n&&(o.fillOpacity=t[8]),512&n&&(o.opacity=t[9]),1024&n&&(o.transition=t[10]),2048&n&&(o.onClick=t[11]),4096&n&&(o.onMousedown=t[12]),8192&n&&(o.onMouseup=t[13]),16384&n&&(o.onMouseover=t[14]),32768&n&&(o.onMouseout=t[15]),65536&n&&(o.onMousedrag=t[16]),131072&n&&(o.onTouchdown=t[17]),262144&n&&(o.onTouchup=t[18]),524288&n&&(o.onTouchover=t[19]),1048576&n&&(o.onTouchout=t[20]),2097152&n&&(o.onTouchdrag=t[21]),4194304&n&&(o.onSelect=t[22]),8388608&n&&(o.onDeselect=t[23]),16777216&n&&(o.renderSettings=t[24]),33554432&n&&(o.blockReindexing=t[25]),67108864&n&&(o.clip=t[26]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function xh(t,e,n){let{x1:o}=e,{x2:i}=e,{y1:r}=e,{y2:s}=e,{fill:a}=e,{stroke:c}=e,{strokeWidth:l}=e,{strokeOpacity:u}=e,{fillOpacity:h}=e,{opacity:d}=e,{transition:f}=e,{onClick:y}=e,{onMousedown:p}=e,{onMouseup:g}=e,{onMouseover:m}=e,{onMouseout:x}=e,{onMousedrag:k}=e,{onTouchdown:v}=e,{onTouchup:b}=e,{onTouchover:M}=e,{onTouchout:$}=e,{onTouchdrag:w}=e,{onSelect:_}=e,{onDeselect:T}=e,{renderSettings:S}=e,{blockReindexing:O=!1}=e,{clip:C=!0}=e;return t.$$set=t=>{"x1"in t&&n(0,o=t.x1),"x2"in t&&n(1,i=t.x2),"y1"in t&&n(2,r=t.y1),"y2"in t&&n(3,s=t.y2),"fill"in t&&n(4,a=t.fill),"stroke"in t&&n(5,c=t.stroke),"strokeWidth"in t&&n(6,l=t.strokeWidth),"strokeOpacity"in t&&n(7,u=t.strokeOpacity),"fillOpacity"in t&&n(8,h=t.fillOpacity),"opacity"in t&&n(9,d=t.opacity),"transition"in t&&n(10,f=t.transition),"onClick"in t&&n(11,y=t.onClick),"onMousedown"in t&&n(12,p=t.onMousedown),"onMouseup"in t&&n(13,g=t.onMouseup),"onMouseover"in t&&n(14,m=t.onMouseover),"onMouseout"in t&&n(15,x=t.onMouseout),"onMousedrag"in t&&n(16,k=t.onMousedrag),"onTouchdown"in t&&n(17,v=t.onTouchdown),"onTouchup"in t&&n(18,b=t.onTouchup),"onTouchover"in t&&n(19,M=t.onTouchover),"onTouchout"in t&&n(20,$=t.onTouchout),"onTouchdrag"in t&&n(21,w=t.onTouchdrag),"onSelect"in t&&n(22,_=t.onSelect),"onDeselect"in t&&n(23,T=t.onDeselect),"renderSettings"in t&&n(24,S=t.renderSettings),"blockReindexing"in t&&n(25,O=t.blockReindexing),"clip"in t&&n(26,C=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_,T,S,O,C]}class kh extends lt{constructor(t){super(),ct(this,t,xh,mh,a,{x1:0,x2:1,y1:2,y2:3,fill:4,stroke:5,strokeWidth:6,strokeOpacity:7,fillOpacity:8,opacity:9,transition:10,onClick:11,onMousedown:12,onMouseup:13,onMouseover:14,onMouseout:15,onMousedrag:16,onTouchdown:17,onTouchup:18,onTouchover:19,onTouchout:20,onTouchdrag:21,onSelect:22,onDeselect:23,renderSettings:24,blockReindexing:25,clip:26})}}function vh(t){let e,n;return e=new ah({props:{type:"Polygon",x:t[0],y:t[1],geometry:t[2],fill:t[3],stroke:t[4],strokeWidth:t[5],strokeOpacity:t[6],fillOpacity:t[7],opacity:t[8],transition:t[9],onClick:t[10],onMousedown:t[11],onMouseup:t[12],onMouseover:t[13],onMouseout:t[14],onMousedrag:t[15],onTouchdown:t[16],onTouchup:t[17],onTouchover:t[18],onTouchout:t[19],onTouchdrag:t[20],onSelect:t[21],onDeselect:t[22],renderSettings:t[23],blockReindexing:t[24],clip:t[25],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x=t[0]),2&n&&(o.y=t[1]),4&n&&(o.geometry=t[2]),8&n&&(o.fill=t[3]),16&n&&(o.stroke=t[4]),32&n&&(o.strokeWidth=t[5]),64&n&&(o.strokeOpacity=t[6]),128&n&&(o.fillOpacity=t[7]),256&n&&(o.opacity=t[8]),512&n&&(o.transition=t[9]),1024&n&&(o.onClick=t[10]),2048&n&&(o.onMousedown=t[11]),4096&n&&(o.onMouseup=t[12]),8192&n&&(o.onMouseover=t[13]),16384&n&&(o.onMouseout=t[14]),32768&n&&(o.onMousedrag=t[15]),65536&n&&(o.onTouchdown=t[16]),131072&n&&(o.onTouchup=t[17]),262144&n&&(o.onTouchover=t[18]),524288&n&&(o.onTouchout=t[19]),1048576&n&&(o.onTouchdrag=t[20]),2097152&n&&(o.onSelect=t[21]),4194304&n&&(o.onDeselect=t[22]),8388608&n&&(o.renderSettings=t[23]),16777216&n&&(o.blockReindexing=t[24]),33554432&n&&(o.clip=t[25]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function bh(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{fill:s}=e,{stroke:a}=e,{strokeWidth:c}=e,{strokeOpacity:l}=e,{fillOpacity:u}=e,{opacity:h}=e,{transition:d}=e,{onClick:f}=e,{onMousedown:y}=e,{onMouseup:p}=e,{onMouseover:g}=e,{onMouseout:m}=e,{onMousedrag:x}=e,{onTouchdown:k}=e,{onTouchup:v}=e,{onTouchover:b}=e,{onTouchout:M}=e,{onTouchdrag:$}=e,{onSelect:w}=e,{onDeselect:_}=e,{renderSettings:T}=e,{blockReindexing:S=!1}=e,{clip:O=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"fill"in t&&n(3,s=t.fill),"stroke"in t&&n(4,a=t.stroke),"strokeWidth"in t&&n(5,c=t.strokeWidth),"strokeOpacity"in t&&n(6,l=t.strokeOpacity),"fillOpacity"in t&&n(7,u=t.fillOpacity),"opacity"in t&&n(8,h=t.opacity),"transition"in t&&n(9,d=t.transition),"onClick"in t&&n(10,f=t.onClick),"onMousedown"in t&&n(11,y=t.onMousedown),"onMouseup"in t&&n(12,p=t.onMouseup),"onMouseover"in t&&n(13,g=t.onMouseover),"onMouseout"in t&&n(14,m=t.onMouseout),"onMousedrag"in t&&n(15,x=t.onMousedrag),"onTouchdown"in t&&n(16,k=t.onTouchdown),"onTouchup"in t&&n(17,v=t.onTouchup),"onTouchover"in t&&n(18,b=t.onTouchover),"onTouchout"in t&&n(19,M=t.onTouchout),"onTouchdrag"in t&&n(20,$=t.onTouchdrag),"onSelect"in t&&n(21,w=t.onSelect),"onDeselect"in t&&n(22,_=t.onDeselect),"renderSettings"in t&&n(23,T=t.renderSettings),"blockReindexing"in t&&n(24,S=t.blockReindexing),"clip"in t&&n(25,O=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_,T,S,O]}class Mh extends lt{constructor(t){super(),ct(this,t,bh,vh,a,{x:0,y:1,geometry:2,fill:3,stroke:4,strokeWidth:5,strokeOpacity:6,fillOpacity:7,opacity:8,transition:9,onClick:10,onMousedown:11,onMouseup:12,onMouseover:13,onMouseout:14,onMousedrag:15,onTouchdown:16,onTouchup:17,onTouchover:18,onTouchout:19,onTouchdrag:20,onSelect:21,onDeselect:22,renderSettings:23,blockReindexing:24,clip:25})}}function $h(t){let e,n;return e=new ah({props:{type:"Line",x:t[0],y:t[1],geometry:t[2],strokeWidth:t[3],stroke:t[4],opacity:t[5],transition:t[6],onClick:t[7],onMousedown:t[8],onMouseup:t[9],onMouseover:t[10],onMouseout:t[11],onMousedrag:t[12],onTouchdown:t[13],onTouchup:t[14],onTouchover:t[15],onTouchout:t[16],onTouchdrag:t[17],onSelect:t[18],onDeselect:t[19],renderSettings:t[20],blockReindexing:t[21],clip:t[22],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x=t[0]),2&n&&(o.y=t[1]),4&n&&(o.geometry=t[2]),8&n&&(o.strokeWidth=t[3]),16&n&&(o.stroke=t[4]),32&n&&(o.opacity=t[5]),64&n&&(o.transition=t[6]),128&n&&(o.onClick=t[7]),256&n&&(o.onMousedown=t[8]),512&n&&(o.onMouseup=t[9]),1024&n&&(o.onMouseover=t[10]),2048&n&&(o.onMouseout=t[11]),4096&n&&(o.onMousedrag=t[12]),8192&n&&(o.onTouchdown=t[13]),16384&n&&(o.onTouchup=t[14]),32768&n&&(o.onTouchover=t[15]),65536&n&&(o.onTouchout=t[16]),131072&n&&(o.onTouchdrag=t[17]),262144&n&&(o.onSelect=t[18]),524288&n&&(o.onDeselect=t[19]),1048576&n&&(o.renderSettings=t[20]),2097152&n&&(o.blockReindexing=t[21]),4194304&n&&(o.clip=t[22]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function wh(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{strokeWidth:s}=e,{stroke:a}=e,{opacity:c}=e,{transition:l}=e,{onClick:u}=e,{onMousedown:h}=e,{onMouseup:d}=e,{onMouseover:f}=e,{onMouseout:y}=e,{onMousedrag:p}=e,{onTouchdown:g}=e,{onTouchup:m}=e,{onTouchover:x}=e,{onTouchout:k}=e,{onTouchdrag:v}=e,{onSelect:b}=e,{onDeselect:M}=e,{renderSettings:$}=e,{blockReindexing:w=!1}=e,{clip:_=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"strokeWidth"in t&&n(3,s=t.strokeWidth),"stroke"in t&&n(4,a=t.stroke),"opacity"in t&&n(5,c=t.opacity),"transition"in t&&n(6,l=t.transition),"onClick"in t&&n(7,u=t.onClick),"onMousedown"in t&&n(8,h=t.onMousedown),"onMouseup"in t&&n(9,d=t.onMouseup),"onMouseover"in t&&n(10,f=t.onMouseover),"onMouseout"in t&&n(11,y=t.onMouseout),"onMousedrag"in t&&n(12,p=t.onMousedrag),"onTouchdown"in t&&n(13,g=t.onTouchdown),"onTouchup"in t&&n(14,m=t.onTouchup),"onTouchover"in t&&n(15,x=t.onTouchover),"onTouchout"in t&&n(16,k=t.onTouchout),"onTouchdrag"in t&&n(17,v=t.onTouchdrag),"onSelect"in t&&n(18,b=t.onSelect),"onDeselect"in t&&n(19,M=t.onDeselect),"renderSettings"in t&&n(20,$=t.renderSettings),"blockReindexing"in t&&n(21,w=t.blockReindexing),"clip"in t&&n(22,_=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_]}class _h extends lt{constructor(t){super(),ct(this,t,wh,$h,a,{x:0,y:1,geometry:2,strokeWidth:3,stroke:4,opacity:5,transition:6,onClick:7,onMousedown:8,onMouseup:9,onMouseover:10,onMouseout:11,onMousedrag:12,onTouchdown:13,onTouchup:14,onTouchover:15,onTouchout:16,onTouchdrag:17,onSelect:18,onDeselect:19,renderSettings:20,blockReindexing:21,clip:22})}}function Th(t){let e,n;return e=new ah({props:{type:"Label",x:t[0],y:t[1],geometry:t[2],fill:t[3],stroke:t[4],strokeWidth:t[5],strokeOpacity:t[6],fillOpacity:t[7],opacity:t[8],text:t[9],fontFamily:t[10],fontSize:t[11],fontWeight:t[12],rotation:t[13],anchorPoint:t[14],transition:t[15],onClick:t[16],onMousedown:t[17],onMouseup:t[18],onMouseover:t[19],onMouseout:t[20],onMousedrag:t[21],onTouchdown:t[22],onTouchup:t[23],onTouchover:t[24],onTouchout:t[25],onTouchdrag:t[26],onSelect:t[27],onDeselect:t[28],renderSettings:t[29],blockReindexing:t[30],clip:t[31],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,n){const o={};1&n[0]&&(o.x=t[0]),2&n[0]&&(o.y=t[1]),4&n[0]&&(o.geometry=t[2]),8&n[0]&&(o.fill=t[3]),16&n[0]&&(o.stroke=t[4]),32&n[0]&&(o.strokeWidth=t[5]),64&n[0]&&(o.strokeOpacity=t[6]),128&n[0]&&(o.fillOpacity=t[7]),256&n[0]&&(o.opacity=t[8]),512&n[0]&&(o.text=t[9]),1024&n[0]&&(o.fontFamily=t[10]),2048&n[0]&&(o.fontSize=t[11]),4096&n[0]&&(o.fontWeight=t[12]),8192&n[0]&&(o.rotation=t[13]),16384&n[0]&&(o.anchorPoint=t[14]),32768&n[0]&&(o.transition=t[15]),65536&n[0]&&(o.onClick=t[16]),131072&n[0]&&(o.onMousedown=t[17]),262144&n[0]&&(o.onMouseup=t[18]),524288&n[0]&&(o.onMouseover=t[19]),1048576&n[0]&&(o.onMouseout=t[20]),2097152&n[0]&&(o.onMousedrag=t[21]),4194304&n[0]&&(o.onTouchdown=t[22]),8388608&n[0]&&(o.onTouchup=t[23]),16777216&n[0]&&(o.onTouchover=t[24]),33554432&n[0]&&(o.onTouchout=t[25]),67108864&n[0]&&(o.onTouchdrag=t[26]),134217728&n[0]&&(o.onSelect=t[27]),268435456&n[0]&&(o.onDeselect=t[28]),536870912&n[0]&&(o.renderSettings=t[29]),1073741824&n[0]&&(o.blockReindexing=t[30]),1&n[1]&&(o.clip=t[31]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function Sh(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{fill:s}=e,{stroke:a}=e,{strokeWidth:c}=e,{strokeOpacity:l}=e,{fillOpacity:u}=e,{opacity:h}=e,{text:d}=e,{fontFamily:f}=e,{fontSize:y}=e,{fontWeight:p}=e,{rotation:g}=e,{anchorPoint:m}=e,{transition:x}=e,{onClick:k}=e,{onMousedown:v}=e,{onMouseup:b}=e,{onMouseover:M}=e,{onMouseout:$}=e,{onMousedrag:w}=e,{onTouchdown:_}=e,{onTouchup:T}=e,{onTouchover:S}=e,{onTouchout:O}=e,{onTouchdrag:C}=e,{onSelect:P}=e,{onDeselect:I}=e,{renderSettings:N}=e,{blockReindexing:A=!1}=e,{clip:W=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"fill"in t&&n(3,s=t.fill),"stroke"in t&&n(4,a=t.stroke),"strokeWidth"in t&&n(5,c=t.strokeWidth),"strokeOpacity"in t&&n(6,l=t.strokeOpacity),"fillOpacity"in t&&n(7,u=t.fillOpacity),"opacity"in t&&n(8,h=t.opacity),"text"in t&&n(9,d=t.text),"fontFamily"in t&&n(10,f=t.fontFamily),"fontSize"in t&&n(11,y=t.fontSize),"fontWeight"in t&&n(12,p=t.fontWeight),"rotation"in t&&n(13,g=t.rotation),"anchorPoint"in t&&n(14,m=t.anchorPoint),"transition"in t&&n(15,x=t.transition),"onClick"in t&&n(16,k=t.onClick),"onMousedown"in t&&n(17,v=t.onMousedown),"onMouseup"in t&&n(18,b=t.onMouseup),"onMouseover"in t&&n(19,M=t.onMouseover),"onMouseout"in t&&n(20,$=t.onMouseout),"onMousedrag"in t&&n(21,w=t.onMousedrag),"onTouchdown"in t&&n(22,_=t.onTouchdown),"onTouchup"in t&&n(23,T=t.onTouchup),"onTouchover"in t&&n(24,S=t.onTouchover),"onTouchout"in t&&n(25,O=t.onTouchout),"onTouchdrag"in t&&n(26,C=t.onTouchdrag),"onSelect"in t&&n(27,P=t.onSelect),"onDeselect"in t&&n(28,I=t.onDeselect),"renderSettings"in t&&n(29,N=t.renderSettings),"blockReindexing"in t&&n(30,A=t.blockReindexing),"clip"in t&&n(31,W=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_,T,S,O,C,P,I,N,A,W]}class Oh extends lt{constructor(t){super(),ct(this,t,Sh,Th,a,{x:0,y:1,geometry:2,fill:3,stroke:4,strokeWidth:5,strokeOpacity:6,fillOpacity:7,opacity:8,text:9,fontFamily:10,fontSize:11,fontWeight:12,rotation:13,anchorPoint:14,transition:15,onClick:16,onMousedown:17,onMouseup:18,onMouseover:19,onMouseout:20,onMousedrag:21,onTouchdown:22,onTouchup:23,onTouchover:24,onTouchout:25,onTouchdrag:26,onSelect:27,onDeselect:28,renderSettings:29,blockReindexing:30,clip:31},[-1,-1])}}function Ch(t){let e,n;return e=new ah({props:{type:"Symbol",x:t[0],y:t[1],geometry:t[2],shape:t[3],size:t[4],fill:t[5],stroke:t[6],strokeWidth:t[7],strokeOpacity:t[8],fillOpacity:t[9],opacity:t[10],transition:t[11],onClick:t[12],onMousedown:t[13],onMouseup:t[14],onMouseover:t[15],onMouseout:t[16],onMousedrag:t[17],onTouchdown:t[18],onTouchup:t[19],onTouchover:t[20],onTouchout:t[21],onTouchdrag:t[22],onSelect:t[23],onDeselect:t[24],renderSettings:t[25],blockReindexing:t[26],clip:t[27],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x=t[0]),2&n&&(o.y=t[1]),4&n&&(o.geometry=t[2]),8&n&&(o.shape=t[3]),16&n&&(o.size=t[4]),32&n&&(o.fill=t[5]),64&n&&(o.stroke=t[6]),128&n&&(o.strokeWidth=t[7]),256&n&&(o.strokeOpacity=t[8]),512&n&&(o.fillOpacity=t[9]),1024&n&&(o.opacity=t[10]),2048&n&&(o.transition=t[11]),4096&n&&(o.onClick=t[12]),8192&n&&(o.onMousedown=t[13]),16384&n&&(o.onMouseup=t[14]),32768&n&&(o.onMouseover=t[15]),65536&n&&(o.onMouseout=t[16]),131072&n&&(o.onMousedrag=t[17]),262144&n&&(o.onTouchdown=t[18]),524288&n&&(o.onTouchup=t[19]),1048576&n&&(o.onTouchover=t[20]),2097152&n&&(o.onTouchout=t[21]),4194304&n&&(o.onTouchdrag=t[22]),8388608&n&&(o.onSelect=t[23]),16777216&n&&(o.onDeselect=t[24]),33554432&n&&(o.renderSettings=t[25]),67108864&n&&(o.blockReindexing=t[26]),134217728&n&&(o.clip=t[27]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function Ph(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{shape:s}=e,{size:a}=e,{fill:c}=e,{stroke:l}=e,{strokeWidth:u}=e,{strokeOpacity:h}=e,{fillOpacity:d}=e,{opacity:f}=e,{transition:y}=e,{onClick:p}=e,{onMousedown:g}=e,{onMouseup:m}=e,{onMouseover:x}=e,{onMouseout:k}=e,{onMousedrag:v}=e,{onTouchdown:b}=e,{onTouchup:M}=e,{onTouchover:$}=e,{onTouchout:w}=e,{onTouchdrag:_}=e,{onSelect:T}=e,{onDeselect:S}=e,{renderSettings:O}=e,{blockReindexing:C=!1}=e,{clip:P=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"shape"in t&&n(3,s=t.shape),"size"in t&&n(4,a=t.size),"fill"in t&&n(5,c=t.fill),"stroke"in t&&n(6,l=t.stroke),"strokeWidth"in t&&n(7,u=t.strokeWidth),"strokeOpacity"in t&&n(8,h=t.strokeOpacity),"fillOpacity"in t&&n(9,d=t.fillOpacity),"opacity"in t&&n(10,f=t.opacity),"transition"in t&&n(11,y=t.transition),"onClick"in t&&n(12,p=t.onClick),"onMousedown"in t&&n(13,g=t.onMousedown),"onMouseup"in t&&n(14,m=t.onMouseup),"onMouseover"in t&&n(15,x=t.onMouseover),"onMouseout"in t&&n(16,k=t.onMouseout),"onMousedrag"in t&&n(17,v=t.onMousedrag),"onTouchdown"in t&&n(18,b=t.onTouchdown),"onTouchup"in t&&n(19,M=t.onTouchup),"onTouchover"in t&&n(20,$=t.onTouchover),"onTouchout"in t&&n(21,w=t.onTouchout),"onTouchdrag"in t&&n(22,_=t.onTouchdrag),"onSelect"in t&&n(23,T=t.onSelect),"onDeselect"in t&&n(24,S=t.onDeselect),"renderSettings"in t&&n(25,O=t.renderSettings),"blockReindexing"in t&&n(26,C=t.blockReindexing),"clip"in t&&n(27,P=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_,T,S,O,C,P]}class Ih extends lt{constructor(t){super(),ct(this,t,Ph,Ch,a,{x:0,y:1,geometry:2,shape:3,size:4,fill:5,stroke:6,strokeWidth:7,strokeOpacity:8,fillOpacity:9,opacity:10,transition:11,onClick:12,onMousedown:13,onMouseup:14,onMouseover:15,onMouseout:16,onMousedrag:17,onTouchdown:18,onTouchup:19,onTouchover:20,onTouchout:21,onTouchdrag:22,onSelect:23,onDeselect:24,renderSettings:25,blockReindexing:26,clip:27})}}function Nh({func:t,x:e},n,o){!function(t,e){if(t.constructor===Function&&oi(e))return;if(t.constructor===Function&&ni(e)&&e.constructor===Array&&2===e.length&&e.every((t=>t.constructor===Number)))return;throw new Error("FuncLine: invalid geometry props")}(t,e);return Fi({type:"LineString",coordinates:function(t,e,n,o){const i=e||function(t){let e;e=function(t){if(t&&t.constructor===Function&&""!==t.name){if(t.domain&&t.domain().every((t=>t.constructor===Number)))return!0;throw new Error("FuncLine can only be used with a scaleX that has a numeric domain")}return!1}(t.scaleX)?t.scaleX.domain():t.rangeX;return e}(n),r=n.finalRangeX,s=Math.abs(r[0]-r[1])/o;return function(t,e,n){const o=[],i=ve(...e);for(let e=0;e<=n;++e){const r=i(e/n),s=t(r);if(s.constructor!==Number||isNaN(s))throw new Error(`FuncLine: func is only allowed to return numbers. Received '${s}'`);o.push([r,s])}return o}(t,i,s)}(t,e,n,o.interpolationTreshold)},n.getTotalTransformation(),o)}function Ah(t){let e,n,o;return{c(){e=b("path"),_(e,"clip-path",n=t[0]?`url(#clip-${t[5].sectionId})`:"none"),_(e,"class","line"),_(e,"d",o=Ku(t[6])),_(e,"fill","none"),_(e,"stroke-width",t[8]),_(e,"stroke",t[7]),_(e,"opacity",t[9])},m(t,n){k(t,e,n)},p(t,i){33&i[0]&&n!==(n=t[0]?`url(#clip-${t[5].sectionId})`:"none")&&_(e,"clip-path",n),64&i[0]&&o!==(o=Ku(t[6]))&&_(e,"d",o),256&i[0]&&_(e,"stroke-width",t[8]),128&i[0]&&_(e,"stroke",t[7]),512&i[0]&&_(e,"opacity",t[9])},d(t){t&&v(e)}}}function Wh(e){let n,o="svg"===e[10].output(),i=o&&Ah(e);return{c(){i&&i.c(),n=w()},m(t,e){i&&i.m(t,e),k(t,n,e)},p(t,e){1024&e[0]&&(o="svg"===t[10].output()),o?i?i.p(t,e):(i=Ah(t),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:t,o:t,d(t){i&&i.d(t),t&&v(n)}}}let Eh=0;function Lh(e,n,o){let i,r,s,a,u,h,d,f=t,y=()=>(f(),f=c(tt,(t=>o(6,r=t))),tt),p=t,g=()=>(p(),p=c(et,(t=>o(7,s=t))),et),m=t,x=()=>(m(),m=c(nt,(t=>o(8,a=t))),nt),k=t,v=()=>(k(),k=c(at,(t=>o(9,u=t))),at);e.$$.on_destroy.push((()=>f())),e.$$.on_destroy.push((()=>p())),e.$$.on_destroy.push((()=>m())),e.$$.on_destroy.push((()=>k()));const b="funcline"+Eh++;let M=!0;const $=()=>!M;let{func:w}=n,{x:_}=n,{strokeWidth:T=1}=n,{stroke:S="black"}=n,{opacity:O=1}=n,{transition:C}=n,{onClick:P}=n,{onMousedown:E}=n,{onMouseup:L}=n,{onMouseover:F}=n,{onMouseout:R}=n,{onMousedrag:j}=n,{onTouchdown:Y}=n,{onTouchup:z}=n,{onTouchover:X}=n,{onTouchout:D}=n,{onTouchdrag:q}=n,{onSelect:H}=n,{onDeselect:G}=n,{renderSettings:B}=n,{blockReindexing:Z=!1}=n,{clip:V=!0}=n;const J=yt();l(e,J,(t=>o(10,d=t)));const K=nn();l(e,K,(t=>o(5,i=t)));const U=cn();l(e,U,(t=>o(41,h=t)));let Q=Nh({func:w,x:_},i,Vu(B)),tt=Yu("geometry",Q,C);y();let et=Yu("stroke",S,C);g();let nt=Yu("strokeWidth",T,C);x();let ot,it,rt,st,at=Yu("opacity",O,C);function ct(){if(M||!Z&&!i.blockReindexing){if(lt(),it){const t=h.mouse().marks();t.loadMark("Line",ut()),P&&t.addMarkInteraction("click",b,P),E&&t.addMarkInteraction("mousedown",b,E),L&&t.addMarkInteraction("mouseoup",b,L),F&&t.addMarkInteraction("mouseover",b,F),R&&t.addMarkInteraction("mouseout",b,R),j&&t.addMarkInteraction("mousedrag",b,j)}if(rt){const t=h.touch().marks();t.loadMark("Line",ut()),Y&&t.addMarkInteraction("touchdown",b,Y),z&&t.addMarkInteraction("touchup",b,z),X&&t.addMarkInteraction("touchover",b,X),D&&t.addMarkInteraction("touchout",b,D),q&&t.addMarkInteraction("touchdrag",b,q)}}if(function(){const t=h.select();t.markIsLoaded(b)&&t.removeMark(b)}(),st){h.select().loadMark("Line",ut(),{onSelect:H,onDeselect:G})}}function lt(){if("mouse"===wn){const t=h.mouse().marks();t.markIsLoaded(b)&&(t.removeAllMarkInteractions(b),t.removeMark(b))}if("touch"===wn){const t=h.touch().marks();t.markIsLoaded(b)&&(t.removeAllMarkInteractions(b),t.removeMark(b))}}function ut(){return Eu("Line",b,{pixelGeometry:Q},{strokeWidth:T})}return v(),I((()=>{Xu(ot,C)||(ot=C,y(o(1,tt=Yu("geometry",r,C))),g(o(2,et=Yu("stroke",s,C))),x(o(3,nt=Yu("strokeWidth",a,C))),v(o(4,at=Yu("opacity",u,C))))})),A((()=>{M=!1})),N((()=>{ct()})),W((()=>{lt()})),e.$$set=t=>{"func"in t&&o(14,w=t.func),"x"in t&&o(15,_=t.x),"strokeWidth"in t&&o(16,T=t.strokeWidth),"stroke"in t&&o(17,S=t.stroke),"opacity"in t&&o(18,O=t.opacity),"transition"in t&&o(19,C=t.transition),"onClick"in t&&o(20,P=t.onClick),"onMousedown"in t&&o(21,E=t.onMousedown),"onMouseup"in t&&o(22,L=t.onMouseup),"onMouseover"in t&&o(23,F=t.onMouseover),"onMouseout"in t&&o(24,R=t.onMouseout),"onMousedrag"in t&&o(25,j=t.onMousedrag),"onTouchdown"in t&&o(26,Y=t.onTouchdown),"onTouchup"in t&&o(27,z=t.onTouchup),"onTouchover"in t&&o(28,X=t.onTouchover),"onTouchout"in t&&o(29,D=t.onTouchout),"onTouchdrag"in t&&o(30,q=t.onTouchdrag),"onSelect"in t&&o(31,H=t.onSelect),"onDeselect"in t&&o(32,G=t.onDeselect),"renderSettings"in t&&o(33,B=t.renderSettings),"blockReindexing"in t&&o(34,Z=t.blockReindexing),"clip"in t&&o(0,V=t.clip)},e.$$.update=()=>{49186&e.$$.dirty[0]|36&e.$$.dirty[1]&&$()&&(o(36,Q=Nh({func:w,x:_},i,Vu(B))),tt.set(Q),ct()),131076&e.$$.dirty[0]&&$()&&et.set(S),65544&e.$$.dirty[0]&&$()&&nt.set(T),262160&e.$$.dirty[0]&&$()&&at.set(O),66060288&e.$$.dirty[0]&&(it="mouse"===wn&&Zu(P,E,L,F,R,j)),2080374784&e.$$.dirty[0]&&(rt="touch"===wn&&Zu(Y,z,X,D,q)),3&e.$$.dirty[1]&&(st=void 0!==H||void 0!==G)},[V,tt,et,nt,at,i,r,s,a,u,d,J,K,U,w,_,T,S,O,C,P,E,L,F,R,j,Y,z,X,D,q,H,G,B,Z]}class Fh extends lt{constructor(t){super(),ct(this,t,Lh,Wh,a,{func:14,x:15,strokeWidth:16,stroke:17,opacity:18,transition:19,onClick:20,onMousedown:21,onMouseup:22,onMouseover:23,onMouseout:24,onMousedrag:25,onTouchdown:26,onTouchup:27,onTouchover:28,onTouchout:29,onTouchdrag:30,onSelect:31,onDeselect:32,renderSettings:33,blockReindexing:34,clip:0},[-1,-1])}}function Rh(t){let e,n;return e=new ah({props:{type:"Area",x1:t[0],x2:t[1],y1:t[2],y2:t[3],independentAxis:t[4],fill:t[5],stroke:t[6],strokeWidth:t[7],strokeOpacity:t[8],fillOpacity:t[9],opacity:t[10],transition:t[11],onClick:t[12],onMousedown:t[13],onMouseup:t[14],onMouseover:t[15],onMouseout:t[16],onMousedrag:t[17],onTouchdown:t[18],onTouchup:t[19],onTouchover:t[20],onTouchout:t[21],onTouchdrag:t[22],onSelect:t[23],onDeselect:t[24],renderSettings:t[25],blockReindexing:t[26],clip:t[27],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x1=t[0]),2&n&&(o.x2=t[1]),4&n&&(o.y1=t[2]),8&n&&(o.y2=t[3]),16&n&&(o.independentAxis=t[4]),32&n&&(o.fill=t[5]),64&n&&(o.stroke=t[6]),128&n&&(o.strokeWidth=t[7]),256&n&&(o.strokeOpacity=t[8]),512&n&&(o.fillOpacity=t[9]),1024&n&&(o.opacity=t[10]),2048&n&&(o.transition=t[11]),4096&n&&(o.onClick=t[12]),8192&n&&(o.onMousedown=t[13]),16384&n&&(o.onMouseup=t[14]),32768&n&&(o.onMouseover=t[15]),65536&n&&(o.onMouseout=t[16]),131072&n&&(o.onMousedrag=t[17]),262144&n&&(o.onTouchdown=t[18]),524288&n&&(o.onTouchup=t[19]),1048576&n&&(o.onTouchover=t[20]),2097152&n&&(o.onTouchout=t[21]),4194304&n&&(o.onTouchdrag=t[22]),8388608&n&&(o.onSelect=t[23]),16777216&n&&(o.onDeselect=t[24]),33554432&n&&(o.renderSettings=t[25]),67108864&n&&(o.blockReindexing=t[26]),134217728&n&&(o.clip=t[27]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function jh(t,e,n){let{x1:o}=e,{x2:i}=e,{y1:r}=e,{y2:s}=e,{independentAxis:a}=e,{fill:c}=e,{stroke:l}=e,{strokeWidth:u}=e,{strokeOpacity:h}=e,{fillOpacity:d}=e,{opacity:f}=e,{transition:y}=e,{onClick:p}=e,{onMousedown:g}=e,{onMouseup:m}=e,{onMouseover:x}=e,{onMouseout:k}=e,{onMousedrag:v}=e,{onTouchdown:b}=e,{onTouchup:M}=e,{onTouchover:$}=e,{onTouchout:w}=e,{onTouchdrag:_}=e,{onSelect:T}=e,{onDeselect:S}=e,{renderSettings:O}=e,{blockReindexing:C=!1}=e,{clip:P=!0}=e;return t.$$set=t=>{"x1"in t&&n(0,o=t.x1),"x2"in t&&n(1,i=t.x2),"y1"in t&&n(2,r=t.y1),"y2"in t&&n(3,s=t.y2),"independentAxis"in t&&n(4,a=t.independentAxis),"fill"in t&&n(5,c=t.fill),"stroke"in t&&n(6,l=t.stroke),"strokeWidth"in t&&n(7,u=t.strokeWidth),"strokeOpacity"in t&&n(8,h=t.strokeOpacity),"fillOpacity"in t&&n(9,d=t.fillOpacity),"opacity"in t&&n(10,f=t.opacity),"transition"in t&&n(11,y=t.transition),"onClick"in t&&n(12,p=t.onClick),"onMousedown"in t&&n(13,g=t.onMousedown),"onMouseup"in t&&n(14,m=t.onMouseup),"onMouseover"in t&&n(15,x=t.onMouseover),"onMouseout"in t&&n(16,k=t.onMouseout),"onMousedrag"in t&&n(17,v=t.onMousedrag),"onTouchdown"in t&&n(18,b=t.onTouchdown),"onTouchup"in t&&n(19,M=t.onTouchup),"onTouchover"in t&&n(20,$=t.onTouchover),"onTouchout"in t&&n(21,w=t.onTouchout),"onTouchdrag"in t&&n(22,_=t.onTouchdrag),"onSelect"in t&&n(23,T=t.onSelect),"onDeselect"in t&&n(24,S=t.onDeselect),"renderSettings"in t&&n(25,O=t.renderSettings),"blockReindexing"in t&&n(26,C=t.blockReindexing),"clip"in t&&n(27,P=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_,T,S,O,C,P]}class Yh extends lt{constructor(t){super(),ct(this,t,jh,Rh,a,{x1:0,x2:1,y1:2,y2:3,independentAxis:4,fill:5,stroke:6,strokeWidth:7,strokeOpacity:8,fillOpacity:9,opacity:10,transition:11,onClick:12,onMousedown:13,onMouseup:14,onMouseover:15,onMouseout:16,onMousedrag:17,onTouchdown:18,onTouchup:19,onTouchover:20,onTouchout:21,onTouchdrag:22,onSelect:23,onDeselect:24,renderSettings:25,blockReindexing:26,clip:27})}}function zh(t,e){const n={};if(ni(t))if(t.constructor===Array)for(let o=0;o<e.length;o++){n[e[o]]=t[o]}else if(t.constructor===Function)for(let o=0;o<e.length;o++){const i=e[o];n[i]=t({key:i,index:o})}else for(let o=0;o<e.length;o++){n[e[o]]=t}return n}function Xh(t,e,n){const o=t.slice();return o[115]=e[n],o}function Dh(t,e,n){const o=t.slice();return o[115]=e[n],o}function qh(t,e,n){const o=t.slice();return o[115]=e[n],o}function Hh(t,e,n){const o=t.slice();return o[115]=e[n],o}function Gh(t){let e,n,o,i=t[28]&&Bh(t),r=t[29]&&Vh(t),s=t[30]&&Kh(t);return{c(){i&&i.c(),e=$(),r&&r.c(),n=$(),s&&s.c(),o=w()},m(t,a){i&&i.m(t,a),k(t,e,a),r&&r.m(t,a),k(t,n,a),s&&s.m(t,a),k(t,o,a)},p(t,a){t[28]?i?i.p(t,a):(i=Bh(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),t[29]?r?r.p(t,a):(r=Vh(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),t[30]?s?s.p(t,a):(s=Kh(t),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(t){i&&i.d(t),t&&v(e),r&&r.d(t),t&&v(n),s&&s.d(t),t&&v(o)}}}function Bh(t){let e,n,o,i=[],r=new Map,s=Object.keys(t[17]);const a=t=>t[115];for(let e=0;e<s.length;e+=1){let n=Hh(t,s,e),o=a(n);r.set(o,i[e]=Zh(o,n))}return{c(){e=b("g");for(let t=0;t<i.length;t+=1)i[t].c();_(e,"clip-path",n=t[1]?`url(#clip-${t[16].sectionId})`:"none"),_(e,"class",o=`${t[0].toLowerCase()}-layer`)},m(t,n){k(t,e,n);for(let t=0;t<i.length;t+=1)i[t].m(e,null)},p(t,s){if(33161217&s[0]){const n=Object.keys(t[17]);i=nt(i,s,a,1,t,n,r,e,et,Zh,null,Hh)}65538&s[0]&&n!==(n=t[1]?`url(#clip-${t[16].sectionId})`:"none")&&_(e,"clip-path",n),1&s[0]&&o!==(o=`${t[0].toLowerCase()}-layer`)&&_(e,"class",o)},d(t){t&&v(e);for(let t=0;t<i.length;t+=1)i[t].d()}}}function Zh(t,e){let n,o,i,r,s,a,c,l,u;return{key:t,first:null,c(){n=b("path"),_(n,"class",o=e[0].toLowerCase()),_(n,"d",i=Ku(e[17][e[115]])),_(n,"fill",r=e[19][e[115]]),_(n,"stroke",s=e[20][e[115]]),_(n,"stroke-width",a=e[21][e[115]]),_(n,"fill-opacity",c=e[23][e[115]]),_(n,"stroke-opacity",l=e[22][e[115]]),_(n,"opacity",u=e[24][e[115]]),this.first=n},m(t,e){k(t,n,e)},p(t,e){1&e[0]&&o!==(o=t[0].toLowerCase())&&_(n,"class",o),131072&e[0]&&i!==(i=Ku(t[17][t[115]]))&&_(n,"d",i),655360&e[0]&&r!==(r=t[19][t[115]])&&_(n,"fill",r),1179648&e[0]&&s!==(s=t[20][t[115]])&&_(n,"stroke",s),2228224&e[0]&&a!==(a=t[21][t[115]])&&_(n,"stroke-width",a),8519680&e[0]&&c!==(c=t[23][t[115]])&&_(n,"fill-opacity",c),4325376&e[0]&&l!==(l=t[22][t[115]])&&_(n,"stroke-opacity",l),16908288&e[0]&&u!==(u=t[24][t[115]])&&_(n,"opacity",u)},d(t){t&&v(n)}}}function Vh(t){let e,n,o=[],i=new Map,r=Object.keys(t[17]);const s=t=>t[115];for(let e=0;e<r.length;e+=1){let n=qh(t,r,e),a=s(n);i.set(a,o[e]=Jh(a,n))}return{c(){e=b("g");for(let t=0;t<o.length;t+=1)o[t].c();_(e,"clip-path",n=t[1]?`url(#clip-${t[16].sectionId})`:"none"),_(e,"class","point-layer")},m(t,n){k(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,r){if(33423360&r[0]){const n=Object.keys(t[17]);o=nt(o,r,s,1,t,n,i,e,et,Jh,null,qh)}65538&r[0]&&n!==(n=t[1]?`url(#clip-${t[16].sectionId})`:"none")&&_(e,"clip-path",n)},d(t){t&&v(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Jh(t,e){let n,o,i,r,s,a,c,l,u,h;return{key:t,first:null,c(){n=b("circle"),_(n,"class","point"),_(n,"cx",o=e[17][e[115]].coordinates[0]),_(n,"cy",i=e[17][e[115]].coordinates[1]),_(n,"r",r=e[18][e[115]]),_(n,"fill",s=e[19][e[115]]),_(n,"stroke",a=e[20][e[115]]),_(n,"stroke-width",c=e[21][e[115]]),_(n,"fill-opacity",l=e[23][e[115]]),_(n,"stroke-opacity",u=e[22][e[115]]),_(n,"opacity",h=e[24][e[115]]),this.first=n},m(t,e){k(t,n,e)},p(t,e){131072&e[0]&&o!==(o=t[17][t[115]].coordinates[0])&&_(n,"cx",o),131072&e[0]&&i!==(i=t[17][t[115]].coordinates[1])&&_(n,"cy",i),393216&e[0]&&r!==(r=t[18][t[115]])&&_(n,"r",r),655360&e[0]&&s!==(s=t[19][t[115]])&&_(n,"fill",s),1179648&e[0]&&a!==(a=t[20][t[115]])&&_(n,"stroke",a),2228224&e[0]&&c!==(c=t[21][t[115]])&&_(n,"stroke-width",c),8519680&e[0]&&l!==(l=t[23][t[115]])&&_(n,"fill-opacity",l),4325376&e[0]&&u!==(u=t[22][t[115]])&&_(n,"stroke-opacity",u),16908288&e[0]&&h!==(h=t[24][t[115]])&&_(n,"opacity",h)},d(t){t&&v(n)}}}function Kh(t){let e,n,o=[],i=new Map,r=Object.keys(t[17]);const s=t=>t[115];for(let e=0;e<r.length;e+=1){let n=Dh(t,r,e),a=s(n);i.set(a,o[e]=Uh(a,n))}return{c(){e=b("g");for(let t=0;t<o.length;t+=1)o[t].c();_(e,"clip-path",n=t[1]?`url(#clip-${t[16].sectionId})`:"none"),_(e,"class","line-layer")},m(t,n){k(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,r){if(20054016&r[0]){const n=Object.keys(t[17]);o=nt(o,r,s,1,t,n,i,e,et,Uh,null,Dh)}65538&r[0]&&n!==(n=t[1]?`url(#clip-${t[16].sectionId})`:"none")&&_(e,"clip-path",n)},d(t){t&&v(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Uh(t,e){let n,o,i,r,s;return{key:t,first:null,c(){n=b("path"),_(n,"class","line"),_(n,"d",o=Ku(e[17][e[115]])),_(n,"fill","none"),_(n,"stroke-width",i=e[21][e[115]]),_(n,"stroke",r=e[20][e[115]]),_(n,"style",s=`opacity: ${e[24][e[115]]}`),this.first=n},m(t,e){k(t,n,e)},p(t,e){131072&e[0]&&o!==(o=Ku(t[17][t[115]]))&&_(n,"d",o),2228224&e[0]&&i!==(i=t[21][t[115]])&&_(n,"stroke-width",i),1179648&e[0]&&r!==(r=t[20][t[115]])&&_(n,"stroke",r),16908288&e[0]&&s!==(s=`opacity: ${t[24][t[115]]}`)&&_(n,"style",s)},d(t){t&&v(n)}}}function Qh(t){let e,n,o=[],i=new Map,r=Object.keys(t[17]);const s=t=>t[115];for(let e=0;e<r.length;e+=1){let n=Xh(t,r,e),a=s(n);i.set(a,o[e]=td(a,n))}return{c(){e=b("g");for(let t=0;t<o.length;t+=1)o[t].c();_(e,"clip-path",n=t[1]?`url(#clip-${t[16].sectionId})`:"none"),_(e,"class","label-layer")},m(t,n){k(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,r){if(268042268&r[0]){const n=Object.keys(t[17]);o=nt(o,r,s,1,t,n,i,e,et,td,null,Xh)}65538&r[0]&&n!==(n=t[1]?`url(#clip-${t[16].sectionId})`:"none")&&_(e,"clip-path",n)},d(t){t&&v(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function td(t,e){let n,o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,$=e[2][e[115]]+"";return{key:t,first:null,c(){n=b("text"),o=M($),_(n,"class","label"),_(n,"x",i=e[17][e[115]].coordinates[0]),_(n,"y",r=e[17][e[115]].coordinates[1]),_(n,"fill",s=e[19][e[115]]),_(n,"stroke",a=e[20][e[115]]),_(n,"stroke-width",c=e[21][e[115]]),_(n,"fill-opacity",l=e[23][e[115]]),_(n,"stroke-opacity",u=e[22][e[115]]),_(n,"opacity",h=e[24][e[115]]),_(n,"transform",d=`\n          rotate(${e[27][e[115]]}, \n          ${e[17][e[115]].coordinates[0]}, \n          ${e[17][e[115]].coordinates[1]})\n        `),_(n,"font-family",f=e[3][e[115]]),_(n,"font-size",y=e[25][e[115]]+"px"),_(n,"font-weight",p=e[26][e[115]]),_(n,"text-anchor",g=Uu(e[4][e[115]]).textAnchor),_(n,"dominant-baseline",m=Uu(e[4][e[115]]).dominantBaseline),this.first=n},m(t,e){k(t,n,e),x(n,o)},p(t,e){131076&e[0]&&$!==($=t[2][t[115]]+"")&&S(o,$),131072&e[0]&&i!==(i=t[17][t[115]].coordinates[0])&&_(n,"x",i),131072&e[0]&&r!==(r=t[17][t[115]].coordinates[1])&&_(n,"y",r),655360&e[0]&&s!==(s=t[19][t[115]])&&_(n,"fill",s),1179648&e[0]&&a!==(a=t[20][t[115]])&&_(n,"stroke",a),2228224&e[0]&&c!==(c=t[21][t[115]])&&_(n,"stroke-width",c),8519680&e[0]&&l!==(l=t[23][t[115]])&&_(n,"fill-opacity",l),4325376&e[0]&&u!==(u=t[22][t[115]])&&_(n,"stroke-opacity",u),16908288&e[0]&&h!==(h=t[24][t[115]])&&_(n,"opacity",h),134348800&e[0]&&d!==(d=`\n          rotate(${t[27][t[115]]}, \n          ${t[17][t[115]].coordinates[0]}, \n          ${t[17][t[115]].coordinates[1]})\n        `)&&_(n,"transform",d),131080&e[0]&&f!==(f=t[3][t[115]])&&_(n,"font-family",f),33685504&e[0]&&y!==(y=t[25][t[115]]+"px")&&_(n,"font-size",y),67239936&e[0]&&p!==(p=t[26][t[115]])&&_(n,"font-weight",p),131088&e[0]&&g!==(g=Uu(t[4][t[115]]).textAnchor)&&_(n,"text-anchor",g),131088&e[0]&&m!==(m=Uu(t[4][t[115]]).dominantBaseline)&&_(n,"dominant-baseline",m)},d(t){t&&v(n)}}}function ed(e){let n,o,i="svg"===e[32].output(),r=i&&Gh(e),s=e[31]&&Qh(e);return{c(){r&&r.c(),n=$(),s&&s.c(),o=w()},m(t,e){r&&r.m(t,e),k(t,n,e),s&&s.m(t,e),k(t,o,e)},p(t,e){2&e[1]&&(i="svg"===t[32].output()),i?r?r.p(t,e):(r=Gh(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),t[31]?s?s.p(t,e):(s=Qh(t),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},i:t,o:t,d(t){r&&r.d(t),t&&v(n),s&&s.d(t),t&&v(o)}}}let nd=0;function od(e,n,o){let i,r,s,a,u,h,d,f,y,p,g,m,x,k,v=t,b=()=>(v(),v=c(he,(t=>o(17,r=t))),he),M=t,$=()=>(M(),M=c(de,(t=>o(18,s=t))),de),w=t,_=()=>(w(),w=c(fe,(t=>o(19,a=t))),fe),T=t,S=()=>(T(),T=c(ye,(t=>o(20,u=t))),ye),O=t,C=()=>(O(),O=c(pe,(t=>o(21,h=t))),pe),P=t,E=()=>(P(),P=c(ge,(t=>o(22,d=t))),ge),L=t,F=()=>(L(),L=c(me,(t=>o(23,f=t))),me),R=t,j=()=>(R(),R=c(xe,(t=>o(24,y=t))),xe),Y=t,X=()=>(Y(),Y=c(ke,(t=>o(25,p=t))),ke),q=t,H=()=>(q(),q=c(ve,(t=>o(26,g=t))),ve),G=t,B=()=>(G(),G=c(Me,(t=>o(27,m=t))),Me);e.$$.on_destroy.push((()=>v())),e.$$.on_destroy.push((()=>M())),e.$$.on_destroy.push((()=>w())),e.$$.on_destroy.push((()=>T())),e.$$.on_destroy.push((()=>O())),e.$$.on_destroy.push((()=>P())),e.$$.on_destroy.push((()=>L())),e.$$.on_destroy.push((()=>R())),e.$$.on_destroy.push((()=>Y())),e.$$.on_destroy.push((()=>q())),e.$$.on_destroy.push((()=>G()));const Z="layer"+nd++;let V=!0;const J=()=>!V;let{type:K}=n,{x:U}=n,{y:Q}=n,{x1:tt}=n,{x2:et}=n,{y1:nt}=n,{y2:ot}=n,{geometry:it}=n,{shape:rt}=n,{size:st}=n,{independentAxis:at}=n,{radius:ct}=n,{fill:lt}=n,{stroke:ut}=n,{strokeWidth:ht}=n,{strokeOpacity:dt}=n,{fillOpacity:ft}=n,{opacity:pt}=n,{text:gt}=n,{fontFamily:mt}=n,{fontSize:xt}=n,{fontWeight:kt}=n,{rotation:vt}=n,{anchorPoint:bt}=n,{transition:Mt}=n,{onClick:$t}=n,{onMousedown:wt}=n,{onMouseup:_t}=n,{onMouseover:Tt}=n,{onMouseout:St}=n,{onMousedrag:Ot}=n,{onTouchdown:Ct}=n,{onTouchup:Pt}=n,{onTouchover:It}=n,{onTouchout:Nt}=n,{onTouchdrag:At}=n,{onSelect:Wt}=n,{onDeselect:Et}=n,{key:Lt}=n,{renderSettings:Ft}=n,{blockReindexing:Rt=!1}=n,{_asPolygon:jt=!0}=n,{clip:Yt}=n,zt=Hl(K,{x:U,y:Q,x1:tt,x2:et,y1:nt,y2:ot,geometry:it,shape:rt,size:st,independentAxis:at,radius:ct,fill:lt,stroke:ut,strokeWidth:ht,strokeOpacity:dt,fillOpacity:ft,opacity:pt,text:gt,fontFamily:mt,fontSize:xt,fontWeight:kt,rotation:vt,anchorPoint:bt}),Xt={x:U,y:Q,x1:tt,x2:et,y1:nt,y2:ot,geometry:it,shape:rt,size:st,independentAxis:at},Dt=bu[K],qt=Wu[K],Ht=!0===jt&&void 0!==Wu[K];const Gt=yt();l(e,Gt,(t=>o(32,k=t)));const Bt=nn();l(e,Bt,(t=>o(16,i=t)));const Zt=cn();let Vt,Jt;l(e,Zt,(t=>o(94,x=t))),Ne();let Kt=Object.keys(Vt),Ut=zh(zt.radius,Kt);const Qt=zh(zt.fill,Kt),te=zh(zt.stroke,Kt);let ee=zh(zt.strokeWidth,Kt);const ne=zh(zt.strokeOpacity,Kt),oe=zh(zt.fillOpacity,Kt),ie=zh(zt.opacity,Kt);let re=zh(zt.text,Kt),se=zh(zt.fontFamily,Kt);const ae=zh(zt.fontSize,Kt),ce=zh(zt.fontWeight,Kt),le=zh(zt.rotation,Kt);let ue=zh(zt.anchorPoint,Kt);Ae();let he=Hu("geometry",Jt,Mt);b();let de=Hu("radius",Ut,Mt);$();let fe=Hu("fill",Qt,Mt);_();let ye=Hu("stroke",te,Mt);S();let pe=Hu("strokeWidth",ee,Mt);C();let ge=Hu("strokeOpacity",ne,Mt);E();let me=Hu("fillOpacity",oe,Mt);F();let xe=Hu("opacity",ie,Mt);j();let ke=Hu("fontSize",ae,Mt);X();let ve=Hu("fontWeight",ce,Mt);H();let be,Me=Hu("rotation",le,Mt);B();let $e,we,_e,Te,Se,Oe,Ce,Pe=!1,Ie=!1;function Ne(){o(83,Vt=Dt(Xt,Lt,i,Vu(Ft)))}function Ae(){Jt=Ht?qt(Vt,{radiusObject:Ut,strokeWidthObject:ee}):Vt}function We(){if(V||!Rt&&!i.blockReindexing){if(Ee(),$e){const t=x.mouse().marks();t.loadLayer(K,Le()),$t&&t.addLayerInteraction("click",Z,$t),wt&&t.addLayerInteraction("mousedown",Z,wt),_t&&t.addLayerInteraction("mouseup",Z,_t),St&&t.addLayerInteraction("mouseout",Z,St),Tt&&t.addLayerInteraction("mouseover",Z,Tt),Ot&&t.addLayerInteraction("mousedrag",Z,Ot)}if(we){const t=x.touch().marks();t.loadLayer(K,Le()),Ct&&t.addLayerInteraction("touchdown",Z,Ct),Pt&&t.addLayerInteraction("touchup",Z,Pt),It&&t.addLayerInteraction("touchover",Z,It),Nt&&t.addLayerInteraction("touchout",Z,Nt),At&&t.addLayerInteraction("touchdrag",Z,At)}}if(function(){const t=x.select();t.layerIsLoaded(Z)&&t.removeLayer(Z)}(),_e){x.select().loadLayer(K,Le(),{onSelect:Wt,onDeselect:Et})}}function Ee(){if("mouse"===wn){const t=x.mouse().marks();t.layerIsLoaded(Z)&&(t.removeAllLayerInteractions(Z),t.removeLayer(Z))}if("touch"===wn){const t=x.touch().marks();t.layerIsLoaded(Z)&&(t.removeAllLayerInteractions(Z),t.removeLayer(Z))}}function Le(){return function(t,e,n,o,i){const r={layerId:e,keyArray:n};let s;return"Point"===t&&(s={pixelGeometryObject:o.pixelGeometryObject,radiusObject:i.radiusObject}),"Label"===t&&(s={pixelGeometryObject:o.pixelGeometryObject,radiusObject:i.fontSizeObject}),"Rectangle"===t&&(s={screenGeometryObject:o.screenGeometryObject}),"Polygon"===t&&(s={screenGeometryObject:o.screenGeometryObject}),"Line"===t&&(s={pixelGeometryObject:o.pixelGeometryObject,strokeWidthObject:i.strokeWidthObject}),"Symbol"===t&&(s={screenGeometryObject:o.screenGeometryObject}),"Area"===t&&(s={screenGeometryObject:o.screenGeometryObject}),r.layerAttributes=s,r}(K,Z,Kt,{pixelGeometryObject:Vt,screenGeometryObject:Jt},{radiusObject:Ut,strokeWidthObject:ee})}return I((()=>{!Xu(be,Mt)&&J()&&(b(o(5,he=Hu("geometry",r,Mt))),$(o(6,de=Hu("radius",s,Mt))),_(o(7,fe=Hu("fill",a,Mt))),S(o(8,ye=Hu("stroke",u,Mt))),C(o(9,pe=Hu("strokeWidth",h,Mt))),E(o(10,ge=Hu("strokeOpacity",d,Mt))),F(o(11,me=Hu("fillOpacity",f,Mt))),j(o(12,xe=Hu("opacity",y,Mt))),X(o(13,ke=Hu("fontSize",p,Mt))),H(o(14,ve=Hu("fontWeight",g,Mt))),B(o(15,Me=Hu("rotation",m,Mt)))),be=Mt})),A((()=>{V=!1})),N((()=>{We()})),W((()=>{Ee()})),e.$$set=t=>{"type"in t&&o(0,K=t.type),"x"in t&&o(36,U=t.x),"y"in t&&o(37,Q=t.y),"x1"in t&&o(38,tt=t.x1),"x2"in t&&o(39,et=t.x2),"y1"in t&&o(40,nt=t.y1),"y2"in t&&o(41,ot=t.y2),"geometry"in t&&o(42,it=t.geometry),"shape"in t&&o(43,rt=t.shape),"size"in t&&o(44,st=t.size),"independentAxis"in t&&o(45,at=t.independentAxis),"radius"in t&&o(46,ct=t.radius),"fill"in t&&o(47,lt=t.fill),"stroke"in t&&o(48,ut=t.stroke),"strokeWidth"in t&&o(49,ht=t.strokeWidth),"strokeOpacity"in t&&o(50,dt=t.strokeOpacity),"fillOpacity"in t&&o(51,ft=t.fillOpacity),"opacity"in t&&o(52,pt=t.opacity),"text"in t&&o(53,gt=t.text),"fontFamily"in t&&o(54,mt=t.fontFamily),"fontSize"in t&&o(55,xt=t.fontSize),"fontWeight"in t&&o(56,kt=t.fontWeight),"rotation"in t&&o(57,vt=t.rotation),"anchorPoint"in t&&o(58,bt=t.anchorPoint),"transition"in t&&o(59,Mt=t.transition),"onClick"in t&&o(60,$t=t.onClick),"onMousedown"in t&&o(61,wt=t.onMousedown),"onMouseup"in t&&o(62,_t=t.onMouseup),"onMouseover"in t&&o(63,Tt=t.onMouseover),"onMouseout"in t&&o(64,St=t.onMouseout),"onMousedrag"in t&&o(65,Ot=t.onMousedrag),"onTouchdown"in t&&o(66,Ct=t.onTouchdown),"onTouchup"in t&&o(67,Pt=t.onTouchup),"onTouchover"in t&&o(68,It=t.onTouchover),"onTouchout"in t&&o(69,Nt=t.onTouchout),"onTouchdrag"in t&&o(70,At=t.onTouchdrag),"onSelect"in t&&o(71,Wt=t.onSelect),"onDeselect"in t&&o(72,Et=t.onDeselect),"key"in t&&o(73,Lt=t.key),"renderSettings"in t&&o(74,Ft=t.renderSettings),"blockReindexing"in t&&o(75,Rt=t.blockReindexing),"_asPolygon"in t&&o(76,jt=t._asPolygon),"clip"in t&&o(1,Yt=t.clip)},e.$$.update=()=>{1&e.$$.dirty[0]|268435424&e.$$.dirty[1]&&J()&&o(78,zt=Hl(K,{x:U,y:Q,x1:tt,x2:et,y1:nt,y2:ot,geometry:it,shape:rt,size:st,independentAxis:at,radius:ct,fill:lt,stroke:ut,strokeWidth:ht,strokeOpacity:dt,fillOpacity:ft,opacity:pt,text:gt,fontFamily:mt,fontSize:xt,fontWeight:kt,rotation:vt,anchorPoint:bt})),32736&e.$$.dirty[1]&&J()&&o(79,Xt={x:U,y:Q,x1:tt,x2:et,y1:nt,y2:ot,geometry:it,shape:rt,size:st,independentAxis:at}),1&e.$$.dirty[0]&&J()&&(Dt=bu[K],qt=Wu[K]),1&e.$$.dirty[0]|16384&e.$$.dirty[2]&&J()&&o(82,Ht=!0===jt&&void 0!==Wu[K]),65536&e.$$.dirty[0]|137216&e.$$.dirty[2]&&J()&&(Vu(Ft),o(89,Pe=!0),o(90,Ie=!0)),404750336&e.$$.dirty[2]&&(D(),z).then((()=>{Pe&&(Ne(),o(85,Kt=Object.keys(Vt)),Ut=zh(zt.radius,Kt),ee=zh(zt.strokeWidth,Kt)),Ie&&(Ae(),he.set(Jt),We()),o(89,Pe=!1),o(90,Ie=!1)})),576&e.$$.dirty[0]|9502720&e.$$.dirty[2]&&J()&&(Ht||(de.set(zh(zt.radius,Kt)),pe.set(zh(zt.strokeWidth,Kt)))),128&e.$$.dirty[0]|8454144&e.$$.dirty[2]&&J()&&fe.set(zh(zt.fill,Kt)),256&e.$$.dirty[0]|8454144&e.$$.dirty[2]&&J()&&ye.set(zh(zt.stroke,Kt)),1024&e.$$.dirty[0]|8454144&e.$$.dirty[2]&&J()&&ge.set(zh(zt.strokeOpacity,Kt)),2048&e.$$.dirty[0]|8454144&e.$$.dirty[2]&&J()&&me.set(zh(zt.fillOpacity,Kt)),4096&e.$$.dirty[0]|8454144&e.$$.dirty[2]&&J()&&xe.set(zh(zt.opacity,Kt)),8192&e.$$.dirty[0]|8454144&e.$$.dirty[2]&&J()&&ke.set(zh(zt.fontSize,Kt)),16384&e.$$.dirty[0]|8454144&e.$$.dirty[2]&&J()&&ve.set(zh(zt.fontWeight,Kt)),32768&e.$$.dirty[0]|8454144&e.$$.dirty[2]&&J()&&Me.set(zh(zt.rotation,Kt)),8454144&e.$$.dirty[2]&&J()&&o(2,re=zh(zt.text,Kt)),8454144&e.$$.dirty[2]&&J()&&o(3,se=zh(zt.fontFamily,Kt)),8454144&e.$$.dirty[2]&&J()&&o(4,ue=zh(zt.anchorPoint,Kt)),1610612736&e.$$.dirty[1]|15&e.$$.dirty[2]&&($e="mouse"===wn&&Zu($t,wt,_t,Tt,St,Ot)),496&e.$$.dirty[2]&&(we="touch"===wn&&Zu(Ct,Pt,It,Nt,At)),1536&e.$$.dirty[2]&&(_e=void 0!==Wt||void 0!==Et),1&e.$$.dirty[0]|1048576&e.$$.dirty[2]&&o(28,Te=!["Point","Line","Label"].includes(K)||Ht),1&e.$$.dirty[0]|1048576&e.$$.dirty[2]&&o(29,Se="Point"===K&&!Ht),1&e.$$.dirty[0]|1048576&e.$$.dirty[2]&&o(30,Oe="Line"===K&&!Ht),1&e.$$.dirty[0]&&o(31,Ce="Label"===K)},[K,Yt,re,se,ue,he,de,fe,ye,pe,ge,me,xe,ke,ve,Me,i,r,s,a,u,h,d,f,y,p,g,m,Te,Se,Oe,Ce,k,Gt,Bt,Zt,U,Q,tt,et,nt,ot,it,rt,st,at,ct,lt,ut,ht,dt,ft,pt,gt,mt,xt,kt,vt,bt,Mt,$t,wt,_t,Tt,St,Ot,Ct,Pt,It,Nt,At,Wt,Et,Lt,Ft,Rt,jt]}class id extends lt{constructor(t){super(),ct(this,t,od,ed,a,{type:0,x:36,y:37,x1:38,x2:39,y1:40,y2:41,geometry:42,shape:43,size:44,independentAxis:45,radius:46,fill:47,stroke:48,strokeWidth:49,strokeOpacity:50,fillOpacity:51,opacity:52,text:53,fontFamily:54,fontSize:55,fontWeight:56,rotation:57,anchorPoint:58,transition:59,onClick:60,onMousedown:61,onMouseup:62,onMouseover:63,onMouseout:64,onMousedrag:65,onTouchdown:66,onTouchup:67,onTouchover:68,onTouchout:69,onTouchdrag:70,onSelect:71,onDeselect:72,key:73,renderSettings:74,blockReindexing:75,_asPolygon:76,clip:1},[-1,-1,-1,-1])}}function rd(t){let e,n;return e=new id({props:{type:"Point",x:t[0],y:t[1],geometry:t[2],radius:t[3],fill:t[4],stroke:t[5],strokeWidth:t[6],strokeOpacity:t[7],fillOpacity:t[8],opacity:t[9],transition:t[10],onClick:t[11],onMousedown:t[12],onMouseup:t[13],onMouseover:t[14],onMouseout:t[15],onMousedrag:t[16],onTouchdown:t[17],onTouchup:t[18],onTouchover:t[19],onTouchout:t[20],onTouchdrag:t[21],onSelect:t[22],onDeselect:t[23],key:t[24],renderSettings:t[25],blockReindexing:t[26],clip:t[27],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x=t[0]),2&n&&(o.y=t[1]),4&n&&(o.geometry=t[2]),8&n&&(o.radius=t[3]),16&n&&(o.fill=t[4]),32&n&&(o.stroke=t[5]),64&n&&(o.strokeWidth=t[6]),128&n&&(o.strokeOpacity=t[7]),256&n&&(o.fillOpacity=t[8]),512&n&&(o.opacity=t[9]),1024&n&&(o.transition=t[10]),2048&n&&(o.onClick=t[11]),4096&n&&(o.onMousedown=t[12]),8192&n&&(o.onMouseup=t[13]),16384&n&&(o.onMouseover=t[14]),32768&n&&(o.onMouseout=t[15]),65536&n&&(o.onMousedrag=t[16]),131072&n&&(o.onTouchdown=t[17]),262144&n&&(o.onTouchup=t[18]),524288&n&&(o.onTouchover=t[19]),1048576&n&&(o.onTouchout=t[20]),2097152&n&&(o.onTouchdrag=t[21]),4194304&n&&(o.onSelect=t[22]),8388608&n&&(o.onDeselect=t[23]),16777216&n&&(o.key=t[24]),33554432&n&&(o.renderSettings=t[25]),67108864&n&&(o.blockReindexing=t[26]),134217728&n&&(o.clip=t[27]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function sd(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{radius:s}=e,{fill:a}=e,{stroke:c}=e,{strokeWidth:l}=e,{strokeOpacity:u}=e,{fillOpacity:h}=e,{opacity:d}=e,{transition:f}=e,{onClick:y}=e,{onMousedown:p}=e,{onMouseup:g}=e,{onMouseover:m}=e,{onMouseout:x}=e,{onMousedrag:k}=e,{onTouchdown:v}=e,{onTouchup:b}=e,{onTouchover:M}=e,{onTouchout:$}=e,{onTouchdrag:w}=e,{onSelect:_}=e,{onDeselect:T}=e,{key:S}=e,{renderSettings:O}=e,{blockReindexing:C=!1}=e,{clip:P=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"radius"in t&&n(3,s=t.radius),"fill"in t&&n(4,a=t.fill),"stroke"in t&&n(5,c=t.stroke),"strokeWidth"in t&&n(6,l=t.strokeWidth),"strokeOpacity"in t&&n(7,u=t.strokeOpacity),"fillOpacity"in t&&n(8,h=t.fillOpacity),"opacity"in t&&n(9,d=t.opacity),"transition"in t&&n(10,f=t.transition),"onClick"in t&&n(11,y=t.onClick),"onMousedown"in t&&n(12,p=t.onMousedown),"onMouseup"in t&&n(13,g=t.onMouseup),"onMouseover"in t&&n(14,m=t.onMouseover),"onMouseout"in t&&n(15,x=t.onMouseout),"onMousedrag"in t&&n(16,k=t.onMousedrag),"onTouchdown"in t&&n(17,v=t.onTouchdown),"onTouchup"in t&&n(18,b=t.onTouchup),"onTouchover"in t&&n(19,M=t.onTouchover),"onTouchout"in t&&n(20,$=t.onTouchout),"onTouchdrag"in t&&n(21,w=t.onTouchdrag),"onSelect"in t&&n(22,_=t.onSelect),"onDeselect"in t&&n(23,T=t.onDeselect),"key"in t&&n(24,S=t.key),"renderSettings"in t&&n(25,O=t.renderSettings),"blockReindexing"in t&&n(26,C=t.blockReindexing),"clip"in t&&n(27,P=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_,T,S,O,C,P]}class ad extends lt{constructor(t){super(),ct(this,t,sd,rd,a,{x:0,y:1,geometry:2,radius:3,fill:4,stroke:5,strokeWidth:6,strokeOpacity:7,fillOpacity:8,opacity:9,transition:10,onClick:11,onMousedown:12,onMouseup:13,onMouseover:14,onMouseout:15,onMousedrag:16,onTouchdown:17,onTouchup:18,onTouchover:19,onTouchout:20,onTouchdrag:21,onSelect:22,onDeselect:23,key:24,renderSettings:25,blockReindexing:26,clip:27})}}function cd(t){let e,n;return e=new id({props:{type:"Rectangle",x1:t[0],x2:t[1],y1:t[2],y2:t[3],fill:t[4],stroke:t[5],strokeWidth:t[6],strokeOpacity:t[7],fillOpacity:t[8],opacity:t[9],transition:t[10],onClick:t[11],onMousedown:t[12],onMouseup:t[13],onMouseover:t[14],onMouseout:t[15],onMousedrag:t[16],onTouchdown:t[17],onTouchup:t[18],onTouchover:t[19],onTouchout:t[20],onTouchdrag:t[21],onSelect:t[22],onDeselect:t[23],key:t[24],renderSettings:t[25],blockReindexing:t[26],clip:t[27],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x1=t[0]),2&n&&(o.x2=t[1]),4&n&&(o.y1=t[2]),8&n&&(o.y2=t[3]),16&n&&(o.fill=t[4]),32&n&&(o.stroke=t[5]),64&n&&(o.strokeWidth=t[6]),128&n&&(o.strokeOpacity=t[7]),256&n&&(o.fillOpacity=t[8]),512&n&&(o.opacity=t[9]),1024&n&&(o.transition=t[10]),2048&n&&(o.onClick=t[11]),4096&n&&(o.onMousedown=t[12]),8192&n&&(o.onMouseup=t[13]),16384&n&&(o.onMouseover=t[14]),32768&n&&(o.onMouseout=t[15]),65536&n&&(o.onMousedrag=t[16]),131072&n&&(o.onTouchdown=t[17]),262144&n&&(o.onTouchup=t[18]),524288&n&&(o.onTouchover=t[19]),1048576&n&&(o.onTouchout=t[20]),2097152&n&&(o.onTouchdrag=t[21]),4194304&n&&(o.onSelect=t[22]),8388608&n&&(o.onDeselect=t[23]),16777216&n&&(o.key=t[24]),33554432&n&&(o.renderSettings=t[25]),67108864&n&&(o.blockReindexing=t[26]),134217728&n&&(o.clip=t[27]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function ld(t,e,n){let{x1:o}=e,{x2:i}=e,{y1:r}=e,{y2:s}=e,{fill:a}=e,{stroke:c}=e,{strokeWidth:l}=e,{strokeOpacity:u}=e,{fillOpacity:h}=e,{opacity:d}=e,{transition:f}=e,{onClick:y}=e,{onMousedown:p}=e,{onMouseup:g}=e,{onMouseover:m}=e,{onMouseout:x}=e,{onMousedrag:k}=e,{onTouchdown:v}=e,{onTouchup:b}=e,{onTouchover:M}=e,{onTouchout:$}=e,{onTouchdrag:w}=e,{onSelect:_}=e,{onDeselect:T}=e,{key:S}=e,{renderSettings:O}=e,{blockReindexing:C=!1}=e,{clip:P=!0}=e;return t.$$set=t=>{"x1"in t&&n(0,o=t.x1),"x2"in t&&n(1,i=t.x2),"y1"in t&&n(2,r=t.y1),"y2"in t&&n(3,s=t.y2),"fill"in t&&n(4,a=t.fill),"stroke"in t&&n(5,c=t.stroke),"strokeWidth"in t&&n(6,l=t.strokeWidth),"strokeOpacity"in t&&n(7,u=t.strokeOpacity),"fillOpacity"in t&&n(8,h=t.fillOpacity),"opacity"in t&&n(9,d=t.opacity),"transition"in t&&n(10,f=t.transition),"onClick"in t&&n(11,y=t.onClick),"onMousedown"in t&&n(12,p=t.onMousedown),"onMouseup"in t&&n(13,g=t.onMouseup),"onMouseover"in t&&n(14,m=t.onMouseover),"onMouseout"in t&&n(15,x=t.onMouseout),"onMousedrag"in t&&n(16,k=t.onMousedrag),"onTouchdown"in t&&n(17,v=t.onTouchdown),"onTouchup"in t&&n(18,b=t.onTouchup),"onTouchover"in t&&n(19,M=t.onTouchover),"onTouchout"in t&&n(20,$=t.onTouchout),"onTouchdrag"in t&&n(21,w=t.onTouchdrag),"onSelect"in t&&n(22,_=t.onSelect),"onDeselect"in t&&n(23,T=t.onDeselect),"key"in t&&n(24,S=t.key),"renderSettings"in t&&n(25,O=t.renderSettings),"blockReindexing"in t&&n(26,C=t.blockReindexing),"clip"in t&&n(27,P=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_,T,S,O,C,P]}class ud extends lt{constructor(t){super(),ct(this,t,ld,cd,a,{x1:0,x2:1,y1:2,y2:3,fill:4,stroke:5,strokeWidth:6,strokeOpacity:7,fillOpacity:8,opacity:9,transition:10,onClick:11,onMousedown:12,onMouseup:13,onMouseover:14,onMouseout:15,onMousedrag:16,onTouchdown:17,onTouchup:18,onTouchover:19,onTouchout:20,onTouchdrag:21,onSelect:22,onDeselect:23,key:24,renderSettings:25,blockReindexing:26,clip:27})}}function hd(t){let e,n;return e=new id({props:{type:"Polygon",x:t[0],y:t[1],geometry:t[2],fill:t[3],stroke:t[4],strokeWidth:t[5],strokeOpacity:t[6],fillOpacity:t[7],opacity:t[8],transition:t[9],onClick:t[10],onMousedown:t[11],onMouseup:t[12],onMouseover:t[13],onMouseout:t[14],onMousedrag:t[15],onTouchdown:t[16],onTouchup:t[17],onTouchover:t[18],onTouchout:t[19],onTouchdrag:t[20],onSelect:t[21],onDeselect:t[22],key:t[24],renderSettings:t[23],blockReindexing:t[25],clip:t[26],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x=t[0]),2&n&&(o.y=t[1]),4&n&&(o.geometry=t[2]),8&n&&(o.fill=t[3]),16&n&&(o.stroke=t[4]),32&n&&(o.strokeWidth=t[5]),64&n&&(o.strokeOpacity=t[6]),128&n&&(o.fillOpacity=t[7]),256&n&&(o.opacity=t[8]),512&n&&(o.transition=t[9]),1024&n&&(o.onClick=t[10]),2048&n&&(o.onMousedown=t[11]),4096&n&&(o.onMouseup=t[12]),8192&n&&(o.onMouseover=t[13]),16384&n&&(o.onMouseout=t[14]),32768&n&&(o.onMousedrag=t[15]),65536&n&&(o.onTouchdown=t[16]),131072&n&&(o.onTouchup=t[17]),262144&n&&(o.onTouchover=t[18]),524288&n&&(o.onTouchout=t[19]),1048576&n&&(o.onTouchdrag=t[20]),2097152&n&&(o.onSelect=t[21]),4194304&n&&(o.onDeselect=t[22]),16777216&n&&(o.key=t[24]),8388608&n&&(o.renderSettings=t[23]),33554432&n&&(o.blockReindexing=t[25]),67108864&n&&(o.clip=t[26]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function dd(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{fill:s}=e,{stroke:a}=e,{strokeWidth:c}=e,{strokeOpacity:l}=e,{fillOpacity:u}=e,{opacity:h}=e,{transition:d}=e,{onClick:f}=e,{onMousedown:y}=e,{onMouseup:p}=e,{onMouseover:g}=e,{onMouseout:m}=e,{onMousedrag:x}=e,{onTouchdown:k}=e,{onTouchup:v}=e,{onTouchover:b}=e,{onTouchout:M}=e,{onTouchdrag:$}=e,{onSelect:w}=e,{onDeselect:_}=e,{renderSettings:T}=e,{key:S}=e,{blockReindexing:O=!1}=e,{clip:C=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"fill"in t&&n(3,s=t.fill),"stroke"in t&&n(4,a=t.stroke),"strokeWidth"in t&&n(5,c=t.strokeWidth),"strokeOpacity"in t&&n(6,l=t.strokeOpacity),"fillOpacity"in t&&n(7,u=t.fillOpacity),"opacity"in t&&n(8,h=t.opacity),"transition"in t&&n(9,d=t.transition),"onClick"in t&&n(10,f=t.onClick),"onMousedown"in t&&n(11,y=t.onMousedown),"onMouseup"in t&&n(12,p=t.onMouseup),"onMouseover"in t&&n(13,g=t.onMouseover),"onMouseout"in t&&n(14,m=t.onMouseout),"onMousedrag"in t&&n(15,x=t.onMousedrag),"onTouchdown"in t&&n(16,k=t.onTouchdown),"onTouchup"in t&&n(17,v=t.onTouchup),"onTouchover"in t&&n(18,b=t.onTouchover),"onTouchout"in t&&n(19,M=t.onTouchout),"onTouchdrag"in t&&n(20,$=t.onTouchdrag),"onSelect"in t&&n(21,w=t.onSelect),"onDeselect"in t&&n(22,_=t.onDeselect),"renderSettings"in t&&n(23,T=t.renderSettings),"key"in t&&n(24,S=t.key),"blockReindexing"in t&&n(25,O=t.blockReindexing),"clip"in t&&n(26,C=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_,T,S,O,C]}class fd extends lt{constructor(t){super(),ct(this,t,dd,hd,a,{x:0,y:1,geometry:2,fill:3,stroke:4,strokeWidth:5,strokeOpacity:6,fillOpacity:7,opacity:8,transition:9,onClick:10,onMousedown:11,onMouseup:12,onMouseover:13,onMouseout:14,onMousedrag:15,onTouchdown:16,onTouchup:17,onTouchover:18,onTouchout:19,onTouchdrag:20,onSelect:21,onDeselect:22,renderSettings:23,key:24,blockReindexing:25,clip:26})}}function yd(t){let e,n;return e=new id({props:{type:"Line",x:t[0],y:t[1],geometry:t[2],strokeWidth:t[3],stroke:t[4],opacity:t[5],transition:t[6],onClick:t[7],onMousedown:t[8],onMouseup:t[9],onMouseover:t[10],onMouseout:t[11],onMousedrag:t[12],onTouchdown:t[13],onTouchup:t[14],onTouchover:t[15],onTouchout:t[16],onTouchdrag:t[17],onSelect:t[18],onDeselect:t[19],key:t[20],renderSettings:t[21],blockReindexing:t[22],clip:t[23],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x=t[0]),2&n&&(o.y=t[1]),4&n&&(o.geometry=t[2]),8&n&&(o.strokeWidth=t[3]),16&n&&(o.stroke=t[4]),32&n&&(o.opacity=t[5]),64&n&&(o.transition=t[6]),128&n&&(o.onClick=t[7]),256&n&&(o.onMousedown=t[8]),512&n&&(o.onMouseup=t[9]),1024&n&&(o.onMouseover=t[10]),2048&n&&(o.onMouseout=t[11]),4096&n&&(o.onMousedrag=t[12]),8192&n&&(o.onTouchdown=t[13]),16384&n&&(o.onTouchup=t[14]),32768&n&&(o.onTouchover=t[15]),65536&n&&(o.onTouchout=t[16]),131072&n&&(o.onTouchdrag=t[17]),262144&n&&(o.onSelect=t[18]),524288&n&&(o.onDeselect=t[19]),1048576&n&&(o.key=t[20]),2097152&n&&(o.renderSettings=t[21]),4194304&n&&(o.blockReindexing=t[22]),8388608&n&&(o.clip=t[23]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function pd(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{strokeWidth:s}=e,{stroke:a}=e,{opacity:c}=e,{transition:l}=e,{onClick:u}=e,{onMousedown:h}=e,{onMouseup:d}=e,{onMouseover:f}=e,{onMouseout:y}=e,{onMousedrag:p}=e,{onTouchdown:g}=e,{onTouchup:m}=e,{onTouchover:x}=e,{onTouchout:k}=e,{onTouchdrag:v}=e,{onSelect:b}=e,{onDeselect:M}=e,{key:$}=e,{renderSettings:w}=e,{blockReindexing:_=!1}=e,{clip:T=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"strokeWidth"in t&&n(3,s=t.strokeWidth),"stroke"in t&&n(4,a=t.stroke),"opacity"in t&&n(5,c=t.opacity),"transition"in t&&n(6,l=t.transition),"onClick"in t&&n(7,u=t.onClick),"onMousedown"in t&&n(8,h=t.onMousedown),"onMouseup"in t&&n(9,d=t.onMouseup),"onMouseover"in t&&n(10,f=t.onMouseover),"onMouseout"in t&&n(11,y=t.onMouseout),"onMousedrag"in t&&n(12,p=t.onMousedrag),"onTouchdown"in t&&n(13,g=t.onTouchdown),"onTouchup"in t&&n(14,m=t.onTouchup),"onTouchover"in t&&n(15,x=t.onTouchover),"onTouchout"in t&&n(16,k=t.onTouchout),"onTouchdrag"in t&&n(17,v=t.onTouchdrag),"onSelect"in t&&n(18,b=t.onSelect),"onDeselect"in t&&n(19,M=t.onDeselect),"key"in t&&n(20,$=t.key),"renderSettings"in t&&n(21,w=t.renderSettings),"blockReindexing"in t&&n(22,_=t.blockReindexing),"clip"in t&&n(23,T=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_,T]}class gd extends lt{constructor(t){super(),ct(this,t,pd,yd,a,{x:0,y:1,geometry:2,strokeWidth:3,stroke:4,opacity:5,transition:6,onClick:7,onMousedown:8,onMouseup:9,onMouseover:10,onMouseout:11,onMousedrag:12,onTouchdown:13,onTouchup:14,onTouchover:15,onTouchout:16,onTouchdrag:17,onSelect:18,onDeselect:19,key:20,renderSettings:21,blockReindexing:22,clip:23})}}function md(t){let e,n;return e=new id({props:{type:"Label",x:t[0],y:t[1],geometry:t[2],fill:t[3],stroke:t[4],strokeWidth:t[5],strokeOpacity:t[6],fillOpacity:t[7],opacity:t[8],text:t[9],fontFamily:t[10],fontSize:t[11],fontWeight:t[12],rotation:t[13],anchorPoint:t[14],transition:t[15],onClick:t[16],onMousedown:t[17],onMouseup:t[18],onMouseover:t[19],onMouseout:t[20],onMousedrag:t[21],onTouchdown:t[22],onTouchup:t[23],onTouchover:t[24],onTouchout:t[25],onTouchdrag:t[26],onSelect:t[27],onDeselect:t[28],key:t[29],renderSettings:t[30],blockReindexing:t[31],clip:t[32],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,n){const o={};1&n[0]&&(o.x=t[0]),2&n[0]&&(o.y=t[1]),4&n[0]&&(o.geometry=t[2]),8&n[0]&&(o.fill=t[3]),16&n[0]&&(o.stroke=t[4]),32&n[0]&&(o.strokeWidth=t[5]),64&n[0]&&(o.strokeOpacity=t[6]),128&n[0]&&(o.fillOpacity=t[7]),256&n[0]&&(o.opacity=t[8]),512&n[0]&&(o.text=t[9]),1024&n[0]&&(o.fontFamily=t[10]),2048&n[0]&&(o.fontSize=t[11]),4096&n[0]&&(o.fontWeight=t[12]),8192&n[0]&&(o.rotation=t[13]),16384&n[0]&&(o.anchorPoint=t[14]),32768&n[0]&&(o.transition=t[15]),65536&n[0]&&(o.onClick=t[16]),131072&n[0]&&(o.onMousedown=t[17]),262144&n[0]&&(o.onMouseup=t[18]),524288&n[0]&&(o.onMouseover=t[19]),1048576&n[0]&&(o.onMouseout=t[20]),2097152&n[0]&&(o.onMousedrag=t[21]),4194304&n[0]&&(o.onTouchdown=t[22]),8388608&n[0]&&(o.onTouchup=t[23]),16777216&n[0]&&(o.onTouchover=t[24]),33554432&n[0]&&(o.onTouchout=t[25]),67108864&n[0]&&(o.onTouchdrag=t[26]),134217728&n[0]&&(o.onSelect=t[27]),268435456&n[0]&&(o.onDeselect=t[28]),536870912&n[0]&&(o.key=t[29]),1073741824&n[0]&&(o.renderSettings=t[30]),1&n[1]&&(o.blockReindexing=t[31]),2&n[1]&&(o.clip=t[32]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function xd(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{fill:s}=e,{stroke:a}=e,{strokeWidth:c}=e,{strokeOpacity:l}=e,{fillOpacity:u}=e,{opacity:h}=e,{text:d}=e,{fontFamily:f}=e,{fontSize:y}=e,{fontWeight:p}=e,{rotation:g}=e,{anchorPoint:m}=e,{transition:x}=e,{onClick:k}=e,{onMousedown:v}=e,{onMouseup:b}=e,{onMouseover:M}=e,{onMouseout:$}=e,{onMousedrag:w}=e,{onTouchdown:_}=e,{onTouchup:T}=e,{onTouchover:S}=e,{onTouchout:O}=e,{onTouchdrag:C}=e,{onSelect:P}=e,{onDeselect:I}=e,{key:N}=e,{renderSettings:A}=e,{blockReindexing:W=!1}=e,{clip:E=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"fill"in t&&n(3,s=t.fill),"stroke"in t&&n(4,a=t.stroke),"strokeWidth"in t&&n(5,c=t.strokeWidth),"strokeOpacity"in t&&n(6,l=t.strokeOpacity),"fillOpacity"in t&&n(7,u=t.fillOpacity),"opacity"in t&&n(8,h=t.opacity),"text"in t&&n(9,d=t.text),"fontFamily"in t&&n(10,f=t.fontFamily),"fontSize"in t&&n(11,y=t.fontSize),"fontWeight"in t&&n(12,p=t.fontWeight),"rotation"in t&&n(13,g=t.rotation),"anchorPoint"in t&&n(14,m=t.anchorPoint),"transition"in t&&n(15,x=t.transition),"onClick"in t&&n(16,k=t.onClick),"onMousedown"in t&&n(17,v=t.onMousedown),"onMouseup"in t&&n(18,b=t.onMouseup),"onMouseover"in t&&n(19,M=t.onMouseover),"onMouseout"in t&&n(20,$=t.onMouseout),"onMousedrag"in t&&n(21,w=t.onMousedrag),"onTouchdown"in t&&n(22,_=t.onTouchdown),"onTouchup"in t&&n(23,T=t.onTouchup),"onTouchover"in t&&n(24,S=t.onTouchover),"onTouchout"in t&&n(25,O=t.onTouchout),"onTouchdrag"in t&&n(26,C=t.onTouchdrag),"onSelect"in t&&n(27,P=t.onSelect),"onDeselect"in t&&n(28,I=t.onDeselect),"key"in t&&n(29,N=t.key),"renderSettings"in t&&n(30,A=t.renderSettings),"blockReindexing"in t&&n(31,W=t.blockReindexing),"clip"in t&&n(32,E=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_,T,S,O,C,P,I,N,A,W,E]}class kd extends lt{constructor(t){super(),ct(this,t,xd,md,a,{x:0,y:1,geometry:2,fill:3,stroke:4,strokeWidth:5,strokeOpacity:6,fillOpacity:7,opacity:8,text:9,fontFamily:10,fontSize:11,fontWeight:12,rotation:13,anchorPoint:14,transition:15,onClick:16,onMousedown:17,onMouseup:18,onMouseover:19,onMouseout:20,onMousedrag:21,onTouchdown:22,onTouchup:23,onTouchover:24,onTouchout:25,onTouchdrag:26,onSelect:27,onDeselect:28,key:29,renderSettings:30,blockReindexing:31,clip:32},[-1,-1])}}function vd(t){let e,n;return e=new id({props:{type:"Symbol",x:t[0],y:t[1],geometry:t[2],size:t[3],shape:t[4],fill:t[5],stroke:t[6],strokeWidth:t[7],strokeOpacity:t[8],fillOpacity:t[9],opacity:t[10],transition:t[11],onClick:t[12],onMousedown:t[13],onMouseup:t[14],onMouseover:t[15],onMouseout:t[16],onMousedrag:t[17],onTouchdown:t[18],onTouchup:t[19],onTouchover:t[20],onTouchout:t[21],onTouchdrag:t[22],onSelect:t[23],onDeselect:t[24],key:t[25],renderSettings:t[26],blockReindexing:t[27],clip:t[28],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x=t[0]),2&n&&(o.y=t[1]),4&n&&(o.geometry=t[2]),8&n&&(o.size=t[3]),16&n&&(o.shape=t[4]),32&n&&(o.fill=t[5]),64&n&&(o.stroke=t[6]),128&n&&(o.strokeWidth=t[7]),256&n&&(o.strokeOpacity=t[8]),512&n&&(o.fillOpacity=t[9]),1024&n&&(o.opacity=t[10]),2048&n&&(o.transition=t[11]),4096&n&&(o.onClick=t[12]),8192&n&&(o.onMousedown=t[13]),16384&n&&(o.onMouseup=t[14]),32768&n&&(o.onMouseover=t[15]),65536&n&&(o.onMouseout=t[16]),131072&n&&(o.onMousedrag=t[17]),262144&n&&(o.onTouchdown=t[18]),524288&n&&(o.onTouchup=t[19]),1048576&n&&(o.onTouchover=t[20]),2097152&n&&(o.onTouchout=t[21]),4194304&n&&(o.onTouchdrag=t[22]),8388608&n&&(o.onSelect=t[23]),16777216&n&&(o.onDeselect=t[24]),33554432&n&&(o.key=t[25]),67108864&n&&(o.renderSettings=t[26]),134217728&n&&(o.blockReindexing=t[27]),268435456&n&&(o.clip=t[28]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function bd(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{size:s}=e,{shape:a}=e,{fill:c}=e,{stroke:l}=e,{strokeWidth:u}=e,{strokeOpacity:h}=e,{fillOpacity:d}=e,{opacity:f}=e,{transition:y}=e,{onClick:p}=e,{onMousedown:g}=e,{onMouseup:m}=e,{onMouseover:x}=e,{onMouseout:k}=e,{onMousedrag:v}=e,{onTouchdown:b}=e,{onTouchup:M}=e,{onTouchover:$}=e,{onTouchout:w}=e,{onTouchdrag:_}=e,{onSelect:T}=e,{onDeselect:S}=e,{key:O}=e,{renderSettings:C}=e,{blockReindexing:P=!1}=e,{clip:I=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"size"in t&&n(3,s=t.size),"shape"in t&&n(4,a=t.shape),"fill"in t&&n(5,c=t.fill),"stroke"in t&&n(6,l=t.stroke),"strokeWidth"in t&&n(7,u=t.strokeWidth),"strokeOpacity"in t&&n(8,h=t.strokeOpacity),"fillOpacity"in t&&n(9,d=t.fillOpacity),"opacity"in t&&n(10,f=t.opacity),"transition"in t&&n(11,y=t.transition),"onClick"in t&&n(12,p=t.onClick),"onMousedown"in t&&n(13,g=t.onMousedown),"onMouseup"in t&&n(14,m=t.onMouseup),"onMouseover"in t&&n(15,x=t.onMouseover),"onMouseout"in t&&n(16,k=t.onMouseout),"onMousedrag"in t&&n(17,v=t.onMousedrag),"onTouchdown"in t&&n(18,b=t.onTouchdown),"onTouchup"in t&&n(19,M=t.onTouchup),"onTouchover"in t&&n(20,$=t.onTouchover),"onTouchout"in t&&n(21,w=t.onTouchout),"onTouchdrag"in t&&n(22,_=t.onTouchdrag),"onSelect"in t&&n(23,T=t.onSelect),"onDeselect"in t&&n(24,S=t.onDeselect),"key"in t&&n(25,O=t.key),"renderSettings"in t&&n(26,C=t.renderSettings),"blockReindexing"in t&&n(27,P=t.blockReindexing),"clip"in t&&n(28,I=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_,T,S,O,C,P,I]}class Md extends lt{constructor(t){super(),ct(this,t,bd,vd,a,{x:0,y:1,geometry:2,size:3,shape:4,fill:5,stroke:6,strokeWidth:7,strokeOpacity:8,fillOpacity:9,opacity:10,transition:11,onClick:12,onMousedown:13,onMouseup:14,onMouseover:15,onMouseout:16,onMousedrag:17,onTouchdown:18,onTouchup:19,onTouchover:20,onTouchout:21,onTouchdrag:22,onSelect:23,onDeselect:24,key:25,renderSettings:26,blockReindexing:27,clip:28})}}function $d(t){let e,n;return e=new id({props:{type:"Area",x1:t[0],x2:t[1],y1:t[2],y2:t[3],independentAxis:t[4],fill:t[5],stroke:t[6],strokeWidth:t[7],strokeOpacity:t[8],fillOpacity:t[9],opacity:t[10],transition:t[11],onClick:t[12],onMousedown:t[13],onMouseup:t[14],onMouseover:t[15],onMouseout:t[16],onMousedrag:t[17],onTouchdown:t[18],onTouchup:t[19],onTouchover:t[20],onTouchout:t[21],onTouchdrag:t[22],onSelect:t[23],onDeselect:t[24],key:t[25],renderSettings:t[26],blockReindexing:t[27],clip:t[28],_asPolygon:!1}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x1=t[0]),2&n&&(o.x2=t[1]),4&n&&(o.y1=t[2]),8&n&&(o.y2=t[3]),16&n&&(o.independentAxis=t[4]),32&n&&(o.fill=t[5]),64&n&&(o.stroke=t[6]),128&n&&(o.strokeWidth=t[7]),256&n&&(o.strokeOpacity=t[8]),512&n&&(o.fillOpacity=t[9]),1024&n&&(o.opacity=t[10]),2048&n&&(o.transition=t[11]),4096&n&&(o.onClick=t[12]),8192&n&&(o.onMousedown=t[13]),16384&n&&(o.onMouseup=t[14]),32768&n&&(o.onMouseover=t[15]),65536&n&&(o.onMouseout=t[16]),131072&n&&(o.onMousedrag=t[17]),262144&n&&(o.onTouchdown=t[18]),524288&n&&(o.onTouchup=t[19]),1048576&n&&(o.onTouchover=t[20]),2097152&n&&(o.onTouchout=t[21]),4194304&n&&(o.onTouchdrag=t[22]),8388608&n&&(o.onSelect=t[23]),16777216&n&&(o.onDeselect=t[24]),33554432&n&&(o.key=t[25]),67108864&n&&(o.renderSettings=t[26]),134217728&n&&(o.blockReindexing=t[27]),268435456&n&&(o.clip=t[28]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function wd(t,e,n){let{x1:o}=e,{x2:i}=e,{y1:r}=e,{y2:s}=e,{independentAxis:a}=e,{fill:c}=e,{stroke:l}=e,{strokeWidth:u}=e,{strokeOpacity:h}=e,{fillOpacity:d}=e,{opacity:f}=e,{transition:y}=e,{onClick:p}=e,{onMousedown:g}=e,{onMouseup:m}=e,{onMouseover:x}=e,{onMouseout:k}=e,{onMousedrag:v}=e,{onTouchdown:b}=e,{onTouchup:M}=e,{onTouchover:$}=e,{onTouchout:w}=e,{onTouchdrag:_}=e,{onSelect:T}=e,{onDeselect:S}=e,{key:O}=e,{renderSettings:C}=e,{blockReindexing:P=!1}=e,{clip:I=!0}=e;return t.$$set=t=>{"x1"in t&&n(0,o=t.x1),"x2"in t&&n(1,i=t.x2),"y1"in t&&n(2,r=t.y1),"y2"in t&&n(3,s=t.y2),"independentAxis"in t&&n(4,a=t.independentAxis),"fill"in t&&n(5,c=t.fill),"stroke"in t&&n(6,l=t.stroke),"strokeWidth"in t&&n(7,u=t.strokeWidth),"strokeOpacity"in t&&n(8,h=t.strokeOpacity),"fillOpacity"in t&&n(9,d=t.fillOpacity),"opacity"in t&&n(10,f=t.opacity),"transition"in t&&n(11,y=t.transition),"onClick"in t&&n(12,p=t.onClick),"onMousedown"in t&&n(13,g=t.onMousedown),"onMouseup"in t&&n(14,m=t.onMouseup),"onMouseover"in t&&n(15,x=t.onMouseover),"onMouseout"in t&&n(16,k=t.onMouseout),"onMousedrag"in t&&n(17,v=t.onMousedrag),"onTouchdown"in t&&n(18,b=t.onTouchdown),"onTouchup"in t&&n(19,M=t.onTouchup),"onTouchover"in t&&n(20,$=t.onTouchover),"onTouchout"in t&&n(21,w=t.onTouchout),"onTouchdrag"in t&&n(22,_=t.onTouchdrag),"onSelect"in t&&n(23,T=t.onSelect),"onDeselect"in t&&n(24,S=t.onDeselect),"key"in t&&n(25,O=t.key),"renderSettings"in t&&n(26,C=t.renderSettings),"blockReindexing"in t&&n(27,P=t.blockReindexing),"clip"in t&&n(28,I=t.clip)},[o,i,r,s,a,c,l,u,h,d,f,y,p,g,m,x,k,v,b,M,$,w,_,T,S,O,C,P,I]}class _d extends lt{constructor(t){super(),ct(this,t,wd,$d,a,{x1:0,x2:1,y1:2,y2:3,independentAxis:4,fill:5,stroke:6,strokeWidth:7,strokeOpacity:8,fillOpacity:9,opacity:10,transition:11,onClick:12,onMousedown:13,onMouseup:14,onMouseover:15,onMouseout:16,onMousedrag:17,onTouchdown:18,onTouchup:19,onTouchover:20,onTouchout:21,onTouchdrag:22,onSelect:23,onDeselect:24,key:25,renderSettings:26,blockReindexing:27,clip:28})}}function Td(t,e,{paddedBbox:n}){const{minX:o,maxX:i}=n;return"left"===t?o-e:"right"===t?i+e:["center","centre"].includes(t)?(i-o)/2+o+e:t.constructor===Number?(i-o)*t+o:void 0}function Sd(t,e,{paddedBbox:n}){const{minY:o,maxY:i}=n;return"top"===t?o-e:"bottom"===t?i+e:["center","centre"].includes(t)?(i-o)/2+o+e:t.constructor===Number?(i-o)*t+o:void 0}function Od(t,e,n,o,i){let r;if(Array.isArray(t)&&t.length>0)r=t;else if(function(t){return"ticks"in t}(e))r=function(t,e,n){if(n){const o=function(t,{k:e,t:n}){const o=t.range().map((t=>(t-n)/e));return o.map(t.invert)}(t,n);return t.copy().domain(o).ticks(e)}return t.ticks(e)}(e,n,i);else{if(!("domain"in e))throw new Error("Couldn't construct axis. Please provide 'tickValues' or a scale with\n      either a 'ticks' or a 'domain' method.");r=e.domain()}return o&&"domain"in e&&r[0]!==e.domain()[0]&&r.unshift(e.domain()[0]),r}function Cd(t,e,n){return t||("tickFormat"in e?e.tickFormat(n):t=>t)}function Pd(t,e,n){let o;if("undefined"==typeof document){return.8*t.length*e}{o=Pd.canvas||(Pd.canvas=document.createElement("canvas"));const i=o.getContext("2d");i.font=e+" "+n;return i.measureText(t).width}}function Id(t,e,n,o,i,r,s,a,c){const l=function(t,e,n,o){if("axis"===t)return e?-(n+1)-o:n+1;if(t.constructor!==Number)throw new Error("yOffset must be a Number");return t}(o,r,s,a),u=Td(t,e,i),h="axis"===n?c+l:Sd(n,o,i)+l,{finalScaleX:d,finalScaleY:f}=i,y=d.invert(u),p=f.invert(h);return{x:()=>y,y:()=>p}}function Nd(t,e,n,o,i,r,s,a,c){const l=function(t,e,n,o){if("axis"===t)return e?n+5:-n-5;if(t.constructor!==Number)throw new Error("xOffset must be a Number");return t}(e,r,s),u="axis"===t?c+l:Td(t,e,i),h=Sd(n,o,i),{finalScaleX:d,finalScaleY:f}=i,y=d.invert(u),p=f.invert(h);return{x:()=>y,y:()=>p}}function Ad(t){let e,o;const i=[t[24],{strokeWidth:t[3]},{opacity:t[2]},{stroke:t[1]},{clip:t[23]}];let r={};for(let t=0;t<i.length;t+=1)r=n(r,i[t]);return e=new _h({props:r}),{c(){rt(e.$$.fragment)},m(t,n){st(e,t,n),o=!0},p(t,n){const o=25165838&n[0]?ot(i,[16777216&n[0]&&it(t[24]),8&n[0]&&{strokeWidth:t[3]},4&n[0]&&{opacity:t[2]},2&n[0]&&{stroke:t[1]},8388608&n[0]&&{clip:t[23]}]):{};e.$set(o)},i(t){o||(Q(e.$$.fragment,t),o=!0)},o(t){tt(e.$$.fragment,t),o=!1},d(t){at(e,t)}}}function Wd(t){let e,o,i;const r=[t[25],{strokeWidth:t[5]},{opacity:t[7]},{stroke:t[6]},{transition:t[22]},{clip:t[23]}];let s={};for(let t=0;t<r.length;t+=1)s=n(s,r[t]);e=new gd({props:s});const a=[t[27],{text:t[26]},{anchorPoint:t[28]},{rotation:t[8]},{fontFamily:t[9]},{fontSize:t[10]},{fontWeight:t[11]},{opacity:t[12]},{fill:t[13]},{transition:t[22]},{clip:t[23]}];let c={};for(let t=0;t<a.length;t+=1)c=n(c,a[t]);return o=new kd({props:c}),{c(){rt(e.$$.fragment),rt(o.$$.fragment)},m(t,n){st(e,t,n),st(o,t,n),i=!0},p(t,n){const i=46137568&n[0]?ot(r,[33554432&n[0]&&it(t[25]),32&n[0]&&{strokeWidth:t[5]},128&n[0]&&{opacity:t[7]},64&n[0]&&{stroke:t[6]},4194304&n[0]&&{transition:t[22]},8388608&n[0]&&{clip:t[23]}]):{};e.$set(i);const s=482361088&n[0]?ot(a,[134217728&n[0]&&it(t[27]),67108864&n[0]&&{text:t[26]},268435456&n[0]&&{anchorPoint:t[28]},256&n[0]&&{rotation:t[8]},512&n[0]&&{fontFamily:t[9]},1024&n[0]&&{fontSize:t[10]},2048&n[0]&&{fontWeight:t[11]},4096&n[0]&&{opacity:t[12]},8192&n[0]&&{fill:t[13]},4194304&n[0]&&{transition:t[22]},8388608&n[0]&&{clip:t[23]}]):{};o.$set(s)},i(t){i||(Q(e.$$.fragment,t),Q(o.$$.fragment,t),i=!0)},o(t){tt(e.$$.fragment,t),tt(o.$$.fragment,t),i=!1},d(t){at(e,t),at(o,t)}}}function Ed(t){let e,o;const i=[t[29],{text:t[14]},{anchorPoint:t[21]},{rotation:t[20]},{fontFamily:t[16]},{fontSize:t[17]},{fontWeight:t[18]},{opacity:t[19]},{fill:t[15]},{clip:t[23]}];let r={};for(let t=0;t<i.length;t+=1)r=n(r,i[t]);return e=new Oh({props:r}),{c(){rt(e.$$.fragment)},m(t,n){st(e,t,n),o=!0},p(t,n){const o=549437440&n[0]?ot(i,[536870912&n[0]&&it(t[29]),16384&n[0]&&{text:t[14]},2097152&n[0]&&{anchorPoint:t[21]},1048576&n[0]&&{rotation:t[20]},65536&n[0]&&{fontFamily:t[16]},131072&n[0]&&{fontSize:t[17]},262144&n[0]&&{fontWeight:t[18]},524288&n[0]&&{opacity:t[19]},32768&n[0]&&{fill:t[15]},8388608&n[0]&&{clip:t[23]}]):{};e.$set(o)},i(t){o||(Q(e.$$.fragment,t),o=!0)},o(t){tt(e.$$.fragment,t),o=!1},d(t){at(e,t)}}}function Ld(t){let e,n,o,i,r=t[0]&&Ad(t),s=t[4]&&Wd(t),a=t[14].length>0&&Ed(t);return{c(){e=b("g"),r&&r.c(),n=w(),s&&s.c(),o=w(),a&&a.c(),_(e,"class","x-axis")},m(t,c){k(t,e,c),r&&r.m(e,null),x(e,n),s&&s.m(e,null),x(e,o),a&&a.m(e,null),i=!0},p(t,i){t[0]?r?(r.p(t,i),1&i[0]&&Q(r,1)):(r=Ad(t),r.c(),Q(r,1),r.m(e,n)):r&&(K(),tt(r,1,1,(()=>{r=null})),U()),t[4]?s?(s.p(t,i),16&i[0]&&Q(s,1)):(s=Wd(t),s.c(),Q(s,1),s.m(e,o)):s&&(K(),tt(s,1,1,(()=>{s=null})),U()),t[14].length>0?a?(a.p(t,i),16384&i[0]&&Q(a,1)):(a=Ed(t),a.c(),Q(a,1),a.m(e,null)):a&&(K(),tt(a,1,1,(()=>{a=null})),U())},i(t){i||(Q(r),Q(s),Q(a),i=!0)},o(t){tt(r),tt(s),tt(a),i=!1},d(t){t&&v(e),r&&r.d(),s&&s.d(),a&&a.d()}}}function Fd(t,e,n){let o,{flip:i=!1}=e,{scale:r}=e,{baseLine:s=!0}=e,{baseLineColor:a="black"}=e,{baseLineOpacity:c=1}=e,{baseLineWidth:u=1}=e,{vjust:h="bottom"}=e,{yOffset:d=0}=e,{ticks:f=!0}=e,{tickCount:y=10}=e,{tickExtra:p=!1}=e,{tickValues:g}=e,{tickSize:m=5}=e,{tickWidth:x=.5}=e,{tickColor:k="black"}=e,{tickOpacity:v=1}=e,{labelFormat:b}=e,{labelOffset:M=2}=e,{labelRotate:$=0}=e,{labelFont:w="Helvetica"}=e,{labelFontSize:_=10}=e,{labelFontWeight:T="normal"}=e,{labelOpacity:S=1}=e,{labelColor:O="black"}=e,{titleHjust:C="center"}=e,{titleXOffset:P=0}=e,{titleVjust:I="axis"}=e,{titleYOffset:N="axis"}=e,{title:A=""}=e,{titleColor:W="black"}=e,{titleFont:E="Helvetica"}=e,{titleFontSize:L="12"}=e,{titleFontWeight:F="normal"}=e,{titleOpacity:R=1}=e,{titleRotation:j=0}=e,{titleAnchorPoint:Y="t"}=e,{transition:z}=e,{clip:X=!1}=e;const D=nn();let q,H,G,B,Z,V,J,K,U,Q,tt;return l(t,D,(t=>n(45,o=t))),t.$$set=t=>{"flip"in t&&n(31,i=t.flip),"scale"in t&&n(32,r=t.scale),"baseLine"in t&&n(0,s=t.baseLine),"baseLineColor"in t&&n(1,a=t.baseLineColor),"baseLineOpacity"in t&&n(2,c=t.baseLineOpacity),"baseLineWidth"in t&&n(3,u=t.baseLineWidth),"vjust"in t&&n(33,h=t.vjust),"yOffset"in t&&n(34,d=t.yOffset),"ticks"in t&&n(4,f=t.ticks),"tickCount"in t&&n(35,y=t.tickCount),"tickExtra"in t&&n(36,p=t.tickExtra),"tickValues"in t&&n(37,g=t.tickValues),"tickSize"in t&&n(38,m=t.tickSize),"tickWidth"in t&&n(5,x=t.tickWidth),"tickColor"in t&&n(6,k=t.tickColor),"tickOpacity"in t&&n(7,v=t.tickOpacity),"labelFormat"in t&&n(39,b=t.labelFormat),"labelOffset"in t&&n(40,M=t.labelOffset),"labelRotate"in t&&n(8,$=t.labelRotate),"labelFont"in t&&n(9,w=t.labelFont),"labelFontSize"in t&&n(10,_=t.labelFontSize),"labelFontWeight"in t&&n(11,T=t.labelFontWeight),"labelOpacity"in t&&n(12,S=t.labelOpacity),"labelColor"in t&&n(13,O=t.labelColor),"titleHjust"in t&&n(41,C=t.titleHjust),"titleXOffset"in t&&n(42,P=t.titleXOffset),"titleVjust"in t&&n(43,I=t.titleVjust),"titleYOffset"in t&&n(44,N=t.titleYOffset),"title"in t&&n(14,A=t.title),"titleColor"in t&&n(15,W=t.titleColor),"titleFont"in t&&n(16,E=t.titleFont),"titleFontSize"in t&&n(17,L=t.titleFontSize),"titleFontWeight"in t&&n(18,F=t.titleFontWeight),"titleOpacity"in t&&n(19,R=t.titleOpacity),"titleRotation"in t&&n(20,j=t.titleRotation),"titleAnchorPoint"in t&&n(21,Y=t.titleAnchorPoint),"transition"in t&&n(22,z=t.transition),"clip"in t&&n(23,X=t.clip)},t.$$.update=()=>{if(16384&t.$$.dirty[1]&&"polar"===o.transformation)throw new Error("Axes do'nt work with polar coordinates (for now)");16386&t.$$.dirty[1]&&n(46,q=r?r.copy().range(o.rangeX):o.scaleX),16396&t.$$.dirty[1]&&n(47,H=Sd(h,d,o)),81920&t.$$.dirty[1]&&n(24,G=function(t,e){const{paddedBbox:n,finalScaleX:o,finalScaleY:i}=e,{minX:r,maxX:s}=n,a=[r,s].map(o.invert),c=[t,t].map(i.invert);return{x:()=>a,y:()=>c}}(H,o)),49264&t.$$.dirty[1]&&n(48,B=Od(g,q,y,p,o.zoomIdentity?{t:o.zoomIdentity.x,k:o.zoomIdentity.kx}:void 0)),245889&t.$$.dirty[1]&&n(25,Z=function(t,e,n,o,i,r){const s=r?-i:i,a=n.bandwidth?n.bandwidth()/2:0,c=e+s,l=[o.invert(e),o.invert(c)],u=t.map((t=>n(t)+a)).map((t=>[t,t])),h=fu(l,t.length);return{x:()=>u,y:()=>h}}(B,H,q,o.finalScaleY,m,i)),16&t.$$.dirty[0]|16640&t.$$.dirty[1]&&n(49,V=Cd(b,o.scaleX,f.length)),393216&t.$$.dirty[1]&&n(26,J=B.map(V)),33554432&t.$$.dirty[0]|16897&t.$$.dirty[1]&&n(27,K=function(t,{finalScaleY:e},n,o){const i=t.x().map((t=>t[0])),r=t.y().map((t=>{const i=t[1],r=e(i),s=o?r-n:r+n;return e.invert(s)}));return{x:()=>i,y:()=>r}}(Z,o,M,i)),1&t.$$.dirty[1]&&n(28,U=i?"b":"t"),1032&t.$$.dirty[0]|640&t.$$.dirty[1]&&n(50,Q=u+m+M+_),131072&t.$$.dirty[0]|621569&t.$$.dirty[1]&&n(29,tt=Id(C,P,I,N,o,i,Q,L,H))},[s,a,c,u,f,x,k,v,$,w,_,T,S,O,A,W,E,L,F,R,j,Y,z,X,G,Z,J,K,U,tt,D,i,r,h,d,y,p,g,m,b,M,C,P,I,N]}class Rd extends lt{constructor(t){super(),ct(this,t,Fd,Ld,a,{flip:31,scale:32,baseLine:0,baseLineColor:1,baseLineOpacity:2,baseLineWidth:3,vjust:33,yOffset:34,ticks:4,tickCount:35,tickExtra:36,tickValues:37,tickSize:38,tickWidth:5,tickColor:6,tickOpacity:7,labelFormat:39,labelOffset:40,labelRotate:8,labelFont:9,labelFontSize:10,labelFontWeight:11,labelOpacity:12,labelColor:13,titleHjust:41,titleXOffset:42,titleVjust:43,titleYOffset:44,title:14,titleColor:15,titleFont:16,titleFontSize:17,titleFontWeight:18,titleOpacity:19,titleRotation:20,titleAnchorPoint:21,transition:22,clip:23},[-1,-1])}}function jd(t){let e,o;const i=[t[24],{strokeWidth:t[3]},{opacity:t[2]},{stroke:t[1]},{clip:t[23]}];let r={};for(let t=0;t<i.length;t+=1)r=n(r,i[t]);return e=new _h({props:r}),{c(){rt(e.$$.fragment)},m(t,n){st(e,t,n),o=!0},p(t,n){const o=25165838&n[0]?ot(i,[16777216&n[0]&&it(t[24]),8&n[0]&&{strokeWidth:t[3]},4&n[0]&&{opacity:t[2]},2&n[0]&&{stroke:t[1]},8388608&n[0]&&{clip:t[23]}]):{};e.$set(o)},i(t){o||(Q(e.$$.fragment,t),o=!0)},o(t){tt(e.$$.fragment,t),o=!1},d(t){at(e,t)}}}function Yd(t){let e,o,i;const r=[t[25],{strokeWidth:t[5]},{opacity:t[7]},{stroke:t[6]},{transition:t[22]},{clip:t[23]}];let s={};for(let t=0;t<r.length;t+=1)s=n(s,r[t]);e=new gd({props:s});const a=[t[27],{text:t[26]},{anchorPoint:t[28]},{rotation:t[8]},{fontFamily:t[9]},{fontSize:t[10]},{fontWeight:t[11]},{opacity:t[12]},{fill:t[13]},{transition:t[22]},{clip:t[23]}];let c={};for(let t=0;t<a.length;t+=1)c=n(c,a[t]);return o=new kd({props:c}),{c(){rt(e.$$.fragment),rt(o.$$.fragment)},m(t,n){st(e,t,n),st(o,t,n),i=!0},p(t,n){const i=46137568&n[0]?ot(r,[33554432&n[0]&&it(t[25]),32&n[0]&&{strokeWidth:t[5]},128&n[0]&&{opacity:t[7]},64&n[0]&&{stroke:t[6]},4194304&n[0]&&{transition:t[22]},8388608&n[0]&&{clip:t[23]}]):{};e.$set(i);const s=482361088&n[0]?ot(a,[134217728&n[0]&&it(t[27]),67108864&n[0]&&{text:t[26]},268435456&n[0]&&{anchorPoint:t[28]},256&n[0]&&{rotation:t[8]},512&n[0]&&{fontFamily:t[9]},1024&n[0]&&{fontSize:t[10]},2048&n[0]&&{fontWeight:t[11]},4096&n[0]&&{opacity:t[12]},8192&n[0]&&{fill:t[13]},4194304&n[0]&&{transition:t[22]},8388608&n[0]&&{clip:t[23]}]):{};o.$set(s)},i(t){i||(Q(e.$$.fragment,t),Q(o.$$.fragment,t),i=!0)},o(t){tt(e.$$.fragment,t),tt(o.$$.fragment,t),i=!1},d(t){at(e,t),at(o,t)}}}function zd(t){let e,o;const i=[t[29],{text:t[14]},{anchorPoint:t[21]},{rotation:t[20]},{fontFamily:t[16]},{fontSize:t[17]},{fontWeight:t[18]},{opacity:t[19]},{fill:t[15]},{clip:t[23]}];let r={};for(let t=0;t<i.length;t+=1)r=n(r,i[t]);return e=new Oh({props:r}),{c(){rt(e.$$.fragment)},m(t,n){st(e,t,n),o=!0},p(t,n){const o=549437440&n[0]?ot(i,[536870912&n[0]&&it(t[29]),16384&n[0]&&{text:t[14]},2097152&n[0]&&{anchorPoint:t[21]},1048576&n[0]&&{rotation:t[20]},65536&n[0]&&{fontFamily:t[16]},131072&n[0]&&{fontSize:t[17]},262144&n[0]&&{fontWeight:t[18]},524288&n[0]&&{opacity:t[19]},32768&n[0]&&{fill:t[15]},8388608&n[0]&&{clip:t[23]}]):{};e.$set(o)},i(t){o||(Q(e.$$.fragment,t),o=!0)},o(t){tt(e.$$.fragment,t),o=!1},d(t){at(e,t)}}}function Xd(t){let e,n,o,i,r=t[0]&&jd(t),s=t[4]&&Yd(t),a=t[14].length>0&&zd(t);return{c(){e=b("g"),r&&r.c(),n=w(),s&&s.c(),o=w(),a&&a.c(),_(e,"class","y-axis")},m(t,c){k(t,e,c),r&&r.m(e,null),x(e,n),s&&s.m(e,null),x(e,o),a&&a.m(e,null),i=!0},p(t,i){t[0]?r?(r.p(t,i),1&i[0]&&Q(r,1)):(r=jd(t),r.c(),Q(r,1),r.m(e,n)):r&&(K(),tt(r,1,1,(()=>{r=null})),U()),t[4]?s?(s.p(t,i),16&i[0]&&Q(s,1)):(s=Yd(t),s.c(),Q(s,1),s.m(e,o)):s&&(K(),tt(s,1,1,(()=>{s=null})),U()),t[14].length>0?a?(a.p(t,i),16384&i[0]&&Q(a,1)):(a=zd(t),a.c(),Q(a,1),a.m(e,null)):a&&(K(),tt(a,1,1,(()=>{a=null})),U())},i(t){i||(Q(r),Q(s),Q(a),i=!0)},o(t){tt(r),tt(s),tt(a),i=!1},d(t){t&&v(e),r&&r.d(),s&&s.d(),a&&a.d()}}}function Dd(t,e,n){let o,{flip:i=!1}=e,{scale:r}=e,{baseLine:s=!0}=e,{baseLineColor:a="black"}=e,{baseLineOpacity:c=1}=e,{baseLineWidth:u=1}=e,{hjust:h="left"}=e,{xOffset:d=0}=e,{ticks:f=!0}=e,{tickCount:y=10}=e,{tickExtra:p=!1}=e,{tickValues:g}=e,{tickSize:m=5}=e,{tickWidth:x=.5}=e,{tickColor:k="black"}=e,{tickOpacity:v=1}=e,{labelFormat:b}=e,{labelOffset:M=2}=e,{labelRotate:$=0}=e,{labelFont:w="Helvetica"}=e,{labelFontSize:_=10}=e,{labelFontWeight:T="normal"}=e,{labelOpacity:S=1}=e,{labelColor:O="black"}=e,{titleHjust:C="axis"}=e,{titleXOffset:P="axis"}=e,{titleVjust:I="center"}=e,{titleYOffset:N=0}=e,{title:A=""}=e,{titleColor:W="black"}=e,{titleFont:E="Helvetica"}=e,{titleFontSize:L="12"}=e,{titleFontWeight:F="normal"}=e,{titleOpacity:R=1}=e,{titleRotation:j=-90}=e,{titleAnchorPoint:Y="center"}=e,{transition:z}=e,{clip:X=!1}=e;const D=nn();let q,H,G,B,Z,V,J,K,U,Q,tt,et;return l(t,D,(t=>n(45,o=t))),t.$$set=t=>{"flip"in t&&n(31,i=t.flip),"scale"in t&&n(32,r=t.scale),"baseLine"in t&&n(0,s=t.baseLine),"baseLineColor"in t&&n(1,a=t.baseLineColor),"baseLineOpacity"in t&&n(2,c=t.baseLineOpacity),"baseLineWidth"in t&&n(3,u=t.baseLineWidth),"hjust"in t&&n(33,h=t.hjust),"xOffset"in t&&n(34,d=t.xOffset),"ticks"in t&&n(4,f=t.ticks),"tickCount"in t&&n(35,y=t.tickCount),"tickExtra"in t&&n(36,p=t.tickExtra),"tickValues"in t&&n(37,g=t.tickValues),"tickSize"in t&&n(38,m=t.tickSize),"tickWidth"in t&&n(5,x=t.tickWidth),"tickColor"in t&&n(6,k=t.tickColor),"tickOpacity"in t&&n(7,v=t.tickOpacity),"labelFormat"in t&&n(39,b=t.labelFormat),"labelOffset"in t&&n(40,M=t.labelOffset),"labelRotate"in t&&n(8,$=t.labelRotate),"labelFont"in t&&n(9,w=t.labelFont),"labelFontSize"in t&&n(10,_=t.labelFontSize),"labelFontWeight"in t&&n(11,T=t.labelFontWeight),"labelOpacity"in t&&n(12,S=t.labelOpacity),"labelColor"in t&&n(13,O=t.labelColor),"titleHjust"in t&&n(41,C=t.titleHjust),"titleXOffset"in t&&n(42,P=t.titleXOffset),"titleVjust"in t&&n(43,I=t.titleVjust),"titleYOffset"in t&&n(44,N=t.titleYOffset),"title"in t&&n(14,A=t.title),"titleColor"in t&&n(15,W=t.titleColor),"titleFont"in t&&n(16,E=t.titleFont),"titleFontSize"in t&&n(17,L=t.titleFontSize),"titleFontWeight"in t&&n(18,F=t.titleFontWeight),"titleOpacity"in t&&n(19,R=t.titleOpacity),"titleRotation"in t&&n(20,j=t.titleRotation),"titleAnchorPoint"in t&&n(21,Y=t.titleAnchorPoint),"transition"in t&&n(22,z=t.transition),"clip"in t&&n(23,X=t.clip)},t.$$.update=()=>{if(16384&t.$$.dirty[1]&&"polar"===o.transformation)throw new Error("Axes do'nt work with polar coordinates (for now)");16386&t.$$.dirty[1]&&n(46,q=r?r.copy().range(o.rangeY):o.scaleY),16396&t.$$.dirty[1]&&n(47,H=Td(h,d,o)),81920&t.$$.dirty[1]&&n(24,G=function(t,e){const{paddedBbox:n,finalScaleX:o,finalScaleY:i}=e,{minY:r,maxY:s}=n,a=[t,t].map(o.invert),c=[r,s].map(i.invert);return{x:()=>a,y:()=>c}}(H,o)),49264&t.$$.dirty[1]&&n(48,B=Od(g,q,y,p,o.zoomIdentity?{t:o.zoomIdentity.y,k:o.zoomIdentity.ky}:void 0)),245889&t.$$.dirty[1]&&n(25,Z=function(t,e,n,o,i,r){const s=r?i:-i,a=n.bandwidth?n.bandwidth()/2:0,c=e+s,l=fu([o.invert(e),o.invert(c)],t.length),u=t.map((t=>n(t)+a)).map((t=>[t,t]));return{x:()=>l,y:()=>u}}(B,H,q,o.finalScaleX,m,i)),16&t.$$.dirty[0]|16640&t.$$.dirty[1]&&n(49,V=Cd(b,o.scaleY,f.length)),393216&t.$$.dirty[1]&&n(26,J=B.map(V)),33554432&t.$$.dirty[0]|16897&t.$$.dirty[1]&&n(27,K=function(t,{finalScaleX:e},n,o){const i=t.x().map((t=>{const i=t[1],r=e(i),s=o?r+n:r-n;return e.invert(s)})),r=t.y().map((t=>t[0]));return{x:()=>i,y:()=>r}}(Z,o,M,i)),1&t.$$.dirty[1]&&n(28,U=i?"l":"r"),67110400&t.$$.dirty[0]&&n(50,Q=Pd(J[J.length-1],_,w)),8&t.$$.dirty[0]|524928&t.$$.dirty[1]&&n(51,tt=u+m+M+Q),131072&t.$$.dirty[0]|1145857&t.$$.dirty[1]&&n(29,et=Nd(C,P,I,N,o,i,tt,0,H))},[s,a,c,u,f,x,k,v,$,w,_,T,S,O,A,W,E,L,F,R,j,Y,z,X,G,Z,J,K,U,et,D,i,r,h,d,y,p,g,m,b,M,C,P,I,N]}class qd extends lt{constructor(t){super(),ct(this,t,Dd,Xd,a,{flip:31,scale:32,baseLine:0,baseLineColor:1,baseLineOpacity:2,baseLineWidth:3,hjust:33,xOffset:34,ticks:4,tickCount:35,tickExtra:36,tickValues:37,tickSize:38,tickWidth:5,tickColor:6,tickOpacity:7,labelFormat:39,labelOffset:40,labelRotate:8,labelFont:9,labelFontSize:10,labelFontWeight:11,labelOpacity:12,labelColor:13,titleHjust:41,titleXOffset:42,titleVjust:43,titleYOffset:44,title:14,titleColor:15,titleFont:16,titleFontSize:17,titleFontWeight:18,titleOpacity:19,titleRotation:20,titleAnchorPoint:21,transition:22,clip:23},[-1,-1])}}function Hd(t){let e,o,i;const r=[t[4],{strokeWidth:t[0]},{opacity:t[2]},{stroke:t[1]},{transition:t[3]}];let s={};for(let t=0;t<r.length;t+=1)s=n(s,r[t]);return o=new gd({props:s}),{c(){e=b("g"),rt(o.$$.fragment),_(e,"class","x-grid-lines")},m(t,n){k(t,e,n),st(o,e,null),i=!0},p(t,[e]){const n=31&e?ot(r,[16&e&&it(t[4]),1&e&&{strokeWidth:t[0]},4&e&&{opacity:t[2]},2&e&&{stroke:t[1]},8&e&&{transition:t[3]}]):{};o.$set(n)},i(t){i||(Q(o.$$.fragment,t),i=!0)},o(t){tt(o.$$.fragment,t),i=!1},d(t){t&&v(e),at(o)}}}function Gd(t,e,n){let o,{scale:i}=e,{count:r=10}=e,{extra:s=!1}=e,{values:a}=e,{width:c=.25}=e,{color:u="black"}=e,{opacity:h=1}=e,{transition:d}=e;const f=nn();let y,p,g;return l(t,f,(t=>n(10,o=t))),t.$$set=t=>{"scale"in t&&n(6,i=t.scale),"count"in t&&n(7,r=t.count),"extra"in t&&n(8,s=t.extra),"values"in t&&n(9,a=t.values),"width"in t&&n(0,c=t.width),"color"in t&&n(1,u=t.color),"opacity"in t&&n(2,h=t.opacity),"transition"in t&&n(3,d=t.transition)},t.$$.update=()=>{if(1024&t.$$.dirty&&"polar"===o.transformation)throw new Error("Rasters do'nt work with polar coordinates (for now)");1088&t.$$.dirty&&n(11,y=i?i.copy().range(o.rangeX):o.scaleX),3968&t.$$.dirty&&n(12,p=Od(a,y,r,s,o.zoomIdentity?{t:o.zoomIdentity.x,k:o.zoomIdentity.kx}:void 0)),7168&t.$$.dirty&&n(4,g=function(t,e,n){const o=e.bandwidth?e.bandwidth()/2:0,i=t.map((t=>e(t)+o)).map((t=>[t,t])),r=fu(n.rangeY,t.length);return{x:()=>i,y:()=>r}}(p,y,o))},[c,u,h,d,g,f,i,r,s,a]}class Bd extends lt{constructor(t){super(),ct(this,t,Gd,Hd,a,{scale:6,count:7,extra:8,values:9,width:0,color:1,opacity:2,transition:3})}}function Zd(t){let e,o,i;const r=[t[4],{strokeWidth:t[0]},{opacity:t[2]},{stroke:t[1]},{transition:t[3]}];let s={};for(let t=0;t<r.length;t+=1)s=n(s,r[t]);return o=new gd({props:s}),{c(){e=b("g"),rt(o.$$.fragment),_(e,"class","y-grid-lines")},m(t,n){k(t,e,n),st(o,e,null),i=!0},p(t,[e]){const n=31&e?ot(r,[16&e&&it(t[4]),1&e&&{strokeWidth:t[0]},4&e&&{opacity:t[2]},2&e&&{stroke:t[1]},8&e&&{transition:t[3]}]):{};o.$set(n)},i(t){i||(Q(o.$$.fragment,t),i=!0)},o(t){tt(o.$$.fragment,t),i=!1},d(t){t&&v(e),at(o)}}}function Vd(t,e,n){let o,{scale:i}=e,{count:r=10}=e,{extra:s=!1}=e,{values:a}=e,{width:c=.25}=e,{color:u="black"}=e,{opacity:h=1}=e,{transition:d}=e;const f=nn();let y,p,g;return l(t,f,(t=>n(10,o=t))),t.$$set=t=>{"scale"in t&&n(6,i=t.scale),"count"in t&&n(7,r=t.count),"extra"in t&&n(8,s=t.extra),"values"in t&&n(9,a=t.values),"width"in t&&n(0,c=t.width),"color"in t&&n(1,u=t.color),"opacity"in t&&n(2,h=t.opacity),"transition"in t&&n(3,d=t.transition)},t.$$.update=()=>{if(1024&t.$$.dirty&&"polar"===o.transformation)throw new Error("Rasters do'nt work with polar coordinates (for now)");1088&t.$$.dirty&&n(11,y=i?i.copy().range(o.rangeY):o.scaleY),3968&t.$$.dirty&&n(12,p=Od(a,y,r,s,o.zoomIdentity?{t:o.zoomIdentity.y,k:o.zoomIdentity.ky}:void 0)),7168&t.$$.dirty&&n(4,g=function(t,e,n){const o=e.bandwidth?e.bandwidth()/2:0,i=fu(n.rangeX,t.length),r=t.map((t=>e(t)+o)).map((t=>[t,t]));return{x:()=>i,y:()=>r}}(p,y,o))},[c,u,h,d,g,f,i,r,s,a]}class Jd extends lt{constructor(t){super(),ct(this,t,Vd,Zd,a,{scale:6,count:7,extra:8,values:9,width:0,color:1,opacity:2,transition:3})}}function Kd(t,e,n,o,i,r,s,a){let c,l;const u=a?e[1]:e[0],h=a?e[0]:e[1],d=r;if(o=0===o||void 0===o?(h-u)*("vertical"===n?.3:.1):o,"top"===t&&(c=u+i+d,l=u+o+i+d),"center"===t||"centre"===t){const t=.5*(h-u)+u;c=t-o/2+i+d,l=t+o/2+i+d}if("bottom"===t&&(c=h-o+i,l=h+i-.25*d),!isNaN(t)&&t<=1&&t>=-1){const e=(h-u)*t+u;c=e+i-d,l=e+o+i-d}if(!["top","bottom","center"].includes(t)&&void 0===c)throw Error("Please specify either `top`, `center`, `bottom` or a number in the range [-1, 1] for `vjust`");return{y1:c,y2:l,height:o}}function Ud(t,e,n,o,i,r,s,a){let c,l;const u=a?e[1]:e[0],h=a?e[0]:e[1];if(o=0===o?(h-u)*("vertical"===n?.1:.3):o,"left"===t&&(c=u+i+1.05*r,l=u+o+i+1.05*r),"center"===t||"centre"===t){const t=.5*(h-u)+u;c=t-o/2+i,l=t+o/2+i}if("right"===t&&(c=h-o+i-1.05*r,l=h+i-1.05*r),!isNaN(t)){const e=(h-u)*t+u;c=e-1.05*r,l=e+o-1.05*r}if(!["left","center","right"].includes(t)&&void 0===c)throw Error("Please specify either `left`, `center`, `right` or a number from 0 to 1 for `vjust`");return{x1:c,x2:l,width:o}}function Qd(t,e,n,o){if(n)return()=>n;const i=e.x1,r=e.x2;let s;if("center"!==t&&"centre"!==t||(s=.5),"left"===t&&(s=0),"right"===t&&(s=1),isNaN(t)||(s=t),void 0===s&&(s=.5),!["left","center","right"].includes(t)&&isNaN(t))throw Error("Please specify either `left`, `center`, `right` or a number from 0 to 1 for `hjust`");return i+Math.abs(i-r)*s+o}function tf(t,e,n,o,i,r){if(n)return()=>n;const s=e.y1,a=e.y2;let c,l;if("center"===t&&(c=.5,l=0),"bottom"===t&&(c=1,l=1.5*i),"top"===t&&(c=0,l=1.5*-i),isNaN(t)||(c=t,l=0),void 0===c&&(c=.5,l=0),!["center","bottom","top"].includes(t)&&isNaN(t))throw Error("Please specify either `top`, `center`, `bottom` or a number for `vjust`");return r?a-(Math.abs(s-a)*c+l+o):s+Math.abs(s-a)*c+l+o}function ef(t,e,n,o){let i=0;for(const r in[t,e,n,o])nf(r)&&(i+=1);if(i<4)throw new Error("Couldn't construct legend because of invalid x1, x2, y1, y2 inputs.");return 4!==i||void 0!==t||void 0!==e||void 0!==n||void 0!==o}function nf(t){return!isNaN(t)||"[object Function]"==={}.toString.call(t)||void 0===t}function of(t,e,n,o){let i;if(Array.isArray(t[0])&&t.length>0){i=[],i.push(t[0][0]);for(let e=0;e<t.length;e++)i.push(t[e][1])}else if(Array.isArray(t))t[0].constructor===Number?(i=Ct(...t,e),void 0!==o&&n&&i[0]!==o&&i.unshift(o)):i=t;else if("ticks"in t)i=t.ticks(e);else{if(!("domain"in t))throw new Error("Couldn't construct legend. Please provide 'tickValues' or a scale with\n        either a 'ticks' or a 'domain' method.");i=t.domain()}return n&&"domain"in t&&i[0]!==t.domain()[0]&&i.unshift(t.domain()[0]),i}function rf(t,e,n,o,i,r,s,a,c){let l;if(a){let n;const a="vertical"===r?[o.y1,o.y2]:[o.x1,o.x2];n=i?Ze().domain(e).range(a.reverse()):Ze().domain(e).range(a),l=t.map(((t,e)=>n(t)+s))}else{if(!Array.isArray(e))throw new Error("Couldn't construct legend. Please provide 'tickValues' or a scale with\n        either a 'ticks' or a 'domain' method.");{const e="vertical"===r?o.height/t.length:o.width/t.length,n="vertical"===r?o.y1:o.x1;l=(t=i?t.reverse():t).map(((t,o)=>n+e*(o+.5)+s))}}return n&&l[0]!==e[0]&&a&&l.unshift(e[0]),c&&l.reverse(),l}function sf(t,e,n){return t||("tickFormat"in e?e.tickFormat(n):t=>t)}function af(t,e,n,o,i,r,s,a,c,l,u,h,d,f,y){let p=[],g=[],m=[],x=[];if("vertical"===e){if(p=o.map((t=>l?r-2*s-c*h.width:r+2*s)),g=o.map(((t,e)=>l?r-2*s:r+2*s+c*h.width)),f)m=o.map(((t,e)=>i[e])),x=JSON.parse(JSON.stringify(m)),p.pop(),g.pop(),m.pop(),x.shift(),t.pop();else if(Array.isArray(n)||"ticks"in n||"domain"in n){const e=Math.abs(d.y2-d.y1)/t.length;let n=d.y1;m=t.map(((t,o)=>(o>0&&(n+=e,x.push(n)),n))),x.push(n+e)}y&&(m.reverse(),x.reverse())}else if("horizontal"===e){const e=Math.abs(d.y2-d.y1);if(m=o.map((t=>l?r+2*s:r-2*s)),x=o.map(((t,e)=>l?r+2*s+a*d.height:r-2*s-a*d.height)),o.map(((t,n)=>l?d.y2:d.y1+a*e)),f)p=o.map(((t,e)=>0===e?i[e]-.02:i[e])),g=o.map(((t,e)=>e===o.length-1?i[e]+.02:i[e])),m.pop(),x.pop(),p.pop(),g.shift(),t.pop(),y&&(p.reverse(),g.reverse());else if(Array.isArray(n)||"ticks"in n||"domain"in n){const e=Math.abs(h.x2-h.x1)/t.length;let n=h.x1;p=t.map(((t,o)=>(o>0&&(n+=e,g.push(n)),n))),g.push(n+e)}y&&(p.reverse(),g.reverse())}return{colorXStartCoords:p,colorXEndCoords:g,colorYStartCoords:m,colorYEndCoords:x}}function cf(t,e,n,o,i,r,s,a,c,l,u,h,d){let f,y,p,g,m,x,k;"vertical"===e?(y={x1:"0%",x2:"0%"},p=s||d?{y1:"0%",y2:"100%"}:{y1:"100%",y2:"0%"},x=c.y1,k=c.y2,r?(g=l-2*u-i*a.width,m=l-2*u):(g=l+2*u,m=l+2*u+i*a.width)):"horizontal"===e&&(y=s||!d?{x1:"100%",x2:"0%"}:{x1:"0%",x2:"100%"},p={y1:"0%",y2:"0%"},g=a.x1,m=a.x2,r?(x=l+2*u,k=l+o*c.height+2*u):(x=l-o*c.height-2*u,k=l-2*u));const v={x1:g,x2:m,y1:x,y2:k};if(h){let t;t=s?Ze().domain(n.domain()).range([1,0]):Ze().domain(n.domain()).range([0,1]),f=h.map(((e,n)=>s?1-t(e):t(e)))}else{if(void 0!==h)throw new Error("Couldn't construct legend. Please provide 'tickValues' or a scale with\n        either a 'ticks' or a 'domain' method.");{const e=1/t.length;f=t.map(((t,n)=>e*(n+.5)))}}return{offsets:f,gradX:y,gradY:p,rectCoords:v}}function lf(t){let e,n;return e=new Oh({props:{x:t[69],y:t[70],text:t[11],fontFamily:t[13],fontSize:t[14],fontWeight:t[15],rotation:t[17],anchorPoint:t[18],opacity:t[16],fill:t[12],transition:t[19],zoomIdentity:t[20],clip:t[21]}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,n){const o={};1&n[0]&&(o.x=t[69]),2&n[0]&&(o.y=t[70]),2048&n[0]&&(o.text=t[11]),8192&n[0]&&(o.fontFamily=t[13]),16384&n[0]&&(o.fontSize=t[14]),32768&n[0]&&(o.fontWeight=t[15]),131072&n[0]&&(o.rotation=t[17]),262144&n[0]&&(o.anchorPoint=t[18]),65536&n[0]&&(o.opacity=t[16]),4096&n[0]&&(o.fill=t[12]),524288&n[0]&&(o.transition=t[19]),1048576&n[0]&&(o.zoomIdentity=t[20]),2097152&n[0]&&(o.clip=t[21]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function uf(t){let e,n,o,i;n=new ud({props:{x1:t[63],x2:t[64],y1:t[65],y2:t[66],fill:t[25],fillOpacity:t[26],transition:t[19],stroke:t[2],strokeWidth:t[3],zoomIdentity:t[20],clip:t[21]}}),o=new kd({props:{x:t[67],y:t[68],text:t[22],anchorPoint:t[10],rotation:t[4],fontFamily:t[5],fontSize:t[6],fontWeight:t[7],opacity:t[8],fill:t[9],transition:t[19],zoomIdentity:t[20],clip:t[21]}});let r=t[11].length>0&&lf(t);return{c(){e=b("g"),rt(n.$$.fragment),rt(o.$$.fragment),r&&r.c(),_(e,"class","discrete-legend")},m(t,s){k(t,e,s),st(n,e,null),st(o,e,null),r&&r.m(e,null),i=!0},p(t,i){const s={};134217728&i[0]&&(s.x1=t[63]),268435456&i[0]&&(s.x2=t[64]),536870912&i[0]&&(s.y1=t[65]),1073741824&i[0]&&(s.y2=t[66]),33554432&i[0]&&(s.fill=t[25]),67108864&i[0]&&(s.fillOpacity=t[26]),524288&i[0]&&(s.transition=t[19]),4&i[0]&&(s.stroke=t[2]),8&i[0]&&(s.strokeWidth=t[3]),1048576&i[0]&&(s.zoomIdentity=t[20]),2097152&i[0]&&(s.clip=t[21]),n.$set(s);const a={};8388608&i[0]&&(a.x=t[67]),16777216&i[0]&&(a.y=t[68]),4194304&i[0]&&(a.text=t[22]),1024&i[0]&&(a.anchorPoint=t[10]),16&i[0]&&(a.rotation=t[4]),32&i[0]&&(a.fontFamily=t[5]),64&i[0]&&(a.fontSize=t[6]),128&i[0]&&(a.fontWeight=t[7]),256&i[0]&&(a.opacity=t[8]),512&i[0]&&(a.fill=t[9]),524288&i[0]&&(a.transition=t[19]),1048576&i[0]&&(a.zoomIdentity=t[20]),2097152&i[0]&&(a.clip=t[21]),o.$set(a),t[11].length>0?r?(r.p(t,i),2048&i[0]&&Q(r,1)):(r=lf(t),r.c(),Q(r,1),r.m(e,null)):r&&(K(),tt(r,1,1,(()=>{r=null})),U())},i(t){i||(Q(n.$$.fragment,t),Q(o.$$.fragment,t),Q(r),i=!0)},o(t){tt(n.$$.fragment,t),tt(o.$$.fragment,t),tt(r),i=!1},d(t){t&&v(e),at(n),at(o),r&&r.d()}}}function hf(t,e,n){let o,i,{x1:r}=e,{x2:s}=e,{y1:a}=e,{y2:c}=e,{orient:u="vertical"}=e,{vjust:h="center"}=e,{height:d}=e,{hjust:f="left"}=e,{width:y=0}=e,{xOffset:p=0}=e,{yOffset:g=0}=e,{usePadding:m=!1}=e,{flip:x=!1}=e,{flipLabels:k=!1}=e,{stroke:v="none"}=e,{strokeWidth:b=2}=e,{fill:M}=e,{fillOpacity:$}=e,{labels:w}=e,{labelFormat:_}=e,{labelRotate:T=0}=e,{labelX:S}=e,{labelY:O}=e,{labelFont:C="Helvetica"}=e,{labelFontSize:P=10}=e,{labelFontWeight:I="normal"}=e,{labelOpacity:N=1}=e,{labelColor:A="black"}=e,{labelAnchorPoint:W="center"}=e,{labelCount:E=10}=e,{labelExtra:L=!1}=e,{firstLabel:F}=e,{format:R}=e,{labelPaddingY:j=0}=e,{labelPaddingX:Y=0}=e,{titleHjust:z="center"}=e,{titleXOffset:X=0}=e,{titleX:D}=e,{titleVjust:q="top"}=e,{titleYOffset:H=-3}=e,{titleY:G}=e,{title:B="Legend"}=e,{titleColor:Z="black"}=e,{titleFont:V="Helvetica"}=e,{titleFontSize:J=12}=e,{titleFontWeight:K="bold"}=e,{titleOpacity:U=1}=e,{titleRotation:Q=0}=e,{titleAnchorPoint:tt="t"}=e,{transition:et}=e,{zoomIdentity:nt}=e,{clip:ot=!1}=e;const it=nn();l(t,it,(t=>n(89,o=t)));const rt=yt();let st,at;l(t,rt,(t=>n(90,i=t)));let ct,lt,ut,ht,dt,ft,pt,gt,mt,kt,vt,bt,Mt,$t,wt,_t,Tt,St,Ot,Ct,Pt,It,Nt=!1,At=o.scaleX.range(),Wt=o.scaleY.range();return t.$$set=t=>{"x1"in t&&n(33,r=t.x1),"x2"in t&&n(34,s=t.x2),"y1"in t&&n(35,a=t.y1),"y2"in t&&n(36,c=t.y2),"orient"in t&&n(40,u=t.orient),"vjust"in t&&n(41,h=t.vjust),"height"in t&&n(37,d=t.height),"hjust"in t&&n(42,f=t.hjust),"width"in t&&n(38,y=t.width),"xOffset"in t&&n(43,p=t.xOffset),"yOffset"in t&&n(44,g=t.yOffset),"usePadding"in t&&n(45,m=t.usePadding),"flip"in t&&n(46,x=t.flip),"flipLabels"in t&&n(47,k=t.flipLabels),"stroke"in t&&n(2,v=t.stroke),"strokeWidth"in t&&n(3,b=t.strokeWidth),"fill"in t&&n(48,M=t.fill),"fillOpacity"in t&&n(49,$=t.fillOpacity),"labels"in t&&n(50,w=t.labels),"labelFormat"in t&&n(51,_=t.labelFormat),"labelRotate"in t&&n(4,T=t.labelRotate),"labelX"in t&&n(52,S=t.labelX),"labelY"in t&&n(53,O=t.labelY),"labelFont"in t&&n(5,C=t.labelFont),"labelFontSize"in t&&n(6,P=t.labelFontSize),"labelFontWeight"in t&&n(7,I=t.labelFontWeight),"labelOpacity"in t&&n(8,N=t.labelOpacity),"labelColor"in t&&n(9,A=t.labelColor),"labelAnchorPoint"in t&&n(10,W=t.labelAnchorPoint),"labelCount"in t&&n(54,E=t.labelCount),"labelExtra"in t&&n(55,L=t.labelExtra),"firstLabel"in t&&n(56,F=t.firstLabel),"format"in t&&n(39,R=t.format),"labelPaddingY"in t&&n(57,j=t.labelPaddingY),"labelPaddingX"in t&&n(58,Y=t.labelPaddingX),"titleHjust"in t&&n(59,z=t.titleHjust),"titleXOffset"in t&&n(60,X=t.titleXOffset),"titleX"in t&&n(0,D=t.titleX),"titleVjust"in t&&n(61,q=t.titleVjust),"titleYOffset"in t&&n(62,H=t.titleYOffset),"titleY"in t&&n(1,G=t.titleY),"title"in t&&n(11,B=t.title),"titleColor"in t&&n(12,Z=t.titleColor),"titleFont"in t&&n(13,V=t.titleFont),"titleFontSize"in t&&n(14,J=t.titleFontSize),"titleFontWeight"in t&&n(15,K=t.titleFontWeight),"titleOpacity"in t&&n(16,U=t.titleOpacity),"titleRotation"in t&&n(17,Q=t.titleRotation),"titleAnchorPoint"in t&&n(18,tt=t.titleAnchorPoint),"transition"in t&&n(19,et=t.transition),"zoomIdentity"in t&&n(20,nt=t.zoomIdentity),"clip"in t&&n(21,ot=t.clip)},t.$$.update=()=>{if(402653184&t.$$.dirty[2]&&(o.flipY&&n(88,It=!0),i.flipY&&n(88,It=!0)),402653184&t.$$.dirty[2]&&(o.flipX&&n(87,Pt=!0),i.flipX&&n(87,Pt=!0)),18496&t.$$.dirty[0]|65276&t.$$.dirty[1]|520601600&t.$$.dirty[2]){if(!0===m&&(n(76,gt=o.padding),void 0===gt&&n(76,gt=i.padding),n(79,At=xt(At,gt.left,gt.right)),n(80,Wt=xt(Wt,gt.top,gt.bottom))),!["horizontal","vertical"].includes(u))throw Error("Invalid input for `orient` property. Please provide either `horizontal` or `vertical` as inputs.");if(n(86,Ct=B.length>0?1.5*J:0),!ef(r,s,a,c)&&["horizontal","vertical"].includes(u))Pt&&At.reverse(),n(77,mt=Ud(f,At,u,y,p,P,0,Pt)),n(33,r=mt.x1),n(34,s=mt.x2),n(38,y=Math.abs(s-r)),n(84,St={x1:r,x2:s,width:y}),It&&Wt.reverse(),n(78,kt=Kd(h,Wt,u,d,g,Ct,0,It)),n(35,a=kt.y1),n(36,c=kt.y2),n(37,d=Math.abs(c-a)),n(85,Ot={y1:a,y2:c,height:d});else{let t,e,i,l;t="[object Function]"==={}.toString.call(r)?r():o.scaleX(r),e="[object Function]"==={}.toString.call(s)?s():o.scaleX(s),i="[object Function]"==={}.toString.call(a)?a():o.scaleY(a),l="[object Function]"==={}.toString.call(c)?c():o.scaleY(c),n(84,St={x1:t,x2:e,width:Math.abs(e-t)}),n(85,Ot={y1:i,y2:l,height:Math.abs(l-i)})}}if(2051&t.$$.dirty[0]|1879048192&t.$$.dirty[1]|264241153&t.$$.dirty[2]&&B.length>0&&(D||0===D?"[object Function]"==={}.toString.call(D)?n(0,D=D()):n(0,D=o.scaleX(D)):n(0,D=Qd(z,St,D,X)),G||0===G?"[object Function]"==={}.toString.call(G)?n(1,G=G()):n(1,G=o.scaleY(G)):n(1,G=tf(q,Ot,G,H,Ct,It))),393216&t.$$.dirty[1]|512&t.$$.dirty[2])if(M||$){if("function"==typeof M&&n(71,st=M),"function"==typeof $&&n(71,st=$),!st)throw new Error("Couldn't construct legend. Please provide at least 'fill' or 'fillOpacity'\n        with a scale or function that has domain and range properties or methods.");Object.prototype.hasOwnProperty.call(st,"domain")&&("function"==typeof st.domain?n(72,at=st.domain()):n(72,at=st.domain))}else if(void 0===M&&void 0===$)throw new Error("Couldn't construct legend. Please provide at least 'fill' or 'fillOpacity'\n      with a scale or function that has domain and range properties or methods.");if(512&t.$$.dirty[1]&&(n(82,_t="horizontal"===u?.75:1),n(83,Tt="horizontal"===u?0:.75)),29360128&t.$$.dirty[0]|268010244&t.$$.dirty[1]|116395520&t.$$.dirty[2])if(void 0===w?(n(22,ct=of(st,E,L,F)),n(22,ct=void 0!==R?ct.map(R):ct)):(n(22,ct=void 0!==R?w.map(R):w),n(73,Nt=!0)),"vertical"===u)n(24,ht=rf(ct,at,L,Ot,x,u,j,Nt,It)),n(23,ut=k?r+_t*St.width:r+(1-_t)*St.width),n(23,ut=S||ut),void 0!==Y&&n(23,ut=k?ut+Y:ut-Y),n(39,R=sf(_,at,ht.length));else{if("horizontal"!==u)throw new Error("Could not construct legend. Please provide either 'vertical' or 'horizontal' to 'orient' prop.");n(23,ut=rf(ct,at,L,St,x,u,Y,Nt,Pt)),n(24,ht=k?Ot.y2-(1-Tt)*Ot.height:Ot.y2-Tt*Ot.height),n(24,ht=O||ht),void 0!==j&&n(24,ht=k?ht-j:ht+j),n(39,R=sf(_,at,ut.length))}if(130023488&t.$$.dirty[0]|201556480&t.$$.dirty[1]|116407808&t.$$.dirty[2]&&M&&"function"==typeof M){n(25,dt=ct.map(((t,e)=>Array.isArray(at[0])&&at.length>0?M(e):M(t)))),"vertical"===u?(n(74,lt=ht),n(75,pt=ut-Y)):(n(74,lt=ut),n(75,pt=ht-j));n(81,wt=af(dt,u,st,ct,lt,pt,P,_t,Tt,k,0,St,Ot,Nt,"horizontal"===u?Pt:It)),ft||n(26,ft=1)}if(130023488&t.$$.dirty[0]|492032&t.$$.dirty[1]|116406784&t.$$.dirty[2]&&$)if("function"==typeof $){n(26,ft=ct.map(((t,e)=>Array.isArray(st[0])&&st.length>0?$(e):$(t)))),"vertical"===u?(n(74,lt=ht),n(75,pt=ut)):(n(74,lt=ut),n(75,pt=ht));n(81,wt=af(ft,u,st,ct,lt,pt,P,_t,Tt,k,0,St,Ot,Nt,"horizontal"===u?Pt:It)),dt||n(25,dt=M)}else $.constructor===Number&&n(26,ft=$);524288&t.$$.dirty[2]&&(n(27,vt=wt.colorXStartCoords),n(28,bt=wt.colorXEndCoords),n(29,Mt=wt.colorYStartCoords),n(30,$t=wt.colorYEndCoords))},[D,G,v,b,T,C,P,I,N,A,W,B,Z,V,J,K,U,Q,tt,et,nt,ot,ct,ut,ht,dt,ft,vt,bt,Mt,$t,it,rt,r,s,a,c,d,y,R,u,h,f,p,g,m,x,k,M,$,w,_,S,O,E,L,F,j,Y,z,X,q,H,()=>vt,()=>bt,()=>Mt,()=>$t,()=>ut,()=>ht,()=>D,()=>G]}class df extends lt{constructor(t){super(),ct(this,t,hf,uf,a,{x1:33,x2:34,y1:35,y2:36,orient:40,vjust:41,height:37,hjust:42,width:38,xOffset:43,yOffset:44,usePadding:45,flip:46,flipLabels:47,stroke:2,strokeWidth:3,fill:48,fillOpacity:49,labels:50,labelFormat:51,labelRotate:4,labelX:52,labelY:53,labelFont:5,labelFontSize:6,labelFontWeight:7,labelOpacity:8,labelColor:9,labelAnchorPoint:10,labelCount:54,labelExtra:55,firstLabel:56,format:39,labelPaddingY:57,labelPaddingX:58,titleHjust:59,titleXOffset:60,titleX:0,titleVjust:61,titleYOffset:62,titleY:1,title:11,titleColor:12,titleFont:13,titleFontSize:14,titleFontWeight:15,titleOpacity:16,titleRotation:17,titleAnchorPoint:18,transition:19,zoomIdentity:20,clip:21},[-1,-1,-1])}}function ff(t,e,n){const o=t.slice();return o[90]=e[n],o[92]=n,o}function yf(t){let e,n,o,i;return{c(){e=b("stop"),_(e,"key",n=t[92]),_(e,"offset",o=""+(100*t[90]+"%")),_(e,"style",i=`\n            stop-color:${Array.isArray(t[24])?t[24][t[92]]:t[24]};\n            stop-opacity:${Array.isArray(t[25])?t[25][t[92]]:t[25]}\n          `)},m(t,n){k(t,e,n)},p(t,n){67108864&n[0]&&o!==(o=""+(100*t[90]+"%"))&&_(e,"offset",o),50331648&n[0]&&i!==(i=`\n            stop-color:${Array.isArray(t[24])?t[24][t[92]]:t[24]};\n            stop-opacity:${Array.isArray(t[25])?t[25][t[92]]:t[25]}\n          `)&&_(e,"style",i)},d(t){t&&v(e)}}}function pf(t){let e,n;return e=new Oh({props:{x:t[69],y:t[70],text:t[11],fontFamily:t[13],fontSize:t[14],fontWeight:t[15],rotation:t[17],anchorPoint:t[18],opacity:t[16],fill:t[12],transition:t[19],clip:t[20]}}),{c(){rt(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,n){const o={};1&n[0]&&(o.x=t[69]),2&n[0]&&(o.y=t[70]),2048&n[0]&&(o.text=t[11]),8192&n[0]&&(o.fontFamily=t[13]),16384&n[0]&&(o.fontSize=t[14]),32768&n[0]&&(o.fontWeight=t[15]),131072&n[0]&&(o.rotation=t[17]),262144&n[0]&&(o.anchorPoint=t[18]),65536&n[0]&&(o.opacity=t[16]),4096&n[0]&&(o.fill=t[12]),524288&n[0]&&(o.transition=t[19]),1048576&n[0]&&(o.clip=t[20]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function gf(t){let e,n,o,i,r,s,a,c,l,u,h=t[26],d=[];for(let e=0;e<h.length;e+=1)d[e]=yf(ff(t,h,e));c=new kh({props:{x1:t[63],x2:t[64],y1:t[65],y2:t[66],fill:`url(#${t[30]})`,transition:t[19],stroke:t[2],strokeWidth:t[3],clip:t[20]}}),l=new kd({props:{x:t[67],y:t[68],text:t[21],anchorPoint:t[10],rotation:t[4],fontFamily:t[5],fontSize:t[6],fontWeight:t[7],opacity:t[8],fill:t[9],transition:t[19],clip:t[20]}});let f=t[11].length>0&&pf(t);return{c(){e=b("g"),n=b("defs"),o=b("linearGradient");for(let t=0;t<d.length;t+=1)d[t].c();rt(c.$$.fragment),rt(l.$$.fragment),f&&f.c(),_(o,"id",t[30]),_(o,"x1",i=t[27].x1),_(o,"y1",r=t[28].y1),_(o,"x2",s=t[27].x2),_(o,"y2",a=t[28].y2),_(e,"class","gradient-legend")},m(t,i){k(t,e,i),x(e,n),x(n,o);for(let t=0;t<d.length;t+=1)d[t].m(o,null);st(c,e,null),st(l,e,null),f&&f.m(e,null),u=!0},p(t,n){if(117440512&n[0]){let e;for(h=t[26],e=0;e<h.length;e+=1){const i=ff(t,h,e);d[e]?d[e].p(i,n):(d[e]=yf(i),d[e].c(),d[e].m(o,null))}for(;e<d.length;e+=1)d[e].d(1);d.length=h.length}(!u||134217728&n[0]&&i!==(i=t[27].x1))&&_(o,"x1",i),(!u||268435456&n[0]&&r!==(r=t[28].y1))&&_(o,"y1",r),(!u||134217728&n[0]&&s!==(s=t[27].x2))&&_(o,"x2",s),(!u||268435456&n[0]&&a!==(a=t[28].y2))&&_(o,"y2",a);const y={};536870912&n[0]&&(y.x1=t[63]),536870912&n[0]&&(y.x2=t[64]),536870912&n[0]&&(y.y1=t[65]),536870912&n[0]&&(y.y2=t[66]),524288&n[0]&&(y.transition=t[19]),4&n[0]&&(y.stroke=t[2]),8&n[0]&&(y.strokeWidth=t[3]),1048576&n[0]&&(y.clip=t[20]),c.$set(y);const p={};4194304&n[0]&&(p.x=t[67]),8388608&n[0]&&(p.y=t[68]),2097152&n[0]&&(p.text=t[21]),1024&n[0]&&(p.anchorPoint=t[10]),16&n[0]&&(p.rotation=t[4]),32&n[0]&&(p.fontFamily=t[5]),64&n[0]&&(p.fontSize=t[6]),128&n[0]&&(p.fontWeight=t[7]),256&n[0]&&(p.opacity=t[8]),512&n[0]&&(p.fill=t[9]),524288&n[0]&&(p.transition=t[19]),1048576&n[0]&&(p.clip=t[20]),l.$set(p),t[11].length>0?f?(f.p(t,n),2048&n[0]&&Q(f,1)):(f=pf(t),f.c(),Q(f,1),f.m(e,null)):f&&(K(),tt(f,1,1,(()=>{f=null})),U())},i(t){u||(Q(c.$$.fragment,t),Q(l.$$.fragment,t),Q(f),u=!0)},o(t){tt(c.$$.fragment,t),tt(l.$$.fragment,t),tt(f),u=!1},d(t){t&&v(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(d,t),at(c),at(l),f&&f.d()}}}let mf=0;function xf(t,e,n){let o,i;const r="gradient"+mf++;let{x1:s}=e,{x2:a}=e,{y1:c}=e,{y2:u}=e,{orient:h="vertical"}=e,{vjust:d="center"}=e,{height:f}=e,{hjust:y="left"}=e,{width:p=0}=e,{xOffset:g=0}=e,{yOffset:m=0}=e,{usePadding:x=!1}=e,{flip:k=!1}=e,{flipLabels:v=!1}=e,{stroke:b="none"}=e,{strokeWidth:M=2}=e,{fill:$}=e,{fillOpacity:w}=e,{labels:_}=e,{labelFormat:T}=e,{labelRotate:S=0}=e,{labelX:O}=e,{labelY:C}=e,{labelFont:P="Helvetica"}=e,{labelFontSize:I=10}=e,{labelFontWeight:N="normal"}=e,{labelOpacity:A=1}=e,{labelColor:W="black"}=e,{labelAnchorPoint:E="center"}=e,{labelCount:L=10}=e,{labelExtra:F=!1}=e,{firstLabel:R}=e,{format:j}=e,{labelPaddingX:Y=0}=e,{labelPaddingY:z=0}=e,{titleHjust:X="center"}=e,{titleOffsetX:D=0}=e,{titleX:q}=e,{titleVjust:H="top"}=e,{titleOffsetY:G=0}=e,{titleY:B}=e,{title:Z="Legend"}=e,{titleColor:V="black"}=e,{titleFont:J="Helvetica"}=e,{titleFontSize:K=12}=e,{titleFontWeight:U="bold"}=e,{titleOpacity:Q=1}=e,{titleRotation:tt=0}=e,{titleAnchorPoint:et="t"}=e,{transition:nt}=e,{clip:ot=!1}=e;const it=nn();l(t,it,(t=>n(88,o=t)));const rt=yt();let st,at,ct,lt,ut,ht,dt,ft,pt,gt,mt;l(t,rt,(t=>n(89,i=t)));let kt,vt,bt,Mt,$t,wt,_t,Tt,St,Ot,Ct,Pt,It=o.scaleX.range(),Nt=o.scaleY.range();return t.$$set=t=>{"x1"in t&&n(33,s=t.x1),"x2"in t&&n(34,a=t.x2),"y1"in t&&n(35,c=t.y1),"y2"in t&&n(36,u=t.y2),"orient"in t&&n(40,h=t.orient),"vjust"in t&&n(41,d=t.vjust),"height"in t&&n(37,f=t.height),"hjust"in t&&n(42,y=t.hjust),"width"in t&&n(38,p=t.width),"xOffset"in t&&n(43,g=t.xOffset),"yOffset"in t&&n(44,m=t.yOffset),"usePadding"in t&&n(45,x=t.usePadding),"flip"in t&&n(46,k=t.flip),"flipLabels"in t&&n(47,v=t.flipLabels),"stroke"in t&&n(2,b=t.stroke),"strokeWidth"in t&&n(3,M=t.strokeWidth),"fill"in t&&n(48,$=t.fill),"fillOpacity"in t&&n(49,w=t.fillOpacity),"labels"in t&&n(50,_=t.labels),"labelFormat"in t&&n(51,T=t.labelFormat),"labelRotate"in t&&n(4,S=t.labelRotate),"labelX"in t&&n(52,O=t.labelX),"labelY"in t&&n(53,C=t.labelY),"labelFont"in t&&n(5,P=t.labelFont),"labelFontSize"in t&&n(6,I=t.labelFontSize),"labelFontWeight"in t&&n(7,N=t.labelFontWeight),"labelOpacity"in t&&n(8,A=t.labelOpacity),"labelColor"in t&&n(9,W=t.labelColor),"labelAnchorPoint"in t&&n(10,E=t.labelAnchorPoint),"labelCount"in t&&n(54,L=t.labelCount),"labelExtra"in t&&n(55,F=t.labelExtra),"firstLabel"in t&&n(56,R=t.firstLabel),"format"in t&&n(39,j=t.format),"labelPaddingX"in t&&n(57,Y=t.labelPaddingX),"labelPaddingY"in t&&n(58,z=t.labelPaddingY),"titleHjust"in t&&n(59,X=t.titleHjust),"titleOffsetX"in t&&n(60,D=t.titleOffsetX),"titleX"in t&&n(0,q=t.titleX),"titleVjust"in t&&n(61,H=t.titleVjust),"titleOffsetY"in t&&n(62,G=t.titleOffsetY),"titleY"in t&&n(1,B=t.titleY),"title"in t&&n(11,Z=t.title),"titleColor"in t&&n(12,V=t.titleColor),"titleFont"in t&&n(13,J=t.titleFont),"titleFontSize"in t&&n(14,K=t.titleFontSize),"titleFontWeight"in t&&n(15,U=t.titleFontWeight),"titleOpacity"in t&&n(16,Q=t.titleOpacity),"titleRotation"in t&&n(17,tt=t.titleRotation),"titleAnchorPoint"in t&&n(18,et=t.titleAnchorPoint),"transition"in t&&n(19,nt=t.transition),"clip"in t&&n(20,ot=t.clip)},t.$$.update=()=>{if(201326592&t.$$.dirty[2]&&(o.flipY&&n(87,Pt=!0),i.flipY&&n(87,Pt=!0)),201326592&t.$$.dirty[2]&&(o.flipX&&n(86,Ct=!0),i.flipX&&n(86,Ct=!0)),18496&t.$$.dirty[0]|65276&t.$$.dirty[1]|260300800&t.$$.dirty[2]){if(!0===x&&(n(75,pt=o.padding),void 0===pt&&n(75,pt=i.padding),n(78,It=xt(It,pt.left,pt.right)),n(79,Nt=xt(Nt,pt.top,pt.bottom))),!["horizontal","vertical"].includes(h))throw Error("Invalid input for `orient` property. Please provide either `horizontal` or `vertical` as inputs.");if(n(85,Ot=Z.length>0?1.5*K:0),!ef(s,a,c,u)&&["horizontal","vertical"].includes(h))Ct&&It.reverse(),n(76,gt=Ud(y,It,h,p,g,I,0,Ct)),n(33,s=gt.x1),n(34,a=gt.x2),n(38,p=Math.abs(a-s)),n(83,Tt={x1:s,x2:a,width:p}),Pt&&Nt.reverse(),n(77,mt=Kd(d,Nt,h,f,m,Ot,0,Pt)),n(35,c=mt.y1),n(36,u=mt.y2),n(37,f=Math.abs(u-c)),n(84,St={y1:c,y2:u,height:f});else{let t,e,i,r;t="[object Function]"==={}.toString.call(s)?s():o.scaleX(s),e="[object Function]"==={}.toString.call(a)?a():o.scaleX(a),i="[object Function]"==={}.toString.call(c)?c():o.scaleY(c),r="[object Function]"==={}.toString.call(u)?u():o.scaleY(u),n(83,Tt={x1:t,x2:e,width:Math.abs(e-t)}),n(84,St={y1:i,y2:r,height:Math.abs(r-i)})}}if(2051&t.$$.dirty[0]|1879048192&t.$$.dirty[1]|132120577&t.$$.dirty[2]&&Z.length>0&&(q||0===q?"[object Function]"==={}.toString.call(q)?n(0,q=q()):n(0,q=o.scaleX(q)):n(0,q=Qd(X,Tt,q,D)),B||0===B?"[object Function]"==={}.toString.call(B)?n(1,B=B()):n(1,B=o.scaleY(B)):n(1,B=tf(H,St,B,G,Ot,Pt))),393216&t.$$.dirty[1]|512&t.$$.dirty[2])if($||w){if("function"==typeof $&&n(71,st=$),"function"==typeof w&&n(71,st=w),!st)throw new Error("Couldn't construct legend. Please provide at least 'fill' or 'fillOpacity'\n        with a scale or function that has domain and range properties or methods.");Object.prototype.hasOwnProperty.call(st,"domain")&&("function"==typeof st.domain?n(72,at=st.domain()):n(72,at=st.domain))}else if(void 0===$&&void 0===w)throw new Error("Couldn't construct legend. Please provide at least 'fill' or 'fillOpacity'\n      with a scale or function that has domain and range properties or methods.");if(512&t.$$.dirty[1]&&(n(81,wt="horizontal"===h?.75:1),n(82,_t="horizontal"===h?0:.75)),14680064&t.$$.dirty[0]|268010244&t.$$.dirty[1]|58197504&t.$$.dirty[2]){let t=!1;if(void 0===_?(n(21,ct=of(st,L,F,R)),n(21,ct=void 0!==j?ct.map(j):ct)):(n(21,ct=void 0!==j?_.map(j):_),t=!0),"vertical"===h)n(23,ut=rf(ct,at,F,St,k,h,z,t,Pt)),n(22,lt=v?s+wt*Tt.width:s+(1-wt)*Tt.width),n(22,lt=O||lt),void 0!==Y&&n(22,lt=v?lt+Y:lt-Y),n(39,j=sf(T,at,ut.length));else{if("horizontal"!==h)throw new Error("Could not construct legend. Please provide either 'vertical' or 'horizontal' to 'orient' prop.");n(22,lt=rf(ct,at,F,Tt,k,h,Y,t,Ct)),n(23,ut=v?St.y2-(1-_t)*St.height:St.y2-_t*St.height),n(23,ut=C||ut),void 0!==z&&n(23,ut=v?ut-z:ut+z),n(39,j=sf(T,at,lt.length))}}if(65011776&t.$$.dirty[0]|1016320&t.$$.dirty[1]|58200576&t.$$.dirty[2]&&$&&"function"==typeof $){n(24,ht=ct.map(((t,e)=>Array.isArray(st[0])&&st.length>0?$(e):$(t)))),n(74,ft="vertical"===h?lt:ut);n(80,kt=cf(ht,h,st,wt,_t,v,k,Tt,St,ft,I,_,"horizontal"===h?Ct:Pt)),dt||n(25,dt=void 0!==w?w:1)}if(65011776&t.$$.dirty[0]|202342912&t.$$.dirty[1]|58200576&t.$$.dirty[2]&&w){w.constructor===Function&&n(25,dt=ct.map(((t,e)=>Array.isArray(st[0])&&st.length>0?w(e):w(t)))),n(74,ft="vertical"===h?lt-Y:ut-z);n(80,kt=cf(dt,h,st,wt,_t,v,k,Tt,St,ft,I,_,"horizontal"===h?Ct:Pt)),ht||n(24,ht=void 0!==$?$:"black")}262144&t.$$.dirty[2]&&(n(26,vt=kt.offsets),n(27,bt=kt.gradX),n(28,Mt=kt.gradY),n(29,$t=kt.rectCoords))},[q,B,b,M,S,P,I,N,A,W,E,Z,V,J,K,U,Q,tt,et,nt,ot,ct,lt,ut,ht,dt,vt,bt,Mt,$t,r,it,rt,s,a,c,u,f,p,j,h,d,y,g,m,x,k,v,$,w,_,T,O,C,L,F,R,Y,z,X,D,H,G,()=>$t.x1,()=>$t.x2,()=>$t.y1,()=>$t.y2,()=>lt,()=>ut,()=>q,()=>B]}class kf extends lt{constructor(t){super(),ct(this,t,xf,gf,a,{x1:33,x2:34,y1:35,y2:36,orient:40,vjust:41,height:37,hjust:42,width:38,xOffset:43,yOffset:44,usePadding:45,flip:46,flipLabels:47,stroke:2,strokeWidth:3,fill:48,fillOpacity:49,labels:50,labelFormat:51,labelRotate:4,labelX:52,labelY:53,labelFont:5,labelFontSize:6,labelFontWeight:7,labelOpacity:8,labelColor:9,labelAnchorPoint:10,labelCount:54,labelExtra:55,firstLabel:56,format:39,labelPaddingX:57,labelPaddingY:58,titleHjust:59,titleOffsetX:60,titleX:0,titleVjust:61,titleOffsetY:62,titleY:1,title:11,titleColor:12,titleFont:13,titleFontSize:14,titleFontWeight:15,titleOpacity:16,titleRotation:17,titleAnchorPoint:18,transition:19,clip:20},[-1,-1,-1])}}function vf(t){const e=t.x,n=t.y;let o,i;const r=Ze().domain(e),s=Ze().domain(n);function a(){if(o&&i){const t=Math.abs(o[1]-o[0]),a=Math.abs(i[1]-i[0]),c=(o[0]+o[1])/2,l=(i[0]+i[1])/2,u=t/(e[1]-e[0]),h=a/(n[1]-n[0]);if(u<h){const t=(n[1]-n[0])/2*u,e=[l-t,l+t];i[0]>i[1]&&e.reverse(),r.range(o),s.range(e)}if(u>=h){const t=(e[1]-e[0])/2*h,n=[c-t,c+t];r.range(n),s.range(i)}}}return{scaleX:{range:t=>(o=t,a(),r),copy:function(){return this}},scaleY:{range:t=>(i=t,a(),s),copy:function(){return this}}}}function bf(t,e){const n=e.dimension||"both",o=e.setZoomIdentity,i=e.setBlockReindexing||Mf;let r,s=!1;return{handlers:{onMousedown:function(t){i(!0),s=!0,r=t.screenCoordinates},onMousemove:function(i){if(!s)return;const a=i.screenCoordinates,c=function(t,e){return{x:t.x-e.x,y:t.y-e.y}}(r,a);r=a;const l=e.extentX||[-1/0,1/0],u=e.extentY||[-1/0,1/0],h=t.x-c.x,d=t.y-c.y;h<=l[1]&&h>=l[0]&&(t.x-=c.x),d<=u[1]&&d>=u[0]&&(t.y-=c.y),"x"===n&&(t.y=0),"y"===n&&(t.x=0),o(t)},onMouseup:function(t){i(!1),s=!1}},reset:function(){t.x=0,t.y=0,o(t)}}}const Mf=()=>{};function $f(t,{setZoomIdentity:e,minZoom:n,maxZoom:o,step:i=1,dimension:r="both"}){const s=function(s){const a=function(t){if("wheel"===t.type)return t.screenCoordinates;if("pinch"===t.type)return t.screenCenter}(s),c=s.delta*i,l=t.kx,u=t.ky,h=l-c,d=u-c,f=Math.max(h,d);if(p=o,n<=(y=f)&&y<=p){if("both"===r||"x"===r){t.kx=h;const e=wf(l,h,a.x,t.x);t.x=e}if("both"===r||"y"===r){t.ky=d;const e=wf(u,d,a.y,t.y);t.y=e}e(t)}var y,p};return{handlers:{onWheel:s,onPinch:s},reset:function(){t.x=0,t.y=0,t.kx=1,t.ky=1,e(t)}}}function wf(t,e,n,o,i){return o+-((n-o)/t)*(e-t)}export{Yh as Area,_d as AreaLayer,df as DiscreteLegend,Fh as FuncLine,kf as GradientLegend,al as Graphic,Fl as Grid,Oh as Label,kd as LabelLayer,id as Layer,_h as Line,gd as LineLayer,ah as Mark,gh as Point,ad as PointLayer,Mh as Polygon,fd as PolygonLayer,kh as Rectangle,ud as RectangleLayer,_l as Section,Md as SymbolLayer,Ih as Symbol_,fh as Title,Rd as XAxis,Bd as XGridLines,qd as YAxis,Jd as YGridLines,vf as createGeoScales,bf as createPanHandler,$f as createZoomHandler};
