!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).florence={})}(this,(function(t){"use strict";function e(){}const n=t=>t;function o(t,e){for(const n in e)t[n]=e[n];return t}function i(t){return t()}function r(){return Object.create(null)}function s(t){t.forEach(i)}function a(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function l(t,e,n){t.$$.on_destroy.push(u(e,n))}function d(t,e,n,o){if(t){const i=h(t,e,n,o);return t[0](i)}}function h(t,e,n,i){return t[1]&&i?o(n.ctx.slice(),t[1](i(e))):n.ctx}function f(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|i[o];return t}return e.dirty|i}return e.dirty}const y="undefined"!=typeof window;let p=y?()=>window.performance.now():()=>Date.now(),g=y?t=>requestAnimationFrame(t):e;const m=new Set;function x(t){m.forEach(e=>{e.c(t)||(m.delete(e),e.f())}),0!==m.size&&g(x)}function k(t,e){t.appendChild(e)}function v(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function M(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function w(t){return document.createTextNode(t)}function $(){return w(" ")}function _(){return w("")}function T(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t,e){e=""+e,t.data!==e&&(t.data=e)}let O;function C(t){O=t}function P(){if(!O)throw new Error("Function called outside component initialization");return O}function A(t){P().$$.before_update.push(t)}function I(t){P().$$.on_mount.push(t)}function N(t){P().$$.after_update.push(t)}function W(t){P().$$.on_destroy.push(t)}function L(t,e){P().$$.context.set(t,e)}function E(t){return P().$$.context.get(t)}const F=[],j=[],Y=[],R=[],X=Promise.resolve();let z=!1;function D(){z||(z=!0,X.then(B))}function q(t){Y.push(t)}let H=!1;const G=new Set;function B(){if(!H){H=!0;do{for(let t=0;t<F.length;t+=1){const e=F[t];C(e),Z(e.$$)}for(F.length=0;j.length;)j.pop()();for(let t=0;t<Y.length;t+=1){const e=Y[t];G.has(e)||(G.add(e),e())}Y.length=0}while(F.length);for(;R.length;)R.pop()();z=!1,H=!1,G.clear()}}function Z(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const V=new Set;let J;function K(){J={r:0,c:[],p:J}}function U(){J.r||s(J.c),J=J.p}function Q(t,e){t&&t.i&&(V.delete(t),t.i(e))}function tt(t,e,n,o){if(t&&t.o){if(V.has(t))return;V.add(t),J.c.push(()=>{V.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function et(t,e){t.d(1),e.delete(t.key)}function nt(t,e,n,o,i,r,s,a,c,u,l,d){let h=t.length,f=r.length,y=h;const p={};for(;y--;)p[t[y].key]=y;const g=[],m=new Map,x=new Map;for(y=f;y--;){const t=d(i,r,y),a=n(t);let c=s.get(a);c?o&&c.p(t,e):(c=u(a,t),c.c()),m.set(a,g[y]=c),a in p&&x.set(a,Math.abs(y-p[a]))}const k=new Set,v=new Set;function b(t){Q(t,1),t.m(a,l),s.set(t.key,t),l=t.first,f--}for(;h&&f;){const e=g[f-1],n=t[h-1],o=e.key,i=n.key;e===n?(l=e.first,h--,f--):m.has(i)?!s.has(o)||k.has(o)?b(e):v.has(i)?h--:x.get(o)>x.get(i)?(v.add(o),b(e)):(k.add(i),h--):(c(n,s),h--)}for(;h--;){const e=t[h];m.has(e.key)||c(e,s)}for(;f;)b(g[f-1]);return g}function ot(t){t&&t.c()}function it(t,e,n){const{fragment:o,on_mount:r,on_destroy:c,after_update:u}=t.$$;o&&o.m(e,n),q(()=>{const e=r.map(i).filter(a);c?c.push(...e):s(e),t.$$.on_mount=[]}),u.forEach(q)}function rt(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function st(t,n,o,i,a,c,u=[-1]){const l=O;C(t);const d=n.props||{},h=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:a,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:r(),dirty:u};let f=!1;var y;h.ctx=o?o(t,d,(e,n,...o)=>{const i=o.length?o[0]:n;return h.ctx&&a(h.ctx[e],h.ctx[e]=i)&&(h.bound[e]&&h.bound[e](i),f&&function(t,e){-1===t.$$.dirty[0]&&(F.push(t),D(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n}):[],h.update(),f=!0,s(h.before_update),h.fragment=!!i&&i(h.ctx),n.target&&(n.hydrate?h.fragment&&h.fragment.l((y=n.target,Array.from(y.childNodes))):h.fragment&&h.fragment.c(),n.intro&&Q(t.$$.fragment),it(t,n.target,n.anchor),B()),C(l)}class at{$destroy(){rt(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const ct=[];function ut(t,n=e){let o;const i=[];function r(e){if(c(t,e)&&(t=e,o)){const e=!ct.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),ct.push(n,t)}if(e){for(let t=0;t<ct.length;t+=2)ct[t][0](ct[t+1]);ct.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(s,a=e){const c=[s,a];return i.push(c),1===i.length&&(o=n(r)||e),s(t),()=>{const t=i.indexOf(c);-1!==t&&i.splice(t,1),0===i.length&&(o(),o=null)}}}}class lt{constructor({renderer:t}){t||(this._rendererOptions={output:"svg"}),t&&(!function(t){if(!(t.constructor===Object&&"output"in t&&["svg"].includes(t.output)))throw new Error(`Invalid renderer options: ${JSON.stringify(t)}`)}(t),this._rendererOptions=t)}output(){return this._rendererOptions.output}}const dt={};function ht(){return E(dt)}function ft(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var yt,pt,gt=(1===(yt=ft).length&&(pt=yt,yt=function(t,e){return ft(pt(t),e)}),{left:function(t,e,n,o){for(null==n&&(n=0),null==o&&(o=t.length);n<o;){var i=n+o>>>1;yt(t[i],e)<0?n=i+1:o=i}return n},right:function(t,e,n,o){for(null==n&&(n=0),null==o&&(o=t.length);n<o;){var i=n+o>>>1;yt(t[i],e)>0?o=i:n=i+1}return n}}).right,mt=Math.sqrt(50),xt=Math.sqrt(10),kt=Math.sqrt(2);function vt(t,e,n){var o=(e-t)/Math.max(0,n),i=Math.floor(Math.log(o)/Math.LN10),r=o/Math.pow(10,i);return i>=0?(r>=mt?10:r>=xt?5:r>=kt?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(r>=mt?10:r>=xt?5:r>=kt?2:1)}function bt(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Mt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function wt(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function $t(){}var _t="\\s*([+-]?\\d+)\\s*",Tt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",St="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ot=/^#([0-9a-f]{3,8})$/,Ct=new RegExp("^rgb\\("+[_t,_t,_t]+"\\)$"),Pt=new RegExp("^rgb\\("+[St,St,St]+"\\)$"),At=new RegExp("^rgba\\("+[_t,_t,_t,Tt]+"\\)$"),It=new RegExp("^rgba\\("+[St,St,St,Tt]+"\\)$"),Nt=new RegExp("^hsl\\("+[Tt,St,St]+"\\)$"),Wt=new RegExp("^hsla\\("+[Tt,St,St,Tt]+"\\)$"),Lt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Et(){return this.rgb().formatHex()}function Ft(){return this.rgb().formatRgb()}function jt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ot.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Yt(e):3===n?new Dt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new Dt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new Dt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ct.exec(t))?new Dt(e[1],e[2],e[3],1):(e=Pt.exec(t))?new Dt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=At.exec(t))?Rt(e[1],e[2],e[3],e[4]):(e=It.exec(t))?Rt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Nt.exec(t))?Bt(e[1],e[2]/100,e[3]/100,1):(e=Wt.exec(t))?Bt(e[1],e[2]/100,e[3]/100,e[4]):Lt.hasOwnProperty(t)?Yt(Lt[t]):"transparent"===t?new Dt(NaN,NaN,NaN,0):null}function Yt(t){return new Dt(t>>16&255,t>>8&255,255&t,1)}function Rt(t,e,n,o){return o<=0&&(t=e=n=NaN),new Dt(t,e,n,o)}function Xt(t){return t instanceof $t||(t=jt(t)),t?new Dt((t=t.rgb()).r,t.g,t.b,t.opacity):new Dt}function zt(t,e,n,o){return 1===arguments.length?Xt(t):new Dt(t,e,n,null==o?1:o)}function Dt(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}function qt(){return"#"+Gt(this.r)+Gt(this.g)+Gt(this.b)}function Ht(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Gt(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Bt(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Vt(t,e,n,o)}function Zt(t){if(t instanceof Vt)return new Vt(t.h,t.s,t.l,t.opacity);if(t instanceof $t||(t=jt(t)),!t)return new Vt;if(t instanceof Vt)return t;var e=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,i=Math.min(e,n,o),r=Math.max(e,n,o),s=NaN,a=r-i,c=(r+i)/2;return a?(s=e===r?(n-o)/a+6*(n<o):n===r?(o-e)/a+2:(e-n)/a+4,a/=c<.5?r+i:2-r-i,s*=60):a=c>0&&c<1?0:s,new Vt(s,a,c,t.opacity)}function Vt(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}function Jt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Kt(t){return function(){return t}}function Ut(t){return 1==(t=+t)?Qt:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}(e,n,t):Kt(isNaN(e)?n:e)}}function Qt(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Kt(isNaN(t)?e:t)}Mt($t,jt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Et,formatHex:Et,formatHsl:function(){return Zt(this).formatHsl()},formatRgb:Ft,toString:Ft}),Mt(Dt,zt,wt($t,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Dt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Dt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qt,formatHex:qt,formatRgb:Ht,toString:Ht})),Mt(Vt,(function(t,e,n,o){return 1===arguments.length?Zt(t):new Vt(t,e,n,null==o?1:o)}),wt($t,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Vt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Vt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,i=2*n-o;return new Dt(Jt(t>=240?t-240:t+120,i,o),Jt(t,i,o),Jt(t<120?t+240:t-120,i,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var te=function t(e){var n=Ut(e);function o(t,e){var o=n((t=zt(t)).r,(e=zt(e)).r),i=n(t.g,e.g),r=n(t.b,e.b),s=Qt(t.opacity,e.opacity);return function(e){return t.r=o(e),t.g=i(e),t.b=r(e),t.opacity=s(e),t+""}}return o.gamma=t,o}(1);function ee(t,e){e||(e=[]);var n,o=t?Math.min(e.length,t.length):0,i=e.slice();return function(r){for(n=0;n<o;++n)i[n]=t[n]*(1-r)+e[n]*r;return i}}function ne(t,e){var n,o=e?e.length:0,i=t?Math.min(o,t.length):0,r=new Array(i),s=new Array(o);for(n=0;n<i;++n)r[n]=ue(t[n],e[n]);for(;n<o;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=r[n](t);return s}}function oe(t,e){var n=new Date;return t=+t,e=+e,function(o){return n.setTime(t*(1-o)+e*o),n}}function ie(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function re(t,e){var n,o={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?o[n]=ue(t[n],e[n]):i[n]=e[n];return function(t){for(n in o)i[n]=o[n](t);return i}}var se=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ae=new RegExp(se.source,"g");function ce(t,e){var n,o,i,r=se.lastIndex=ae.lastIndex=0,s=-1,a=[],c=[];for(t+="",e+="";(n=se.exec(t))&&(o=ae.exec(e));)(i=o.index)>r&&(i=e.slice(r,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,c.push({i:s,x:ie(n,o)})),r=ae.lastIndex;return r<e.length&&(i=e.slice(r),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,o=0;o<e;++o)a[(n=c[o]).i]=n.x(t);return a.join("")})}function ue(t,e){var n,o,i=typeof e;return null==e||"boolean"===i?Kt(e):("number"===i?ie:"string"===i?(n=jt(e))?(e=n,te):ce:e instanceof jt?te:e instanceof Date?oe:(o=e,!ArrayBuffer.isView(o)||o instanceof DataView?Array.isArray(e)?ne:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?re:ie:ee))(t,e)}function le(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function de(t){return+t}var he=[0,1];function fe(t){return t}function ye(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function pe(t,e,n){var o=t[0],i=t[1],r=e[0],s=e[1];return i<o?(o=ye(i,o),r=n(s,r)):(o=ye(o,i),r=n(r,s)),function(t){return r(o(t))}}function ge(t,e,n){var o=Math.min(t.length,e.length)-1,i=new Array(o),r=new Array(o),s=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<o;)i[s]=ye(t[s],t[s+1]),r[s]=n(e[s],e[s+1]);return function(e){var n=gt(t,e,1,o)-1;return r[n](i[n](e))}}function me(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function xe(){var t,e,n,o,i,r,s=he,a=he,c=ue,u=fe;function l(){var t,e,n,c=Math.min(s.length,a.length);return u!==fe&&(t=s[0],e=s[c-1],t>e&&(n=t,t=e,e=n),u=function(n){return Math.max(t,Math.min(e,n))}),o=c>2?ge:pe,i=r=null,d}function d(e){return isNaN(e=+e)?n:(i||(i=o(s.map(t),a,c)))(t(u(e)))}return d.invert=function(n){return u(e((r||(r=o(a,s.map(t),ie)))(n)))},d.domain=function(t){return arguments.length?(s=Array.from(t,de),l()):s.slice()},d.range=function(t){return arguments.length?(a=Array.from(t),l()):a.slice()},d.rangeRound=function(t){return a=Array.from(t),c=le,l()},d.clamp=function(t){return arguments.length?(u=!!t||fe,l()):u!==fe},d.interpolate=function(t){return arguments.length?(c=t,l()):c},d.unknown=function(t){return arguments.length?(n=t,d):n},function(n,o){return t=n,e=o,l()}}function ke(){return xe()(fe,fe)}function ve(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}function be(t){return(t=ve(Math.abs(t)))?t[1]:NaN}var Me,we=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $e(t){if(!(e=we.exec(t)))throw new Error("invalid format: "+t);var e;return new _e({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function _e(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Te(t,e){var n=ve(t,e);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}$e.prototype=_e.prototype,_e.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Se={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Te(100*t,e)},r:Te,s:function(t,e){var n=ve(t,e);if(!n)return t+"";var o=n[0],i=n[1],r=i-(Me=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=o.length;return r===s?o:r>s?o+new Array(r-s+1).join("0"):r>0?o.slice(0,r)+"."+o.slice(r):"0."+new Array(1-r).join("0")+ve(t,Math.max(0,e+r-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Oe(t){return t}var Ce,Pe,Ae,Ie=Array.prototype.map,Ne=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function We(t){var e,n,o=void 0===t.grouping||void 0===t.thousands?Oe:(e=Ie.call(t.grouping,Number),n=t.thousands+"",function(t,o){for(var i=t.length,r=[],s=0,a=e[0],c=0;i>0&&a>0&&(c+a+1>o&&(a=Math.max(1,o-c)),r.push(t.substring(i-=a,i+a)),!((c+=a+1)>o));)a=e[s=(s+1)%e.length];return r.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Oe:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ie.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=$e(t)).fill,n=t.align,d=t.sign,h=t.symbol,f=t.zero,y=t.width,p=t.comma,g=t.precision,m=t.trim,x=t.type;"n"===x?(p=!0,x="g"):Se[x]||(void 0===g&&(g=12),m=!0,x="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var k="$"===h?i:"#"===h&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",v="$"===h?r:/[%p]/.test(x)?c:"",b=Se[x],M=/[defgprs%]/.test(x);function w(t){var i,r,c,h=k,w=v;if("c"===x)w=b(t)+w,t="";else{var $=(t=+t)<0;if(t=isNaN(t)?l:b(Math.abs(t),g),m&&(t=function(t){t:for(var e,n=t.length,o=1,i=-1;o<n;++o)switch(t[o]){case".":i=e=o;break;case"0":0===i&&(i=o),e=o;break;default:if(i>0){if(!+t[o])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),$&&0==+t&&($=!1),h=($?"("===d?d:u:"-"===d||"("===d?"":d)+h,w=("s"===x?Ne[8+Me/3]:"")+w+($&&"("===d?")":""),M)for(i=-1,r=t.length;++i<r;)if(48>(c=t.charCodeAt(i))||c>57){w=(46===c?s+t.slice(i+1):t.slice(i))+w,t=t.slice(0,i);break}}p&&!f&&(t=o(t,1/0));var _=h.length+t.length+w.length,T=_<y?new Array(y-_+1).join(e):"";switch(p&&f&&(t=o(T+t,T.length?y-w.length:1/0),T=""),n){case"<":t=h+t+w+T;break;case"=":t=h+T+t+w;break;case"^":t=T.slice(0,_=T.length>>1)+h+t+w+T.slice(_);break;default:t=T+h+t+w}return a(t)}return g=void 0===g?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),w.toString=function(){return t+""},w}return{format:d,formatPrefix:function(t,e){var n=d(((t=$e(t)).type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(be(e)/3))),i=Math.pow(10,-o),r=Ne[8+o/3];return function(t){return n(i*t)+r}}}}function Le(t,e,n,o){var i,r=function(t,e,n){var o=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),r=o/i;return r>=mt?i*=10:r>=xt?i*=5:r>=kt&&(i*=2),e<t?-i:i}(t,e,n);switch((o=$e(null==o?",f":o)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=o.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(be(e)/3)))-be(Math.abs(t)))}(r,s))||(o.precision=i),Ae(o,s);case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,be(e)-be(t))+1}(r,Math.max(Math.abs(t),Math.abs(e))))||(o.precision=i-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(i=function(t){return Math.max(0,-be(Math.abs(t)))}(r))||(o.precision=i-2*("%"===o.type))}return Pe(o)}function Ee(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var o,i,r,s,a=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((o=e<t)&&(i=t,t=e,e=i),0===(s=vt(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),r=new Array(i=Math.ceil(e-t+1));++a<i;)r[a]=(t+a)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),r=new Array(i=Math.ceil(t-e+1));++a<i;)r[a]=(t-a)/s;return o&&r.reverse(),r}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var o=e();return Le(o[0],o[o.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var o,i=e(),r=0,s=i.length-1,a=i[r],c=i[s];return c<a&&(o=a,a=c,c=o,o=r,r=s,s=o),(o=vt(a,c,n))>0?o=vt(a=Math.floor(a/o)*o,c=Math.ceil(c/o)*o,n):o<0&&(o=vt(a=Math.ceil(a*o)/o,c=Math.floor(c*o)/o,n)),o>0?(i[r]=Math.floor(a/o)*o,i[s]=Math.ceil(c/o)*o,e(i)):o<0&&(i[r]=Math.ceil(a*o)/o,i[s]=Math.floor(c*o)/o,e(i)),t},t}function Fe(){var t=ke();return t.copy=function(){return me(t,Fe())},bt.apply(t,arguments),Ee(t)}Ce=We({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Pe=Ce.format,Ae=Ce.formatPrefix;const je={};function Ye(){return E(je)}function Re(){const t=ut();return L(je,t),t}function Xe(t,e){t.set(function({scaleX:t,scaleY:e,...n}){const{scaleX:o,scaleY:i}=function(t,e,n){let o,i;if(t)o=t.copy().range(n.rangeX),o.invert=ze(o);else{const t=[n.minX-n.padding.left,n.maxX+n.padding.right];o=Fe().domain(t).range(n.rangeX)}if(e)i=e.copy().range(n.rangeY),i.invert=ze(i);else{const t=[n.minY-n.padding.top,n.maxY+n.padding.bottom];i=Fe().domain(t).range(n.rangeY)}return{scaleX:o,scaleY:i}}(t,e,n);return{scaleX:o,scaleY:i,...n}}(e))}function ze(t){return t.invert?t.invert:function(e){const[n,o]=t.range(),i=Math.min(n,o),r=Math.max(n,o),s=o<n,a=t.domain(),c=a.length-1;if(e<i+t.padding()*t.step())return a[0];if(e>r-t.padding()*t.step())return a[c];let u;return function(t){return!("paddingInner"in t)}(t)&&(u=Math.round((e-i-t.padding()*t.step())/t.step())),function(t){return"paddingInner"in t}(t)&&(u=Math.round((e-i-t.padding()*t.step())/t.step()),u>c&&(u=c)),a[s?c-u:u]}}const De={};const qe={};function He(){return E(qe)}function Ge(){const t=ut();return L(qe,t),t}function Be(t,e){t.set(e)}const Ze={};function Ve(){return E(Ze)}function Je(){const t=ut();return L(Ze,t),t}function Ke(t,e){e.transformation?t.set(function({rangeX:t,rangeY:e,transformation:n}){return{transformation:Qe[n](t,e),type:n}}(e)):t.set(void 0)}function Ue(t){if(t)throw new Error("Sections with a coordinate transformation cannot contain anything other than Marks or Layers")}const Qe={identity:function(){const t=t=>t;return t.invert=t=>t,t},polar:function(t,e){const n=Fe().domain(t).range([0,2*Math.PI]).clamp(!0),o=Fe().domain(e).range([0,1]).clamp(!0),i=Fe().domain([-1,1]).range(t),r=Fe().domain([-1,1]).range(e),s=function([t,e]){const s=function(t,e){const n=e*Math.sin(t),o=e*Math.cos(t);return[n,o]}(n(t),o(e));return[i(s[0]),r(s[1])]};return s.invert=function([t,e]){const s=[i.invert(t),r.invert(e)],[a,c]=function(t,e){const n=function(t,e){if(t>=0&&e>=0)return 1;if(t<0&&e>=0)return 2;if(t<0&&e<0)return 3;if(t>=0&&e<0)return 4}(t,e),o=Math.sqrt(e**2+t**2);let i=Math.atan(t/e);2===n&&(i+=2*Math.PI);3===n&&(i+=Math.PI);4===n&&(i+=Math.PI);return[i,o]}(...s);return[n.invert(a),o.invert(c)]},s}};const tn={};function en(){return E(tn)}function nn(){const t=ut();return L(tn,t),t}function on(t,e){e&&t.set(function(t){const e=function(t){return Object.assign({x:0,y:0,kx:1,ky:1},t)}(t),n=function(t){const{x:e,y:n,kx:o,ky:i}=t,r=t=>[t[0]*o+e,t[1]*i+n];return r.invert=t=>[(t[0]-e)/o,(t[1]-n)/i],r}(t);return{...e,transformation:n}}(e)),e||t.set(void 0)}function rn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function sn(t,e){return t(e={exports:{}},e.exports),e.exports}var an=sn((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={update:function(){"undefined"!=typeof window&&"function"==typeof window.matchMedia&&(n.hover=window.matchMedia("(hover: hover)").matches,n.none=window.matchMedia("(hover: none)").matches||window.matchMedia("(hover: on-demand)").matches,n.anyHover=window.matchMedia("(any-hover: hover)").matches,n.anyNone=window.matchMedia("(any-hover: none)").matches||window.matchMedia("(any-hover: on-demand)").matches)}};n.update(),e.default=n}));rn(an);var cn=sn((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={update:function(){"undefined"!=typeof window&&"function"==typeof window.matchMedia&&(n.fine=window.matchMedia("(pointer: fine)").matches,n.coarse=window.matchMedia("(pointer: coarse)").matches,n.none=window.matchMedia("(pointer: none)").matches,n.anyFine=window.matchMedia("(any-pointer: fine)").matches,n.anyCoarse=window.matchMedia("(any-pointer: coarse)").matches,n.anyNone=window.matchMedia("(any-pointer: none)").matches)}};n.update(),e.default=n}));rn(cn);var un=sn((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={update:function(){"undefined"!=typeof window&&(n.hasSupport="ontouchstart"in window,n.browserSupportsApi=Boolean(window.TouchEvent))}};n.update(),e.default=n}));rn(un);var ln=sn((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={update:function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}}),o=function(){};window.addEventListener("testPassiveEventSupport",o,e),window.removeEventListener("testPassiveEventSupport",o,e),n.hasSupport=t}}};n.update(),e.default=n}));rn(ln);var dn=rn(sn((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=s(an),o=s(cn),i=s(un),r=s(ln);function s(t){return t&&t.__esModule?t:{default:t}}var a={state:{detectHover:n.default,detectPointer:o.default,detectTouchEvents:i.default,detectPassiveEvents:r.default},update:function(){a.state.detectHover.update(),a.state.detectPointer.update(),a.state.detectTouchEvents.update(),a.state.detectPassiveEvents.update(),a.updateOnlyOwnProperties()},updateOnlyOwnProperties:function(){if("undefined"!=typeof window){a.passiveEvents=a.state.detectPassiveEvents.hasSupport||!1,a.hasTouch=a.state.detectTouchEvents.hasSupport||!1,a.deviceType=(t=a.hasTouch,e=a.state.detectHover.anyHover,n=a.state.detectPointer.anyFine,o=a.state,t&&(e||n)?"hybrid":t&&Object.keys(o.detectHover).filter((function(t){return"update"!==t})).every((function(t){return!1===o.detectHover[t]}))&&Object.keys(o.detectPointer).filter((function(t){return"update"!==t})).every((function(t){return!1===o.detectPointer[t]}))?window.navigator&&/android/.test(window.navigator.userAgent.toLowerCase())?"touchOnly":"hybrid":t?"touchOnly":"mouseOnly"),a.hasMouse="touchOnly"!==a.deviceType,a.primaryInput=("mouseOnly"===a.deviceType?"mouse":"touchOnly"===a.deviceType&&"touch")||a.state.detectPointer.fine&&"mouse"||a.state.detectPointer.coarse&&"touch"||"mouse";/windows/.test(window.navigator.userAgent.toLowerCase())&&/chrome/.test(window.navigator.userAgent.toLowerCase())&&function(t){return t>=59&&t<62}(parseInt(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1],10))&&a.hasTouch&&(a.deviceType="hybrid",a.hasMouse=!0,a.primaryInput="mouse")}var t,e,n,o}};a.updateOnlyOwnProperties(),e.default=a})));let hn;class fn{constructor(t,{eventName:e,nativeEventName:n,useWindow:o,preventDefault:i}){this._eventManager=t,this._eventName=e,this._nativeEventName=n,this._useWindow=o,this._preventDefault=i,this._numberOfActiveListeners=0,this._callbacks={}}setNativeEventName(t){this._nativeEventName=t}addListener(t,e){this._callbacks[t]=e,this._eventManagerHasBeenMounted()&&this._attachNativeListenerIfNecessary()}attachAllListeners(){for(const t in this._callbacks)this._attachNativeListenerIfNecessary()}removeListener(t){delete this._callbacks[t],this._eventManagerHasBeenMounted()&&this._removeNativeListenerIfNecessary()}_eventManagerHasBeenMounted(){return this._eventManager._mounted}_attachNativeListenerIfNecessary(){if(0===this._numberOfActiveListeners){hn=this._handleEvent.bind(this);const t=this._nativeEventName;this._useWindow&&window.addEventListener(t,hn),this._useWindow||this._eventManager._domNode.addEventListener(t,hn)}this._numberOfActiveListeners++}_removeNativeListenerIfNecessary(){if(this._numberOfActiveListeners--,0===this._numberOfActiveListeners){const t=this._nativeEventName;this._useWindow&&window.removeEventListener(t,hn),this._useWindow||this._eventManager._domNode.removeEventListener(t,hn)}}_handleEvent(t){this._preventDefault&&t.preventDefault();const e=this._getScreenCoordinates(t);t.eventName=this._eventName;for(const n in this._callbacks)this._callbacks[n](e,t)}_getScreenCoordinates(t){return this._eventManager._getScreenCoordinates(t)}}class yn{constructor(t,e){this._domNode=void 0,this._svgPoint=void 0,this._mounted=!1,this._trackers={},this._BROWSER_TYPE=void 0,this._managerType=e;for(const e of t)this._trackers[e.eventName]=new fn(this,e)}addRootNode(t){this._domNode=t,this._svgPoint=this._domNode.createSVGPoint(),this._BROWSER_TYPE=window.navigator.pointerEnabled?"IE11 / MSEdge":window.navigator.msPointerEnabled?"IE10 / WP8":"other",this._mounted=!0}attachEventListeners(){if(!1===this._mounted)throw new Error("root node must be added first");for(const t in this._trackers)"mouse"===this._managerType&&this._trackers[t].setNativeEventName(this._getNativeMouseEventName(t,this._BROWSER_TYPE)),"touch"===this._managerType&&this._trackers[t].setNativeEventName(this._getNativeTouchEventName(t,this._BROWSER_TYPE)),this._trackers[t].attachAllListeners()}eventTracker(t){return this._trackers[t]}}var pn=t=>t.charAt(0).toUpperCase()+t.slice(1);class gn extends yn{constructor(){super(kn,"mouse")}_getNativeMouseEventName(t,e){if("click"===t)return"click";if("wheel"===t)return"wheel";if("IE11 / MSEdge"===e){return"pointer"+vn(t)}if("IE10 / WP8"===e){const e=vn(t);return"MSPointer"+pn(e)}return"other"===e?t:void 0}_getScreenCoordinates(t){return this._svgPoint.x=t.clientX,this._svgPoint.y=t.clientY,this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())}}const mn=["mousemove","mouseup"],xn=["mousedown"],kn=["mousedown","mouseup","mousemove","mouseout","click","wheel"].map(t=>({eventName:t,nativeEventName:void 0,useWindow:mn.includes(t),preventDefault:xn.includes(t)})),vn=t=>t.slice(5,t.length);class bn extends yn{constructor(){super(Mn,"touch")}_getNativeTouchEventName(t,e){if("IE11 / MSEdge"===e){return"pointer"+wn(t)}if("IE10 / WP8"===e){const e=wn(t);return"MSPointer"+pn(e)}if("other"===e)return t}_getScreenCoordinates(t){const e=function(t){return t.touches}(t);return 1===e.length?this._getScreenCoordinatesSingle(e[0]):e.length>1?this._getScreenCoordinatesMulti(e):void 0}_getScreenCoordinatesSingle(t){return this._svgPoint.x=t.clientX,this._svgPoint.y=t.clientY,this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())}_getScreenCoordinatesMulti(t){const e=[];for(const n of t)e.push(this._getScreenCoordinatesSingle(n));return e}}const Mn=["touchstart","touchend","touchmove","touchcancel"].map(t=>({eventName:t,nativeEventName:void 0,useWindow:!1,preventDefault:!0})),wn=t=>t.slice(5,t.length);class $n{constructor(){dn.hasMouse&&(this._mouseEventManager=new gn),dn.hasTouch&&(this._touchEventManager=new bn)}addRootNode(t){this._forEachManager(e=>{e.addRootNode(t)})}attachEventListeners(){this._forEachManager(t=>{t.attachEventListeners()})}mouse(){return this._mouseEventManager}touch(){return this._touchEventManager}_forEachManager(t){this._mouseEventManager&&t(this._mouseEventManager),this._touchEventManager&&t(this._touchEventManager)}}class _n{constructor(){this._id=void 0,this._eventManager=void 0,this._section=void 0,this._coordinateTransformation=void 0,this._zoom=void 0,this._markInteractionInterface=void 0,this._sectionInteractionInterface=void 0}setId(t){this._id=t}linkEventManager(t){this._eventManager=t}loadSection(t){this._section=t}loadCoordinateTransformation(t){this._coordinateTransformation=t}loadZoom(t){this._zoom=t}marks(){return this._markInteractionInterface}section(){return this._sectionInteractionInterface}}class Tn{constructor(t,e){this._interactionManager=t,this._handlers={};for(const t in e)this._handlers[t]=new e[t](this._interactionManager)}_getHandler(t){const e=Sn(t);return this._handlers[e]}}const Sn=t=>pn(t)+"Handler";function On(t){const e=t.attributes,n=Pn(e);return n.attributes=e,n.markType="Point",n.markId=t.markId,n}function Cn({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=An(t,r),a=Pn(s);a.key=r,a.index=i,a.attributes=s,a.markType="Point",a.layerId=n,o.push(a)}return o}function Pn(t){const e=t.pixelGeometry.coordinates[0],n=t.pixelGeometry.coordinates[1];return{minX:e-t.radius,maxX:e+t.radius,minY:n-t.radius,maxY:n+t.radius}}function An(t,e){return{pixelGeometry:t.pixelGeometryObject[e],radius:t.radiusObject[e]}}function In(){return new Nn}function Nn(){this.reset()}Nn.prototype={constructor:Nn,reset:function(){this.s=this.t=0},add:function(t){Ln(Wn,t,this.t),Ln(this,Wn.s,this.s),this.s?this.t+=Wn.t:this.s=Wn.t},valueOf:function(){return this.s}};var Wn=new Nn;function Ln(t,e,n){var o=t.s=e+n,i=o-e,r=o-i;t.t=e-r+(n-i)}var En=2*Math.PI,Fn=Math.abs,jn=Math.sqrt;function Yn(){}function Rn(t,e){t&&zn.hasOwnProperty(t.type)&&zn[t.type](t,e)}var Xn={Feature:function(t,e){Rn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,o=-1,i=n.length;++o<i;)Rn(n[o].geometry,e)}},zn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)t=n[o],e.point(t[0],t[1],t[2])},LineString:function(t,e){Dn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)Dn(n[o],e,0)},Polygon:function(t,e){qn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)qn(n[o],e)},GeometryCollection:function(t,e){for(var n=t.geometries,o=-1,i=n.length;++o<i;)Rn(n[o],e)}};function Dn(t,e,n){var o,i=-1,r=t.length-n;for(e.lineStart();++i<r;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function qn(t,e){var n=-1,o=t.length;for(e.polygonStart();++n<o;)Dn(t[n],e,1);e.polygonEnd()}function Hn(t,e){t&&Xn.hasOwnProperty(t.type)?Xn[t.type](t,e):Rn(t,e)}function Gn(t){return t}var Bn,Zn,Vn,Jn,Kn=In(),Un=In(),Qn={point:Yn,lineStart:Yn,lineEnd:Yn,polygonStart:function(){Qn.lineStart=to,Qn.lineEnd=oo},polygonEnd:function(){Qn.lineStart=Qn.lineEnd=Qn.point=Yn,Kn.add(Fn(Un)),Un.reset()},result:function(){var t=Kn/2;return Kn.reset(),t}};function to(){Qn.point=eo}function eo(t,e){Qn.point=no,Bn=Vn=t,Zn=Jn=e}function no(t,e){Un.add(Jn*t-Vn*e),Vn=t,Jn=e}function oo(){no(Bn,Zn)}var io=1/0,ro=io,so=-io,ao=so,co={point:function(t,e){t<io&&(io=t);t>so&&(so=t);e<ro&&(ro=e);e>ao&&(ao=e)},lineStart:Yn,lineEnd:Yn,polygonStart:Yn,polygonEnd:Yn,result:function(){var t=[[io,ro],[so,ao]];return so=ao=-(ro=io=1/0),t}};var uo,lo,ho,fo,yo=0,po=0,go=0,mo=0,xo=0,ko=0,vo=0,bo=0,Mo=0,wo={point:$o,lineStart:_o,lineEnd:Oo,polygonStart:function(){wo.lineStart=Co,wo.lineEnd=Po},polygonEnd:function(){wo.point=$o,wo.lineStart=_o,wo.lineEnd=Oo},result:function(){var t=Mo?[vo/Mo,bo/Mo]:ko?[mo/ko,xo/ko]:go?[yo/go,po/go]:[NaN,NaN];return yo=po=go=mo=xo=ko=vo=bo=Mo=0,t}};function $o(t,e){yo+=t,po+=e,++go}function _o(){wo.point=To}function To(t,e){wo.point=So,$o(ho=t,fo=e)}function So(t,e){var n=t-ho,o=e-fo,i=jn(n*n+o*o);mo+=i*(ho+t)/2,xo+=i*(fo+e)/2,ko+=i,$o(ho=t,fo=e)}function Oo(){wo.point=$o}function Co(){wo.point=Ao}function Po(){Io(uo,lo)}function Ao(t,e){wo.point=Io,$o(uo=ho=t,lo=fo=e)}function Io(t,e){var n=t-ho,o=e-fo,i=jn(n*n+o*o);mo+=i*(ho+t)/2,xo+=i*(fo+e)/2,ko+=i,vo+=(i=fo*t-ho*e)*(ho+t),bo+=i*(fo+e),Mo+=3*i,$o(ho=t,fo=e)}function No(t){this._context=t}No.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,En)}},result:Yn};var Wo,Lo,Eo,Fo,jo,Yo=In(),Ro={point:Yn,lineStart:function(){Ro.point=Xo},lineEnd:function(){Wo&&zo(Lo,Eo),Ro.point=Yn},polygonStart:function(){Wo=!0},polygonEnd:function(){Wo=null},result:function(){var t=+Yo;return Yo.reset(),t}};function Xo(t,e){Ro.point=zo,Lo=Fo=t,Eo=jo=e}function zo(t,e){Fo-=t,jo-=e,Yo.add(jn(Fo*Fo+jo*jo)),Fo=t,jo=e}function Do(){this._string=[]}function qo(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ho(t,e){var n,o,i=4.5;function r(t){return t&&("function"==typeof i&&o.pointRadius(+i.apply(this,arguments)),Hn(t,n(o))),o.result()}return r.area=function(t){return Hn(t,n(Qn)),Qn.result()},r.measure=function(t){return Hn(t,n(Ro)),Ro.result()},r.bounds=function(t){return Hn(t,n(co)),co.result()},r.centroid=function(t){return Hn(t,n(wo)),wo.result()},r.projection=function(e){return arguments.length?(n=null==e?(t=null,Gn):(t=e).stream,r):t},r.context=function(t){return arguments.length?(o=null==t?(e=null,new Do):new No(e=t),"function"!=typeof i&&o.pointRadius(i),r):e},r.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(o.pointRadius(+t),+t),r):i},r.projection(t).context(e)}function Go(t){return null==t||t.constructor===Number&&!isFinite(t)}function Bo(t){return void 0!==t}function Zo(t){return void 0===t}function Vo(t){const e=Jo.bounds(t);return{x:[e[0][0],e[1][0]],y:[e[0][1],e[1][1]]}}Do.prototype={_radius:4.5,_circle:qo(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=qo(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};const Jo=Ho();function Ko(t){return t.constructor===Array}function Uo(t){return t.constructor===Object&&"Polygon"===t.type}function Qo(t){return t.constructor===Object&&"MultiPolygon"===t.type}function ti(t){if(Ko(t))return ei(t);if(Uo(t))return ni(t);if(Qo(t))return function(t){let e=0;for(let n=0;n<t.coordinates.length;n++)e+=ni(t.coordinates[n]);return e}(t);throw new Error("Invalid input")}function ei(t){return Math.abs(function(t){let e=0;for(let n=0,o=t.length;n<o;n++){const o=t[n][0],i=t[n===t.length-1?0:n+1][1],r=t[n===t.length-1?0:n+1][0],s=t[n][1];e+=o*i*.5,e-=r*s*.5}return e}(t))}function ni(t){let e=ei(t.coordinates[0]);for(let n=1;n<t.coordinates.length;n++){e-=ei(t.coordinates[n])}return e}function oi(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function ii(t){let e=0;for(let n=0;n<t.length-1;n++){e+=oi(t[n],t[n+1])}return e}function ri(t){return Ko(t)?si(t):Uo(t)?si(t.coordinates[0]):Qo(t)?function(t){let e=0,n=0,o=0;for(let i=0;i<t.coordinates.length;i++){const r=t.coordinates[i],s=si(r[0]),a=ti(r[0]);e+=s[0]*a,n+=s[1]*a,o+=a}return[e/o,n/o]}(t):function(t){return t.constructor===Object&&"LineString"===t.type}(t)?si(t.coordinates):function(t){return t.constructor===Object&&"MultiLineString"===t.type}(t)?function(t){let e=0,n=0,o=0;for(let i=0;i<t.coordinates.length;i++){const r=t.coordinates[i],s=si(r),a=ii(r);e+=s[0]*a,n+=s[1]*a,o+=a}return[e/o,n/o]}(t):void 0}function si(t){const e=t.length,n=t[0];let o,i,r,s=0,a=0,c=0;for(let u=0,l=e-1;u<e;l=u++)o=t[u],i=t[l],r=(o[0]-n[0])*(i[1]-n[1])-(i[0]-n[0])*(o[1]-n[1]),s+=r,a+=(o[0]+i[0]-2*n[0])*r,c+=(o[1]+i[1]-2*n[1])*r;return r=3*s,[a/r+n[0],c/r+n[1]]}function ai(t,e,n){return function(t,e){const n=function(t,e){const n=t[0],o=t[1],i=e[0][0],r=e[0][1],s=e[1][0],a=e[1][1],c=s-i,u=a-r,l=(n-i)*c+(o-r)*u,d=c*c+u*u;let h,f,y=-1;0!==d&&(y=l/d);y<0?(h=i,f=r):y>1?(h=s,f=a):(h=i+y*c,f=r+y*u);return[h,f]}(t,e);return oi(t,n)}(t,e)<n/2}var ci=function(t,e,n){var o=t*e,i=ui*t,r=i-(i-t),s=t-r,a=ui*e,c=a-(a-e),u=e-c,l=s*u-(o-r*c-s*c-r*u);if(n)return n[0]=l,n[1]=o,n;return[l,o]},ui=+(Math.pow(2,27)+1);var li=function(t,e){var n=0|t.length,o=0|e.length;if(1===n&&1===o)return function(t,e){var n=t+e,o=n-t,i=t-(n-o)+(e-o);if(i)return[i,n];return[n]}(t[0],e[0]);var i,r,s=new Array(n+o),a=0,c=0,u=0,l=Math.abs,d=t[c],h=l(d),f=e[u],y=l(f);h<y?(r=d,(c+=1)<n&&(d=t[c],h=l(d))):(r=f,(u+=1)<o&&(f=e[u],y=l(f)));c<n&&h<y||u>=o?(i=d,(c+=1)<n&&(d=t[c],h=l(d))):(i=f,(u+=1)<o&&(f=e[u],y=l(f)));var p,g,m=i+r,x=m-i,k=r-x,v=k,b=m;for(;c<n&&u<o;)h<y?(i=d,(c+=1)<n&&(d=t[c],h=l(d))):(i=f,(u+=1)<o&&(f=e[u],y=l(f))),(k=(r=v)-(x=(m=i+r)-i))&&(s[a++]=k),v=b-((p=b+m)-(g=p-b))+(m-g),b=p;for(;c<n;)(k=(r=v)-(x=(m=(i=d)+r)-i))&&(s[a++]=k),v=b-((p=b+m)-(g=p-b))+(m-g),b=p,(c+=1)<n&&(d=t[c]);for(;u<o;)(k=(r=v)-(x=(m=(i=f)+r)-i))&&(s[a++]=k),v=b-((p=b+m)-(g=p-b))+(m-g),b=p,(u+=1)<o&&(f=e[u]);v&&(s[a++]=v);b&&(s[a++]=b);a||(s[a++]=0);return s.length=a,s};var di=function(t,e,n){var o=t+e,i=o-t,r=e-i,s=t-(o-i);if(n)return n[0]=s+r,n[1]=o,n;return[s+r,o]};var hi=function(t,e){var n=t.length;if(1===n){var o=ci(t[0],e);return o[0]?o:[o[1]]}var i=new Array(2*n),r=[.1,.1],s=[.1,.1],a=0;ci(t[0],e,r),r[0]&&(i[a++]=r[0]);for(var c=1;c<n;++c){ci(t[c],e,s);var u=r[1];di(u,s[0],r),r[0]&&(i[a++]=r[0]);var l=s[1],d=r[1],h=l+d,f=d-(h-l);r[1]=h,f&&(i[a++]=f)}r[1]&&(i[a++]=r[1]);0===a&&(i[a++]=0);return i.length=a,i};var fi=function(t,e){var n=0|t.length,o=0|e.length;if(1===n&&1===o)return function(t,e){var n=t+e,o=n-t,i=t-(n-o)+(e-o);if(i)return[i,n];return[n]}(t[0],-e[0]);var i,r,s=new Array(n+o),a=0,c=0,u=0,l=Math.abs,d=t[c],h=l(d),f=-e[u],y=l(f);h<y?(r=d,(c+=1)<n&&(d=t[c],h=l(d))):(r=f,(u+=1)<o&&(f=-e[u],y=l(f)));c<n&&h<y||u>=o?(i=d,(c+=1)<n&&(d=t[c],h=l(d))):(i=f,(u+=1)<o&&(f=-e[u],y=l(f)));var p,g,m=i+r,x=m-i,k=r-x,v=k,b=m;for(;c<n&&u<o;)h<y?(i=d,(c+=1)<n&&(d=t[c],h=l(d))):(i=f,(u+=1)<o&&(f=-e[u],y=l(f))),(k=(r=v)-(x=(m=i+r)-i))&&(s[a++]=k),v=b-((p=b+m)-(g=p-b))+(m-g),b=p;for(;c<n;)(k=(r=v)-(x=(m=(i=d)+r)-i))&&(s[a++]=k),v=b-((p=b+m)-(g=p-b))+(m-g),b=p,(c+=1)<n&&(d=t[c]);for(;u<o;)(k=(r=v)-(x=(m=(i=f)+r)-i))&&(s[a++]=k),v=b-((p=b+m)-(g=p-b))+(m-g),b=p,(u+=1)<o&&(f=-e[u]);v&&(s[a++]=v);b&&(s[a++]=b);a||(s[a++]=0);return s.length=a,s};var yi=sn((function(t){function e(t,e){for(var n=new Array(t.length-1),o=1;o<t.length;++o)for(var i=n[o-1]=new Array(t.length-1),r=0,s=0;r<t.length;++r)r!==e&&(i[s++]=t[o][r]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function o(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],r=0;r<t.length;++r)i.push(["scale(",n(o(e(t,r))),",",(s=r,1&s?"-":""),t[0][r],")"].join(""));return i;var s}function i(t){for(var i=[],r=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var o=0;o<t;++o)e[n][o]=["m",o,"[",t-n-1,"]"].join("")}return e}(t),a=[],c=0;c<t;++c)0==(1&c)?i.push.apply(i,o(e(s,c))):r.push.apply(r,o(e(s,c))),a.push("m"+c);var u=n(i),l=n(r),d="orientation"+t+"Exact",h=["function ",d,"(",a.join(),"){var p=",u,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",d].join("");return new Function("sum","prod","scale","sub",h)(li,ci,hi,fi)}var r=i(3),s=i(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var o,i=(t[1]-n[1])*(e[0]-n[0]),s=(t[0]-n[0])*(e[1]-n[1]),a=i-s;if(i>0){if(s<=0)return a;o=i+s}else{if(!(i<0))return a;if(s>=0)return a;o=-(i+s)}var c=33306690738754716e-32*o;return a>=c||a<=-c?a:r(t,e,n)},function(t,e,n,o){var i=t[0]-o[0],r=e[0]-o[0],a=n[0]-o[0],c=t[1]-o[1],u=e[1]-o[1],l=n[1]-o[1],d=t[2]-o[2],h=e[2]-o[2],f=n[2]-o[2],y=r*l,p=a*u,g=a*c,m=i*l,x=i*u,k=r*c,v=d*(y-p)+h*(g-m)+f*(x-k),b=7771561172376103e-31*((Math.abs(y)+Math.abs(p))*Math.abs(d)+(Math.abs(g)+Math.abs(m))*Math.abs(h)+(Math.abs(x)+Math.abs(k))*Math.abs(f));return v>b||-v>b?v:s(t,e,n,o)}];function c(t){var e=a[t.length];return e||(e=a[t.length]=i(t.length)),e.apply(void 0,t)}!function(){for(;a.length<=5;)a.push(i(a.length));for(var e=[],n=["slow"],o=0;o<=5;++o)e.push("a"+o),n.push("o"+o);var r=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(o=2;o<=5;++o)r.push("case ",o,":return o",o,"(",e.slice(0,o).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(r.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[c].concat(a)),o=0;o<=5;++o)t.exports[o]=a[o]}()})),pi=function(t,e){for(var n=e[0],o=e[1],i=t.length,r=1,s=i,a=0,c=i-1;a<s;c=a++){var u=t[a],l=t[c],d=u[1],h=l[1];if(h<d){if(h<o&&o<d){if(0===(p=yi(u,l,e)))return 0;r^=0<p|0}else if(o===d){var f=(y=t[(a+1)%i])[1];if(d<f){if(0===(p=yi(u,l,e)))return 0;r^=0<p|0}}}else if(d<h){if(d<o&&o<h){if(0===(p=yi(u,l,e)))return 0;r^=p<0|0}else if(o===d){var y=t[(a+1)%i];if((f=y[1])<d){var p;if(0===(p=yi(u,l,e)))return 0;r^=p<0|0}}}else if(o===d){var g=Math.min(u[0],l[0]),m=Math.max(u[0],l[0]);if(0===a){for(;c>0;){var x=(c+i-1)%i;if((b=t[x])[1]!==o)break;var k=b[0];g=Math.min(g,k),m=Math.max(m,k),c=x}if(0===c)return g<=n&&n<=m?0:1;s=c+1}for(var v=t[(c+i-1)%i][1];a+1<s;){var b;if((b=t[a+1])[1]!==o)break;k=b[0];g=Math.min(g,k),m=Math.max(m,k),a+=1}if(g<=n&&n<=m)return 0;var M=t[(a+1)%i][1];n<g&&v<o!=M<o&&(r^=1)}}return 2*r-1};function gi(t,e){switch(e.type){case"Polygon":return function(t,e){const n=e.coordinates;return mi(t,n)}(t,e);case"MultiPolygon":return function(t,e){const n=e.coordinates;for(let e=0;e<n.length;e++){const o=n[e];if(mi(t,o))return!0}return!1}(t,e)}}function mi(t,e){if(!xi(t,e[0]))return!1;for(let n=1;n<e.length;n++){if(xi(t,e[n]))return!1}return!0}function xi(t,e){return-1===pi(e,t)}const ki=new Error("Invalid input");function vi(t){if("coordinates"in t)return"geojson";if("x"in t&&"y"in t)return"Point"!==t.type&&function(t,e){if(void 0!==t&&void 0!==e&&t.constructor===Array&&e.constructor===Array&&t.length===e.length&&t.length>1)return;throw ki}(t.x,t.y),"xy";throw ki}function bi([t,e],n){const o=10**n;return[Math.round(t*o)/o,Math.round(e*o)/o]}function Mi(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function wi(t,e,n){return!n.simplify||t.length<3?function(t,e){const n=[];for(let o=0;o<t.length;o++)n.push(e(t[o]));return n}(t,e):!0===n.simplify?function(t,e,n=1){const o=[e(t[0])];let i,r=o[0];for(let s=1;s<t.length-1;s++){i=e(t[s]),Mi(r,i)>=n&&(o.push(i),r=i)}const s=e(t[t.length-1]);return o.push(s),o}(t,e,n.simplificationTreshold):void 0}function $i(t,e,n){const o=[];for(let i=0;i<t.length;i++)o.push(wi(t[i],e,n));return o}function _i({x:t,y:e},n,o){return!o.simplify||t.length<3?function(t,e,n){const o=[];for(let i=0;i<t.length;i++)o.push(n([t[i],e[i]]));return o}(t,e,n):!0===o.simplify?function(t,e,n,o=1){const i=[n([t[0],e[0]])];let r,s=i[0];for(let a=1;a<t.length-1;a++){r=n([t[a],e[a]]),Mi(s,r)>=o&&(i.push(r),s=r)}const a=t.length-1,c=n([t[a],e[a]]);return i.push(c),i}(t,e,n,o.simplificationTreshold):void 0}const Ti={transformPoint:function(t,e){const n=vi(t);if("geojson"===n)return{type:"Point",coordinates:e(t.coordinates)};if("xy"===n)return{type:"Point",coordinates:e([t.x,t.y])}},transformMultiPoint:function(t,e){const n=vi(t);if("geojson"===n)return{type:"MultiPoint",coordinates:wi(t.coordinates,e,{})};if("xy"===n)return{type:"MultiPoint",coordinates:_i(t,e,{})}},transformLineString:function(t,e,n){const o=vi(t);if("geojson"===o)return{type:"LineString",coordinates:wi(t.coordinates,e,n)};if("xy"===o)return{type:"LineString",coordinates:_i(t,e,n)}},transformMultiLineString:function(t,e,n){const o=vi(t);if("geojson"===o)return{type:"MultiLineString",coordinates:$i(t.coordinates,e,n)};if("xy"===o)return{type:"MultiLineString",coordinates:[_i(t,e,n)]}},transformPolygon:function(t,e,n){const o=vi(t);if("geojson"===o)return{type:"Polygon",coordinates:$i(t.coordinates,e,n)};if("xy"===o)return{type:"Polygon",coordinates:[_i(t,e,n)]}},transformMultiPolygon:function(t,e,n){const o=vi(t);if("geojson"===o){const o=t.coordinates,i=[];for(let t=0;t<o.length;t++)i.push($i(o[t],e,n));return{type:"MultiPolygon",coordinates:i}}if("xy"===o)return{type:"MultiPolygon",coordinates:[[_i(t,e,n)]]}}};function Si(t,e,n={}){const o="transform"+t.type,i=n.decimals?t=>bi(e(t),n.decimals):e;return Ti[o](t,i,n)}function Oi({scaleX:t,scaleY:e}){const n=t.copy().range([0,2*Math.PI]),o=e.copy().range([0,1]);return([t,e])=>[n(t),o(e)]}function Ci(t,e,n,o,{interpolationTreshold:i=1}){const r=n(t),s=n(e),a=function({rangeX:t,rangeY:e,zoomIdentity:n}){const o=n?n.kx:1,i=n?n.ky:1,r=Math.abs(Math.abs(t[1]-t[0])*o),s=Math.abs(Math.abs(e[1]-e[0])*i);return Math.max(r,s)}(o);if(function(t,e,n){return Math.abs(t[0]-e[0])*n<1}(r,s,a))return 0;const c=function({a:t,b:e,interval:n}){if(0===t&&0===e)return 0;const[o,i]=n;if(0===t&&1===e)return i-o;const r=t**2,s=e**2;return(r*Math.asinh((t*i+e)/t)+(t*i+e)*Math.sqrt(r*i**2+2*t*e*i+s+r)-r*Math.asinh((t*o+e)/t)+(-t*o-e)*Math.sqrt(r*o**2+2*t*e*o+s+r))/(2*t)}(function(t,e){const n=t[0]<e[0]?[t,e]:[e,t],[[o,i],[r,s]]=n,a=(s-i)/(r-o);return{a:a,b:i-o*a,interval:[o,r]}}(r,s))*a/i;return Math.floor(c)}function Pi(t,e,n,o,i,r){const s=function(t,e){const n=e[0]-t[0],o=e[1]-t[1];return e=>[t[0]+e*n,t[1]+e*o]}(o(e),o(n));for(let e=0;e<r;e++){const n=(e+1)/(r+1);t.push(i(s(n)))}}function Ai(t,e,n,o){if(!o.simplify||t.length<3)return function(t,e,n,o){const i=[],r=Oi(e),{scaleTransformation:s,postScaleTransformation:a}=n;for(let n=0;n<t.length-1;n++){const c=t[n],u=t[n+1];i.push(a(s(c)));const l=Ci(c,u,r,e,o);l>0&&Pi(i,c,u,s,a,l)}const c=t[t.length-1];return i.push(a(s(c))),i}(t,e,n,o);o.simplify}function Ii(t,e,n,o){const i=[];for(let r=0;r<t.length;r++)i.push(Ai(t[r],e,n,o));return i}function Ni({x:t,y:e},n,o,i){if(!i.simplify||t.length<3)return function(t,e,n,o,i){const r=[],s=Oi(n),{scaleTransformation:a,postScaleTransformation:c}=o;for(let o=0;o<t.length-1;o++){const u=[t[o],e[o]],l=[t[o+1],e[o+1]];r.push(c(a(u)));const d=Ci(u,l,s,n,i);d>0&&Pi(r,u,l,a,c,d)}const u=t.length-1,l=[t[u],e[u]];return r.push(c(a(l))),r}(t,e,n,o,i);i.simplify}const Wi={interpolateLineString:function(t,e,n,o){const i=vi(t);if("geojson"===i)return{type:"LineString",coordinates:Ai(t.coordinates,e,n,o)};if("xy"===i)return{type:"LineString",coordinates:Ni(t,e,n,o)}},interpolateMultiLineString:function(t,e,n,o){const i=vi(t);if("geojson"===i)return{type:"MultiLineString",coordinates:Ii(t.coordinates,e,n,o)};if("xy"===i)return{type:"MultiLineString",coordinates:[Ni(t,e,n,o)]}},interpolatePolygon:function(t,e,n,o){const i=vi(t);if("geojson"===i)return{type:"Polygon",coordinates:Ii(t.coordinates,e,n,o)};if("xy"===i)return{type:"Polygon",coordinates:[Ni(t,e,n,o)]}},interpolateMultiPolygon:function(t,e,n,o){const i=vi(t);if("geojson"===i){const i=t.coordinates,r=[];for(let t=0;t<i.length;t++)r.push(Ii(i[t],e,n,o));return{type:"MultiPolygon",coordinates:r}}if("xy"===i)return{type:"MultiPolygon",coordinates:[[Ni(t,e,n,o)]]}}};function Li(t,e,n={}){const o="interpolate"+t.type,i={scaleTransformation:function({scaleX:t,scaleY:e}){return([n,o])=>[t(n),e(o)]}(e),postScaleTransformation:function({coordinateTransformation:t,zoomIdentity:e},n){if(e){if(void 0!==n)return o=>bi(e.transformation(t(o)),n);if(void 0===n)return n=>e.transformation(t(n))}if(!e){if(void 0!==n)return e=>bi(t(e),n);if(void 0===n)return t}}(e,n.decimals)};return Wi[o](t,e,i,n)}var Ei=ji,Fi=ji;function ji(t,e,n){n=n||2;var o,i,r,s,a,c,u,l=e&&e.length,d=l?e[0]*n:t.length,h=Yi(t,0,d,n,!0),f=[];if(!h||h.next===h.prev)return f;if(l&&(h=function(t,e,n,o){var i,r,s,a,c,u=[];for(i=0,r=e.length;i<r;i++)s=e[i]*o,a=i<r-1?e[i+1]*o:t.length,(c=Yi(t,s,a,o,!1))===c.next&&(c.steiner=!0),u.push(Ji(c));for(u.sort(Gi),i=0;i<u.length;i++)Bi(u[i],n),n=Ri(n,n.next);return n}(t,e,h,n)),t.length>80*n){o=r=t[0],i=s=t[1];for(var y=n;y<d;y+=n)(a=t[y])<o&&(o=a),(c=t[y+1])<i&&(i=c),a>r&&(r=a),c>s&&(s=c);u=0!==(u=Math.max(r-o,s-i))?1/u:0}return Xi(h,f,n,o,i,u),f}function Yi(t,e,n,o,i){var r,s;if(i===ur(t,e,n,o)>0)for(r=e;r<n;r+=o)s=sr(r,t[r],t[r+1],s);else for(r=n-o;r>=e;r-=o)s=sr(r,t[r],t[r+1],s);return s&&tr(s,s.next)&&(ar(s),s=s.next),s}function Ri(t,e){if(!t)return t;e||(e=t);var n,o=t;do{if(n=!1,o.steiner||!tr(o,o.next)&&0!==Qi(o.prev,o,o.next))o=o.next;else{if(ar(o),(o=e=o.prev)===o.next)break;n=!0}}while(n||o!==e);return e}function Xi(t,e,n,o,i,r,s){if(t){!s&&r&&function(t,e,n,o){var i=t;do{null===i.z&&(i.z=Vi(i.x,i.y,e,n,o)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,o,i,r,s,a,c,u=1;do{for(n=t,t=null,r=null,s=0;n;){for(s++,o=n,a=0,e=0;e<u&&(a++,o=o.nextZ);e++);for(c=u;a>0||c>0&&o;)0!==a&&(0===c||!o||n.z<=o.z)?(i=n,n=n.nextZ,a--):(i=o,o=o.nextZ,c--),r?r.nextZ=i:t=i,i.prevZ=r,r=i;n=o}r.nextZ=null,u*=2}while(s>1)}(i)}(t,o,i,r);for(var a,c,u=t;t.prev!==t.next;)if(a=t.prev,c=t.next,r?Di(t,o,i,r):zi(t))e.push(a.i/n),e.push(t.i/n),e.push(c.i/n),ar(t),t=c.next,u=c.next;else if((t=c)===u){s?1===s?Xi(t=qi(Ri(t),e,n),e,n,o,i,r,2):2===s&&Hi(t,e,n,o,i,r):Xi(Ri(t),e,n,o,i,r,1);break}}}function zi(t){var e=t.prev,n=t,o=t.next;if(Qi(e,n,o)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Ki(e.x,e.y,n.x,n.y,o.x,o.y,i.x,i.y)&&Qi(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Di(t,e,n,o){var i=t.prev,r=t,s=t.next;if(Qi(i,r,s)>=0)return!1;for(var a=i.x<r.x?i.x<s.x?i.x:s.x:r.x<s.x?r.x:s.x,c=i.y<r.y?i.y<s.y?i.y:s.y:r.y<s.y?r.y:s.y,u=i.x>r.x?i.x>s.x?i.x:s.x:r.x>s.x?r.x:s.x,l=i.y>r.y?i.y>s.y?i.y:s.y:r.y>s.y?r.y:s.y,d=Vi(a,c,e,n,o),h=Vi(u,l,e,n,o),f=t.prevZ,y=t.nextZ;f&&f.z>=d&&y&&y.z<=h;){if(f!==t.prev&&f!==t.next&&Ki(i.x,i.y,r.x,r.y,s.x,s.y,f.x,f.y)&&Qi(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,y!==t.prev&&y!==t.next&&Ki(i.x,i.y,r.x,r.y,s.x,s.y,y.x,y.y)&&Qi(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;f&&f.z>=d;){if(f!==t.prev&&f!==t.next&&Ki(i.x,i.y,r.x,r.y,s.x,s.y,f.x,f.y)&&Qi(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;y&&y.z<=h;){if(y!==t.prev&&y!==t.next&&Ki(i.x,i.y,r.x,r.y,s.x,s.y,y.x,y.y)&&Qi(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function qi(t,e,n){var o=t;do{var i=o.prev,r=o.next.next;!tr(i,r)&&er(i,o,o.next,r)&&ir(i,r)&&ir(r,i)&&(e.push(i.i/n),e.push(o.i/n),e.push(r.i/n),ar(o),ar(o.next),o=t=r),o=o.next}while(o!==t);return Ri(o)}function Hi(t,e,n,o,i,r){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Ui(s,a)){var c=rr(s,a);return s=Ri(s,s.next),c=Ri(c,c.next),Xi(s,e,n,o,i,r),void Xi(c,e,n,o,i,r)}a=a.next}s=s.next}while(s!==t)}function Gi(t,e){return t.x-e.x}function Bi(t,e){if(e=function(t,e){var n,o=e,i=t.x,r=t.y,s=-1/0;do{if(r<=o.y&&r>=o.next.y&&o.next.y!==o.y){var a=o.x+(r-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(a<=i&&a>s){if(s=a,a===i){if(r===o.y)return o;if(r===o.next.y)return o.next}n=o.x<o.next.x?o:o.next}}o=o.next}while(o!==e);if(!n)return null;if(i===s)return n;var c,u=n,l=n.x,d=n.y,h=1/0;o=n;do{i>=o.x&&o.x>=l&&i!==o.x&&Ki(r<d?i:s,r,l,d,r<d?s:i,r,o.x,o.y)&&(c=Math.abs(r-o.y)/(i-o.x),ir(o,t)&&(c<h||c===h&&(o.x>n.x||o.x===n.x&&Zi(n,o)))&&(n=o,h=c)),o=o.next}while(o!==u);return n}(t,e)){var n=rr(e,t);Ri(e,e.next),Ri(n,n.next)}}function Zi(t,e){return Qi(t.prev,t,e.prev)<0&&Qi(e.next,t,t.next)<0}function Vi(t,e,n,o,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-o)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ji(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Ki(t,e,n,o,i,r,s,a){return(i-s)*(e-a)-(t-s)*(r-a)>=0&&(t-s)*(o-a)-(n-s)*(e-a)>=0&&(n-s)*(r-a)-(i-s)*(o-a)>=0}function Ui(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&er(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(ir(t,e)&&ir(e,t)&&function(t,e){var n=t,o=!1,i=(t.x+e.x)/2,r=(t.y+e.y)/2;do{n.y>r!=n.next.y>r&&n.next.y!==n.y&&i<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(o=!o),n=n.next}while(n!==t);return o}(t,e)&&(Qi(t.prev,t,e.prev)||Qi(t,e.prev,e))||tr(t,e)&&Qi(t.prev,t,t.next)>0&&Qi(e.prev,e,e.next)>0)}function Qi(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function tr(t,e){return t.x===e.x&&t.y===e.y}function er(t,e,n,o){var i=or(Qi(t,e,n)),r=or(Qi(t,e,o)),s=or(Qi(n,o,t)),a=or(Qi(n,o,e));return i!==r&&s!==a||(!(0!==i||!nr(t,n,e))||(!(0!==r||!nr(t,o,e))||(!(0!==s||!nr(n,t,o))||!(0!==a||!nr(n,e,o)))))}function nr(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function or(t){return t>0?1:t<0?-1:0}function ir(t,e){return Qi(t.prev,t,t.next)<0?Qi(t,e,t.next)>=0&&Qi(t,t.prev,e)>=0:Qi(t,e,t.prev)<0||Qi(t,t.next,e)<0}function rr(t,e){var n=new cr(t.i,t.x,t.y),o=new cr(e.i,e.x,e.y),i=t.next,r=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,o.next=n,n.prev=o,r.next=o,o.prev=r,o}function sr(t,e,n,o){var i=new cr(t,e,n);return o?(i.next=o.next,i.prev=o,o.next.prev=i,o.next=i):(i.prev=i,i.next=i),i}function ar(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function cr(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ur(t,e,n,o){for(var i=0,r=e,s=n-o;r<n;r+=o)i+=(t[s]-t[r])*(t[r+1]+t[s+1]),s=r;return i}function lr(t){return t}function dr(t,e){var n=e.id,o=e.bbox,i=null==e.properties?{}:e.properties,r=hr(t,e);return null==n&&null==o?{type:"Feature",properties:i,geometry:r}:null==o?{type:"Feature",id:n,properties:i,geometry:r}:{type:"Feature",id:n,bbox:o,properties:i,geometry:r}}function hr(t,e){var n=function(t){if(null==t)return lr;var e,n,o=t.scale[0],i=t.scale[1],r=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var c=2,u=t.length,l=new Array(u);for(l[0]=(e+=t[0])*o+r,l[1]=(n+=t[1])*i+s;c<u;)l[c]=t[c],++c;return l}}(t.transform),o=t.arcs;function i(t,e){e.length&&e.pop();for(var i=o[t<0?~t:t],r=0,s=i.length;r<s;++r)e.push(n(i[r],r));t<0&&function(t,e){for(var n,o=t.length,i=o-e;i<--o;)n=t[i],t[i++]=t[o],t[o]=n}(e,s)}function r(t){return n(t)}function s(t){for(var e=[],n=0,o=t.length;n<o;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function c(t){return t.map(a)}return function t(e){var n,o=e.type;switch(o){case"GeometryCollection":return{type:o,geometries:e.geometries.map(t)};case"Point":n=r(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(r);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=c(e.arcs);break;case"MultiPolygon":n=e.arcs.map(c);break;default:return null}return{type:o,coordinates:n}}(e)}function fr(t,e){var n={},o={},i={},r=[],s=-1;function a(t,e){for(var o in t){var i=t[o];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),r.push(i)}}return e.forEach((function(n,o){var i,r=t.arcs[n<0?~n:n];r.length<3&&!r[1][0]&&!r[1][1]&&(i=e[++s],e[s]=n,e[o]=i)})),e.forEach((function(e){var n,r,s=function(e){var n,o=t.arcs[e<0?~e:e],i=o[0];t.transform?(n=[0,0],o.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=o[o.length-1];return e<0?[n,i]:[i,n]}(e),a=s[0],c=s[1];if(n=i[a])if(delete i[n.end],n.push(e),n.end=c,r=o[c]){delete o[r.start];var u=r===n?n:n.concat(r);o[u.start=n.start]=i[u.end=r.end]=u}else o[n.start]=i[n.end]=n;else if(n=o[c])if(delete o[n.start],n.unshift(e),n.start=a,r=i[a]){delete i[r.end];var l=r===n?n:r.concat(n);o[l.start=r.start]=i[l.end=n.end]=l}else o[n.start]=i[n.end]=n;else o[(n=[e]).start=a]=i[n.end=c]=n})),a(i,o),a(o,i),e.forEach((function(t){n[t<0?~t:t]||r.push([t])})),r}function yr(t,e){var n={},o=[],i=[];function r(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),o.push(t)}function s(e){return function(t){for(var e,n=-1,o=t.length,i=t[o-1],r=0;++n<o;)e=i,i=t[n],r+=e[0]*i[1]-e[1]*i[0];return Math.abs(r)}(hr(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":r(e.arcs);break;case"MultiPolygon":e.arcs.forEach(r)}})),o.forEach((function(t){if(!t._){var e=[],o=[t];for(t._=1,i.push(e);t=o.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,o.push(t))}))}))}))}})),o.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var o,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(o=(i=fr(t,i)).length)>1)for(var r,a,c=1,u=s(i[0]);c<o;++c)(r=s(i[c]))>u&&(a=i[0],i[0]=i[c],i[c]=a,u=r);return i})).filter((function(t){return t.length>0}))}}ji.deviation=function(t,e,n,o){var i=e&&e.length,r=i?e[0]*n:t.length,s=Math.abs(ur(t,0,r,n));if(i)for(var a=0,c=e.length;a<c;a++){var u=e[a]*n,l=a<c-1?e[a+1]*n:t.length;s-=Math.abs(ur(t,u,l,n))}var d=0;for(a=0;a<o.length;a+=3){var h=o[a]*n,f=o[a+1]*n,y=o[a+2]*n;d+=Math.abs((t[h]-t[y])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[y+1]-t[h+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},ji.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},o=0,i=0;i<t.length;i++){for(var r=0;r<t[i].length;r++)for(var s=0;s<e;s++)n.vertices.push(t[i][r][s]);i>0&&(o+=t[i-1].length,n.holes.push(o))}return n},Ei.default=Fi;var pr=Math.sqrt(50),gr=Math.sqrt(10),mr=Math.sqrt(2);function xr(t,e,n){var o,i,r,s,a=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((o=e<t)&&(i=t,t=e,e=i),0===(s=function(t,e,n){var o=(e-t)/Math.max(0,n),i=Math.floor(Math.log(o)/Math.LN10),r=o/Math.pow(10,i);return i>=0?(r>=pr?10:r>=gr?5:r>=mr?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(r>=pr?10:r>=gr?5:r>=mr?2:1)}(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),r=new Array(i=Math.ceil(e-t+1));++a<i;)r[a]=(t+a)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),r=new Array(i=Math.ceil(t-e+1));++a<i;)r[a]=(t-a)/s;return o&&r.reverse(),r}function kr(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function vr(t){let e=0;for(let n=0;n<t.length-1;n++){e+=kr(t[n],t[n+1])}return e}function br(t,e){const n=[];for(let o=0;o<t.length;o++)n.push(e(t[o],o));return n}function Mr(t){const e=br(t,(t,e)=>e);return e.sort((e,n)=>t[n]-t[e]),e}function wr(t,e){return br(e,e=>t[e])}function $r(t,e){if(0===t.length)return 0;for(let n=t.length-1;n>=0;n--){if(e<=t[n])return n}return 0}function _r(t){return t.pop(),t}function Tr(t){let e=t[0];return t.push(e),t}function Sr(t,e){let n=Pr(t);return n=_r(n),n=Cr(n,e,{ring:!0}),n=Tr(n),n}function Or(t,e){return Cr(Pr(t),e,{ring:!1})}function Cr(t,e,{ring:n}){const o=function(t,e){const n=[],o=e?t.length:t.length-1;for(let e=0;e<o;e++){const o=Ar(t,e);n.push(kr(o[0],o[1]))}return n}(t,n);let i=Mr(o);for(let n=0;n<e;n++){const e=i[0],n=Ar(t,e),r=o[e],s=Ir(n),a=r/2;i.shift(),t[e]=null,o[e]=null,i=Nr(i,o,e,a),t[e]=s[0][0],t.splice(e+1,0,s[1][0]),o[e]=a,o.splice(e+1,0,a)}return t}function Pr(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].slice(0));return e}function Ar(t,e){return[t[e],t[(e+1)%t.length]]}function Ir(t){const e=ue(t[0],t[1])(.5);return[[t[0],e],[e,t[1]]]}function Nr(t,e,n,o){let i=!1;for(let r=0;r<t.length;r++){const s=t[r];s>n&&(t[r]=t[r]+1);const a=e[s];if(null!==a&&o>=a){t.splice(r,0,n),t.splice(r+1,0,n+1),i=!0;break}}return i||(t.push(n),t.push(n+1)),t}function Wr(t){return t.constructor===Array}function Lr(t){return t.constructor===Object&&"Polygon"===t.type}function Er(t){return t.constructor===Object&&"MultiPolygon"===t.type}function Fr(t){return Lr(t)||Er(t)}function jr(t){return function(t){return t.constructor===Object&&"LineString"===t.type}(t)||function(t){return t.constructor===Object&&"MultiLineString"===t.type}(t)}function Yr(t){if(Wr(t))return Rr(t);if(Lr(t))return zr(t);if(Er(t))return function(t){let e=0;for(let n=0;n<t.coordinates.length;n++)e+=zr(t.coordinates[n]);return e}(t);throw new Error("Invalid input")}function Rr(t){return Math.abs(Xr(t))}function Xr(t){let e=0;for(let n=0,o=t.length;n<o;n++){e+=t[n][0]*t[n===t.length-1?0:n+1][1]*.5,e-=t[n===t.length-1?0:n+1][0]*t[n][1]*.5}return e}function zr(t){let e=Rr(t.coordinates[0]);for(let n=1;n<t.coordinates.length;n++){e-=Rr(t.coordinates[n])}return e}function Dr(t,e){return t.length>9?br(t,(t,e)=>e):function(t,e){const n=br(t,Yr),o=br(e,Yr),i=Mr(n),r=Mr(o),s={};for(let t=0;t<r.length;t++){const e=i[t],n=r[t];s[n]=e}const a=[];for(let t=0;t<e.length;t++)a.push(s[t]);return a}(t,e)}function qr(t){return Wr(t)?Hr(t):Lr(t)?Hr(t.coordinates[0]):Er(t)?function(t){let e=0,n=0,o=0;for(let i=0;i<t.coordinates.length;i++){const r=t.coordinates[i],s=Hr(r[0]),a=Yr(r[0]);e+=s[0]*a,n+=s[1]*a,o+=a}return[e/o,n/o]}(t):void 0}function Hr(t){const e=t.length,n=t[0];let o,i,r,s=0,a=0,c=0;for(let u=0,l=e-1;u<e;l=u++)o=t[u],i=t[l],r=(o[0]-n[0])*(i[1]-n[1])-(i[0]-n[0])*(o[1]-n[1]),s+=r,a+=(o[0]+i[0]-2*n[0])*r,c+=(o[1]+i[1]-2*n[1])*r;return r=3*s,[a/r+n[0],c/r+n[1]]}function Gr(t,e){const n=t.coordinates[0],o=e.coordinates[0],[i,r]=Br(n,o);return function(t,e){return 1===t.coordinates.length&&1===e.coordinates.length}(t,e)?function(t,e,n,o){const i=ue(n,o);return function(n){if(0===n)return t;if(1===n)return e;return{type:"Polygon",coordinates:[i(n)]}}}(t,e,i,r):function(t,e,n,o,i){const r=ue(n,o);return function(n){if(0===n)return t;if(1===n)return e;return{type:"Polygon",coordinates:[r(n),...br(i,t=>t(n))]}}}(t,e,i,r,function(t,e){let n=[];const o=Math.min(t.coordinates.length,e.coordinates.length)-1;o>0&&(n=n.concat(function(t,e,n){const o=[],i=Zr(t,n),r=Zr(e,n),s=br(Dr(i,r),t=>i[t]);for(let t=0;t<n;t++){const e=s[t],n=r[t],[i,a]=Br(e,n),c=ue(i,a);o.push(c)}return o}(t,e,o)));const i=t.coordinates.length-e.coordinates.length;i>0&&(n=n.concat(Vr(t,i)));i<0&&(n=n.concat(function(t,e){return br(Vr(t,e),t=>e=>t(1-e))}(e,-i)));return n}(t,e))}function Br(t,e){const n=t.length-e.length;return n>0&&(e=Sr(e,n)),n<0&&(t=Sr(t,-n)),[function(t,e){let n=Pr(t);n=_r(n);const o=n.length;let i,r,s,a=1/0;for(let t=0;t<o;t++)r=0,e.forEach((e,i)=>{const s=kr(n[(t+i)%o],e);r+=s*s}),r<a&&(a=r,i=t);return i&&(s=n.splice(0,i),n.splice(n.length,0,...s)),n=Tr(n),n}(t,e),e]}function Zr(t,e){const n=[];for(let o=1;o<=e;o++)n.push(t.coordinates[o]);return n}function Vr(t,e){const n=[];for(let o=t.coordinates.length-e;o<t.coordinates.length;o++){const e=t.coordinates[o],i=Jr(qr(e)),[r,s]=Br(e,i);n.push(ue(r,s))}return n}function Jr([t,e]){const n=t-1e-6,o=t+1e-6,i=e-1e-6,r=e+1e-6;return[[n,i],[n,r],[o,r],[o,i],[n,i]]}function Kr(t,e){const n=t[e],o=t[e+1],i=t[e+2];return[[n,o],[o,i],[i,n]]}function Ur(t){return t[0]<t[1]?t.join(","):t[1]+","+t[0]}function Qr(t,e){return[t[2*e],t[2*e+1]]}function ts(t,e){return{type:"Polygon",area:t,arcs:[e]}}function es(t,e){return Math.abs(Yr(br(e,e=>Qr(t,e[0]))))}const ns=function(t){return 1===t.length&&(t=function(t){return function(e,n){return(o=t(e))<(i=n)?-1:o>i?1:o>=i?0:NaN;var o,i}}(t)),{left:function(e,n,o,i){for(null==o&&(o=0),null==i&&(i=e.length);o<i;){var r=o+i>>>1;t(e[r],n)<0?o=r+1:i=r}return o},right:function(e,n,o,i){for(null==o&&(o=0),null==i&&(i=e.length);o<i;){var r=o+i>>>1;t(e[r],n)>0?i=r:o=r+1}return o}}}(t=>t.area).left;function os(t,e){const n=t.objects.triangles.geometries;for(;n.length>e;)o();if(e>n.length)throw new RangeError("Can't collapse topology into "+e+" pieces.");return br(function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return dr(t,e)}))}:dr(t,e)}(t,t.objects.triangles).features,t=>t.geometry);function o(){const e=n[0],o=function(t){const e=t[0].arcs[0].map(t=>t<0?~t:t);let n;for(let o=1;o<t.length;o++){const i=t[o].arcs[0].map(t=>t<0?~t:t);if(e.some(t=>i.includes(t))){n=o;break}}return n}(n),i=n[o],r=yr(t,[e,i]);r.area=e.area+i.area,r.type="Polygon",r.arcs=r.arcs[0],n.splice(o,1),n.shift(),n.splice(ns(n,r.area),0,r)}}function is(t){const e=t.coordinates[0][0],n=t.coordinates[0][1],o=t.coordinates[0][2],i=ue(e,n)(.5);return[rs([e,i,o,e]),rs([n,o,i,n])]}function rs(t){return{type:"Polygon",coordinates:[t]}}function ss(t,e){if(e<2)throw new Error("Cannot cut polygon in less than 2 pieces");const n=Ei.flatten(t.coordinates),o=Ei(n.vertices,n.holes,2),i=function(t){return t.length/3}(o);if(i>=e){return os(function(t,e){const n={},o={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};for(let i=0;i<e.length;i+=3){const r=[],s=Kr(e,i);s.forEach(e=>{const i=Ur(e),s=br(e,e=>Qr(t,e));i in n?r.push(~n[i]):(r.push(n[i]=o.arcs.length),o.arcs.push(s))});const a=ts(es(t,s),r);o.objects.triangles.geometries.push(a)}return o.objects.triangles.geometries.sort((t,e)=>t.area-e.area),o}(n.vertices,o),e)}if(i<e){return function(t,e){const n=br(t,Yr),o=Mr(n),i=wr(n,o),r=wr(t,o);for(;r.length<e;){i.shift();const t=is(r.shift()),e=br(t,Yr);for(let n=0;n<t.length;n++){const o=e[n],s=t[n],a=$r(i,o);i.splice(a,0,o),r.splice(a,0,s)}}return r}(function(t,e){const n=[];for(let o=0;o<e.length;o+=3){const i=Kr(e,o);let r=br(i,e=>Qr(t,e[0]));r.push(Qr(t,i[0][0])),Xr(r)<0&&(r=r.reverse()),n.push({type:"Polygon",coordinates:[r]})}return n}(n.vertices,o),e)}}function as(t,e){if(e<1)throw cs;const n=us(br(t,Yr),e);let o=[];for(let e=0;e<t.length;e++){const i=t[e],r=n[e];if(0===r&&o.push(i),r>0){const t=r+1;o=o.concat(ss(i,t))}}return o}const cs=new Error("Number of desired additional polygons must be larger than 0");function us(t,e){const n=[];let o=function(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}(t);for(let i=0;i<t.length;i++){const r=t[i],s=Math.round(r/o*e);n.push(s),o-=r,e-=s}return n}function ls(t){const e=[];for(const n of t.coordinates){const t={type:"Polygon",coordinates:void 0};t.coordinates=n,e.push(t)}return e}function ds(t,e,n,o){const i=Dr(br(n,t=>t.coordinates[0]),br(o,t=>t.coordinates[0]));n=br(i,t=>n[t]);const r=[];for(let t=0;t<n.length;t++){const e=n[t],i=o[t];r.push(Gr(e,i))}return function(n){return 0===n?t:1===n?e:function(t){const e={type:"MultiPolygon",coordinates:[]};for(const n of t)if("Polygon"===n.type&&e.coordinates.push(n.coordinates),"MultiPolygon"===n.type)for(const t of n.coordinates)e.coordinates.push(t);return e}(br(r,t=>t(n)))}}function hs(t,e){const n=ls(t);let o=[e];const i=n.length;return i-1>0&&(o=ss(e,i)),ds(t,e,n,o)}function fs(t,e){const[n,o]=ys(t.coordinates,e.coordinates);return function(t,e,n,o){const i=ue(n,o);return function(n){return 0===n?t:1===n?e:{type:"LineString",coordinates:i(n)}}}(t,e,n,o)}function ys(t,e){const n=t.length-e.length;let o=t,i=e;return n>0&&(i=Or(e,n)),n<0&&(o=Or(t,-n)),o=function(t,e){const n=ps(t,e),o=Pr(t).reverse(),i=ps(o,e);return n<=i?t:o}(o,i),[o,i]}function ps(t,e){let n=0;for(let o=0;o<t.length;o++)n+=kr(t[o],e[o]);return n}function gs(t,e,n){return function(t,e,n){return[t[0]+e[0]*n,t[1]+e[1]*n]}(t,function(t,e){const n=kr(t,e),o=e[0]-t[0],i=e[1]-t[1];return[o/n,i/n]}(t,e),n)}function ms(t,e){const n=t.coordinates.length,o=xs(e.coordinates,n);return Ms(t,e,bs(t.coordinates,o))}function xs(t,e){const n=[],o=vr(t)/e,i=t.length-1;let r=[],s=0;for(let e=0;e<i;e++){const i=t[e];r.push(i);const a=t[e+1],c=kr(i,a),u=s+c;if(u<o&&(s+=c),u>=o){const t=ks(i,a,s,o,Math.floor(u/o));r=r.concat(t),n.push(r);const e=t[t.length-1];r=vs(e,a)?[]:[e],s=kr(e,a)}}return n}function ks(t,e,n,o,i){const r=[];for(let s=1;s<=i;s++)r.push(gs(t,e,o*s-n));return r}function vs(t,e){return t[0]===e[0]&&t[1]===e[1]}function bs(t,e){const n=[];for(let o=0;o<t.length;o++){const i=t[o],r=e[o],[s,a]=ys(i,r),c=ue(s,a);n.push(c)}return n}function Ms(t,e,n){return function(o){return 0===o?t:1===o?e:{type:"MultiLineString",coordinates:br(n,t=>t(o))}}}function ws(t,e){return function(t,e){const n=br(t,vr),o=br(e,vr),i=Mr(n),r=Mr(o),s={};for(let t=0;t<r.length;t++){const e=i[t],n=r[t];s[e]=n}const a=[];for(let t=0;t<e.length;t++)a.push(s[t]);return a}(t,e).map(e=>t[e])}function $s(t,e){const n=us(function(t){const e=[];for(let n=0;n<t.length;n++)e.push(vr(t[n]));return e}(t),e);let o=[];for(let e=0;e<n.length;e++){const i=t[e],r=n[e];if(0===r&&o.push(i),r>0){const t=r+1;o=o.concat(xs(i,t))}}return o}function _s(t,e){return function(t,e){if(function(t,e){return Fr(t)&&Fr(e)}(t,e)||function(t,e){return jr(t)&&jr(e)}(t,e))return;throw new Error("Invalid input")}(t,e),"Polygon"===t.type&&"Polygon"===e.type?Gr(t,e):"MultiPolygon"===t.type&&"Polygon"===e.type?hs(t,e):"Polygon"===t.type&&"MultiPolygon"===e.type?function(t,e){const n=hs(e,t);return function(t){return n(1-t)}}(t,e):"MultiPolygon"===t.type&&"MultiPolygon"===e.type?function(t,e){let n=ls(t),o=ls(e);const i=n.length-o.length;return i>0&&(o=as(o,i)),i<0&&(n=as(n,-i)),ds(t,e,n,o)}(t,e):"LineString"===t.type&&"LineString"===e.type?fs(t,e):"MultiLineString"===t.type&&"LineString"===e.type?ms(t,e):"LineString"===t.type&&"MultiLineString"===e.type?function(t,e){const n=ms(e,t);return function(t){return n(1-t)}}(t,e):"MultiLineString"===t.type&&"MultiLineString"===e.type?function(t,e){let n=t.coordinates,o=e.coordinates;const i=n.length-o.length;return i>0&&(o=$s(o,i)),i<0&&(n=$s(n,-i)),n=ws(n,o),Ms(t,e,bs(n,o))}(t,e):void 0}function Ts(t,e){if(Os(t,e))return ue(t,e);if(Ps(t,e))return _s(t,e);if(Is(t,e))return _s(t,e);throw new Error("Invalid input")}function Ss(t,e){const n=Ns(t),o=Ns(e);if(Os(n,o))return Ws(t,e,ue);if(Ps(n,o))return Ws(t,e,_s);if(Is(n,o))return Ws(t,e,_s);throw new Error("Invalid input")}function Os(t,e){return"Point"===t.type&&"Point"===e.type}const Cs=["Polygon","MultiPolygon"];function Ps(t,e){return Cs.includes(t.type)&&Cs.includes(e.type)}const As=["LineString","MultiLineString"];function Is(t,e){return As.includes(t.type)&&As.includes(e.type)}function Ns(t){return t[Object.keys(t)[0]]}function Ws(t,e,n){const o={};for(const i in e)o[i]=i in t?n(t[i],e[i]):()=>e[i];return function(n){if(0===n)return t;if(1===n)return e;const i={};for(const t in o)i[t]=o[t](n);return i}}function Ls(t){return{minX:t.x[0],maxX:t.x[1],minY:t.y[0],maxY:t.y[1]}}function Es(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Fs(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function js(t,e,n,o){const i=[];for(let r=0;r<t.length-1;r++){const s=Rs([t[r],t[r+1]],e,r);o&&(s.lineStringIndex=o),s.markId=n,i.push(s)}return i}function Ys(t,e,n){let o=[];for(let i=0;i<t.length;i++)o=o.concat(js(t[i],e,n,i));return o}function Rs(t,e,n){const o={type:"LineString",coordinates:t};let i=Ls(Vo(o));return i=function(t,e){const n=e/2,o={minX:t.minX-n,maxX:t.maxX+n,minY:t.minY-n,maxY:t.maxY+n};return Object.assign(t,o)}(i,e.strokeWidth),i.attributes={},i.attributes.strokeWidth=e.strokeWidth,i.attributes.segmentGeometry=o,i.markType="Line",i.segmentIndex=n,i}function Xs(t,e){return{pixelGeometry:t.pixelGeometryObject[e],strokeWidth:t.strokeWidthObject[e]}}function zs(t,e,n,o){for(let i=0;i<t.length;i++){const r=t[i];delete r.markId,r.layerId=e,r.key=n,r.index=o}return t}function Ds(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function qs(t,e){return{screenGeometry:t.screenGeometryObject[e]}}const Hs={Point:On,Rectangle:function(t){const e=t.attributes,n=Ls(Vo(e.screenGeometry));return n.attributes=e,n.markType="Rectangle",n.markId=t.markId,n},Polygon:function(t){const e=t.attributes,n=Ls(Vo(e.screenGeometry));return n.attributes=e,n.markType="Polygon",n.markId=t.markId,n},Line:function(t){const e=t.attributes,n=t.markId,o=e.pixelGeometry,i=o.coordinates;return"LineString"===o.type?js(i,e,n):"MultiLineString"===o.type?Ys(i,e,n):void 0},Label:On,Area:function(t){const e=t.attributes,n=Ls(Vo(e.screenGeometry));return n.attributes=e,n.markType="Area",n.markId=t.markId,n},Symbol:function(t){const e=t.attributes,n=Ls(Vo(e.screenGeometry));return n.attributes=e,n.markType="Symbol",n.markId=t.markId,n}},Gs={Point:Cn,Rectangle:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Es(t,r),a=Ls(Vo(s.screenGeometry));a.key=r,a.index=i,a.attributes=s,a.markType="Rectangle",a.layerId=n,o.push(a)}return o},Polygon:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Fs(t,r),a=Ls(Vo(s.screenGeometry));a.key=r,a.index=i,a.attributes=s,a.markType="Polygon",a.layerId=n,o.push(a)}return o},Line:function({layerAttributes:t,keyArray:e,layerId:n}){let o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Xs(t,r),a=s.pixelGeometry,c=a.coordinates;if("LineString"===a.type){let t=js(c,s,r);t=zs(t,n,r,i),o=o.concat(t)}if("MultiLineString"===a.type){let t=Ys(c,s,r);t=zs(t,n,r,i),o=o.concat(t)}}return o},Label:Cn,Area:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Ds(t,r),a=Ls(Vo(s.screenGeometry));a.key=r,a.index=i,a.attributes=s,a.markType="Area",a.layerId=n,o.push(a)}return o},Symbol:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=qs(t,r),a=Ls(Vo(s.screenGeometry));a.key=r,a.index=i,a.attributes=s,a.markType="Symbol",a.layerId=n,o.push(a)}return o}};class Bs extends Tn{constructor(t,e){super(t,e),this._indexableMarks={},this._indexableLayers={}}loadMark(t,e){const n=(0,Hs[t])(e),o=e.markId;this._indexableMarks[o]=n}markIsLoaded(t){return t in this._indexableMarks}removeMark(t){delete this._indexableMarks[t]}loadLayer(t,e){const n=(0,Gs[t])(e),o=e.layerId;this._indexableLayers[o]=n}layerIsLoaded(t){return t in this._indexableLayers}removeLayer(t){delete this._indexableLayers[t]}addMarkInteraction(t,e,n){this._getHandler(t).addMarkInteraction(e,n)}removeAllMarkInteractions(t){for(const e in this._handlers){const n=this._handlers[e];n.hasMark(t)&&n.removeMarkInteraction(t)}}addLayerInteraction(t,e,n){this._getHandler(t).addLayerInteraction(e,n)}removeAllLayerInteractions(t){for(const e in this._handlers){const n=this._handlers[e];n.hasLayer(t)&&n.removeLayerInteraction(t)}}}class Zs extends Tn{addInteraction(t,e){this._getHandler(t).addInteraction(e)}removeAllInteractions(){for(const t in this._handlers){const e=this._handlers[t];e.hasInteraction()&&e.removeInteraction()}}}class Vs{constructor(t,{eventName:e,interactionName:n}){this._interactionManager=t,this._eventName=e,this._interactionName=n}interactionManager(){return this._interactionManager}eventManager(){return this._interactionManager._eventManager}section(){return this._interactionManager._section}id(){return this._interactionManager._id}_addEventListener(){const t=this._handleEvent.bind(this),e=this.eventManager(),n=this.getId(),o=Js(this._eventName)?this._eventName:[this._eventName];for(const i of o)e.eventTracker(i).addListener(n,t)}_removeEventListener(){const t=this.eventManager(),e=this.getId(),n=Js(this._eventName)?this._eventName:[this._eventName];for(const o of n)t.eventTracker(o).removeListener(e)}}function Js(t){return t.constructor===Array}function Ks(t,e,n,o,i){!function t(e,n,o,i,r){for(;i>o;){if(i-o>600){var s=i-o+1,a=n-o+1,c=Math.log(s),u=.5*Math.exp(2*c/3),l=.5*Math.sqrt(c*u*(s-u)/s)*(a-s/2<0?-1:1),d=Math.max(o,Math.floor(n-a*u/s+l)),h=Math.min(i,Math.floor(n+(s-a)*u/s+l));t(e,n,d,h,r)}var f=e[n],y=o,p=i;for(Us(e,o,n),r(e[i],f)>0&&Us(e,o,i);y<p;){for(Us(e,y,p),y++,p--;r(e[y],f)<0;)y++;for(;r(e[p],f)>0;)p--}0===r(e[o],f)?Us(e,o,p):(p++,Us(e,p,i)),p<=n&&(o=p+1),n<=p&&(i=p-1)}}(t,e,n||0,o||t.length-1,i||Qs)}function Us(t,e,n){var o=t[e];t[e]=t[n],t[n]=o}function Qs(t,e){return t<e?-1:t>e?1:0}class ta{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!da(t,e))return n;const o=this.toBBox,i=[];for(;e;){for(let r=0;r<e.children.length;r++){const s=e.children[r],a=e.leaf?o(s):s;da(t,a)&&(e.leaf?n.push(s):la(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n}collides(t){let e=this.data;if(!da(t,e))return!1;const n=[];for(;e;){for(let o=0;o<e.children.length;o++){const i=e.children[o],r=e.leaf?this.toBBox(i):i;if(da(t,r)){if(e.leaf||la(t,r))return!0;n.push(i)}}e=n.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let e=0;e<t.length;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=ha([]),this}remove(t,e){if(!t)return this;let n=this.data;const o=this.toBBox(t),i=[],r=[];let s,a,c;for(;n||i.length;){if(n||(n=i.pop(),a=i[i.length-1],s=r.pop(),c=!0),n.leaf){const o=ea(t,n.children,e);if(-1!==o)return n.children.splice(o,1),i.push(n),this._condense(i),this}c||n.leaf||!la(n,o)?a?(s++,n=a.children[s],c=!1):n=null:(i.push(n),r.push(s),s=0,a=n,n=n.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,o){const i=n-e+1;let r,s=this._maxEntries;if(i<=s)return r=ha(t.slice(e,n+1)),na(r,this.toBBox),r;o||(o=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,o-1))),r=ha([]),r.leaf=!1,r.height=o;const a=Math.ceil(i/s),c=a*Math.ceil(Math.sqrt(s));fa(t,e,n,c,this.compareMinX);for(let i=e;i<=n;i+=c){const e=Math.min(i+c-1,n);fa(t,i,e,a,this.compareMinY);for(let n=i;n<=e;n+=a){const i=Math.min(n+a-1,e);r.children.push(this._build(t,n,i,o-1))}}return na(r,this.toBBox),r}_chooseSubtree(t,e,n,o){for(;o.push(e),!e.leaf&&o.length-1!==n;){let n,o=1/0,s=1/0;for(let a=0;a<e.children.length;a++){const c=e.children[a],u=aa(c),l=(i=t,r=c,(Math.max(r.maxX,i.maxX)-Math.min(r.minX,i.minX))*(Math.max(r.maxY,i.maxY)-Math.min(r.minY,i.minY))-u);l<s?(s=l,o=u<o?u:o,n=c):l===s&&u<o&&(o=u,n=c)}e=n||e.children[0]}var i,r;return e}_insert(t,e,n){const o=n?t:this.toBBox(t),i=[],r=this._chooseSubtree(o,this.data,e,i);for(r.children.push(t),ia(r,o);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(o,i,e)}_split(t,e){const n=t[e],o=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,o);const r=this._chooseSplitIndex(n,i,o),s=ha(n.children.splice(r,n.children.length-r));s.height=n.height,s.leaf=n.leaf,na(n,this.toBBox),na(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)}_splitRoot(t,e){this.data=ha([t,e]),this.data.height=t.height+1,this.data.leaf=!1,na(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let o,i=1/0,r=1/0;for(let s=e;s<=n-e;s++){const e=oa(t,0,s,this.toBBox),a=oa(t,s,n,this.toBBox),c=ua(e,a),u=aa(e)+aa(a);c<i?(i=c,o=s,r=u<r?u:r):c===i&&u<r&&(r=u,o=s)}return o||n-e}_chooseSplitAxis(t,e,n){const o=t.leaf?this.compareMinX:ra,i=t.leaf?this.compareMinY:sa;this._allDistMargin(t,e,n,o)<this._allDistMargin(t,e,n,i)&&t.children.sort(o)}_allDistMargin(t,e,n,o){t.children.sort(o);const i=this.toBBox,r=oa(t,0,e,i),s=oa(t,n-e,n,i);let a=ca(r)+ca(s);for(let o=e;o<n-e;o++){const e=t.children[o];ia(r,t.leaf?i(e):e),a+=ca(r)}for(let o=n-e-1;o>=e;o--){const e=t.children[o];ia(s,t.leaf?i(e):e),a+=ca(s)}return a}_adjustParentBBoxes(t,e,n){for(let o=n;o>=0;o--)ia(e[o],t)}_condense(t){for(let e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():na(t[n],this.toBBox)}}function ea(t,e,n){if(!n)return e.indexOf(t);for(let o=0;o<e.length;o++)if(n(t,e[o]))return o;return-1}function na(t,e){oa(t,0,t.children.length,e,t)}function oa(t,e,n,o,i){i||(i=ha(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let r=e;r<n;r++){const e=t.children[r];ia(i,t.leaf?o(e):e)}return i}function ia(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ra(t,e){return t.minX-e.minX}function sa(t,e){return t.minY-e.minY}function aa(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ca(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ua(t,e){const n=Math.max(t.minX,e.minX),o=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),r=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,r-o)}function la(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function da(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ha(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function fa(t,e,n,o,i){const r=[e,n];for(;r.length;){if((n=r.pop())-(e=r.pop())<=o)continue;const s=e+Math.ceil((n-e)/o/2)*o;Ks(t,s,e,n,i),r.push(e,s,s,n)}}function ya(t,e){return oi([t.x,t.y],e.pixelGeometry.coordinates)<e.radius}var pa={Point:ya,Rectangle:function(t,e){return gi([t.x,t.y],e.screenGeometry)},Polygon:function(t,e){return gi([t.x,t.y],e.screenGeometry)},Line:function(t,e){return ai([t.x,t.y],e.segmentGeometry.coordinates,e.strokeWidth)},Label:ya,Symbol:function(t,e){return gi([t.x,t.y],e.screenGeometry)},Area:function(t,e){return gi([t.x,t.y],e.screenGeometry)}};class ga{constructor(t,e,n){this._rbush=new ta,this._interactionHandler=t,this._getMark=e.bind(t),this._getLayer=n.bind(t)}indexLayer(t){const e=this._getLayer(t);this._rbush.load(e)}unindexLayer(t){const e=this._getLayer(t);for(let t=0;t<e.length;t++){const n=e[t];this._rbush.remove(n)}}indexMark(t){const e=this._getMark(t);ma(e)?this._rbush.load(e):this._rbush.insert(e)}unindexMark(t){const e=this._getMark(t);if(ma(e))for(let t=0;t<e.length;t++){const n=e[t];this._rbush.remove(n)}else this._rbush.remove(e)}queryMouseCoordinates(t,e){const n=function(t,e=3){return{minX:t.x-e,maxX:t.x+e,minY:t.y-e,maxY:t.y+e}}(t,e),o=this._rbush.search(n);return this._getHits(t,o)}queryBoundingBox(t){return this._rbush.search(t)}_getHits(t,e){const n=[];for(let o=0;o<e.length;o++){const i=e[o];(0,pa[i.markType])(t,i.attributes)&&n.push(i)}return n}}function ma(t){return t.constructor===Array}class xa extends Vs{constructor(t,e){super(t,e);this._spatialIndex=new ga(this,(function(t){return this._interactionManager.marks()._indexableMarks[t]}),(function(t){return this._interactionManager.marks()._indexableLayers[t]})),this._numberOfInteractions=0,this._markCallbacks={},this._layerCallbacks={}}addMarkInteraction(t,e){this._addEventListenerIfNecessary(),this._numberOfInteractions++,this._markCallbacks[t]=e,this._spatialIndex.indexMark(t)}hasMark(t){return t in this._markCallbacks}removeMarkInteraction(t){this._removeEventListenerIfNecessary(),delete this._markCallbacks[t],this._numberOfInteractions--,this._spatialIndex.unindexMark(t)}addLayerInteraction(t,e){t in this._layerCallbacks||(this._addEventListenerIfNecessary(),this._numberOfInteractions++,this._layerCallbacks[t]=e,this._spatialIndex.indexLayer(t))}hasLayer(t){return t in this._layerCallbacks}removeLayerInteraction(t){t in this._layerCallbacks&&(this._numberOfInteractions--,delete this._layerCallbacks[t],this._removeEventListenerIfNecessary(),this._spatialIndex.unindexLayer(t))}_addEventListenerIfNecessary(){0===this._numberOfInteractions&&this._addEventListener()}_removeEventListenerIfNecessary(){0===this._numberOfInteractions&&this._removeEventListener()}getId(){return`${this.id()}-mark-${this._interactionName}`}}function ka(t,e,n,o){return e.markType=n.markType,e.hitBBox=Ma(n),e.hitSource="mark",wa(t,e,o)}function va(t,e,n,o){return e.markType=n.markType,e.hitBBox=Ma(n),e.key=n.key,e.index=n.index,e.hitSource="layer",wa(t,e,o)}function ba(t,e,n){return e.hitSource="section",wa(t,e,n)}function Ma(t){return{minX:t.minX,maxX:t.maxX,minY:t.minY,maxY:t.maxY}}function wa(t,e,n){const o=e;o.type=t,o.nativeType=n.type;for(const t of $a)o[t]=n[t];return o}const $a=["altKey","ctrlKey","shiftKey","clientX","clientY","pageX","pageY","screenX","screenY","timeStamp"];function _a(t,e){return{type:t,markType:e.markType,hitSource:"mark"}}function Ta(t,e){return{type:t,markType:e.markType,key:e.key,index:e.index,hitSource:"layer"}}function Sa(t,e){const n=e._section,o=e._coordinateTransformation?e._coordinateTransformation.transformation:void 0,i=e._zoom?e._zoom.transformation:void 0,{scaleX:r,scaleY:s}=n;let a=Oa(t.x,n.minX,n.maxX),c=Oa(t.y,n.minY,n.maxY);return i&&([a,c]=i.invert([a,c])),o&&([a,c]=o.invert([a,c])),a=r.invert(a),c=s.invert(c),{x:a,y:c}}function Oa(t,e,n){return Math.max(e,Math.min(t,n))}function Ca(t,e){return t.x>=e.minX&&t.x<=e.maxX&&t.y>=e.minY&&t.y<=e.maxY}function Pa(t){return"markId"in t}function Aa(t){return"layerId"in t}function Ia(t){return Pa(t)?t.markId:Aa(t)?t.layerId+"-"+t.key:void 0}var Na=Object.freeze({__proto__:null,ClickHandler:class extends xa{constructor(t){super(t,{interactionName:"click",eventName:"click"})}_handleEvent(t,e){if(!Ca(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=Sa(t,this.interactionManager());for(let i=0;i<n.length;i++){const r=n[i];if(Pa(r)){const n=ka("click",{screenCoordinates:t,localCoordinates:o},r,e);this._markCallbacks[r.markId](n)}if(Aa(r)){const n=va("click",{screenCoordinates:t,localCoordinates:o},r,e);this._layerCallbacks[r.layerId](n)}}}},MouseoverHandler:class extends xa{constructor(t){super(t,{interactionName:"mouseover",eventName:"mousemove"}),this._previousMouseoverIds={},this._currentMouseoverIds={}}_handleEvent(t,e){const n=this._spatialIndex.queryMouseCoordinates(t);for(let o=0;o<n.length;o++){const i=n[o],r=Ia(i);this._currentMouseoverIds[r]=!0,r in this._previousMouseoverIds||this._fireCallback(i,t,e)}this._previousMouseoverIds=this._currentMouseoverIds,this._currentMouseoverIds={}}_fireCallback(t,e,n){const o=Sa(e,this.interactionManager());if(Pa(t)){const i=ka("mouseover",{screenCoordinates:e,localCoordinates:o},t,n);this._markCallbacks[t.markId](i)}if(Aa(t)){const i=va("mouseover",{screenCoordinates:e,localCoordinates:o},t,n);this._layerCallbacks[t.layerId](i)}}},MouseoutHandler:class extends xa{constructor(t){super(t,{interactionName:"mouseout",eventName:"mousemove"}),this._previousMouseoverHits={},this._currentMouseoverHits={}}_handleEvent(t,e){const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=n[t],o=Ia(e);this._currentMouseoverHits[o]=e}for(const n in this._previousMouseoverHits)if(!(n in this._currentMouseoverHits)){const o=this._previousMouseoverHits[n];this._fireCallback(o,t,e)}this._previousMouseoverHits=this._currentMouseoverHits,this._currentMouseoverHits={}}_fireCallback(t,e,n){const o=Sa(e,this.interactionManager());if(Pa(t)){const i=ka("mouseout",{screenCoordinates:e,localCoordinates:o},t,n);this._markCallbacks[t.markId](i)}if(Aa(t)){const i=va("mouseout",{screenCoordinates:e,localCoordinates:o},t,n);this._layerCallbacks[t.layerId](i)}}},MousedownHandler:class extends xa{constructor(t){super(t,{interactionName:"mousedown",eventName:"mousedown"})}_handleEvent(t,e){if(!Ca(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=Sa(t,this.interactionManager());for(let i=0;i<n.length;i++){const r=n[i];if(Pa(r)){const n=ka("mousedown",{screenCoordinates:t,localCoordinates:o},r,e);this._markCallbacks[r.markId](n)}if(Aa(r)){const n=va("mousedown",{screenCoordinates:t,localCoordinates:o},r,e);this._layerCallbacks[r.layerId](n)}}}},MouseupHandler:class extends xa{constructor(t){super(t,{interactionName:"mouseup",eventName:"mouseup"})}_handleEvent(t,e){if(!Ca(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=Sa(t,this.interactionManager());for(let i=0;i<n.length;i++){const r=n[i];if(Pa(r)){const n=ka("mouseup",{screenCoordinates:t,localCoordinates:o},r,e);this._markCallbacks[r.markId](n)}if(Aa(r)){const n=va("mouseup",{screenCoordinates:t,localCoordinates:o},r,e);this._layerCallbacks[r.layerId](n)}}}},MousedragHandler:class extends xa{constructor(t){super(t,{interactionName:"mousedrag",eventName:["mousedown","mousemove","mouseup"]}),this._currentHits={}}_handleEvent(t,e){"mousedown"===e.eventName&&this._handleMousedown(t,e),"mousemove"===e.eventName&&this._handleMousemove(t,e),"mouseup"===e.eventName&&this._handleMouseup(t,e)}_handleMousedown(t,e){if(!Ca(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let o=0;o<n.length;o++){const i=n[o],r=Ia(i);this._currentHits[r]=i,this._fireCallback(i,t,e,"start")}}_handleMousemove(t,e){if(Ca(t,this.section()))for(const n in this._currentHits){const o=this._currentHits[n];this._fireCallback(o,t,e,"drag")}}_handleMouseup(t,e){for(const n in this._currentHits){const o=this._currentHits[n];this._fireCallback(o,t,e,"end")}this._currentHits={}}_fireCallback(t,e,n,o){const i=Sa(e,this.interactionManager());if(Pa(t)){const r=ka("mousedrag",{screenCoordinates:e,localCoordinates:i,dragType:o},t,n);this._markCallbacks[t.markId](r)}if(Aa(t)){const r=va("mousedrag",{screenCoordinates:e,localCoordinates:i,dragType:o},t,n);this._layerCallbacks[t.layerId](r)}}}});class Wa extends Vs{constructor(t,e){super(t,e),this._callback=void 0}addInteraction(t){this._addEventListener(),this._callback=t}hasInteraction(){return void 0!==this._callback}removeInteraction(){this._callback&&(this._callback=void 0,this._removeEventListener())}getId(){return`${this.id()}-section-${this._interactionName}`}}let La;var Ea=Object.freeze({__proto__:null,WheelHandler:class extends Wa{constructor(t){super(t,{interactionName:"wheel",eventName:"wheel"})}_handleEvent(t,e){e.preventDefault(),e.stopPropagation();const n=this.interactionManager();if(Ca(t,this.section())){const o=ba("wheel",{screenCoordinates:t,localCoordinates:Sa(t,n),delta:function(t){let e;"wheelDelta"in t&&0!==t.wheelDelta&&(e=-t.wheelDelta);"detail"in t&&0!==t.detail&&(e=-t.detail);"deltaY"in t&&0!==t.deltaY&&(e=-t.deltaY);La||(La=function(){var t,e=document.createElement("iframe");e.src="#",document.body.appendChild(e);var n=e.contentWindow.document;return n.open(),n.write("<!DOCTYPE html><html><head></head><body><span>a</span></body></html>"),n.close(),t=n.body.firstElementChild.offsetHeight,document.body.removeChild(e),t}());return e*(t.deltaMode?La:1)/500}(e)},e);this._callback(o)}}},ClickHandler:class extends Wa{constructor(t){super(t,{interactionName:"click",eventName:"click"})}_handleEvent(t,e){const n=this.interactionManager();if(Ca(t,this.section())){const o=ba("click",{screenCoordinates:t,localCoordinates:Sa(t,n)},e);this._callback(o)}}},MousedownHandler:class extends Wa{constructor(t){super(t,{interactionName:"mousedown",eventName:"mousedown"})}_handleEvent(t,e){const n=this.interactionManager();if(Ca(t,this.section())){const o=ba("mousedown",{screenCoordinates:t,localCoordinates:Sa(t,n)},e);this._callback(o)}}},MouseupHandler:class extends Wa{constructor(t){super(t,{interactionName:"mouseup",eventName:"mouseup"})}_handleEvent(t,e){const n=this.interactionManager();if(Ca(t,this.section())){const o=ba("mouseup",{screenCoordinates:t,localCoordinates:Sa(t,n)},e);this._callback(o)}}},MouseoverHandler:class extends Wa{constructor(t){super(t,{interactionName:"mouseover",eventName:"mousemove"}),this._mouseCurrentlyOverSection=!1}_handleEvent(t,e){const n=this.interactionManager();if(Ca(t,this.section())){if(!this._mouseCurrentlyOverSection){const o=ba("mouseover",{screenCoordinates:t,localCoordinates:Sa(t,n)},e);this._callback(o),this._mouseCurrentlyOverSection=!0}}else this._mouseCurrentlyOverSection&&(this._mouseCurrentlyOverSection=!1)}},MouseoutHandler:class extends Wa{constructor(t){super(t,{interactionName:"mouseout",eventName:"mousemove"}),this._mouseCurrentlyOverSection=!1}_handleEvent(t,e){const n=this.interactionManager();if(Ca(t,this.section()))this._mouseCurrentlyOverSection||(this._mouseCurrentlyOverSection=!0);else if(this._mouseCurrentlyOverSection){const o=ba("mouseout",{screenCoordinates:t,localCoordinates:Sa(t,n)},e);this._callback(o),this._mouseCurrentlyOverSection=!1}}},MousemoveHandler:class extends Wa{constructor(t){super(t,{interactionName:"mouseover",eventName:"mousemove"})}_handleEvent(t,e){const n=this.interactionManager();if(Ca(t,this.section())){const o=ba("mousemove",{screenCoordinates:t,localCoordinates:Sa(t,n)},e);this._callback(o)}}}});class Fa extends _n{constructor(){super(),this._markInteractionInterface=new Bs(this,Na),this._sectionInteractionInterface=new Zs(this,Ea)}}function ja(t){return t.constructor===Object?1:t.length}var Ya=Object.freeze({__proto__:null,TouchdownHandler:class extends xa{constructor(t){super(t,{interactionName:"touchdown",eventName:"touchstart"})}_handleEvent(t,e){if(1!==ja(t))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=Sa(t,this.interactionManager());for(let i=0;i<n.length;i++){const r=n[i];if(Pa(r)){const n=ka("touchdown",{screenCoordinates:t,localCoordinates:o},r,e);this._markCallbacks[r.markId](n)}if(Aa(r)){const n=va("touchdown",{screenCoordinates:t,localCoordinates:o},r,e);this._layerCallbacks[r.layerId](n)}}}},TouchupHandler:class extends xa{constructor(t){super(t,{interactionName:"touchup",eventName:["touchend","touchcancel"]})}_handleEvent(t,e){if(1!==ja(t))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=Sa(t,this.interactionManager());for(let i=0;i<n.length;i++){const r=n[i];if(Pa(r)){const n=ka("touchup",{screenCoordinates:t,localCoordinates:o},r,e);this._markCallbacks[r.markId](n)}if(Aa(r)){const n=va("touchup",{screenCoordinates:t,localCoordinates:o},r,e);this._layerCallbacks[r.layerId](n)}}}},TouchoverHandler:class extends xa{constructor(t){super(t,{interactionName:"touchover",eventName:["touchstart","touchmove"]}),this._previousHits={},this._currentHits={}}_handleEvent(t,e){1===ja(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e))}_handleTouchstart(t,e){if(!Ca(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=Ia(n[t]);this._previousHits[e]=!0}}_handleTouchmove(t,e){if(!Ca(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let o=0;o<n.length;o++){const i=n[o],r=Ia(i);this._currentHits[r]=!0,r in this._previousHits||this._fireCallback(i,t,e)}this._previousHits=this._currentHits,this._currentHits={}}_fireCallback(t,e,n){const o=Sa(e,this.interactionManager());if(Pa(t)){const i=ka("touchover",{screenCoordinates:e,localCoordinates:o},t,n);this._markCallbacks[t.markId](i)}if(Aa(t)){const i=va("touchover",{screenCoordinates:e,localCoordinates:o},t,n);this._layerCallbacks[t.layerId](i)}}},TouchoutHandler:class extends xa{constructor(t){super(t,{interactionName:"touchout",eventName:["touchstart","touchmove","touchend"]}),this._previousHits={},this._currentHits={}}_handleEvent(t,e){1===ja(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e),"touchend"===e.eventName&&this._handleTouchend())}_handleTouchstart(t,e){if(!Ca(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=n[t],o=Ia(e);this._previousHits[o]=e}}_handleTouchmove(t,e){if(!Ca(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=n[t],o=Ia(e);this._currentHits[o]=e}for(const n in this._previousHits)if(!(n in this._currentHits)){const o=this._previousHits[n];this._fireCallback(o,t,e)}this._previousHits=this._currentHits,this._currentHits={}}_handleTouchend(){this._previousHits={},this._currentHits={}}_fireCallback(t,e,n){const o=Sa(e,this.interactionManager());if(Pa(t)){const i=ka("touchout",{screenCoordinates:e,localCoordinates:o},t,n);this._markCallbacks[t.markId](i)}if(Aa(t)){const i=va("touchout",{screenCoordinates:e,localCoordinates:o},t,n);this._layerCallbacks[t.layerId](i)}}},TouchdragHandler:class extends xa{constructor(t){super(t,{interactionName:"touchdrag",eventName:["touchstart","touchmove","touchend"]}),this._currentHits={}}_handleEvent(t,e){1===ja(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e),"touchend"===e.eventName&&this._handleTouchend(t,e))}_handleTouchstart(t,e){if(!Ca(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let o=0;o<n.length;o++){const i=n[o],r=Ia(i);this._currentHits[r]=i,this._fireCallback(i,t,e,"start")}}_handleTouchmove(t,e){if(Ca(t,this.section()))for(const n in this._currentHits){const o=this._currentHits[n];this._fireCallback(o,t,e,"drag")}}_handleTouchend(t,e){for(const n in this._currentHits){const o=this._currentHits[n];this._fireCallback(o,t,e,"end")}this._currentHits={}}_fireCallback(t,e,n,o){const i=Sa(e,this.interactionManager());if(Pa(t)){const r=ka("touchdrag",{screenCoordinates:e,localCoordinates:i,dragType:o},t,n);this._markCallbacks[t.markId](r)}if(Aa(t)){const r=va("touchdrag",{screenCoordinates:e,localCoordinates:i,dragType:o},t,n);this._layerCallbacks[t.layerId](r)}}}});function Ra(t,e){return t.every(t=>Ca(t,e))}function Xa(t){const[e,n]=t;return Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2)}var za=Object.freeze({__proto__:null,TouchdownHandler:class extends Wa{constructor(t){super(t,{interactionName:"touchdown",eventName:"touchstart"})}_handleEvent(t,e){if(1!==ja(t))return;const n=this.interactionManager();if(Ca(t,this.section())){const o=ba("touchdown",{screenCoordinates:t,localCoordinates:Sa(t,n)},e);this._callback(o)}}},TouchmoveHandler:class extends Wa{constructor(t){super(t,{interactionName:"touchmove",eventName:"touchmove"})}_handleEvent(t,e){if(1!==ja(t))return;const n=this.interactionManager();if(Ca(t,this.section())){const o=ba("touchmove",{screenCoordinates:t,localCoordinates:Sa(t,n)},e);this._callback(o)}}},TouchupHandler:class extends Wa{constructor(t){super(t,{interactionName:"touchup",eventName:["touchend","touchcancel"]})}_handleEvent(t,e){if(1!==ja(t))return;const n=this.interactionManager();if(Ca(t,this.section())){const o=ba("touchup",{screenCoordinates:t,localCoordinates:Sa(t,n)},e);this._callback(o)}}},TouchoverHandler:class extends Wa{constructor(t){super(t,{interactionName:"touchover",eventName:["touchstart","touchmove"]}),this._fingerCurrentlyOverSection=!1}_handleEvent(t,e){1===ja(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e))}_handleTouchstart(t,e){Ca(t,this.section())&&(this._fingerCurrentlyOverSection=!0)}_handleTouchmove(t,e){const n=this.interactionManager();if(Ca(t,this.section())){if(!this._fingerCurrentlyOverSection){const o=ba("touchover",{screenCoordinates:t,localCoordinates:Sa(t,n)},e);this._callback(o),this._fingerCurrentlyOverSection=!0}}else this._fingerCurrentlyOverSection&&(this._fingerCurrentlyOverSection=!1)}},TouchoutHandler:class extends Wa{constructor(t){super(t,{interactionName:"touchout",eventName:["touchstart","touchmove","touchend"]}),this._fingerCurrentlyOverSection=!1}_handleEvent(t,e){1===ja(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e),"touchend"===e.eventName&&this._handleTouchend())}_handleTouchstart(t,e){Ca(t,this.section())&&(this._fingerCurrentlyOverSection=!0)}_handleTouchmove(t,e){const n=this.interactionManager();if(Ca(t,this.section()))this._fingerCurrentlyOverSection||(this._fingerCurrentlyOverSection=!0);else if(this._fingerCurrentlyOverSection){const o=ba("touchout",{screenCoordinates:t,localCoordinates:Sa(t,n)},e);this._callback(o),this._fingerCurrentlyOverSection=!1}}_handleTouchend(){this._fingerCurrentlyOverSection=!1}},PinchHandler:class extends Wa{constructor(t){super(t,{interactionName:"pinch",eventName:["touchstart","touchmove","touchend"]}),this._previousTouchDistance=void 0}_handleEvent(t,e){"touchstart"===e.type&&this._handleTouchstart(t,e),"touchmove"===e.type&&this._handleTouchmove(t,e),"touchend"===e.type&&this._handleTouchend(t,e)}_handleTouchstart(t,e){if(2!==ja(t))return;Ra(t,this.section())&&(this._previousTouchDistance=Xa(t))}_handleTouchmove(t,e){if(2!==ja(t))return;if(void 0===this._previousTouchDistance)return;const n=this.section();if(Ra(t,n)){const o=n.maxY-n.minY,i=function(t){const[e,n]=t;return{x:(n.x+e.x)/2,y:(n.y+e.y)/2}}(t),r=Xa(t),s=(this._previousTouchDistance-r)/o;this._previousTouchDistance=r,this._fireCallback(t,e,s,i)}}_handleTouchend(t,e){this._previousTouchDistance=void 0}_fireCallback(t,e,n,o){const i=ba("pinch",{screenCenter:o,localCenter:Sa(o,this.interactionManager()),screenCoordinates:t,localCoordinates:t.map(t=>Sa(t,this.interactionManager())),delta:n},e);this._callback(i)}}});class Da extends _n{constructor(){super(),this._markInteractionInterface=new Bs(this,Ya),this._sectionInteractionInterface=new Zs(this,za)}}function qa(t){return{x:[t[0],t[0]],y:[t[1],t[1]]}}function Ha(t){const e=t.attributes,n=Ls(qa(e.pixelGeometry.coordinates));return n.attributes=e,n.markType="Point",n.markId=t.markId,n}function Ga({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Ba(t,r),a=Ls(qa(s.pixelGeometry.coordinates));a.key=r,a.index=i,a.attributes=s,a.markType="Point",a.layerId=n,o.push(a)}return o}function Ba(t,e){return{pixelGeometry:t.pixelGeometryObject[e],radius:t.radiusObject[e]}}function Za(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Va(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Ja(t,e){return{screenGeometry:t.pixelGeometryObject[e]}}function Ka(t,e){return{screenGeometry:t.screenGeometryObject[e]}}const Ua={Point:Ha,Rectangle:function(t){const e=t.attributes,n=Ls(qa(ri(e.screenGeometry)));return n.attributes=e,n.markType="Rectangle",n.markId=t.markId,n},Polygon:function(t){const e=t.attributes,n=Ls(qa(ri(e.screenGeometry)));return n.attributes=e,n.markType="Polygon",n.markId=t.markId,n},Line:function(t){const e=t.attributes,n=Ls(qa(ri(e.pixelGeometry)));return n.attributes=e,n.markType="Line",n.markId=t.markId,n},Label:Ha,Area:function(t){const e=t.attributes,n=Ls(qa(ri(e.screenGeometry)));return n.attributes=e,n.markType="Area",n.markId=t.markId,n}},Qa={Point:Ga,Rectangle:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Za(t,r),a=Ls(qa(ri(s.screenGeometry)));a.key=r,a.index=i,a.attributes=s,a.markType="Rectangle",a.layerId=n,o.push(a)}return o},Polygon:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Va(t,r),a=Ls(qa(ri(s.screenGeometry)));a.key=r,a.index=i,a.attributes=s,a.markType="Polygon",a.layerId=n,o.push(a)}return o},Line:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Ja(t,r),a=Ls(qa(ri(s.screenGeometry)));a.key=r,a.index=i,a.attributes=s,a.markType="Line",a.layerId=n,o.push(a)}return o},Label:Ga,Area:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let i=0;i<e.length;i++){const r=e[i],s=Ka(t,r),a=Ls(qa(ri(s.screenGeometry)));a.key=r,a.index=i,a.attributes=s,a.markType="Area",a.layerId=n,o.push(a)}return o}};class tc{constructor(){this._selectableMarks={},this._selectableLayers={},this._markCallbacks={},this._layerCallbacks={},this._previousSelection={},this._currentSelection={};this._spatialIndex=new ga(this,(function(t){return this._selectableMarks[t]}),(function(t){return this._selectableLayers[t]})),this._selectPolygon={start:void 0,points:[]}}loadMark(t,e,n){const o=(0,Ua[t])(e),i=e.markId;this._selectableMarks[i]=o,this._markCallbacks[i]=n,this._spatialIndex.indexMark(i)}markIsLoaded(t){return t in this._selectableMarks}removeMark(t){this._spatialIndex.unindexMark(t),delete this._selectableMarks[t],delete this._markCallbacks[t]}loadLayer(t,e,n){const o=(0,Qa[t])(e),i=e.layerId;this._selectableLayers[i]=o,this._layerCallbacks[i]=n,this._spatialIndex.indexLayer(i)}layerIsLoaded(t){return t in this._selectableLayers}removeLayer(t){this._spatialIndex.unindexLayer(t),delete this._selectableLayers[t],delete this._layerCallbacks[t]}selectRectangle(t){const e=this._spatialIndex.queryBoundingBox(ec(t));for(let t=0;t<e.length;t++){const n=e[t],o=Ia(n);this._currentSelection[o]=n,this._fireSelectCallback(n)}}updateSelectRectangle(t){this._previousSelection=this._currentSelection,this._currentSelection={};const e=this._spatialIndex.queryBoundingBox(ec(t));for(let t=0;t<e.length;t++){const n=e[t],o=Ia(n);this._currentSelection[o]=n,o in this._previousSelection||this._fireSelectCallback(n)}for(const t in this._previousSelection)if(!(t in this._currentSelection)){const e=this._previousSelection[t];this._fireDeselectCallback(e)}}resetSelectRectangle(){for(const t in this._currentSelection){const e=this._currentSelection[t];this._fireDeselectCallback(e)}this._previousSelection={},this._currentSelection={}}startSelectPolygon(t){this._selectPolygon.start=nc(t)}addPointToSelectPolygon(t){if(this._selectPolygon.points.push(nc(t)),this._selectPolygon.points.length>1){const t=this._getLastThreePointsPolygon(),e=Vo(t),n=this._spatialIndex.queryBoundingBox(oc(e));for(let e=0;e<n.length;e++){const o=n[e];if(gi([o.minX,o.minY],t)){const t=Ia(o);t in this._currentSelection?(this._fireDeselectCallback(o),delete this._currentSelection[t]):(this._fireSelectCallback(o),this._currentSelection[t]=o)}}}}moveSelectPolygon(t){this._previousSelection=this._currentSelection,this._currentSelection={};const e=nc(t),n=this._selectPolygon.start,o=this._selectPolygon.points;this._selectPolygon.start=[n[0]+e[0],n[1]+e[1]],this._selectPolygon.points=o.map(t=>[t[0]+e[0],t[1]+e[1]]);const i=this.getSelectPolygon(),r=Vo(i),s=this._spatialIndex.queryBoundingBox(oc(r));for(let t=0;t<s.length;t++){const e=s[t];if(gi([e.minX,e.minY],i)){const t=Ia(e);this._currentSelection[t]=e,t in this._previousSelection||this._fireSelectCallback(e)}}for(const t in this._previousSelection)if(!(t in this._currentSelection)){const e=this._previousSelection[t];this._fireDeselectCallback(e)}}getSelectPolygon(){if(this._selectPolygon.start)return{type:"Polygon",coordinates:[[this._selectPolygon.start,...this._selectPolygon.points,this._selectPolygon.start]]}}resetSelectPolygon(){for(const t in this._currentSelection){const e=this._currentSelection[t];this._fireDeselectCallback(e)}this._selectPolygon={start:void 0,points:[]},this._currentSelection={}}_fireSelectCallback(t){if(Pa(t)){const e=_a("select",t),n=this._markCallbacks[t.markId].onSelect;n&&n(e)}if(Aa(t)){const e=Ta("select",t),n=this._layerCallbacks[t.layerId].onSelect;n&&n(e)}}_fireDeselectCallback(t){if(Pa(t)){const e=_a("deselect",t),n=this._markCallbacks[t.markId].onDeselect;n&&n(e)}if(Aa(t)){const e=Ta("deselect",t),n=this._layerCallbacks[t.layerId].onDeselect;n&&n(e)}}_getLastThreePointsPolygon(){const t=this._selectPolygon.points,e=t.length-1,n=this._selectPolygon.start;return{type:"Polygon",coordinates:[[n,t[e-1],t[e],n]]}}}function ec(t){return{minX:Math.min(t.x1,t.x2),maxX:Math.max(t.x1,t.x2),minY:Math.min(t.y1,t.y2),maxY:Math.max(t.y1,t.y2)}}function nc(t){if(function(t){return t.constructor===Array&&2===t.length&&t.every(t=>t&&t.constructor===Number)}(t))return t;if(function(t){return"x"in t&&"y"in t&&t.x.constructor===Number&&t.y.constructor===Number}(t))return[t.x,t.y];throw new Error(`Invalid input: ${t}`)}function oc(t){return{minX:Math.min(...t.x),maxX:Math.max(...t.x),minY:Math.min(...t.y),maxY:Math.max(...t.y)}}class ic{constructor(){dn.hasMouse&&(this._mouseInteractionManager=new Fa),dn.hasTouch&&(this._touchInteractionManager=new Da),this._selectManager=new tc}setId(t){this._forEachManager(e=>{e.setId(t)})}linkEventManager(t){this._mouseInteractionManager&&this._mouseInteractionManager.linkEventManager(t.mouse()),this._touchInteractionManager&&this._touchInteractionManager.linkEventManager(t.touch())}loadSection(t){this._forEachManager(e=>{e.loadSection(t)})}loadCoordinateTransformation(t){this._forEachManager(e=>{e.loadCoordinateTransformation(t)})}loadZoom(t){this._forEachManager(e=>{e.loadZoom(t)})}mouse(){return this._mouseInteractionManager}touch(){return this._touchInteractionManager}select(){return this._selectManager}_forEachManager(t){this._mouseInteractionManager&&t(this._mouseInteractionManager),this._touchInteractionManager&&t(this._touchInteractionManager)}}function rc(t){if(t.constructor===Number)return{left:t,right:t,top:t,bottom:t};if(t.constructor===Object){if(4!==Object.keys(t).length)throw sc;for(const e of["left","right","top","bottom"])if(!(e in t))throw sc;return t}throw sc}const sc=new Error("Invalid padding specification");function ac(t,e,n){return t[0]<t[1]?[t[0]+e,t[1]-n]:[t[0]-n,t[1]+e]}function cc(t,e,n){return t[0]<t[1]?[t[0]-e,t[1]+n]:[t[0]+n,t[1]-e]}function uc(t){let e,n;const o=t[20].default,i=d(o,t,t[19],null);return{c(){e=M("svg"),i&&i.c(),T(e,"width",t[0]),T(e,"height",t[1])},m(o,r){v(o,e,r),i&&i.m(e,null),t[21](e),n=!0},p(t,[r]){i&&i.p&&524288&r&&i.p(h(o,t,t[19],null),f(o,t[19],r,null)),(!n||1&r)&&T(e,"width",t[0]),(!n||2&r)&&T(e,"height",t[1])},i(t){n||(Q(i,t),n=!0)},o(t){tt(i,t),n=!1},d(n){n&&b(e),i&&i.d(n),t[21](null)}}}function lc(t,e,n){let o,i,{width:r}=e,{height:s}=e,{padding:a=0}=e,{scaleX:c}=e,{scaleY:u}=e,{flipX:d=!1}=e,{flipY:h=!1}=e,{renderer:f}=e,{blockReindexing:y=!1}=e;const p=function(){const t=ut();return L(dt,t),t}(),g=Re();l(t,g,t=>n(14,i=t));const m=function(){const t=ut();return L(De,t),t}(),x=Ge();let k;l(t,x,t=>n(13,o=t)),Je(),nn();const v=new $n;!function(t,e){t.set(e)}(m,v);const b=new ic;let M;b.setId("graphic"),b.linkEventManager(v),Be(x,b),I(()=>{v.addRootNode(k),v.attachEventListeners()});let{$$slots:w={},$$scope:$}=e;return t.$set=t=>{"width"in t&&n(0,r=t.width),"height"in t&&n(1,s=t.height),"padding"in t&&n(5,a=t.padding),"scaleX"in t&&n(6,c=t.scaleX),"scaleY"in t&&n(7,u=t.scaleY),"flipX"in t&&n(8,d=t.flipX),"flipY"in t&&n(9,h=t.flipY),"renderer"in t&&n(10,f=t.renderer),"blockReindexing"in t&&n(11,y=t.blockReindexing),"$$scope"in t&&n(19,$=t.$$scope)},t.$$.update=()=>{if(1024&t.$$.dirty&&function(t,e){t.set(new lt(e))}(p,{renderer:f}),31715&t.$$.dirty){let t=[0,r],e=[0,s];d&&t.reverse(),h&&e.reverse(),n(12,M=rc(a)),t=ac(t,M.left,M.right),e=ac(e,M.top,M.bottom),Xe(g,{sectionId:"graphic",rangeX:t,rangeY:e,scaleX:c,scaleY:u,padding:M,blockReindexing:y}),o.loadSection(i)}},[r,s,k,g,x,a,c,u,d,h,f,y,M,o,i,p,m,v,b,$,w,function(t){j[t?"unshift":"push"](()=>{n(2,k=t)})}]}function dc({sectionContext:t,xNeedsScaling:e,yNeedsScaling:n,coordinateTransformationContext:o,zoomTransformation:i}){const r=[];if(function(t,e){return!0===t||!0===e}(e,n)){const o=hc(e?t.scaleX:void 0,n?t.scaleY:void 0);r.push(o)}return o&&"identity"!==o.type&&r.push(o.transformation),i&&r.push(i.transformation),function(t){if(0===t.length)return;if(1===t.length)return t[0];if(2===t.length)return e=>t[1](t[0](e));if(3===t.length)return e=>t[2](t[1](t[0](e)))}(r)}function hc(t=(t=>t),e=(t=>t)){return n=>[t(n[0]),e(n[1])]}function fc(t,e){if(t){if(t.constructor!==Array)throw new Error("'key' must be Array");if(t.length!==e)throw new Error("'key' must be of same length as positioning props");return t}return new Array(e).fill(0).map((t,e)=>e)}function yc({x:t,y:e,geometry:n},o){if(!(Bo(t)&&Bo(e)&&Zo(n)||Zo(t)&&Zo(e)&&Bo(n)))throw new Error(`${o}: Invalid combination of 'x', 'y', and 'geometry' props`)}function pc({x:t,y:e,geometry:n}){return Zo(n)?"xy":Bo(n)?"geometry":void 0}function gc(t,e){if(![Array,Function].includes(t.constructor))throw new Error("'x' prop must be Array or Function");if(![Array,Function].includes(e.constructor))throw new Error("'y' prop must be Array or Function")}function mc(t){if(![Array,Function].includes(t.constructor))throw new Error("'geometry' prop must be Array or Function")}function xc({scaleX:t,scaleY:e,rangeX:n,rangeY:o,...i},r,s,{xNeedsScaling:a,yNeedsScaling:c}){return{scaleX:a?t:Fe().domain(n).range(n),scaleY:c?e:Fe().domain(n).range(n),rangeX:n,rangeY:o,...i,coordinateTransformation:r.transformation,zoomIdentity:s}}function kc(t,e,n,o,i){!function(t){if(![Object,Function].includes(t.constructor))throw new Error("'geometry' prop must be Object or Function")}(t.geometry);const r=t.geometry.constructor===Object,s=r?t.geometry:t.geometry(e);vc(s);const a=n&&"identity"!==n.type&&!0===i.interpolate;if(a){return Li(s,xc(e,n,o,{xNeedsScaling:r,yNeedsScaling:r}),i)}if(!a){const t=dc({sectionContext:e,xNeedsScaling:r,yNeedsScaling:r,coordinateTransformationContext:n,zoomContext:o});return(t=>Bo(t))(t)?Si(s,t,i):s}}function vc(t){if(!(Bo(t)&&t.constructor===Object&&"type"in t&&"coordinates"in t))throw new Error("Invalid geometry")}function bc(t,e,n,o,i,r){mc(t.geometry);const s=t.geometry.constructor===Array,a=s?t.geometry:t.geometry(n);!function(t){if(Bo(t)&&t.constructor===Array)return;throw new Error("'geometry' prop must be Array or function that returns array")}(a);const c=fc(e,a.length),u={};for(let t=0;t<c.length;t++){const e=c[t],l=s?a[t]:()=>a[t];u[e]=kc({geometry:l},n,o,i,r)}return u}function Mc(t,e){$c(t),function(t){for(const e in t){const n=t[e];if(Bo(n)){if(Go(n))throw Tc(n,e);if(![Number,String,Date,Function].includes(n.constructor))throw Tc(n,e)}}}(t);const{x1:n,x2:o,y1:i,y2:r}=t,s={};return Sc(n,o)?(s.x1=Oc(n,"x1",e),s.x2=Oc(o,"x2",e)):(s.x1=e.minX,s.x2=e.maxX),Sc(i,r)?(s.y1=Oc(i,"y1",e),s.y2=Oc(r,"y2",e)):(s.y1=e.minY,s.y2=e.maxY),s}const wc=JSON.stringify;function $c(t){if(_c(t.x1,t.x2))throw new Error(`Rectangle: invalid combination of 'x1' and 'x2': ${wc(t.x1)}, ${wc(t.x2)}. Either provide both or none.`);if(_c(t.y1,t.y2))throw new Error(`Rectangle: invalid combination of 'y1' and 'y2': ${wc(t.y1)}, ${wc(t.y2)}. Either provide both or none.`)}function _c(t,e){return Zo(t)?Bo(e):Zo(e)}const Tc=(t,e)=>new Error(`Rectangle: invalid coordinate value for '${e}': ${wc(t)}`);function Sc(t,e){return Bo(t)&&Bo(e)}function Oc(t,e,n){if(t.constructor===Function)return t(n);{const o=(["x1","x2"].includes(e)?n.scaleX:n.scaleY)(t);return function(t,e,n){const o=["x1","x2"].includes(n)?"scaleX":"scaleY";if(Go(e))throw new Error(`Scale '${o}' received '${wc(t)}' and returned '${wc(e)}`)}(t,o,e),o}}function Cc(t){return{type:"Polygon",coordinates:[[[t.x1,t.y1],[t.x2,t.y1],[t.x2,t.y2],[t.x1,t.y2],[t.x1,t.y1]]]}}function Pc(t){let e,n;return{c(){e=M("rect"),T(e,"class","padding-background"),T(e,"mask",n=`url(#clip-${t[5]}-data)`),T(e,"width","100%"),T(e,"height","100%"),T(e,"fill",t[1])},m(t,n){v(t,e,n)},p(t,n){2&n[0]&&T(e,"fill",t[1])},d(t){t&&b(e)}}}function Ac(t){let e,n,o,i,r;return{c(){e=M("rect"),T(e,"class","content-background"),T(e,"x",n=Math.min(...t[3])),T(e,"y",o=Math.min(...t[4])),T(e,"width",i=Math.abs(t[3][0]-t[3][1])),T(e,"height",r=Math.abs(t[4][0]-t[4][1])),T(e,"fill",t[0])},m(t,n){v(t,e,n)},p(t,s){8&s[0]&&n!==(n=Math.min(...t[3]))&&T(e,"x",n),16&s[0]&&o!==(o=Math.min(...t[4]))&&T(e,"y",o),8&s[0]&&i!==(i=Math.abs(t[3][0]-t[3][1]))&&T(e,"width",i),16&s[0]&&r!==(r=Math.abs(t[4][0]-t[4][1]))&&T(e,"height",r),1&s[0]&&T(e,"fill",t[0])},d(t){t&&b(e)}}}function Ic(t){let e,n,o,i,r,s,a,c,u,l,y,p,g,m,x,w,S,O,C,P,A,I=t[1]&&Pc(t),N=t[0]&&Ac(t);const W=t[58].default,L=d(W,t,t[57],null);return{c(){e=M("defs"),n=M("clipPath"),o=M("rect"),u=M("clipPath"),l=M("rect"),w=$(),S=M("g"),I&&I.c(),O=_(),N&&N.c(),C=_(),L&&L.c(),T(o,"x",i=Math.min(t[2].x1,t[2].x2)),T(o,"y",r=Math.min(t[2].y1,t[2].y2)),T(o,"width",s=Math.abs(t[2].x2-t[2].x1)),T(o,"height",a=Math.abs(t[2].y2-t[2].y1)),T(n,"id",c=`clip-${t[5]}`),T(l,"x",y=Math.min(...t[3])),T(l,"y",p=Math.min(...t[4])),T(l,"width",g=Math.abs(t[3][0]-t[3][1])),T(l,"height",m=Math.abs(t[4][0]-t[4][1])),T(l,"fill","white"),T(u,"id",x=`clip-${t[5]}-data`),T(S,"class","section"),T(S,"clip-path",P=`url(#clip-${t[5]})`)},m(t,i){v(t,e,i),k(e,n),k(n,o),k(e,u),k(u,l),v(t,w,i),v(t,S,i),I&&I.m(S,null),k(S,O),N&&N.m(S,null),k(S,C),L&&L.m(S,null),A=!0},p(t,e){(!A||4&e[0]&&i!==(i=Math.min(t[2].x1,t[2].x2)))&&T(o,"x",i),(!A||4&e[0]&&r!==(r=Math.min(t[2].y1,t[2].y2)))&&T(o,"y",r),(!A||4&e[0]&&s!==(s=Math.abs(t[2].x2-t[2].x1)))&&T(o,"width",s),(!A||4&e[0]&&a!==(a=Math.abs(t[2].y2-t[2].y1)))&&T(o,"height",a),(!A||8&e[0]&&y!==(y=Math.min(...t[3])))&&T(l,"x",y),(!A||16&e[0]&&p!==(p=Math.min(...t[4])))&&T(l,"y",p),(!A||8&e[0]&&g!==(g=Math.abs(t[3][0]-t[3][1])))&&T(l,"width",g),(!A||16&e[0]&&m!==(m=Math.abs(t[4][0]-t[4][1])))&&T(l,"height",m),t[1]?I?I.p(t,e):(I=Pc(t),I.c(),I.m(S,O)):I&&(I.d(1),I=null),t[0]?N?N.p(t,e):(N=Ac(t),N.c(),N.m(S,C)):N&&(N.d(1),N=null),L&&L.p&&67108864&e[1]&&L.p(h(W,t,t[57],null),f(W,t[57],e,null))},i(t){A||(Q(L,t),A=!0)},o(t){tt(L,t),A=!1},d(t){t&&b(e),t&&b(w),t&&b(S),I&&I.d(),N&&N.d(),L&&L.d(t)}}}let Nc=0;function Wc(t,e,n){let o,i,r,s,a,c,u;const d="sc"+Nc++;let{x1:h}=e,{x2:f}=e,{y1:y}=e,{y2:p}=e,{padding:g=0}=e,{scaleX:m}=e,{scaleY:x}=e,{flipX:k=!1}=e,{flipY:v=!1}=e,{zoomIdentity:b}=e,{transformation:M}=e,{blockReindexing:w=!1}=e,{backgroundColor:$}=e,{paddingColor:_}=e,{onClick:T}=e,{onWheel:S}=e,{onMousedown:O}=e,{onMouseup:C}=e,{onMouseover:P}=e,{onMouseout:I}=e,{onMousemove:N}=e,{onPinch:W}=e,{onTouchdown:L}=e,{onTouchmove:F}=e,{onTouchup:j}=e,{onTouchover:Y}=e,{onTouchout:R}=e;const X=Ye();l(t,X,t=>n(48,i=t));const z=Re();l(t,z,t=>n(50,s=t));const D=Ve();l(t,D,t=>n(53,u=t));const q=Je();l(t,q,t=>n(51,a=t));const H=E(De);l(t,H,t=>n(47,o=t));const G=Ge();l(t,G,t=>n(49,r=t));const B=nn();let Z,V,J;l(t,B,t=>n(52,c=t));const K=new ic;let U;function Q(){if(dn.hasMouse){const t=r.mouse().section();t.removeAllInteractions(),S&&t.addInteraction("wheel",S),T&&t.addInteraction("click",T),O&&t.addInteraction("mousedown",O),C&&t.addInteraction("mouseup",C),P&&t.addInteraction("mouseover",P),I&&t.addInteraction("mouseout",I),N&&t.addInteraction("mousemove",N)}if(dn.hasTouch){const t=r.touch().section();t.removeAllInteractions(),L&&t.addInteraction("touchdown",L),F&&t.addInteraction("touchmove",F),j&&t.addInteraction("touchup",j),Y&&t.addInteraction("touchover",Y),R&&t.addInteraction("touchout",R),W&&t.addInteraction("pinch",W)}}K.setId(d),K.linkEventManager(o),Be(G,K),A(()=>{Ue(u)});const tt=r.select();let{$$slots:et={},$$scope:nt}=e;return t.$set=t=>{"x1"in t&&n(13,h=t.x1),"x2"in t&&n(14,f=t.x2),"y1"in t&&n(15,y=t.y1),"y2"in t&&n(16,p=t.y2),"padding"in t&&n(17,g=t.padding),"scaleX"in t&&n(18,m=t.scaleX),"scaleY"in t&&n(19,x=t.scaleY),"flipX"in t&&n(20,k=t.flipX),"flipY"in t&&n(21,v=t.flipY),"zoomIdentity"in t&&n(22,b=t.zoomIdentity),"transformation"in t&&n(23,M=t.transformation),"blockReindexing"in t&&n(24,w=t.blockReindexing),"backgroundColor"in t&&n(0,$=t.backgroundColor),"paddingColor"in t&&n(1,_=t.paddingColor),"onClick"in t&&n(25,T=t.onClick),"onWheel"in t&&n(26,S=t.onWheel),"onMousedown"in t&&n(27,O=t.onMousedown),"onMouseup"in t&&n(28,C=t.onMouseup),"onMouseover"in t&&n(29,P=t.onMouseover),"onMouseout"in t&&n(30,I=t.onMouseout),"onMousemove"in t&&n(31,N=t.onMousemove),"onPinch"in t&&n(32,W=t.onPinch),"onTouchdown"in t&&n(33,L=t.onTouchdown),"onTouchmove"in t&&n(34,F=t.onTouchmove),"onTouchup"in t&&n(35,j=t.onTouchup),"onTouchover"in t&&n(36,Y=t.onTouchover),"onTouchout"in t&&n(37,R=t.onTouchout),"$$scope"in t&&n(57,nt=t.$$scope)},t.$$.update=()=>{if(29351964&t.$$.dirty[0]|1998848&t.$$.dirty[1]){n(2,Z=Mc({x1:h,x2:f,y1:y,y2:p},i)),n(3,V=[Z.x1,Z.x2]),n(4,J=[Z.y1,Z.y2]),k&&V.reverse(),v&&J.reverse(),n(46,U=rc(g)),n(3,V=ac(V,U.left,U.right)),n(4,J=ac(J,U.top,U.bottom)),Xe(z,{sectionId:d,rangeX:V,rangeY:J,scaleX:m,scaleY:x,padding:U,flipX:k,flipY:v,blockReindexing:w}),Ke(q,{rangeX:V,rangeY:J,transformation:M}),r.loadSection(s),r.loadCoordinateTransformation(a)}2113929216&t.$$.dirty[0]|126&t.$$.dirty[1]&&Q(),4194304&t.$$.dirty[0]|2359296&t.$$.dirty[1]&&(on(B,b),r.loadZoom(c))},[$,_,Z,V,J,d,X,z,D,q,H,G,B,h,f,y,p,g,m,x,k,v,b,M,w,T,S,O,C,P,I,N,W,L,F,j,Y,R,function(t){tt.selectRectangle(t)},function(t){tt.updateSelectRectangle(t)},function(){tt.resetSelectRectangle()},function(t){tt.startSelectPolygon(t)},function(t){tt.addPointToSelectPolygon(t)},function(t){tt.moveSelectPolygon(t)},function(){return tt.getSelectPolygon()},function(){tt.resetSelectPolygon()},U,o,i,r,s,a,c,u,K,Q,tt,nt,et]}var Lc="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Ec(){throw new Error("setTimeout has not been defined")}function Fc(){throw new Error("clearTimeout has not been defined")}var jc=Ec,Yc=Fc;function Rc(t){if(jc===setTimeout)return setTimeout(t,0);if((jc===Ec||!jc)&&setTimeout)return jc=setTimeout,setTimeout(t,0);try{return jc(t,0)}catch(e){try{return jc.call(null,t,0)}catch(e){return jc.call(this,t,0)}}}"function"==typeof Lc.setTimeout&&(jc=setTimeout),"function"==typeof Lc.clearTimeout&&(Yc=clearTimeout);var Xc,zc=[],Dc=!1,qc=-1;function Hc(){Dc&&Xc&&(Dc=!1,Xc.length?zc=Xc.concat(zc):qc=-1,zc.length&&Gc())}function Gc(){if(!Dc){var t=Rc(Hc);Dc=!0;for(var e=zc.length;e;){for(Xc=zc,zc=[];++qc<e;)Xc&&Xc[qc].run();qc=-1,e=zc.length}Xc=null,Dc=!1,function(t){if(Yc===clearTimeout)return clearTimeout(t);if((Yc===Fc||!Yc)&&clearTimeout)return Yc=clearTimeout,clearTimeout(t);try{Yc(t)}catch(e){try{return Yc.call(null,t)}catch(e){return Yc.call(this,t)}}}(t)}}function Bc(t,e){this.fun=t,this.array=e}Bc.prototype.run=function(){this.fun.apply(null,this.array)};function Zc(){}var Vc=Zc,Jc=Zc,Kc=Zc,Uc=Zc,Qc=Zc,tu=Zc,eu=Zc;var nu=Lc.performance||{},ou=nu.now||nu.mozNow||nu.msNow||nu.oNow||nu.webkitNow||function(){return(new Date).getTime()};var iu=new Date;var ru={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];zc.push(new Bc(t,e)),1!==zc.length||Dc||Rc(Gc)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Vc,addListener:Jc,once:Kc,off:Uc,removeListener:Qc,removeAllListeners:tu,emit:eu,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*ou.call(nu),n=Math.floor(e),o=Math.floor(e%1*1e9);return t&&(n-=t[0],(o-=t[1])<0&&(n--,o+=1e9)),[n,o]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-iu)/1e3}};function su(t){ru||console.warn(t),ru&&"test"!==ru.env.NODE_ENV&&console.warn(t)}function au(t,e,n,o,i){let r;const s=function(t,e,n){let o=n.y1;const i=[];if((t=hu(t,"gridTemplateColumns")).constructor===String){const e=t.split(/\s/),o=uu(e,n.y2-n.y1);for(const t of e)t.endsWith("px")?i.push(parseInt(t.slice(0,-2))):t.endsWith("fr")&&i.push(o*parseInt(t.slice(0,-2)))}else if(t.constructor===Array){const e=(n.y2-n.y1)/t.length;for(let n=0;n<t.length;n++)i.push(e)}else if(t.constructor===Number){const e=(n.y2-n.y1)/t;for(let n=0;n<t;n++)i.push(e)}const r=i.length,s=[];for(let t=0;t<r;t++)s.push({y1:o,y2:o+i[t]-e/2,x1:n.x1,x2:n.x2}),o=o+i[t]+e/2;return s}(t,n,i),a=s.length;let c=[];const u=[];let l=[];for(const t of s){const n=cu(e,o,t);l=l.concat(n),u.push(t),c=n,r=n.length}return[l,u,c,a,r]}function cu(t,e,n){let o=n.x1;const i=[];if((t=hu(t,"gridTemplateColumns")).constructor===String){const e=t.split(/\s/),o=uu(e,n.x2-n.x1);for(const t of e){const e=parseInt(t.slice(0,-2));t.endsWith("px")?i.push(e):t.endsWith("fr")&&i.push(o*e)}}else if(t.constructor===Array){const e=(n.x2-n.x1)/t.length;for(let n=0;n<t.length;n++)i.push(e)}else if(t.constructor===Number){const e=(n.x2-n.x1)/t;for(let n=0;n<t;n++)i.push(e)}const r=i.length,s=[];for(let t=0;t<r;t++)s.push({x1:o,x2:o+i[t]-e/2,y1:n.y1,y2:n.y2}),o=o+i[t]+e/2;return s}function uu(t,e){let n=0;for(const o of t){const t=parseInt(o.slice(0,-2));o.endsWith("px")?e-=t:o.endsWith("fr")?n+=t:su(`Grid cell size should be specified in -px or -fr. Ignoring input ${o}`)}return 0===n?0:e/n}function lu(t,e,n){const o=t.length,i=e.length;if(o<i){su("Cell names do not match up with number of cells specified, this may cause errors in your chart.");for(let e=0;e<i;e++)t[e]||t.push(e)}else o>i&&su("Cell names do not match up with number of cells specified, this may cause errors in your chart.");const r={},s={};for(let o=0;o<i;o++){const i=t[o];if(void 0===i)r[o]=e[o];else if(i in r){r[i]=du(i,r[i],e[o]);const t=Math.floor(o/n),a=o%n,c=s[i].endRow,u=s[i].endCol;s[i].endRow=t>c?t:c,s[i].endCol=a>u?a:u}else r[i]=e[o],s[i]={startRow:Math.floor(o/n),startCol:o%n,endRow:Math.floor(o/n),endCol:o%n}}return function(t,e,n){for(const o in t){const i=t[o],r=i.startRow,s=i.startCol,a=i.endRow,c=i.endCol;for(let t=r;t<=a;t++)for(let i=s;i<=c;i++){e[t*n+i]!==o&&su(`Area ${o} may not be rectangular in prop gridTemplateAreas, this can cause errors in your chart.`)}}}(s,t,n),r}function du(t,e,n){const o={};return o.x1=e.x1<n.x1?e.x1:n.x1,o.x2=e.x2>n.x2?e.x2:n.x2,o.y1=e.y1<n.y1?e.y1:n.y1,o.y2=e.y2>n.y2?e.y2:n.y2,o}function hu(t,e){return t.constructor===String&&""===t?(su(`Please specify at least one cell in ${e}. Automatically adding 1 cell to ${e}.`),"1fr"):t.constructor===Number&&0===t?(su(`Please specify at least one cell in ${e}. Automatically adding 1 cell to ${e}.`),1):t.constructor===Number&&t%1!=0?(su(`Please specify ${e} with integers only. Using rounded value ${Math.ceil(t)}.`),Math.ceil(t)):t.constructor===Array&&0===t.length?(su(`Please specify at least one cell in ${e}. Automatically adding 1 cell to ${e}.`),[0]):-1===[Array,Number,String].indexOf(t.constructor)?(su(`Please specify ${e} with Number, String or Array. Assuming 1 cell specified.`),1):t}const fu=t=>({cells:1&t}),yu=t=>({cells:t[0]});function pu(t){let e,n;const o=t[23].default,i=d(o,t,t[22],yu);return{c(){e=M("g"),i&&i.c()},m(t,o){v(t,e,o),i&&i.m(e,null),n=!0},p(t,[e]){i&&i.p&&4194305&e&&i.p(h(o,t,t[22],yu),f(o,t[22],e,fu))},i(t){n||(Q(i,t),n=!0)},o(t){tt(i,t),n=!1},d(t){t&&b(e),i&&i.d(t)}}}function gu(t,e,n){let o,i,{x1:r}=e,{x2:s}=e,{y1:a}=e,{y2:c}=e,{rows:u=1}=e,{columns:d=1}=e,{rowGap:h=0}=e,{columnGap:f=0}=e,{areaNames:y}=e,{viewGridTemplate:p=!1}=e,{viewGridShape:g=!1}=e;const m=Ve();l(t,m,t=>n(21,i=t));const x=Ye();let k,v;l(t,x,t=>n(16,o=t)),A(()=>{Ue(i)});let b,M,w,$,_,{$$slots:T={},$$scope:S}=e;return t.$set=t=>{"x1"in t&&n(3,r=t.x1),"x2"in t&&n(4,s=t.x2),"y1"in t&&n(5,a=t.y1),"y2"in t&&n(6,c=t.y2),"rows"in t&&n(7,u=t.rows),"columns"in t&&n(8,d=t.columns),"rowGap"in t&&n(9,h=t.rowGap),"columnGap"in t&&n(10,f=t.columnGap),"areaNames"in t&&n(11,y=t.areaNames),"viewGridTemplate"in t&&n(12,p=t.viewGridTemplate),"viewGridShape"in t&&n(13,g=t.viewGridShape),"$$scope"in t&&n(22,S=t.$$scope)},t.$$.update=()=>{65656&t.$$.dirty&&n(14,k=Mc({x1:r,x2:s,y1:a,y2:c},o)),18304&t.$$.dirty&&n(15,[v,b,M,w,$]=au(u,d,h,f,k),v,(n(17,b),n(7,u),n(8,d),n(9,h),n(10,f),n(14,k),n(3,r),n(4,s),n(5,a),n(6,c),n(16,o)),(n(18,M),n(7,u),n(8,d),n(9,h),n(10,f),n(14,k),n(3,r),n(4,s),n(5,a),n(6,c),n(16,o)),(n(19,w),n(7,u),n(8,d),n(9,h),n(10,f),n(14,k),n(3,r),n(4,s),n(5,a),n(6,c),n(16,o)),(n(20,$),n(7,u),n(8,d),n(9,h),n(10,f),n(14,k),n(3,r),n(4,s),n(5,a),n(6,c),n(16,o))),397312&t.$$.dirty&&p&&function(t,e){let n,o,i="",r="",s="",a="";for(const t of e){n=t.x2-t.x1;const e=Math.round(n).toString()+"px",o=e.length;r=r+"-- "+e+" --|",s=s+"---"+new Array(o+1).join("-")+"---|",a=a+"   "+new Array(o+1).join(" ")+"   |"}i=r+"\n";for(const e of t){o=e.y2-e.y1;const t=Math.round(o).toString()+"px",n=t.length,r=a.substring(1)+"\n";i=i+"|"+r+t+(a.substring(n)+"\n")+"|"+r+s+"\n"}console.log(i)}(b,M),1581056&t.$$.dirty&&g&&console.log("rows:",w," columns:",$),1083392&t.$$.dirty&&n(0,_=lu(y,v,$))},[_,m,x,r,s,a,c,u,d,h,f,y,p,g,k,v,o,b,M,w,$,i,S,T]}var mu={x:{required:!1},y:{required:!1},geometry:{required:!1},radius:{required:!1,default:3},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},xu={x1:{required:!1},x2:{required:!1},y1:{required:!1},y2:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},ku={x:{required:!1},y:{required:!1},geometry:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},vu={x:{required:!1},y:{required:!1},geometry:{required:!1},strokeWidth:{required:!1,default:3},stroke:{required:!1,default:"black"},opacity:{required:!1,default:1}},bu={x:{required:!1},y:{required:!1},geometry:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1},text:{required:!1},fontFamily:{required:!1,default:"Helvetica"},fontSize:{required:!1,default:16},fontWeight:{required:!1,default:"normal"},rotation:{required:!1,default:0},anchorPoint:{required:!1,default:"center"}},Mu={x:{required:!1},y:{required:!1},geometry:{required:!1},shape:{required:!1},size:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},wu={x1:{required:!1},x2:{required:!1},y1:{required:!1},y2:{required:!1},independentAxis:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},strokeOpacity:{required:!1},fillOpacity:{required:!1},opacity:{required:!1,default:1}};function $u(t,e){return"Point"===t?_u(e,mu):"Rectangle"===t?_u(e,xu):"Polygon"===t?_u(e,ku):"Line"===t?_u(e,vu):"Label"===t?_u(e,bu):"Symbol"===t?_u(e,Mu):"Area"===t?_u(e,wu):void 0}function _u(t,e){const n={};for(const o in t){const i=t[o],r=e[o];if(Bo(i)){if(!(o in e))throw Tu(o);n[o]=i}if(Zo(i)&&o in e){if(r.required)throw Su(o);Bo(r.default)?n[o]=r.default:n[o]=i}}return n}const Tu=t=>new Error(`Aesthetic '${t}' not allowed`),Su=t=>new Error(`Required aesthetic '${t}' is missing`);function Ou(t,e,n,o,i){yc(t);const r=function(t,e){const n=pc(t);if("xy"===n)return function(t,e,n){const{scaleX:o,scaleY:i}=n,r=t.constructor===Function?t(n):o(t),s=e.constructor===Function?e(n):i(e);return{type:"Point",coordinates:[r,s]}}(t.x,t.y,e);if("geometry"===n)return function(t,e){if(t.constructor===Function)return t(e);{const n=hc(e.scaleX,e.scaleY);return Cu(t,n)}}(t.geometry,e)}(t,e),s=dc({xNeedsScaling:!1,yNeedsScaling:!1,coordinateTransformationContext:n,zoomContext:o});return s?Cu(r,s):r}function Cu(t,e){return{type:"Point",coordinates:e(t.coordinates)}}const Pu=t=>t.constructor===Array;function Au({x:t,y:e},n,o,i,r,s){gc(t,e);const a=Pu(t),c=Pu(e),u=a?t:t(n),l=c?e:e(n);Iu(u,l);const d=function(t,e,n){return{type:n,x:t,y:e}}(u,l,s),h=o&&"identity"!==o.type&&!0===r.interpolate;if(h){return Li(d,xc(n,o,i,{xNeedsScaling:a,yNeedsScaling:c}),r)}if(!h){const t=dc({sectionContext:n,xNeedsScaling:a,yNeedsScaling:c,coordinateTransformationContext:o,zoomContext:i});return(t=>Bo(t))(t)?Si(d,t,r):Si(d,t=>t,r)}}function Iu(t,e){if(t.constructor!==Array)throw new Error("'x' prop must be Array or function that returns array");if(e.constructor!==Array)throw new Error("'y' prop must be Array or function that returns array");if(t.length!==e.length)throw new Error("Arrays passed to 'x' and 'y' must have the same length")}function Nu({x:t,y:e},n,o,i,r,s,a){!function(t,e){if(![Array,Function].includes(t.constructor))throw new Error("'x' prop must be Array or Function");if(![Array,Function].includes(e.constructor))throw new Error("'y' prop must be Array or Function")}(t,e);const c=Pu(t),u=Pu(e),l=c?t:t(o),d=u?e:e(o);Iu(l,d);const h=fc(n,t.length),f={};for(let t=0;t<h.length;t++){const e=h[t],n=c?l[t]:()=>l[t],y=u?d[t]:()=>d[t];f[e]=Au({x:n,y:y},o,i,r,s,a)}return f}var Wu={cross:[[-.5,-1],[.5,-1],[.5,-.5],[1,-.5],[1,.5],[.5,.5],[.5,1],[-.5,1],[-.5,.5],[-1,.5],[-1,-.5],[-.5,-.5],[-.5,-1],[-.5,-1]],"cross-sharp":[[0,-1],[.2,-.2],[1,0],[.2,.2],[0,1],[-.2,.2],[-1,0],[-.2,-.2],[0,-1]],diamond:[[0,-1],[1,0],[0,1],[-1,0],[0,-1],[0,-1]],"triangle-up":[[0,-1],[1,1],[-1,1],[0,-1],[0,-1]],"triangle-down":[[1,-1],[0,1],[-1,-1],[1,-1],[1,-1]],"triangle-right":[[-1,-1],[1,0],[-1,1],[-1,-1],[-1,-1]],"triangle-left":[[1,-1],[-1,0],[1,1],[1,-1],[1,-1]],star4:[[0,.71],[1,1],[.71,0],[1,-1],[0,-.71],[-1,-1],[-.71,0],[-1,1],[0,.71],[0,.71]],star5:[[0,.5],[.6,.8],[.5,.1],[1,-.3],[.3,-.4],[0,-1],[-.3,-.4],[-1,-.3],[-.5,.1],[-.6,.8],[0,.5],[0,.5]],star:[[0,.5],[.6,.8],[.5,.1],[1,-.3],[.3,-.4],[0,-1],[-.3,-.4],[-1,-.3],[-.5,.1],[-.6,.8],[0,.5],[0,.5]],star6:[[0,.58],[.5,1],[.43,.29],[1,0],[.43,-.29],[.5,-1],[0,-.58],[-.5,-1],[-.43,-.29],[-1,0],[-.43,.29],[-.5,1],[0,.58]],star8:[[0,.54],[.41,1],[.38,.38],[1,.41],[.54,0],[1,-.41],[.38,-.38],[.41,-1],[0,-.54],[-.41,-1],[-.38,-.38],[-1,-.41],[-.54,0],[-1,.41],[-.38,.38],[-.41,1],[0,.54]],pentagon:[[-1,-.24],[0,-1],[1,-.24],[.62,1],[-.62,1],[-1,-.24],[-1,-.24]],hexagon:[[-1,0],[-.57,-1],[.57,-1],[1,0],[.57,1],[-.57,1],[-1,0],[-1,0]],heptagon:[[-1,.29],[-.8,-.6],[0,-1],[.8,-.6],[1,.29],[.45,1],[-.45,1],[-1,.29],[-1,.29]],septagon:[[-1,.29],[-.8,-.6],[0,-1],[.8,-.6],[1,.29],[.45,1],[-.45,1],[-1,.29],[-1,.29]],octagon:[[-1,-.41],[-.41,-1],[.41,-1],[1,-.41],[1,.41],[.41,1],[-.41,1],[-1,.41],[-1,-.41],[-1,-.41]],nonagon:[[.35,-1],[.88,-.55],[1,.15],[.65,.76],[0,1],[-.65,.76],[-1,.15],[-.88,-.55],[-.35,-1],[.35,-1],[.35,-1]],decagon:[[-1,0],[-.81,-.62],[-.31,-1],[.31,-1],[.81,-.62],[1,0],[.81,.62],[.31,1],[-.31,1],[-.81,.62],[-1,0],[-1,0]]};function Lu(t,{radius:e}){const n=t.coordinates[0],o=t.coordinates[1],i=2*Math.PI*e,r=Math.max(Math.ceil(i),9),s={type:"Polygon",coordinates:[[]]};for(let t=0;t<r;t++)s.coordinates[0].push([n+e*Math.cos(Math.PI*t/r*2-Math.PI/2),o+e*Math.sin(Math.PI*t/r*2-Math.PI/2)]);return s.coordinates[0].push(s.coordinates[0][0]),s}function Eu(t,e){const[n,o]=t.coordinates,i=e.shape||"circle",r=e.size||8;if("circle"===i)return function(t,e,n){return Lu({type:"Point",coordinates:[t,e]},{radius:n/2})}(n,o,r);if("square"===i)return function(t,e,n){const o=n/2;return Cc({x1:t-o,x2:t+o,y1:e-o,y2:e+o})}(n,o,r);if(i in Wu){return Fu(n,o,{type:"Polygon",coordinates:[Wu[i]]},r)}return Fu(n,o,i,r)}function Fu(t,e,n,o){const i=o/2;return Si(n,n=>[n[0]*i+t,n[1]*i+e])}function ju(t){const{independentAxis:e,...n}=t,o=["singleton","array"],i=Object.entries(n).filter(([t,e])=>o.includes(e.type)).reduce((t,[e,o])=>(t[e]=n[e],t),{}),r=Object.keys(i);if(!["x1","y1"].every(t=>r.includes(t)))throw new Error("At least x1 and y1 must be provided");if("singleton"===i.x1.type&&"singleton"===i.y1.type)throw new Error("At least x1 or y1 must be passed an array");if(e&&"x"!==e){if("y"!==e)throw new Error('independentAxis must be passed "x" or "y" or left blank');if("singleton"===i.y1.type||"array"===i.y1.type&&i.y1.arrayLength<2)throw new Error('y1 must be passed an array of at least length 2 when independentAxis is "y"');if(r.includes("y2"))throw new Error('independentAxis must be "x" when x1, y1 and y2 are specified')}else{if("singleton"===i.x1.type||"array"===i.x1.type&&i.x1.arrayLength<2)throw new Error('x1 must be passed an array of at least length 2 when independentAxis is "x" or undefined');if(r.includes("x2"))throw new Error('independentAxis must be "y" when x1, y1 and x2 are specified')}if(!Object.values(i).filter(t=>"array"===t.type).map(t=>t.value.length).every((t,e,n)=>t===n[0]))throw new Error("Arrays given must be of equal length");return t}function Yu({independentAxis:t,x1:e,y1:n,x2:o,y2:i}){const r=t&&"x"!==t?"y":"x",[s,a]="x"===r?["x1",e]:["y1",n],[c,u]="x"===r?["y1",n]:["x1",e],[l,d]="x"===r?["y2",i]:["x2",o],h=a.arrayLength,f={singleton:{value:Array(h).fill(u.value),type:"array",arrayLength:h},array:u},y={singleton:{value:Array(h).fill(d.value),type:"array",arrayLength:h},none:{value:Array(h).fill(0),type:"array",arrayLength:h},array:d};return{independentAxis:r,[s]:a,[c]:f[u.type],[l]:y[d.type]}}const Ru={x1:"scaleX",y1:"scaleY",x2:"scaleX",y2:"scaleY"};function Xu({independentAxis:t,...e},n){return{independentAxis:t,...Object.entries(e).reduce((t,[e,o])=>{if(o.scaled)t[e]=o.value;else{const i=n[Ru[e]];t[e]=o.value.map(t=>i(t))}return t},{})}}function zu({x1:t,y1:e,x2:n,y2:o,independentAxis:i}){let r,s;"x"===i?(r=o.map((e,n)=>[t[n],e]),s=e.map((e,n)=>[t[n],e]).reverse()):(r=n.map((t,n)=>[t,e[n]]),s=t.map((t,n)=>[t,e[n]]).reverse());const a=[r[0]];return{type:"Polygon",coordinates:[r.concat(s,a)]}}const Du=t=>t.constructor===Array;function qu(t,e,n,o,i,r){yc(t);const s=pc(t);return"xy"===s?function({x:t,y:e},n,o,i,r,s){gc(t,e);const a=Du(t),c=Du(e),u=a?t:t(o),l=c?e:e(o),{xArray:d,yArray:h}=function(t,e){if(t.constructor!==Array&&e.constructor!==Array)throw new Error("Invalid input: cannot recycle all geometry props");return{xArray:t.constructor===Array?t:Hu(t,e.length),yArray:e.constructor===Array?e:Hu(e,t.length)}}(u,l);Iu(d,h);const f=fc(n,d.length),y=dc({sectionContext:o,xNeedsScaling:a,yNeedsScaling:c,coordinateTransformationContext:i,zoomContext:r});return Gu(d,h,f,y||(t=>t))}(t,e,n,o,i):"geometry"===s?function(t,e,n,o,i,r){mc(t.geometry);const s=Du(t.geometry),a=s?t.geometry:t.geometry(n);vc(a);const c=fc(e,a.length),u=dc({sectionContext:n,xNeedsScaling:s,yNeedsScaling:s,coordinateTransformationContext:o,zoomContext:i});return Bu(a,c,u||(t=>t))}(t,e,n,o,i):void 0}function Hu(t,e){return new Array(e).fill(t)}function Gu(t,e,n,o){const i={};for(let r=0;r<n.length;r++){i[n[r]]={type:"Point",coordinates:o([t[r],e[r]])}}return i}function Bu(t,e,n){const o={};for(let i=0;i<e.length;i++){o[e[i]]={type:"Point",coordinates:n(t[i].coordinates)}}return o}function Zu(t,e){return new Array(e).fill(t)}const Vu=["x1","x2","y1","y2"];const Ju={x1:"minX",x2:"maxX",y1:"minY",y2:"maxY"};function Ku(t,e){return e[Ju[t]]}const Uu=new Error("RectangleLayer: invalid coordinate specification");function Qu(t,e,n,o,i){const r={};for(const s in t){const a=t[s];let c;const u=s.startsWith("x")?e.scaleX:e.scaleY;o[s]&&(c=Zu(a,i)),o[s]||(c=a),r[s]=n[s]?c.map(u):c}return r}function tl(t,e){if(void 0===t)return()=>{};if(t.constructor===Function)return t;const n=function(t,e){const n=e.length,o={};if(t.constructor===Array){!function(t,e){if(t.length!==e)throw new Error("If provided as Arrays, all positioning props must be the same length")}(t,n);for(let i=0;i<n;i++){const n=e[i];o[n]=t[i]}}else for(let i=0;i<n;i++){const n=e[i];o[n]=t}return o}(t,e);return t=>n[t]}const el=new Proxy({Point:Ou,Rectangle:function(t,e,n,o,i){const r=Cc(Mc(t,e));return kc({geometry:()=>r},e,n,o,i)},Polygon:function(t,e,n,o,i){yc(t);const r=pc(t);return"xy"===r?Au(t,e,n,o,i,"Polygon"):"geometry"===r?kc(t,e,n,o,i):void 0},Line:function(t,e,n,o,i){yc(t);const r=pc(t);return"xy"===r?Au(t,e,n,o,i,"LineString"):"geometry"===r?kc(t,e,n,o,i):void 0},Label:Ou,Symbol:function(t,e,n,o,i){return Eu(Ou(t,e,n,o),t)},Area:function(t,e,n,o,i){const r=zu(Xu(Yu(ju(function({independentAxis:t,...e},n){const o=Object.entries(e).reduce((t,[e,o])=>{const i="function"==typeof o?o(n):o;return t[e]={type:void 0===i?"none":Array.isArray(i)?"array":"singleton",...Array.isArray(i)&&{arrayLength:i.length},value:i,scaled:"function"==typeof o},t},{});return o.independentAxis=t&&t.toLowerCase(),o}((({x1:t,y1:e,x2:n,y2:o,independentAxis:i})=>({x1:t,y1:e,x2:n,y2:o,independentAxis:i}))(t),e))),e));return kc({geometry:()=>r},e,n,o,i)}},{get:(t,e)=>{if(e in t)return t[e];throw new Error(`Invalid Mark type: '${e}'`)}}),nl=new Proxy({Point:qu,Rectangle:function(t,e,n,o,i,r){const{scaledCoordinates:s,length:a}=function(t,e){$c(t);const n=function(t){const e={};for(const n of Vu){const o=t[n];e[n]=Bo(o)&&o.constructor!==Function}return e}(t),o=function(t,e){const n={};for(const o in t){const i=t[o];i.constructor===Function?n[o]=i(e):n[o]=i}return n}(function(t,e){const n={};for(const o of Vu){const i=t[o];n[o]=Zo(i)?Ku(o,e):i}return n}(t,e),e),i=function(t){let e,n=!1;for(const o in t){const i=t[o];if(i.constructor===Array&&(n=!0,e=e||i.length,e!==i.length))throw Uu}if(!n)throw Uu;return e}(o),r=function(t){const e={};for(const n in t){const o=t[n];e[n]=o.constructor!==Array}return e}(o);return{scaledCoordinates:Qu(o,e,n,r,i),length:i}}(t,n),c=function(t,e){const n=[];for(let o=0;o<e;o++)n.push(Cc({x1:t.x1[o],x2:t.x2[o],y1:t.y1[o],y2:t.y2[o]}));return n}(s,a);return bc({geometry:()=>c},e,n,o,i,r)},Polygon:function(t,e,n,o,i,r){yc(t);const s=pc(t);return"xy"===s?Nu(t,e,n,o,i,r,"Polygon"):"geometry"===s?bc(t,e,n,o,i,r):void 0},Line:function(t,e,n,o,i,r){yc(t);const s=pc(t);return"xy"===s?Nu(t,e,n,o,i,r,"LineString"):"geometry"===s?bc(t,e,n,o,i,r):void 0},Label:qu,Symbol:function(t,e,n,o,i,r){return function(t,e){const n=Object.keys(t),o=tl(e.shape,n),i=tl(e.size,n),r={};for(const e in t){const n=o(e),s=i(e);r[e]=Eu(t[e],{shape:n,size:s})}return r}(qu(t,e,n,o,i),t)},Area:function(t,e,n,o,i,r){const s=(({x1:t,y1:e,x2:n,y2:o,independentAxis:i})=>({x1:t,y1:e,x2:n,y2:o,independentAxis:i}))(t),{numAreas:a,independentAxis:c,...u}=function({numAreas:t,independentAxis:e,x1:n,y1:o,x2:i,y2:r}){const s=e&&"x"!==e?"y":"x",[a,c]="x"===s?["x1",n]:["y1",o],[u,l]="x"===s?["x2",i]:["y2",r],[d,h]="x"===s?["y1",o]:["x1",n],[f,y]="x"===s?["y2",r]:["x2",i],p={array:{value:Array(t).fill(c.value),type:"array of arrays",numAreas:t,scaled:c.scaled},"array of arrays":c};return{numAreas:t,independentAxis:s,[a]:p[c.type],[u]:l,[d]:h,[f]:y}}(function(t){const{independentAxis:e,...n}=t,{x1:o,x2:i,y1:r,y2:s}=n;Object.values(n).forEach(t=>{if("singleton"===t.type)throw new Error("Props passed to the AreaLayer must be either an array or an array of arrays")});const a=e&&"x"!==e?"y":"x",[c,u]="x"===a?["y1",r]:["x1",o],[l,d]="x"===a?["y2",s]:["x2",i];if("array"===u.type||"array"===d.type)throw new Error(`${c} and ${l} must be passed an array of arrays when independentAxis is "${a}"`);const h=Object.values(n).filter(t=>"array of arrays"===t.type).map(t=>t.numAreas);if(!h.every((t,e,n)=>t===n[0]))throw new Error("Number of areas declared per prop must be equal");return{numAreas:h[0],independentAxis:e,...t}}(function({independentAxis:t,...e},n){const o=Object.entries(e).reduce((t,[e,o])=>{const i="function"==typeof o?o(n):o,r=t=>void 0===t,s=t=>!r(t)&&!Array.isArray(t),a=t=>!r(t)&&!s(t)&&t.every(t=>Array.isArray(t));return t[e]={type:r(i)?"none":s(i)?"singleton":a(i)?"array of arrays":"array",...a(i)&&{numAreas:i.length},value:i,scaled:"function"==typeof o},t},{});return o.independentAxis=t&&t.toLowerCase(),o}(s,n))),l=[...Array(a).keys()].map(t=>Object.entries(u).reduce((e,[n,o])=>{const i="array of arrays"===o.type;return e[n]={type:i?"array":"none",value:i?o.value[t]:o.value,...i&&{arrayLength:o.value[t].length},scaled:o.scaled},e.independentAxis=c,e},{})).map(t=>zu(Xu(Yu(ju(t)),n)));return bc({geometry:()=>l},e,n,o,i,r)}},{get:(t,e)=>{if(e in t)return t[e];throw new Error(`Invalid Layer type: '${e}'`)}});function ol(t,{strokeWidth:e}){const n=t.coordinates;if("LineString"===t.type){return{type:"Polygon",coordinates:[il(n,e)]}}if("MultiLineString"===t.type){const t=[];for(let o=0;o<n.length;o++)t.push([il(n[o],e)]);return{type:"MultiPolygon",coordinates:t}}}function il(t,e){const n=t.length,o=n-1,i=e/2,r=new Array(n),s=new Array(n);for(let e=0;e<n;e++){if(0===e){const[e,n]=rl(t,i);r[0]=e,s[o]=n}if(e===o){const[e,n]=sl(t,i);r[o]=e,s[0]=n}if(e>0&&e<o){const[n,a]=al(t,e,i);r[e]=n,s[o-e]=a}}const a=r.concat(s);return function(t){const e=t[0],n=t[t.length-1];return!(e[0]===n[0]&&e[1]===n[1])}(a)&&a.push(a[0]),a}function rl(t,e){const n=ul(0,t);return hl(n,n[0],e)}function sl(t,e){const n=cl(t.length-1,t);return hl(n,n[1],e)}function al(t,e,n){const o=cl(e,t),i=ul(e,t),r=ll(o),s=ll(i);if(r[0]===s[0]&&r[1]===s[1]){return hl(o,o[1],n)}{const t=hl(o,o[0],n),e=hl(i,i[1],n);return[fl(t[0],r,e[0],s),fl(t[1],r,e[1],s)]}}const cl=(t,e)=>[e[t-1],e[t]],ul=(t,e)=>[e[t],e[t+1]];function ll(t){const[e,n]=t,o=oi(e,n);return[(n[0]-e[0])/o,(n[1]-e[1])/o]}function dl(t,e,n){return[t[0]+e[0]*n,t[1]+e[1]*n]}function hl(t,e,n){const o=ll(t),i=[-(r=o)[1],r[0]];var r;return[dl(e,i,n),dl(e,i,-n)]}function fl(t,e,n,o){const i=function(t,e,n,o){const i=t[0]-n[0],r=t[1]-n[1],s=e[0],a=o[0],c=e[1],u=o[1];return(a*r-i*u)/(s*u-a*c)}(t,e,n,o);return[t[0]+e[0]*i,t[1]+e[1]*i]}const yl={Point:Lu,Line:ol},pl={Point:function(t,{radiusObject:e}){const n={};for(const o in t)n[o]=Lu(t[o],{radius:e[o]});return n},Line:function(t,{strokeWidthObject:e}){const n={};for(const o in t)n[o]=ol(t[o],{strokeWidth:e[o]});return n}};function gl(t,e,n,o){const i={markId:e};let r;return"Point"===t&&(r={pixelGeometry:n.pixelGeometry,radius:o.radius}),"Label"===t&&(r={pixelGeometry:n.pixelGeometry,radius:o.fontSize}),"Rectangle"===t&&(r={screenGeometry:n.screenGeometry}),"Polygon"===t&&(r={screenGeometry:n.screenGeometry}),"Line"===t&&(r={pixelGeometry:n.pixelGeometry,strokeWidth:o.strokeWidth}),"Symbol"===t&&(r={screenGeometry:n.screenGeometry}),"Area"===t&&(r={screenGeometry:n.screenGeometry}),i.attributes=r,i}function ml(t){const e=t-1;return e*e*e+1}function xl(t){return"[object Date]"===Object.prototype.toString.call(t)}function kl(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((e,n)=>kl(t[n],e));return t=>n.map(e=>e(t))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(xl(t)&&xl(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),o={};return n.forEach(n=>{o[n]=kl(t[n],e[n])}),t=>{const e={};return n.forEach(n=>{e[n]=o[n](t)}),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}function vl(t,e={}){const i=ut(t);let r,s=t;function a(a,c){if(null==t)return i.set(t=a),Promise.resolve();s=a;let u=r,l=!1,{delay:d=0,duration:h=400,easing:f=n,interpolate:y=kl}=o(o({},e),c);const k=p()+d;let v;return r=function(t){let e;return 0===m.size&&g(x),{promise:new Promise(n=>{m.add(e={c:t,f:n})}),abort(){m.delete(e)}}}(e=>{if(e<k)return!0;l||(v=y(t,a),"function"==typeof h&&(h=h(t,a)),l=!0),u&&(u.abort(),u=null);const n=e-k;return n>h?(i.set(t=a),!1):(i.set(t=v(f(n/h))),!0)}),r.promise}return{set:a,update:(e,n)=>a(e(s,t),n),subscribe:i.subscribe}}function bl(t,e,n){if(Zo(n)||Zo(e))return ut(e);if(n.constructor===Number){return vl(e,Ml(t,n))}if(n.constructor===Object){if(!(t in n))return ut(e);const o=n[t];if(o&&o.constructor===Number){return vl(e,Ml(t,o))}if(o&&o.constructor===Object){return vl(e,function(t,e){return"geometry"===t?Object.assign({interpolate:Ts},e):Object.assign({interpolate:ue},e)}(t,o))}}throw new Error(`Invalid transition for ${t}`)}function Ml(t,e){return"geometry"===t?{duration:e,easing:ml,interpolate:Ts}:{duration:e,easing:ml,interpolate:ue}}function wl(t,e){return void 0===t||void 0===e?t===e:t.constructor!==Object?t===e:function(t,e){if(e.constructor!==Object)return!1;if(_l(t)!==_l(e))return!1;for(const n in t){const o=t[n],i=e[n];if(o.constructor!==Object)return o===i;if(!$l(o,i))return!1}return!0}(t,e)}function $l(t,e){if(e.constructor!==Object)return!1;if(_l(t)!==_l(e))return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function _l(t){return Object.keys(t).length}function Tl(t,e,n){if(Zo(n)||Zo(e))return ut(e);if(n.constructor===Number){return vl(e,Sl(t,n))}if(n.constructor===Object){if(!(t in n))return ut(e);const o=n[t];if(o&&o.constructor===Number){return vl(e,Sl(t,o))}if(o&&o.constructor===Object){return vl(e,function(t,e){return"geometry"===t?Object.assign({interpolate:Ss},e):Object.assign({interpolate:Ol},e)}(t,o))}}throw new Error(`Invalid transition for ${t}`)}function Sl(t,e){return"geometry"===t?{duration:e,easing:ml,interpolate:Ss}:{duration:e,easing:ml,interpolate:Ol}}function Ol(t,e){const n={};for(const o in t)o in e&&(n[o]=t[o]);return ue(n,e)}function Cl(...t){for(const e of t)if(void 0!==e)return!0;return!1}function Pl(t,e){const n=Object.assign({simplify:!1,simplificationTreshold:1,interpolate:!0,interpolationTreshold:5,decimals:2},t);return e&&"identity"===e.type&&(n.interpolate=!1),n}const Al=Ho();function Il(t){return Al(t)}function Nl(t){switch(t){case"center":return{textAnchor:"middle",dominantBaseline:"middle"};case"lb":return{textAnchor:"start",dominantBaseline:"alphabetic"};case"lt":return{textAnchor:"start",dominantBaseline:"hanging"};case"rt":return{textAnchor:"end",dominantBaseline:"hanging"};case"rb":return{textAnchor:"end",dominantBaseline:"alphabetic"};case"l":return{textAnchor:"start",dominantBaseline:"middle"};case"r":return{textAnchor:"end",dominantBaseline:"middle"};case"b":return{textAnchor:"middle",dominantBaseline:"alphabetic"};case"t":return{textAnchor:"middle",dominantBaseline:"hanging"};default:return{textAnchor:"middle",dominantBaseline:"middle"}}}function Wl(t){let e,n,o,i,r=t[26]&&Ll(t),s=t[27]&&El(t),a=t[28]&&Fl(t),c=t[29]&&jl(t);return{c(){r&&r.c(),e=$(),s&&s.c(),n=$(),a&&a.c(),o=$(),c&&c.c(),i=_()},m(t,u){r&&r.m(t,u),v(t,e,u),s&&s.m(t,u),v(t,n,u),a&&a.m(t,u),v(t,o,u),c&&c.m(t,u),v(t,i,u)},p(t,u){t[26]?r?r.p(t,u):(r=Ll(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),t[27]?s?s.p(t,u):(s=El(t),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),t[28]?a?a.p(t,u):(a=Fl(t),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null),t[29]?c?c.p(t,u):(c=jl(t),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},d(t){r&&r.d(t),t&&b(e),s&&s.d(t),t&&b(n),a&&a.d(t),t&&b(o),c&&c.d(t),t&&b(i)}}}function Ll(t){let e,n,o;return{c(){e=M("path"),T(e,"class",n=t[0].toLowerCase()),T(e,"d",o=Il(t[16])),T(e,"fill",t[18]),T(e,"stroke",t[19]),T(e,"stroke-width",t[20]),T(e,"fill-opacity",t[21]),T(e,"stroke-opacity",t[22]),T(e,"opacity",t[23])},m(t,n){v(t,e,n)},p(t,i){1&i[0]&&n!==(n=t[0].toLowerCase())&&T(e,"class",n),65536&i[0]&&o!==(o=Il(t[16]))&&T(e,"d",o),262144&i[0]&&T(e,"fill",t[18]),524288&i[0]&&T(e,"stroke",t[19]),1048576&i[0]&&T(e,"stroke-width",t[20]),2097152&i[0]&&T(e,"fill-opacity",t[21]),4194304&i[0]&&T(e,"stroke-opacity",t[22]),8388608&i[0]&&T(e,"opacity",t[23])},d(t){t&&b(e)}}}function El(t){let e,n,o;return{c(){e=M("circle"),T(e,"class","point"),T(e,"cx",n=t[16].coordinates[0]),T(e,"cy",o=t[16].coordinates[1]),T(e,"r",t[17]),T(e,"fill",t[18]),T(e,"stroke",t[19]),T(e,"stroke-width",t[20]),T(e,"fill-opacity",t[21]),T(e,"stroke-opacity",t[22]),T(e,"opacity",t[23])},m(t,n){v(t,e,n)},p(t,i){65536&i[0]&&n!==(n=t[16].coordinates[0])&&T(e,"cx",n),65536&i[0]&&o!==(o=t[16].coordinates[1])&&T(e,"cy",o),131072&i[0]&&T(e,"r",t[17]),262144&i[0]&&T(e,"fill",t[18]),524288&i[0]&&T(e,"stroke",t[19]),1048576&i[0]&&T(e,"stroke-width",t[20]),2097152&i[0]&&T(e,"fill-opacity",t[21]),4194304&i[0]&&T(e,"stroke-opacity",t[22]),8388608&i[0]&&T(e,"opacity",t[23])},d(t){t&&b(e)}}}function Fl(t){let e,n;return{c(){e=M("path"),T(e,"class","line"),T(e,"d",n=Il(t[16])),T(e,"fill","none"),T(e,"stroke-width",t[20]),T(e,"stroke",t[19]),T(e,"opacity",t[23])},m(t,n){v(t,e,n)},p(t,o){65536&o[0]&&n!==(n=Il(t[16]))&&T(e,"d",n),1048576&o[0]&&T(e,"stroke-width",t[20]),524288&o[0]&&T(e,"stroke",t[19]),8388608&o[0]&&T(e,"opacity",t[23])},d(t){t&&b(e)}}}function jl(t){let e,n,o,i,r,s,a,c=t[2].text+"";return{c(){e=M("text"),n=w(c),T(e,"stroke-opacity",t[22]),T(e,"class","label"),T(e,"y",o=t[16].coordinates[1]),T(e,"fill",t[18]),T(e,"stroke",t[19]),T(e,"stroke-width",t[20]),T(e,"fill-opacity",t[21]),T(e,"x",i=t[16].coordinates[0]),T(e,"opacity",t[23]),T(e,"transform",t[14]),T(e,"font-family",t[1]),T(e,"font-size",r=t[24]+"px"),T(e,"font-weight",t[25]),T(e,"text-anchor",s=t[15].textAnchor),T(e,"dominant-baseline",a=t[15].dominantBaseline)},m(t,o){v(t,e,o),k(e,n)},p(t,u){4&u[0]&&c!==(c=t[2].text+"")&&S(n,c),4194304&u[0]&&T(e,"stroke-opacity",t[22]),65536&u[0]&&o!==(o=t[16].coordinates[1])&&T(e,"y",o),262144&u[0]&&T(e,"fill",t[18]),524288&u[0]&&T(e,"stroke",t[19]),1048576&u[0]&&T(e,"stroke-width",t[20]),2097152&u[0]&&T(e,"fill-opacity",t[21]),65536&u[0]&&i!==(i=t[16].coordinates[0])&&T(e,"x",i),8388608&u[0]&&T(e,"opacity",t[23]),16384&u[0]&&T(e,"transform",t[14]),2&u[0]&&T(e,"font-family",t[1]),16777216&u[0]&&r!==(r=t[24]+"px")&&T(e,"font-size",r),33554432&u[0]&&T(e,"font-weight",t[25]),32768&u[0]&&s!==(s=t[15].textAnchor)&&T(e,"text-anchor",s),32768&u[0]&&a!==(a=t[15].dominantBaseline)&&T(e,"dominant-baseline",a)},d(t){t&&b(e)}}}function Yl(t){let n,o="svg"===t[30].output(),i=o&&Wl(t);return{c(){i&&i.c(),n=_()},m(t,e){i&&i.m(t,e),v(t,n,e)},p(t,e){1073741824&e[0]&&(o="svg"===t[30].output()),o?i?i.p(t,e):(i=Wl(t),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(t){i&&i.d(t),t&&b(n)}}}let Rl=0;function Xl(t,n,o){let i,r,s,a,c,d,h,f,y,p,g,m,x,k,v,b,M=e,w=()=>(M(),M=u(ae,t=>o(88,a=t)),ae),$=e,_=()=>($(),$=u(Kt,t=>o(16,c=t)),Kt),T=e,S=()=>(T(),T=u(Ut,t=>o(17,d=t)),Ut),O=e,C=()=>(O(),O=u(Qt,t=>o(18,h=t)),Qt),P=e,L=()=>(P(),P=u(te,t=>o(19,f=t)),te),E=e,F=()=>(E(),E=u(ee,t=>o(20,y=t)),ee),j=e,Y=()=>(j(),j=u(ne,t=>o(21,p=t)),ne),R=e,X=()=>(R(),R=u(oe,t=>o(22,g=t)),oe),z=e,D=()=>(z(),z=u(ie,t=>o(23,m=t)),ie),q=e,H=()=>(q(),q=u(re,t=>o(24,x=t)),re),G=e,B=()=>(G(),G=u(se,t=>o(25,k=t)),se);t.$$.on_destroy.push(()=>M()),t.$$.on_destroy.push(()=>$()),t.$$.on_destroy.push(()=>T()),t.$$.on_destroy.push(()=>O()),t.$$.on_destroy.push(()=>P()),t.$$.on_destroy.push(()=>E()),t.$$.on_destroy.push(()=>j()),t.$$.on_destroy.push(()=>R()),t.$$.on_destroy.push(()=>z()),t.$$.on_destroy.push(()=>q()),t.$$.on_destroy.push(()=>G());const Z="mark"+Rl++;let V=!0;const J=()=>!V;let{type:K}=n,{x:U}=n,{y:Q}=n,{x1:tt}=n,{x2:et}=n,{y1:nt}=n,{y2:ot}=n,{geometry:it}=n,{shape:rt}=n,{size:st}=n,{independentAxis:at}=n,{radius:ct}=n,{fill:ut}=n,{stroke:lt}=n,{strokeWidth:dt}=n,{strokeOpacity:ft}=n,{fillOpacity:yt}=n,{opacity:pt}=n,{text:gt}=n,{fontFamily:mt}=n,{fontSize:xt}=n,{fontWeight:kt}=n,{rotation:vt}=n,{anchorPoint:bt}=n,{transition:Mt}=n,{onClick:wt}=n,{onMousedown:$t}=n,{onMouseup:_t}=n,{onMouseover:Tt}=n,{onMouseout:St}=n,{onMousedrag:Ot}=n,{onTouchdown:Ct}=n,{onTouchup:Pt}=n,{onTouchover:At}=n,{onTouchout:It}=n,{onTouchdrag:Nt}=n,{onSelect:Wt}=n,{onDeselect:Lt}=n,{renderSettings:Et}=n,{blockReindexing:Ft=!1}=n,{_asPolygon:jt=!0}=n,Yt=$u(K,{x:U,y:Q,x1:tt,x2:et,y1:nt,y2:ot,geometry:it,shape:rt,size:st,independentAxis:at,radius:ct,fill:ut,stroke:lt,strokeWidth:dt,strokeOpacity:ft,fillOpacity:yt,opacity:pt,text:gt,fontFamily:mt,fontSize:xt,fontWeight:kt,rotation:vt,anchorPoint:bt}),Rt={x:U,y:Q,x1:tt,x2:et,y1:nt,y2:ot,geometry:it,shape:rt,size:st,independentAxis:at},Xt=el[K],zt=yl[K],Dt=!0===jt&&void 0!==zt;const qt=ht();l(t,qt,t=>o(30,b=t));const Ht=Ye();l(t,Ht,t=>o(85,i=t));const Gt=Ve();l(t,Gt,t=>o(86,r=t));const Bt=He();l(t,Bt,t=>o(92,v=t));const Zt=en();let Vt,Jt;l(t,Zt,t=>o(87,s=t)),ve(),be();let Kt=bl("geometry",Jt,Mt);_();let Ut=bl("radius",Yt.radius,Mt);S();let Qt=bl("fill",Yt.fill,Mt);C();let te=bl("stroke",Yt.stroke,Mt);L();let ee=bl("strokeWidth",Yt.strokeWidth,Mt);F();let ne=bl("fillOpacity",Yt.fillOpacity,Mt);Y();let oe=bl("strokeOpacity",Yt.strokeOpacity,Mt);X();let ie=bl("opacity",Yt.opacity,Mt);D();let re=bl("fontSize",Yt.fontSize,Mt);H();let se=bl("fontWeight",Yt.fontWeight,Mt);B();let ae=bl("rotation",Yt.rotation,Mt);w();let ce,ue,le,de,he,fe,ye,pe,ge=`rotate(${a}, ${c.coordinates[0]}, ${c.coordinates[1]})`,me=Nl(Yt.anchorPoint),xe=!1,ke=!1;function ve(){Vt=Xt(Rt,i,r,s,Pl(Et,r))}function be(){o(81,Jt=Dt?zt(Vt,Yt):Vt)}function Me(){if(V||!Ft&&!i.blockReindexing){if(we(),ue){const t=v.mouse().marks();t.loadMark(K,$e()),wt&&t.addMarkInteraction("click",Z,wt),$t&&t.addMarkInteraction("mousedown",Z,$t),_t&&t.addMarkInteraction("mouseup",Z,_t),St&&t.addMarkInteraction("mouseout",Z,St),Tt&&t.addMarkInteraction("mouseover",Z,Tt),Ot&&t.addMarkInteraction("mousedrag",Z,Ot)}if(le){const t=v.touch().marks();t.loadMark(K,$e()),Ct&&t.addMarkInteraction("touchdown",Z,Ct),Pt&&t.addMarkInteraction("touchup",Z,Pt),At&&t.addMarkInteraction("touchover",Z,At),It&&t.addMarkInteraction("touchout",Z,It),Nt&&t.addMarkInteraction("touchdrag",Z,Nt)}}if(function(){const t=v.select();t.markIsLoaded(Z)&&t.removeMark(Z)}(),de){v.select().loadMark(K,$e(),{onSelect:Wt,onDeselect:Lt})}}function we(){if(dn.hasMouse){const t=v.mouse().marks();t.markIsLoaded(Z)&&(t.removeAllMarkInteractions(Z),t.removeMark(Z))}if(dn.hasTouch){const t=v.touch().marks();t.markIsLoaded(Z)&&(t.removeAllMarkInteractions(Z),t.removeMark(Z))}}function $e(){return gl(K,Z,{screenGeometry:Jt,pixelGeometry:Vt},Yt)}return A(()=>{wl(ce,Mt)||(ce=Mt,_(o(3,Kt=bl("geometry",c,Mt))),S(o(4,Ut=bl("radius",d,Mt))),C(o(5,Qt=bl("fill",h,Mt))),L(o(6,te=bl("stroke",f,Mt))),F(o(7,ee=bl("strokeWidth",y,Mt))),Y(o(8,ne=bl("fillOpacity",p,Mt))),X(o(9,oe=bl("strokeOpacity",g,Mt))),D(o(10,ie=bl("opacity",m,Mt))),H(o(11,re=bl("fontSize",x,Mt))),B(o(12,se=bl("fontWeight",k,Mt))),w(o(13,ae=bl("rotation",a,Mt))))}),N(()=>{V=!1}),I(()=>{Me()}),W(()=>{we()}),t.$set=t=>{"type"in t&&o(0,K=t.type),"x"in t&&o(36,U=t.x),"y"in t&&o(37,Q=t.y),"x1"in t&&o(38,tt=t.x1),"x2"in t&&o(39,et=t.x2),"y1"in t&&o(40,nt=t.y1),"y2"in t&&o(41,ot=t.y2),"geometry"in t&&o(42,it=t.geometry),"shape"in t&&o(43,rt=t.shape),"size"in t&&o(44,st=t.size),"independentAxis"in t&&o(45,at=t.independentAxis),"radius"in t&&o(46,ct=t.radius),"fill"in t&&o(47,ut=t.fill),"stroke"in t&&o(48,lt=t.stroke),"strokeWidth"in t&&o(49,dt=t.strokeWidth),"strokeOpacity"in t&&o(50,ft=t.strokeOpacity),"fillOpacity"in t&&o(51,yt=t.fillOpacity),"opacity"in t&&o(52,pt=t.opacity),"text"in t&&o(53,gt=t.text),"fontFamily"in t&&o(1,mt=t.fontFamily),"fontSize"in t&&o(54,xt=t.fontSize),"fontWeight"in t&&o(55,kt=t.fontWeight),"rotation"in t&&o(56,vt=t.rotation),"anchorPoint"in t&&o(57,bt=t.anchorPoint),"transition"in t&&o(58,Mt=t.transition),"onClick"in t&&o(59,wt=t.onClick),"onMousedown"in t&&o(60,$t=t.onMousedown),"onMouseup"in t&&o(61,_t=t.onMouseup),"onMouseover"in t&&o(62,Tt=t.onMouseover),"onMouseout"in t&&o(63,St=t.onMouseout),"onMousedrag"in t&&o(64,Ot=t.onMousedrag),"onTouchdown"in t&&o(65,Ct=t.onTouchdown),"onTouchup"in t&&o(66,Pt=t.onTouchup),"onTouchover"in t&&o(67,At=t.onTouchover),"onTouchout"in t&&o(68,It=t.onTouchout),"onTouchdrag"in t&&o(69,Nt=t.onTouchdrag),"onSelect"in t&&o(70,Wt=t.onSelect),"onDeselect"in t&&o(71,Lt=t.onDeselect),"renderSettings"in t&&o(72,Et=t.renderSettings),"blockReindexing"in t&&o(73,Ft=t.blockReindexing),"_asPolygon"in t&&o(74,jt=t._asPolygon)},t.$$.update=()=>{3&t.$$.dirty[0]|134217696&t.$$.dirty[1]&&J()&&o(2,Yt=$u(K,{x:U,y:Q,x1:tt,x2:et,y1:nt,y2:ot,geometry:it,shape:rt,size:st,independentAxis:at,radius:ct,fill:ut,stroke:lt,strokeWidth:dt,strokeOpacity:ft,fillOpacity:yt,opacity:pt,text:gt,fontFamily:mt,fontSize:xt,fontWeight:kt,rotation:vt,anchorPoint:bt})),32736&t.$$.dirty[1]&&J()&&o(76,Rt={x:U,y:Q,x1:tt,x2:et,y1:nt,y2:ot,geometry:it,shape:rt,size:st,independentAxis:at}),1&t.$$.dirty[0]&&J()&&(Xt=el[K],o(78,zt=yl[K])),69632&t.$$.dirty[2]&&J()&&o(79,Dt=!0===jt&&void 0!==zt),58737664&t.$$.dirty[2]&&J()&&(o(83,xe=!0),o(84,ke=!0)),148&t.$$.dirty[0]|131072&t.$$.dirty[2]&&J()&&(Dt||(Ut.set(Yt.radius),ee.set(Yt.strokeWidth)),Dt&&o(84,ke=!0)),36&t.$$.dirty[0]&&J()&&Qt.set(Yt.fill),68&t.$$.dirty[0]&&J()&&te.set(Yt.stroke),132&t.$$.dirty[0]&&J()&&ee.set(Yt.strokeWidth),260&t.$$.dirty[0]&&J()&&ne.set(Yt.fillOpacity),516&t.$$.dirty[0]&&J()&&oe.set(Yt.strokeOpacity),1028&t.$$.dirty[0]&&J()&&ie.set(Yt.opacity),2052&t.$$.dirty[0]&&J()&&re.set(Yt.fontSize),4100&t.$$.dirty[0]&&J()&&se.set(Yt.fontWeight),8196&t.$$.dirty[0]&&J()&&ae.set(Yt.rotation),8&t.$$.dirty[0]|6815744&t.$$.dirty[2]&&J()&&(xe&&ve(),ke&&(be(),Kt.set(Jt),Me()),o(83,xe=!1),o(84,ke=!1)),65536&t.$$.dirty[0]|67108864&t.$$.dirty[2]&&J()&&o(14,ge=`rotate(${a}, ${c.coordinates[0]}, ${c.coordinates[1]})`),4&t.$$.dirty[0]&&J()&&o(15,me=Nl(Yt.anchorPoint)),1879048192&t.$$.dirty[1]|7&t.$$.dirty[2]&&(ue=dn.hasMouse&&Cl(wt,$t,_t,Tt,St,Ot)),248&t.$$.dirty[2]&&(le=dn.hasTouch&&Cl(Ct,Pt,At,It,Nt)),768&t.$$.dirty[2]&&(de=void 0!==Wt||void 0!==Lt),1&t.$$.dirty[0]|131072&t.$$.dirty[2]&&o(26,he=!["Point","Line","Label"].includes(K)||Dt),1&t.$$.dirty[0]|131072&t.$$.dirty[2]&&o(27,fe="Point"===K&&!Dt),1&t.$$.dirty[0]|131072&t.$$.dirty[2]&&o(28,ye="Line"===K&&!Dt),1&t.$$.dirty[0]&&o(29,pe="Label"===K)},[K,mt,Yt,Kt,Ut,Qt,te,ee,ne,oe,ie,re,se,ae,ge,me,c,d,h,f,y,p,g,m,x,k,he,fe,ye,pe,b,qt,Ht,Gt,Bt,Zt,U,Q,tt,et,nt,ot,it,rt,st,at,ct,ut,lt,dt,ft,yt,pt,gt,xt,kt,vt,bt,Mt,wt,$t,_t,Tt,St,Ot,Ct,Pt,At,It,Nt,Wt,Lt,Et,Ft,jt]}class zl extends at{constructor(t){super(),st(this,t,Xl,Yl,c,{type:0,x:36,y:37,x1:38,x2:39,y1:40,y2:41,geometry:42,shape:43,size:44,independentAxis:45,radius:46,fill:47,stroke:48,strokeWidth:49,strokeOpacity:50,fillOpacity:51,opacity:52,text:53,fontFamily:1,fontSize:54,fontWeight:55,rotation:56,anchorPoint:57,transition:58,onClick:59,onMousedown:60,onMouseup:61,onMouseover:62,onMouseout:63,onMousedrag:64,onTouchdown:65,onTouchup:66,onTouchover:67,onTouchout:68,onTouchdrag:69,onSelect:70,onDeselect:71,renderSettings:72,blockReindexing:73,_asPolygon:74},[-1,-1,-1,-1])}}function Dl(t,e){let n=0;for(const o in[t,e])ql(o)&&(n+=1);if(n<2)throw new Error("Couldn't construct legend because of invalid x, y inputs.");return 2!==n||void 0!==t||void 0!==e}function ql(t){return!isNaN(t)||"[object Function]"==={}.toString.call(t)||void 0===t}function Hl(t){let e,n;const o=new zl({props:{type:"Label",x:t[44],y:t[45],geometry:t[4],fill:t[6],stroke:t[7],strokeWidth:t[8],strokeOpacity:t[9],fillOpacity:t[10],opacity:t[11],text:t[5],fontFamily:t[12],fontSize:t[13],fontWeight:t[14],rotation:t[15],anchorPoint:t[16],transition:t[29],onClick:t[30],onMouseover:t[31],onMouseout:t[32],_asPolygon:!1}}),i=new zl({props:{type:"Label",x:t[46],y:t[47],geometry:t[4],fill:t[18],stroke:t[19],strokeWidth:t[20],strokeOpacity:t[21],fillOpacity:t[22],opacity:t[23],text:t[17],fontFamily:t[24],fontSize:t[25],fontWeight:t[26],rotation:t[27],anchorPoint:t[28],transition:t[29],onClick:t[30],onMouseover:t[31],onMouseout:t[32],_asPolygon:!1}});return{c(){ot(o.$$.fragment),e=$(),ot(i.$$.fragment)},m(t,r){it(o,t,r),v(t,e,r),it(i,t,r),n=!0},p(t,e){const n={};1&e[0]&&(n.x=t[44]),2&e[0]&&(n.y=t[45]),16&e[0]&&(n.geometry=t[4]),64&e[0]&&(n.fill=t[6]),128&e[0]&&(n.stroke=t[7]),256&e[0]&&(n.strokeWidth=t[8]),512&e[0]&&(n.strokeOpacity=t[9]),1024&e[0]&&(n.fillOpacity=t[10]),2048&e[0]&&(n.opacity=t[11]),32&e[0]&&(n.text=t[5]),4096&e[0]&&(n.fontFamily=t[12]),8192&e[0]&&(n.fontSize=t[13]),16384&e[0]&&(n.fontWeight=t[14]),32768&e[0]&&(n.rotation=t[15]),65536&e[0]&&(n.anchorPoint=t[16]),536870912&e[0]&&(n.transition=t[29]),1073741824&e[0]&&(n.onClick=t[30]),1&e[1]&&(n.onMouseover=t[31]),2&e[1]&&(n.onMouseout=t[32]),o.$set(n);const r={};4&e[0]&&(r.x=t[46]),8&e[0]&&(r.y=t[47]),16&e[0]&&(r.geometry=t[4]),262144&e[0]&&(r.fill=t[18]),524288&e[0]&&(r.stroke=t[19]),1048576&e[0]&&(r.strokeWidth=t[20]),2097152&e[0]&&(r.strokeOpacity=t[21]),4194304&e[0]&&(r.fillOpacity=t[22]),8388608&e[0]&&(r.opacity=t[23]),131072&e[0]&&(r.text=t[17]),16777216&e[0]&&(r.fontFamily=t[24]),33554432&e[0]&&(r.fontSize=t[25]),67108864&e[0]&&(r.fontWeight=t[26]),134217728&e[0]&&(r.rotation=t[27]),268435456&e[0]&&(r.anchorPoint=t[28]),536870912&e[0]&&(r.transition=t[29]),1073741824&e[0]&&(r.onClick=t[30]),1&e[1]&&(r.onMouseover=t[31]),2&e[1]&&(r.onMouseout=t[32]),i.$set(r)},i(t){n||(Q(o.$$.fragment,t),Q(i.$$.fragment,t),n=!0)},o(t){tt(o.$$.fragment,t),tt(i.$$.fragment,t),n=!1},d(t){rt(o,t),t&&b(e),rt(i,t)}}}function Gl(t,e,n){let o,{x:i}=e,{y:r}=e,{geometry:s}=e,{vjust:a="top"}=e,{hjust:c="center"}=e,{xOffset:u=0}=e,{yOffset:d=10}=e,{usePadding:h=!1}=e,{title:f="Title Text"}=e,{titleFill:y="black"}=e,{titleStroke:p}=e,{titleStrokeWidth:g}=e,{titleStrokeOpacity:m}=e,{titleFillOpacity:x}=e,{titleOpacity:k=1}=e,{titleFontFamily:v}=e,{titleFontSize:b=18}=e,{titleFontWeight:M="bold"}=e,{titleRotation:w=0}=e,{titleAnchorPoint:$="center"}=e,{subtitle:_=""}=e,{subtitleFill:T="black"}=e,{subtitleStroke:S}=e,{subtitleStrokeWidth:O}=e,{subtitleStrokeOpacity:C}=e,{subtitleFillOpacity:P}=e,{subtitleOpacity:A=1}=e,{subtitleFontFamily:I}=e,{subtitleFontSize:N=14}=e,{subtitleFontWeight:W="normal"}=e,{subtitleRotation:L=0}=e,{subtitleX:E}=e,{subtitleY:F}=e,{subtitleAnchorPoint:j="center"}=e,{transition:Y}=e,{onClick:R}=e,{onMouseover:X}=e,{onMouseout:z}=e;const D=Ye();let q;l(t,D,t=>n(43,o=t));let H,G=o.scaleX.range(),B=o.scaleY.range();return t.$set=t=>{"x"in t&&n(0,i=t.x),"y"in t&&n(1,r=t.y),"geometry"in t&&n(4,s=t.geometry),"vjust"in t&&n(34,a=t.vjust),"hjust"in t&&n(35,c=t.hjust),"xOffset"in t&&n(36,u=t.xOffset),"yOffset"in t&&n(37,d=t.yOffset),"usePadding"in t&&n(38,h=t.usePadding),"title"in t&&n(5,f=t.title),"titleFill"in t&&n(6,y=t.titleFill),"titleStroke"in t&&n(7,p=t.titleStroke),"titleStrokeWidth"in t&&n(8,g=t.titleStrokeWidth),"titleStrokeOpacity"in t&&n(9,m=t.titleStrokeOpacity),"titleFillOpacity"in t&&n(10,x=t.titleFillOpacity),"titleOpacity"in t&&n(11,k=t.titleOpacity),"titleFontFamily"in t&&n(12,v=t.titleFontFamily),"titleFontSize"in t&&n(13,b=t.titleFontSize),"titleFontWeight"in t&&n(14,M=t.titleFontWeight),"titleRotation"in t&&n(15,w=t.titleRotation),"titleAnchorPoint"in t&&n(16,$=t.titleAnchorPoint),"subtitle"in t&&n(17,_=t.subtitle),"subtitleFill"in t&&n(18,T=t.subtitleFill),"subtitleStroke"in t&&n(19,S=t.subtitleStroke),"subtitleStrokeWidth"in t&&n(20,O=t.subtitleStrokeWidth),"subtitleStrokeOpacity"in t&&n(21,C=t.subtitleStrokeOpacity),"subtitleFillOpacity"in t&&n(22,P=t.subtitleFillOpacity),"subtitleOpacity"in t&&n(23,A=t.subtitleOpacity),"subtitleFontFamily"in t&&n(24,I=t.subtitleFontFamily),"subtitleFontSize"in t&&n(25,N=t.subtitleFontSize),"subtitleFontWeight"in t&&n(26,W=t.subtitleFontWeight),"subtitleRotation"in t&&n(27,L=t.subtitleRotation),"subtitleX"in t&&n(2,E=t.subtitleX),"subtitleY"in t&&n(3,F=t.subtitleY),"subtitleAnchorPoint"in t&&n(28,j=t.subtitleAnchorPoint),"transition"in t&&n(29,Y=t.transition),"onClick"in t&&n(30,R=t.onClick),"onMouseover"in t&&n(31,X=t.onMouseover),"onMouseout"in t&&n(32,z=t.onMouseout)},t.$$.update=()=>{if(6016&t.$$.dirty[1]&&!0===h&&(n(39,q=o.padding),n(40,G=cc(G,q.left,q.right)),n(41,B=cc(B,q.top,q.bottom))),33693711&t.$$.dirty[0]|8056&t.$$.dirty[1]){if(n(42,H=_.length>0?b+N:b),Dl(i,r)){let t,e;t="[object Function]"==={}.toString.call(i)?i():o.scaleX(i),e="[object Function]"==={}.toString.call(r)?r():o.scaleY(r),n(0,i=t),n(1,r=e)}else D.flipX&&G.reverse(),n(0,i=function(t,e,n,o,i,r){if(n)return n;const s=e[0],a=e[1],c=Math.abs(a-s);let u;if("center"!==t&&"centre"!==t||(u=.5),"left"===t&&(u=0),"right"===t&&(u=1),isNaN(t)||(u=t),void 0===u&&(u=.5),!["left","center","right"].includes(t)&&isNaN(t))throw Error("Please specify either `left`, `center`, `right` or a number from 0 to 1 for `hjust`");return s+c*u+o}(c,G,i,u,0,D.flipX)),D.flipY&&B.reverse(),n(1,r=function(t,e,n,o,i,r){if(n)return n;const s=e[0],a=e[1],c=Math.abs(a-s);let u;if("center"===t&&(u=.5),"bottom"===t&&(u=1-i/c),"top"===t&&(u=0),isNaN(t)||(u=t),void 0===u&&(u=.5),!["center","bottom","top"].includes(t)&&isNaN(t))throw Error("Please specify either `top`, `center`, `bottom` or a number for `vjust`");return s+c*u+o}(a,B,r,d,H,D.flipY));_.length>0&&(Dl(E,F)||(n(41,B=o.scaleY.range()),n(2,E=i),n(3,F=r+b)))}},[i,r,E,F,s,f,y,p,g,m,x,k,v,b,M,w,$,_,T,S,O,C,P,A,I,N,W,L,j,Y,R,X,z,D,a,c,u,d,h,q,G,B,H,o,()=>i,()=>r,()=>E,()=>F]}function Bl(t){let e;const n=new zl({props:{type:"Point",x:t[0],y:t[1],geometry:t[2],radius:t[3],fill:t[4],stroke:t[5],strokeWidth:t[6],strokeOpacity:t[7],fillOpacity:t[8],opacity:t[9],transition:t[10],onClick:t[11],onMousedown:t[12],onMouseup:t[13],onMouseover:t[14],onMouseout:t[15],onMousedrag:t[16],onTouchdown:t[17],onTouchup:t[18],onTouchover:t[19],onTouchout:t[20],onTouchdrag:t[21],onSelect:t[22],onDeselect:t[23],renderSettings:t[24],blockReindexing:t[25],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,[e]){const o={};1&e&&(o.x=t[0]),2&e&&(o.y=t[1]),4&e&&(o.geometry=t[2]),8&e&&(o.radius=t[3]),16&e&&(o.fill=t[4]),32&e&&(o.stroke=t[5]),64&e&&(o.strokeWidth=t[6]),128&e&&(o.strokeOpacity=t[7]),256&e&&(o.fillOpacity=t[8]),512&e&&(o.opacity=t[9]),1024&e&&(o.transition=t[10]),2048&e&&(o.onClick=t[11]),4096&e&&(o.onMousedown=t[12]),8192&e&&(o.onMouseup=t[13]),16384&e&&(o.onMouseover=t[14]),32768&e&&(o.onMouseout=t[15]),65536&e&&(o.onMousedrag=t[16]),131072&e&&(o.onTouchdown=t[17]),262144&e&&(o.onTouchup=t[18]),524288&e&&(o.onTouchover=t[19]),1048576&e&&(o.onTouchout=t[20]),2097152&e&&(o.onTouchdrag=t[21]),4194304&e&&(o.onSelect=t[22]),8388608&e&&(o.onDeselect=t[23]),16777216&e&&(o.renderSettings=t[24]),33554432&e&&(o.blockReindexing=t[25]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function Zl(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{radius:s}=e,{fill:a}=e,{stroke:c}=e,{strokeWidth:u}=e,{strokeOpacity:l}=e,{fillOpacity:d}=e,{opacity:h}=e,{transition:f}=e,{onClick:y}=e,{onMousedown:p}=e,{onMouseup:g}=e,{onMouseover:m}=e,{onMouseout:x}=e,{onMousedrag:k}=e,{onTouchdown:v}=e,{onTouchup:b}=e,{onTouchover:M}=e,{onTouchout:w}=e,{onTouchdrag:$}=e,{onSelect:_}=e,{onDeselect:T}=e,{renderSettings:S}=e,{blockReindexing:O=!1}=e;return t.$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"radius"in t&&n(3,s=t.radius),"fill"in t&&n(4,a=t.fill),"stroke"in t&&n(5,c=t.stroke),"strokeWidth"in t&&n(6,u=t.strokeWidth),"strokeOpacity"in t&&n(7,l=t.strokeOpacity),"fillOpacity"in t&&n(8,d=t.fillOpacity),"opacity"in t&&n(9,h=t.opacity),"transition"in t&&n(10,f=t.transition),"onClick"in t&&n(11,y=t.onClick),"onMousedown"in t&&n(12,p=t.onMousedown),"onMouseup"in t&&n(13,g=t.onMouseup),"onMouseover"in t&&n(14,m=t.onMouseover),"onMouseout"in t&&n(15,x=t.onMouseout),"onMousedrag"in t&&n(16,k=t.onMousedrag),"onTouchdown"in t&&n(17,v=t.onTouchdown),"onTouchup"in t&&n(18,b=t.onTouchup),"onTouchover"in t&&n(19,M=t.onTouchover),"onTouchout"in t&&n(20,w=t.onTouchout),"onTouchdrag"in t&&n(21,$=t.onTouchdrag),"onSelect"in t&&n(22,_=t.onSelect),"onDeselect"in t&&n(23,T=t.onDeselect),"renderSettings"in t&&n(24,S=t.renderSettings),"blockReindexing"in t&&n(25,O=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$,_,T,S,O]}function Vl(t){let e;const n=new zl({props:{type:"Rectangle",x1:t[0],x2:t[1],y1:t[2],y2:t[3],fill:t[4],stroke:t[5],strokeWidth:t[6],strokeOpacity:t[7],fillOpacity:t[8],opacity:t[9],transition:t[10],onClick:t[11],onMousedown:t[12],onMouseup:t[13],onMouseover:t[14],onMouseout:t[15],onMousedrag:t[16],onTouchdown:t[17],onTouchup:t[18],onTouchover:t[19],onTouchout:t[20],onTouchdrag:t[21],onSelect:t[22],onDeselect:t[23],renderSettings:t[24],blockReindexing:t[25],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,[e]){const o={};1&e&&(o.x1=t[0]),2&e&&(o.x2=t[1]),4&e&&(o.y1=t[2]),8&e&&(o.y2=t[3]),16&e&&(o.fill=t[4]),32&e&&(o.stroke=t[5]),64&e&&(o.strokeWidth=t[6]),128&e&&(o.strokeOpacity=t[7]),256&e&&(o.fillOpacity=t[8]),512&e&&(o.opacity=t[9]),1024&e&&(o.transition=t[10]),2048&e&&(o.onClick=t[11]),4096&e&&(o.onMousedown=t[12]),8192&e&&(o.onMouseup=t[13]),16384&e&&(o.onMouseover=t[14]),32768&e&&(o.onMouseout=t[15]),65536&e&&(o.onMousedrag=t[16]),131072&e&&(o.onTouchdown=t[17]),262144&e&&(o.onTouchup=t[18]),524288&e&&(o.onTouchover=t[19]),1048576&e&&(o.onTouchout=t[20]),2097152&e&&(o.onTouchdrag=t[21]),4194304&e&&(o.onSelect=t[22]),8388608&e&&(o.onDeselect=t[23]),16777216&e&&(o.renderSettings=t[24]),33554432&e&&(o.blockReindexing=t[25]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function Jl(t,e,n){let{x1:o}=e,{x2:i}=e,{y1:r}=e,{y2:s}=e,{fill:a}=e,{stroke:c}=e,{strokeWidth:u}=e,{strokeOpacity:l}=e,{fillOpacity:d}=e,{opacity:h}=e,{transition:f}=e,{onClick:y}=e,{onMousedown:p}=e,{onMouseup:g}=e,{onMouseover:m}=e,{onMouseout:x}=e,{onMousedrag:k}=e,{onTouchdown:v}=e,{onTouchup:b}=e,{onTouchover:M}=e,{onTouchout:w}=e,{onTouchdrag:$}=e,{onSelect:_}=e,{onDeselect:T}=e,{renderSettings:S}=e,{blockReindexing:O=!1}=e;return t.$set=t=>{"x1"in t&&n(0,o=t.x1),"x2"in t&&n(1,i=t.x2),"y1"in t&&n(2,r=t.y1),"y2"in t&&n(3,s=t.y2),"fill"in t&&n(4,a=t.fill),"stroke"in t&&n(5,c=t.stroke),"strokeWidth"in t&&n(6,u=t.strokeWidth),"strokeOpacity"in t&&n(7,l=t.strokeOpacity),"fillOpacity"in t&&n(8,d=t.fillOpacity),"opacity"in t&&n(9,h=t.opacity),"transition"in t&&n(10,f=t.transition),"onClick"in t&&n(11,y=t.onClick),"onMousedown"in t&&n(12,p=t.onMousedown),"onMouseup"in t&&n(13,g=t.onMouseup),"onMouseover"in t&&n(14,m=t.onMouseover),"onMouseout"in t&&n(15,x=t.onMouseout),"onMousedrag"in t&&n(16,k=t.onMousedrag),"onTouchdown"in t&&n(17,v=t.onTouchdown),"onTouchup"in t&&n(18,b=t.onTouchup),"onTouchover"in t&&n(19,M=t.onTouchover),"onTouchout"in t&&n(20,w=t.onTouchout),"onTouchdrag"in t&&n(21,$=t.onTouchdrag),"onSelect"in t&&n(22,_=t.onSelect),"onDeselect"in t&&n(23,T=t.onDeselect),"renderSettings"in t&&n(24,S=t.renderSettings),"blockReindexing"in t&&n(25,O=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$,_,T,S,O]}class Kl extends at{constructor(t){super(),st(this,t,Jl,Vl,c,{x1:0,x2:1,y1:2,y2:3,fill:4,stroke:5,strokeWidth:6,strokeOpacity:7,fillOpacity:8,opacity:9,transition:10,onClick:11,onMousedown:12,onMouseup:13,onMouseover:14,onMouseout:15,onMousedrag:16,onTouchdown:17,onTouchup:18,onTouchover:19,onTouchout:20,onTouchdrag:21,onSelect:22,onDeselect:23,renderSettings:24,blockReindexing:25})}}function Ul(t){let e;const n=new zl({props:{type:"Polygon",x:t[0],y:t[1],geometry:t[2],fill:t[3],stroke:t[4],strokeWidth:t[5],strokeOpacity:t[6],fillOpacity:t[7],opacity:t[8],transition:t[9],onClick:t[10],onMousedown:t[11],onMouseup:t[12],onMouseover:t[13],onMouseout:t[14],onMousedrag:t[15],onTouchdown:t[16],onTouchup:t[17],onTouchover:t[18],onTouchout:t[19],onTouchdrag:t[20],onSelect:t[21],onDeselect:t[22],renderSettings:t[23],blockReindexing:t[24],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,[e]){const o={};1&e&&(o.x=t[0]),2&e&&(o.y=t[1]),4&e&&(o.geometry=t[2]),8&e&&(o.fill=t[3]),16&e&&(o.stroke=t[4]),32&e&&(o.strokeWidth=t[5]),64&e&&(o.strokeOpacity=t[6]),128&e&&(o.fillOpacity=t[7]),256&e&&(o.opacity=t[8]),512&e&&(o.transition=t[9]),1024&e&&(o.onClick=t[10]),2048&e&&(o.onMousedown=t[11]),4096&e&&(o.onMouseup=t[12]),8192&e&&(o.onMouseover=t[13]),16384&e&&(o.onMouseout=t[14]),32768&e&&(o.onMousedrag=t[15]),65536&e&&(o.onTouchdown=t[16]),131072&e&&(o.onTouchup=t[17]),262144&e&&(o.onTouchover=t[18]),524288&e&&(o.onTouchout=t[19]),1048576&e&&(o.onTouchdrag=t[20]),2097152&e&&(o.onSelect=t[21]),4194304&e&&(o.onDeselect=t[22]),8388608&e&&(o.renderSettings=t[23]),16777216&e&&(o.blockReindexing=t[24]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function Ql(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{fill:s}=e,{stroke:a}=e,{strokeWidth:c}=e,{strokeOpacity:u}=e,{fillOpacity:l}=e,{opacity:d}=e,{transition:h}=e,{onClick:f}=e,{onMousedown:y}=e,{onMouseup:p}=e,{onMouseover:g}=e,{onMouseout:m}=e,{onMousedrag:x}=e,{onTouchdown:k}=e,{onTouchup:v}=e,{onTouchover:b}=e,{onTouchout:M}=e,{onTouchdrag:w}=e,{onSelect:$}=e,{onDeselect:_}=e,{renderSettings:T}=e,{blockReindexing:S=!1}=e;return t.$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"fill"in t&&n(3,s=t.fill),"stroke"in t&&n(4,a=t.stroke),"strokeWidth"in t&&n(5,c=t.strokeWidth),"strokeOpacity"in t&&n(6,u=t.strokeOpacity),"fillOpacity"in t&&n(7,l=t.fillOpacity),"opacity"in t&&n(8,d=t.opacity),"transition"in t&&n(9,h=t.transition),"onClick"in t&&n(10,f=t.onClick),"onMousedown"in t&&n(11,y=t.onMousedown),"onMouseup"in t&&n(12,p=t.onMouseup),"onMouseover"in t&&n(13,g=t.onMouseover),"onMouseout"in t&&n(14,m=t.onMouseout),"onMousedrag"in t&&n(15,x=t.onMousedrag),"onTouchdown"in t&&n(16,k=t.onTouchdown),"onTouchup"in t&&n(17,v=t.onTouchup),"onTouchover"in t&&n(18,b=t.onTouchover),"onTouchout"in t&&n(19,M=t.onTouchout),"onTouchdrag"in t&&n(20,w=t.onTouchdrag),"onSelect"in t&&n(21,$=t.onSelect),"onDeselect"in t&&n(22,_=t.onDeselect),"renderSettings"in t&&n(23,T=t.renderSettings),"blockReindexing"in t&&n(24,S=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$,_,T,S]}function td(t){let e;const n=new zl({props:{type:"Line",x:t[0],y:t[1],geometry:t[2],strokeWidth:t[3],stroke:t[4],opacity:t[5],transition:t[6],onClick:t[7],onMousedown:t[8],onMouseup:t[9],onMouseover:t[10],onMouseout:t[11],onMousedrag:t[12],onTouchdown:t[13],onTouchup:t[14],onTouchover:t[15],onTouchout:t[16],onTouchdrag:t[17],onSelect:t[18],onDeselect:t[19],renderSettings:t[20],blockReindexing:t[21],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,[e]){const o={};1&e&&(o.x=t[0]),2&e&&(o.y=t[1]),4&e&&(o.geometry=t[2]),8&e&&(o.strokeWidth=t[3]),16&e&&(o.stroke=t[4]),32&e&&(o.opacity=t[5]),64&e&&(o.transition=t[6]),128&e&&(o.onClick=t[7]),256&e&&(o.onMousedown=t[8]),512&e&&(o.onMouseup=t[9]),1024&e&&(o.onMouseover=t[10]),2048&e&&(o.onMouseout=t[11]),4096&e&&(o.onMousedrag=t[12]),8192&e&&(o.onTouchdown=t[13]),16384&e&&(o.onTouchup=t[14]),32768&e&&(o.onTouchover=t[15]),65536&e&&(o.onTouchout=t[16]),131072&e&&(o.onTouchdrag=t[17]),262144&e&&(o.onSelect=t[18]),524288&e&&(o.onDeselect=t[19]),1048576&e&&(o.renderSettings=t[20]),2097152&e&&(o.blockReindexing=t[21]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function ed(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{strokeWidth:s}=e,{stroke:a}=e,{opacity:c}=e,{transition:u}=e,{onClick:l}=e,{onMousedown:d}=e,{onMouseup:h}=e,{onMouseover:f}=e,{onMouseout:y}=e,{onMousedrag:p}=e,{onTouchdown:g}=e,{onTouchup:m}=e,{onTouchover:x}=e,{onTouchout:k}=e,{onTouchdrag:v}=e,{onSelect:b}=e,{onDeselect:M}=e,{renderSettings:w}=e,{blockReindexing:$=!1}=e;return t.$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"strokeWidth"in t&&n(3,s=t.strokeWidth),"stroke"in t&&n(4,a=t.stroke),"opacity"in t&&n(5,c=t.opacity),"transition"in t&&n(6,u=t.transition),"onClick"in t&&n(7,l=t.onClick),"onMousedown"in t&&n(8,d=t.onMousedown),"onMouseup"in t&&n(9,h=t.onMouseup),"onMouseover"in t&&n(10,f=t.onMouseover),"onMouseout"in t&&n(11,y=t.onMouseout),"onMousedrag"in t&&n(12,p=t.onMousedrag),"onTouchdown"in t&&n(13,g=t.onTouchdown),"onTouchup"in t&&n(14,m=t.onTouchup),"onTouchover"in t&&n(15,x=t.onTouchover),"onTouchout"in t&&n(16,k=t.onTouchout),"onTouchdrag"in t&&n(17,v=t.onTouchdrag),"onSelect"in t&&n(18,b=t.onSelect),"onDeselect"in t&&n(19,M=t.onDeselect),"renderSettings"in t&&n(20,w=t.renderSettings),"blockReindexing"in t&&n(21,$=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$]}class nd extends at{constructor(t){super(),st(this,t,ed,td,c,{x:0,y:1,geometry:2,strokeWidth:3,stroke:4,opacity:5,transition:6,onClick:7,onMousedown:8,onMouseup:9,onMouseover:10,onMouseout:11,onMousedrag:12,onTouchdown:13,onTouchup:14,onTouchover:15,onTouchout:16,onTouchdrag:17,onSelect:18,onDeselect:19,renderSettings:20,blockReindexing:21})}}function od(t){let e;const n=new zl({props:{type:"Label",x:t[0],y:t[1],geometry:t[2],fill:t[3],stroke:t[4],strokeWidth:t[5],strokeOpacity:t[6],fillOpacity:t[7],opacity:t[8],text:t[9],fontFamily:t[10],fontSize:t[11],fontWeight:t[12],rotation:t[13],anchorPoint:t[14],transition:t[15],onClick:t[16],onMousedown:t[17],onMouseup:t[18],onMouseover:t[19],onMouseout:t[20],onMousedrag:t[21],onTouchdown:t[22],onTouchup:t[23],onTouchover:t[24],onTouchout:t[25],onTouchdrag:t[26],onSelect:t[27],onDeselect:t[28],renderSettings:t[29],blockReindexing:t[30],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,[e]){const o={};1&e&&(o.x=t[0]),2&e&&(o.y=t[1]),4&e&&(o.geometry=t[2]),8&e&&(o.fill=t[3]),16&e&&(o.stroke=t[4]),32&e&&(o.strokeWidth=t[5]),64&e&&(o.strokeOpacity=t[6]),128&e&&(o.fillOpacity=t[7]),256&e&&(o.opacity=t[8]),512&e&&(o.text=t[9]),1024&e&&(o.fontFamily=t[10]),2048&e&&(o.fontSize=t[11]),4096&e&&(o.fontWeight=t[12]),8192&e&&(o.rotation=t[13]),16384&e&&(o.anchorPoint=t[14]),32768&e&&(o.transition=t[15]),65536&e&&(o.onClick=t[16]),131072&e&&(o.onMousedown=t[17]),262144&e&&(o.onMouseup=t[18]),524288&e&&(o.onMouseover=t[19]),1048576&e&&(o.onMouseout=t[20]),2097152&e&&(o.onMousedrag=t[21]),4194304&e&&(o.onTouchdown=t[22]),8388608&e&&(o.onTouchup=t[23]),16777216&e&&(o.onTouchover=t[24]),33554432&e&&(o.onTouchout=t[25]),67108864&e&&(o.onTouchdrag=t[26]),134217728&e&&(o.onSelect=t[27]),268435456&e&&(o.onDeselect=t[28]),536870912&e&&(o.renderSettings=t[29]),1073741824&e&&(o.blockReindexing=t[30]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function id(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{fill:s}=e,{stroke:a}=e,{strokeWidth:c}=e,{strokeOpacity:u}=e,{fillOpacity:l}=e,{opacity:d}=e,{text:h}=e,{fontFamily:f}=e,{fontSize:y}=e,{fontWeight:p}=e,{rotation:g}=e,{anchorPoint:m}=e,{transition:x}=e,{onClick:k}=e,{onMousedown:v}=e,{onMouseup:b}=e,{onMouseover:M}=e,{onMouseout:w}=e,{onMousedrag:$}=e,{onTouchdown:_}=e,{onTouchup:T}=e,{onTouchover:S}=e,{onTouchout:O}=e,{onTouchdrag:C}=e,{onSelect:P}=e,{onDeselect:A}=e,{renderSettings:I}=e,{blockReindexing:N=!1}=e;return t.$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"fill"in t&&n(3,s=t.fill),"stroke"in t&&n(4,a=t.stroke),"strokeWidth"in t&&n(5,c=t.strokeWidth),"strokeOpacity"in t&&n(6,u=t.strokeOpacity),"fillOpacity"in t&&n(7,l=t.fillOpacity),"opacity"in t&&n(8,d=t.opacity),"text"in t&&n(9,h=t.text),"fontFamily"in t&&n(10,f=t.fontFamily),"fontSize"in t&&n(11,y=t.fontSize),"fontWeight"in t&&n(12,p=t.fontWeight),"rotation"in t&&n(13,g=t.rotation),"anchorPoint"in t&&n(14,m=t.anchorPoint),"transition"in t&&n(15,x=t.transition),"onClick"in t&&n(16,k=t.onClick),"onMousedown"in t&&n(17,v=t.onMousedown),"onMouseup"in t&&n(18,b=t.onMouseup),"onMouseover"in t&&n(19,M=t.onMouseover),"onMouseout"in t&&n(20,w=t.onMouseout),"onMousedrag"in t&&n(21,$=t.onMousedrag),"onTouchdown"in t&&n(22,_=t.onTouchdown),"onTouchup"in t&&n(23,T=t.onTouchup),"onTouchover"in t&&n(24,S=t.onTouchover),"onTouchout"in t&&n(25,O=t.onTouchout),"onTouchdrag"in t&&n(26,C=t.onTouchdrag),"onSelect"in t&&n(27,P=t.onSelect),"onDeselect"in t&&n(28,A=t.onDeselect),"renderSettings"in t&&n(29,I=t.renderSettings),"blockReindexing"in t&&n(30,N=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$,_,T,S,O,C,P,A,I,N]}class rd extends at{constructor(t){super(),st(this,t,id,od,c,{x:0,y:1,geometry:2,fill:3,stroke:4,strokeWidth:5,strokeOpacity:6,fillOpacity:7,opacity:8,text:9,fontFamily:10,fontSize:11,fontWeight:12,rotation:13,anchorPoint:14,transition:15,onClick:16,onMousedown:17,onMouseup:18,onMouseover:19,onMouseout:20,onMousedrag:21,onTouchdown:22,onTouchup:23,onTouchover:24,onTouchout:25,onTouchdrag:26,onSelect:27,onDeselect:28,renderSettings:29,blockReindexing:30})}}function sd(t){let e;const n=new zl({props:{type:"Symbol",x:t[0],y:t[1],geometry:t[2],shape:t[3],size:t[4],fill:t[5],stroke:t[6],strokeWidth:t[7],strokeOpacity:t[8],fillOpacity:t[9],opacity:t[10],transition:t[11],onClick:t[12],onMousedown:t[13],onMouseup:t[14],onMouseover:t[15],onMouseout:t[16],onMousedrag:t[17],onTouchdown:t[18],onTouchup:t[19],onTouchover:t[20],onTouchout:t[21],onTouchdrag:t[22],onSelect:t[23],onDeselect:t[24],renderSettings:t[25],blockReindexing:t[26],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,[e]){const o={};1&e&&(o.x=t[0]),2&e&&(o.y=t[1]),4&e&&(o.geometry=t[2]),8&e&&(o.shape=t[3]),16&e&&(o.size=t[4]),32&e&&(o.fill=t[5]),64&e&&(o.stroke=t[6]),128&e&&(o.strokeWidth=t[7]),256&e&&(o.strokeOpacity=t[8]),512&e&&(o.fillOpacity=t[9]),1024&e&&(o.opacity=t[10]),2048&e&&(o.transition=t[11]),4096&e&&(o.onClick=t[12]),8192&e&&(o.onMousedown=t[13]),16384&e&&(o.onMouseup=t[14]),32768&e&&(o.onMouseover=t[15]),65536&e&&(o.onMouseout=t[16]),131072&e&&(o.onMousedrag=t[17]),262144&e&&(o.onTouchdown=t[18]),524288&e&&(o.onTouchup=t[19]),1048576&e&&(o.onTouchover=t[20]),2097152&e&&(o.onTouchout=t[21]),4194304&e&&(o.onTouchdrag=t[22]),8388608&e&&(o.onSelect=t[23]),16777216&e&&(o.onDeselect=t[24]),33554432&e&&(o.renderSettings=t[25]),67108864&e&&(o.blockReindexing=t[26]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function ad(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{shape:s}=e,{size:a}=e,{fill:c}=e,{stroke:u}=e,{strokeWidth:l}=e,{strokeOpacity:d}=e,{fillOpacity:h}=e,{opacity:f}=e,{transition:y}=e,{onClick:p}=e,{onMousedown:g}=e,{onMouseup:m}=e,{onMouseover:x}=e,{onMouseout:k}=e,{onMousedrag:v}=e,{onTouchdown:b}=e,{onTouchup:M}=e,{onTouchover:w}=e,{onTouchout:$}=e,{onTouchdrag:_}=e,{onSelect:T}=e,{onDeselect:S}=e,{renderSettings:O}=e,{blockReindexing:C=!1}=e;return t.$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"shape"in t&&n(3,s=t.shape),"size"in t&&n(4,a=t.size),"fill"in t&&n(5,c=t.fill),"stroke"in t&&n(6,u=t.stroke),"strokeWidth"in t&&n(7,l=t.strokeWidth),"strokeOpacity"in t&&n(8,d=t.strokeOpacity),"fillOpacity"in t&&n(9,h=t.fillOpacity),"opacity"in t&&n(10,f=t.opacity),"transition"in t&&n(11,y=t.transition),"onClick"in t&&n(12,p=t.onClick),"onMousedown"in t&&n(13,g=t.onMousedown),"onMouseup"in t&&n(14,m=t.onMouseup),"onMouseover"in t&&n(15,x=t.onMouseover),"onMouseout"in t&&n(16,k=t.onMouseout),"onMousedrag"in t&&n(17,v=t.onMousedrag),"onTouchdown"in t&&n(18,b=t.onTouchdown),"onTouchup"in t&&n(19,M=t.onTouchup),"onTouchover"in t&&n(20,w=t.onTouchover),"onTouchout"in t&&n(21,$=t.onTouchout),"onTouchdrag"in t&&n(22,_=t.onTouchdrag),"onSelect"in t&&n(23,T=t.onSelect),"onDeselect"in t&&n(24,S=t.onDeselect),"renderSettings"in t&&n(25,O=t.renderSettings),"blockReindexing"in t&&n(26,C=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$,_,T,S,O,C]}function cd({func:t,x:e},n,o,i,r){!function(t,e){if(t.constructor===Function&&Zo(e))return;if(t.constructor===Function&&Bo(e)&&e.constructor===Array&&2===e.length&&e.every(t=>t.constructor===Number))return;throw new Error("FuncLine: invalid geometry props")}(t,e);const s={type:"LineString",coordinates:function(t,e,n){const o=e||function(t){let e;e=function(t){if(t&&t.constructor===Function&&""!==t.name){if(t.domain&&t.domain().every(t=>t.constructor===Number))return!0;throw new Error("FuncLine can only be used with functions that have numeric domains")}return!1}(t.scaleX)?t.scaleX.domain():t.rangeX;return e}(n);return function(t,e,n=10){const o=[],i=ue(...e);for(let e=0;e<=n;++e){const r=i(e/n),s=t(r);if(s.constructor!==Number||isNaN(s))throw new Error(`FuncLine: func is only allowed to return numbers. Received '${s}'`);o.push([r,s])}return o}(t,o)}(t,e,n)},a=dc({sectionContext:n,xNeedsScaling:!0,yNeedsScaling:!0,coordinateTransformationContext:o,zoomContext:i});return function(t,e,n){const o=Si(t,e);for(let t=0;t<o.coordinates.length;t++){if(ud(o.coordinates[t],n))return!1}return!0}(s,a,n)?(su("FuncLine was completely out of Section window. Please check your Section settings and FuncLine props."),{type:"LineString",coordinates:[[0,0],[0,1]]}):Si(s,a,{interpolate:!0})}function ud(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function ld(t){let e,n;return{c(){e=M("path"),T(e,"class","line"),T(e,"d",n=Il(t[4])),T(e,"fill","none"),T(e,"stroke-width",t[6]),T(e,"stroke",t[5]),T(e,"opacity",t[7])},m(t,n){v(t,e,n)},p(t,o){16&o[0]&&n!==(n=Il(t[4]))&&T(e,"d",n),64&o[0]&&T(e,"stroke-width",t[6]),32&o[0]&&T(e,"stroke",t[5]),128&o[0]&&T(e,"opacity",t[7])},d(t){t&&b(e)}}}function dd(t){let n,o="svg"===t[8].output(),i=o&&ld(t);return{c(){i&&i.c(),n=_()},m(t,e){i&&i.m(t,e),v(t,n,e)},p(t,e){256&e[0]&&(o="svg"===t[8].output()),o?i?i.p(t,e):(i=ld(t),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(t){i&&i.d(t),t&&b(n)}}}let hd=0;function fd(t,n,o){let i,r,s,a,c,d,h,f,y,p=e,g=()=>(p(),p=u(nt,t=>o(4,a=t)),nt),m=e,x=()=>(m(),m=u(ot,t=>o(5,c=t)),ot),k=e,v=()=>(k(),k=u(it,t=>o(6,d=t)),it),b=e,M=()=>(b(),b=u(ut,t=>o(7,h=t)),ut);t.$$.on_destroy.push(()=>p()),t.$$.on_destroy.push(()=>m()),t.$$.on_destroy.push(()=>k()),t.$$.on_destroy.push(()=>b());const w="funcline"+hd++;let $=!0;const _=()=>!$;let{func:T}=n,{x:S}=n,{strokeWidth:O=1}=n,{stroke:C="black"}=n,{opacity:P=1}=n,{transition:L}=n,{onClick:E}=n,{onMousedown:F}=n,{onMouseup:j}=n,{onMouseover:Y}=n,{onMouseout:R}=n,{onMousedrag:X}=n,{onTouchdown:z}=n,{onTouchup:D}=n,{onTouchover:q}=n,{onTouchout:H}=n,{onTouchdrag:G}=n,{onSelect:B}=n,{onDeselect:Z}=n,{blockReindexing:V=!1}=n;const J=ht();l(t,J,t=>o(8,y=t));const K=Ye();l(t,K,t=>o(37,i=t));const U=Ve();l(t,U,t=>o(38,r=t));const Q=He();l(t,Q,t=>o(43,f=t));const tt=en();l(t,tt,t=>o(39,s=t));let et=cd({func:T,x:S},i,r,s),nt=bl("geometry",et,L);g();let ot=bl("stroke",C,L);x();let it=bl("strokeWidth",O,L);v();let rt,st,at,ct,ut=bl("opacity",P,L);function lt(){if($||!V&&!i.blockReindexing){if(dt(),st){const t=f.mouse().marks();t.loadMark("Line",ft()),E&&t.addMarkInteraction("click",w,E),F&&t.addMarkInteraction("mousedown",w,F),j&&t.addMarkInteraction("mouseoup",w,j),Y&&t.addMarkInteraction("mouseover",w,Y),R&&t.addMarkInteraction("mouseout",w,R),X&&t.addMarkInteraction("mousedrag",w,X)}if(at){const t=f.touch().marks();t.loadMark("Line",ft()),z&&t.addMarkInteraction("touchdown",w,z),D&&t.addMarkInteraction("touchup",w,D),q&&t.addMarkInteraction("touchover",w,q),H&&t.addMarkInteraction("touchout",w,H),G&&t.addMarkInteraction("touchdrag",w,G)}}if(function(){const t=f.select();t.markIsLoaded(w)&&t.removeMark(w)}(),ct){f.select().loadMark("Line",ft(),{onSelect:B,onDeselect:Z})}}function dt(){if(dn.hasMouse){const t=f.mouse().marks();t.markIsLoaded(w)&&(t.removeAllMarkInteractions(w),t.removeMark(w))}if(dn.hasTouch){const t=f.touch().marks();t.markIsLoaded(w)&&(t.removeAllMarkInteractions(w),t.removeMark(w))}}function ft(){return gl("Line",w,{pixelGeometry:et},{strokeWidth:O})}return M(),A(()=>{wl(rt,L)||(rt=L,g(o(0,nt=bl("geometry",a,L))),x(o(1,ot=bl("stroke",c,L))),v(o(2,it=bl("strokeWidth",d,L))),M(o(3,ut=bl("opacity",h,L))))}),N(()=>{$=!1}),I(()=>{lt()}),W(()=>{dt()}),t.$set=t=>{"func"in t&&o(14,T=t.func),"x"in t&&o(15,S=t.x),"strokeWidth"in t&&o(16,O=t.strokeWidth),"stroke"in t&&o(17,C=t.stroke),"opacity"in t&&o(18,P=t.opacity),"transition"in t&&o(19,L=t.transition),"onClick"in t&&o(20,E=t.onClick),"onMousedown"in t&&o(21,F=t.onMousedown),"onMouseup"in t&&o(22,j=t.onMouseup),"onMouseover"in t&&o(23,Y=t.onMouseover),"onMouseout"in t&&o(24,R=t.onMouseout),"onMousedrag"in t&&o(25,X=t.onMousedrag),"onTouchdown"in t&&o(26,z=t.onTouchdown),"onTouchup"in t&&o(27,D=t.onTouchup),"onTouchover"in t&&o(28,q=t.onTouchover),"onTouchout"in t&&o(29,H=t.onTouchout),"onTouchdrag"in t&&o(30,G=t.onTouchdrag),"onSelect"in t&&o(31,B=t.onSelect),"onDeselect"in t&&o(32,Z=t.onDeselect),"blockReindexing"in t&&o(33,V=t.blockReindexing)},t.$$.update=()=>{49153&t.$$.dirty[0]|464&t.$$.dirty[1]&&_()&&(o(35,et=cd({func:T,x:S},i,r,s)),nt.set(et),lt()),131074&t.$$.dirty[0]&&_()&&ot.set(C),65540&t.$$.dirty[0]&&_()&&it.set(O),262152&t.$$.dirty[0]&&_()&&ut.set(P),66060288&t.$$.dirty[0]&&(st=dn.hasMouse&&Cl(E,F,j,Y,R,X)),2080374784&t.$$.dirty[0]&&(at=dn.hasTouch&&Cl(z,D,q,H,G)),3&t.$$.dirty[1]&&(ct=void 0!==B||void 0!==Z)},[nt,ot,it,ut,a,c,d,h,y,J,K,U,Q,tt,T,S,O,C,P,L,E,F,j,Y,R,X,z,D,q,H,G,B,Z,V]}function yd(t){let e;const n=new zl({props:{type:"Area",x1:t[0],x2:t[1],y1:t[2],y2:t[3],independentAxis:t[4],fill:t[5],stroke:t[6],strokeWidth:t[7],strokeOpacity:t[8],fillOpacity:t[9],opacity:t[10],transition:t[11],onClick:t[12],onMousedown:t[13],onMouseup:t[14],onMouseover:t[15],onMouseout:t[16],onMousedrag:t[17],onTouchdown:t[18],onTouchup:t[19],onTouchover:t[20],onTouchout:t[21],onTouchdrag:t[22],onSelect:t[23],onDeselect:t[24],renderSettings:t[25],blockReindexing:t[26],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,[e]){const o={};1&e&&(o.x1=t[0]),2&e&&(o.x2=t[1]),4&e&&(o.y1=t[2]),8&e&&(o.y2=t[3]),16&e&&(o.independentAxis=t[4]),32&e&&(o.fill=t[5]),64&e&&(o.stroke=t[6]),128&e&&(o.strokeWidth=t[7]),256&e&&(o.strokeOpacity=t[8]),512&e&&(o.fillOpacity=t[9]),1024&e&&(o.opacity=t[10]),2048&e&&(o.transition=t[11]),4096&e&&(o.onClick=t[12]),8192&e&&(o.onMousedown=t[13]),16384&e&&(o.onMouseup=t[14]),32768&e&&(o.onMouseover=t[15]),65536&e&&(o.onMouseout=t[16]),131072&e&&(o.onMousedrag=t[17]),262144&e&&(o.onTouchdown=t[18]),524288&e&&(o.onTouchup=t[19]),1048576&e&&(o.onTouchover=t[20]),2097152&e&&(o.onTouchout=t[21]),4194304&e&&(o.onTouchdrag=t[22]),8388608&e&&(o.onSelect=t[23]),16777216&e&&(o.onDeselect=t[24]),33554432&e&&(o.renderSettings=t[25]),67108864&e&&(o.blockReindexing=t[26]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function pd(t,e,n){let{x1:o}=e,{x2:i}=e,{y1:r}=e,{y2:s}=e,{independentAxis:a}=e,{fill:c}=e,{stroke:u}=e,{strokeWidth:l}=e,{strokeOpacity:d}=e,{fillOpacity:h}=e,{opacity:f}=e,{transition:y}=e,{onClick:p}=e,{onMousedown:g}=e,{onMouseup:m}=e,{onMouseover:x}=e,{onMouseout:k}=e,{onMousedrag:v}=e,{onTouchdown:b}=e,{onTouchup:M}=e,{onTouchover:w}=e,{onTouchout:$}=e,{onTouchdrag:_}=e,{onSelect:T}=e,{onDeselect:S}=e,{renderSettings:O}=e,{blockReindexing:C=!1}=e;return t.$set=t=>{"x1"in t&&n(0,o=t.x1),"x2"in t&&n(1,i=t.x2),"y1"in t&&n(2,r=t.y1),"y2"in t&&n(3,s=t.y2),"independentAxis"in t&&n(4,a=t.independentAxis),"fill"in t&&n(5,c=t.fill),"stroke"in t&&n(6,u=t.stroke),"strokeWidth"in t&&n(7,l=t.strokeWidth),"strokeOpacity"in t&&n(8,d=t.strokeOpacity),"fillOpacity"in t&&n(9,h=t.fillOpacity),"opacity"in t&&n(10,f=t.opacity),"transition"in t&&n(11,y=t.transition),"onClick"in t&&n(12,p=t.onClick),"onMousedown"in t&&n(13,g=t.onMousedown),"onMouseup"in t&&n(14,m=t.onMouseup),"onMouseover"in t&&n(15,x=t.onMouseover),"onMouseout"in t&&n(16,k=t.onMouseout),"onMousedrag"in t&&n(17,v=t.onMousedrag),"onTouchdown"in t&&n(18,b=t.onTouchdown),"onTouchup"in t&&n(19,M=t.onTouchup),"onTouchover"in t&&n(20,w=t.onTouchover),"onTouchout"in t&&n(21,$=t.onTouchout),"onTouchdrag"in t&&n(22,_=t.onTouchdrag),"onSelect"in t&&n(23,T=t.onSelect),"onDeselect"in t&&n(24,S=t.onDeselect),"renderSettings"in t&&n(25,O=t.renderSettings),"blockReindexing"in t&&n(26,C=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$,_,T,S,O,C]}function gd(t,e){const n={};if(Bo(t))if(t.constructor===Array)for(let o=0;o<e.length;o++){n[e[o]]=t[o]}else if(t.constructor===Function)for(let o=0;o<e.length;o++){const i=e[o];n[i]=t(i,o)}else for(let o=0;o<e.length;o++){n[e[o]]=t}return n}function md(t,e,n){const o=t.slice();return o[118]=e[n],o}function xd(t,e,n){const o=t.slice();return o[118]=e[n],o}function kd(t,e,n){const o=t.slice();return o[118]=e[n],o}function vd(t,e,n){const o=t.slice();return o[118]=e[n],o}function bd(t){let e,n,o,i=t[26]&&Md(t),r=t[27]&&$d(t),s=t[28]&&Td(t);return{c(){i&&i.c(),e=$(),r&&r.c(),n=$(),s&&s.c(),o=_()},m(t,a){i&&i.m(t,a),v(t,e,a),r&&r.m(t,a),v(t,n,a),s&&s.m(t,a),v(t,o,a)},p(t,a){t[26]?i?i.p(t,a):(i=Md(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),t[27]?r?r.p(t,a):(r=$d(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),t[28]?s?s.p(t,a):(s=Td(t),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(t){i&&i.d(t),t&&b(e),r&&r.d(t),t&&b(n),s&&s.d(t),t&&b(o)}}}function Md(t){let e,n,o=[],i=new Map,r=Object.keys(t[15]);const s=t=>t[118];for(let e=0;e<r.length;e+=1){let n=vd(t,r,e),a=s(n);i.set(a,o[e]=wd(a,n))}return{c(){e=M("g");for(let t=0;t<o.length;t+=1)o[t].c();T(e,"class",n=`${t[0].toLowerCase()}-layer`)},m(t,n){v(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,r){if(8290305&r[0]){const n=Object.keys(t[15]);o=nt(o,r,s,1,t,n,i,e,et,wd,null,vd)}1&r[0]&&n!==(n=`${t[0].toLowerCase()}-layer`)&&T(e,"class",n)},d(t){t&&b(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function wd(t,e){let n,o,i,r,s,a,c,u,l;return{key:t,first:null,c(){n=M("path"),T(n,"class",o=e[0].toLowerCase()),T(n,"d",i=Il(e[15][e[118]])),T(n,"fill",r=e[17][e[118]]),T(n,"stroke",s=e[18][e[118]]),T(n,"stroke-width",a=e[19][e[118]]),T(n,"fill-opacity",c=e[21][e[118]]),T(n,"stroke-opacity",u=e[20][e[118]]),T(n,"opacity",l=e[22][e[118]]),this.first=n},m(t,e){v(t,n,e)},p(t,e){1&e[0]&&o!==(o=t[0].toLowerCase())&&T(n,"class",o),32768&e[0]&&i!==(i=Il(t[15][t[118]]))&&T(n,"d",i),163840&e[0]&&r!==(r=t[17][t[118]])&&T(n,"fill",r),294912&e[0]&&s!==(s=t[18][t[118]])&&T(n,"stroke",s),557056&e[0]&&a!==(a=t[19][t[118]])&&T(n,"stroke-width",a),2129920&e[0]&&c!==(c=t[21][t[118]])&&T(n,"fill-opacity",c),1081344&e[0]&&u!==(u=t[20][t[118]])&&T(n,"stroke-opacity",u),4227072&e[0]&&l!==(l=t[22][t[118]])&&T(n,"opacity",l)},d(t){t&&b(n)}}}function $d(t){let e,n=[],o=new Map,i=Object.keys(t[15]);const r=t=>t[118];for(let e=0;e<i.length;e+=1){let s=kd(t,i,e),a=r(s);o.set(a,n[e]=_d(a,s))}return{c(){e=M("g");for(let t=0;t<n.length;t+=1)n[t].c();T(e,"class","point-layer")},m(t,o){v(t,e,o);for(let t=0;t<n.length;t+=1)n[t].m(e,null)},p(t,i){if(8355840&i[0]){const s=Object.keys(t[15]);n=nt(n,i,r,1,t,s,o,e,et,_d,null,kd)}},d(t){t&&b(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function _d(t,e){let n,o,i,r,s,a,c,u,l,d;return{key:t,first:null,c(){n=M("circle"),T(n,"class","point"),T(n,"cx",o=e[15][e[118]].coordinates[0]),T(n,"cy",i=e[15][e[118]].coordinates[1]),T(n,"r",r=e[16][e[118]]),T(n,"fill",s=e[17][e[118]]),T(n,"stroke",a=e[18][e[118]]),T(n,"stroke-width",c=e[19][e[118]]),T(n,"fill-opacity",u=e[21][e[118]]),T(n,"stroke-opacity",l=e[20][e[118]]),T(n,"opacity",d=e[22][e[118]]),this.first=n},m(t,e){v(t,n,e)},p(t,e){32768&e[0]&&o!==(o=t[15][t[118]].coordinates[0])&&T(n,"cx",o),32768&e[0]&&i!==(i=t[15][t[118]].coordinates[1])&&T(n,"cy",i),98304&e[0]&&r!==(r=t[16][t[118]])&&T(n,"r",r),163840&e[0]&&s!==(s=t[17][t[118]])&&T(n,"fill",s),294912&e[0]&&a!==(a=t[18][t[118]])&&T(n,"stroke",a),557056&e[0]&&c!==(c=t[19][t[118]])&&T(n,"stroke-width",c),2129920&e[0]&&u!==(u=t[21][t[118]])&&T(n,"fill-opacity",u),1081344&e[0]&&l!==(l=t[20][t[118]])&&T(n,"stroke-opacity",l),4227072&e[0]&&d!==(d=t[22][t[118]])&&T(n,"opacity",d)},d(t){t&&b(n)}}}function Td(t){let e,n=[],o=new Map,i=Object.keys(t[15]);const r=t=>t[118];for(let e=0;e<i.length;e+=1){let s=xd(t,i,e),a=r(s);o.set(a,n[e]=Sd(a,s))}return{c(){e=M("g");for(let t=0;t<n.length;t+=1)n[t].c();T(e,"class","line-layer")},m(t,o){v(t,e,o);for(let t=0;t<n.length;t+=1)n[t].m(e,null)},p(t,i){if(5013504&i[0]){const s=Object.keys(t[15]);n=nt(n,i,r,1,t,s,o,e,et,Sd,null,xd)}},d(t){t&&b(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function Sd(t,e){let n,o,i,r,s;return{key:t,first:null,c(){n=M("path"),T(n,"class","line"),T(n,"d",o=Il(e[15][e[118]])),T(n,"fill","none"),T(n,"stroke-width",i=e[19][e[118]]),T(n,"stroke",r=e[18][e[118]]),T(n,"style",s=`opacity: ${e[22][e[118]]}`),this.first=n},m(t,e){v(t,n,e)},p(t,e){32768&e[0]&&o!==(o=Il(t[15][t[118]]))&&T(n,"d",o),557056&e[0]&&i!==(i=t[19][t[118]])&&T(n,"stroke-width",i),294912&e[0]&&r!==(r=t[18][t[118]])&&T(n,"stroke",r),4227072&e[0]&&s!==(s=`opacity: ${t[22][t[118]]}`)&&T(n,"style",s)},d(t){t&&b(n)}}}function Od(t){let e,n=[],o=new Map,i=Object.keys(t[15]);const r=t=>t[118];for(let e=0;e<i.length;e+=1){let s=md(t,i,e),a=r(s);o.set(a,n[e]=Cd(a,s))}return{c(){e=M("g");for(let t=0;t<n.length;t+=1)n[t].c();T(e,"class","label-layer")},m(t,o){v(t,e,o);for(let t=0;t<n.length;t+=1)n[t].m(e,null)},p(t,i){if(67010574&i[0]){const s=Object.keys(t[15]);n=nt(n,i,r,1,t,s,o,e,et,Cd,null,md)}},d(t){t&&b(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function Cd(t,e){let n,o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x=e[1][e[118]]+"";return{key:t,first:null,c(){n=M("text"),o=w(x),T(n,"stroke-opacity",i=e[20][e[118]]),T(n,"class","label"),T(n,"y",r=e[15][e[118]].coordinates[1]),T(n,"fill",s=e[17][e[118]]),T(n,"stroke",a=e[18][e[118]]),T(n,"stroke-width",c=e[19][e[118]]),T(n,"fill-opacity",u=e[21][e[118]]),T(n,"x",l=e[15][e[118]].coordinates[0]),T(n,"opacity",d=e[22][e[118]]),T(n,"transform",h=`\n          rotate(${e[25][e[118]]}, \n          ${e[15][e[118]].coordinates[0]}, \n          ${e[15][e[118]].coordinates[1]})\n        `),T(n,"font-family",f=e[2][e[118]]),T(n,"font-size",y=e[23][e[118]]+"px"),T(n,"font-weight",p=e[24][e[118]]),T(n,"text-anchor",g=Nl(e[3][e[118]]).textAnchor),T(n,"dominant-baseline",m=Nl(e[3][e[118]]).dominantBaseline),this.first=n},m(t,e){v(t,n,e),k(n,o)},p(t,e){32770&e[0]&&x!==(x=t[1][t[118]]+"")&&S(o,x),1081344&e[0]&&i!==(i=t[20][t[118]])&&T(n,"stroke-opacity",i),32768&e[0]&&r!==(r=t[15][t[118]].coordinates[1])&&T(n,"y",r),163840&e[0]&&s!==(s=t[17][t[118]])&&T(n,"fill",s),294912&e[0]&&a!==(a=t[18][t[118]])&&T(n,"stroke",a),557056&e[0]&&c!==(c=t[19][t[118]])&&T(n,"stroke-width",c),2129920&e[0]&&u!==(u=t[21][t[118]])&&T(n,"fill-opacity",u),32768&e[0]&&l!==(l=t[15][t[118]].coordinates[0])&&T(n,"x",l),4227072&e[0]&&d!==(d=t[22][t[118]])&&T(n,"opacity",d),33587200&e[0]&&h!==(h=`\n          rotate(${t[25][t[118]]}, \n          ${t[15][t[118]].coordinates[0]}, \n          ${t[15][t[118]].coordinates[1]})\n        `)&&T(n,"transform",h),32772&e[0]&&f!==(f=t[2][t[118]])&&T(n,"font-family",f),8421376&e[0]&&y!==(y=t[23][t[118]]+"px")&&T(n,"font-size",y),16809984&e[0]&&p!==(p=t[24][t[118]])&&T(n,"font-weight",p),32776&e[0]&&g!==(g=Nl(t[3][t[118]]).textAnchor)&&T(n,"text-anchor",g),32776&e[0]&&m!==(m=Nl(t[3][t[118]]).dominantBaseline)&&T(n,"dominant-baseline",m)},d(t){t&&b(n)}}}function Pd(t){let n,o,i="svg"===t[30].output(),r=i&&bd(t),s=t[29]&&Od(t);return{c(){r&&r.c(),n=$(),s&&s.c(),o=_()},m(t,e){r&&r.m(t,e),v(t,n,e),s&&s.m(t,e),v(t,o,e)},p(t,e){1073741824&e[0]&&(i="svg"===t[30].output()),i?r?r.p(t,e):(r=bd(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),t[29]?s?s.p(t,e):(s=Od(t),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},i:e,o:e,d(t){r&&r.d(t),t&&b(n),s&&s.d(t),t&&b(o)}}}let Ad=0;function Id(t,n,o){let i,r,s,a,c,d,h,f,y,p,g,m,x,k,v,b,M=e,w=()=>(M(),M=u(ye,t=>o(15,a=t)),ye),$=e,_=()=>($(),$=u(pe,t=>o(16,c=t)),pe),T=e,S=()=>(T(),T=u(ge,t=>o(17,d=t)),ge),O=e,C=()=>(O(),O=u(me,t=>o(18,h=t)),me),P=e,L=()=>(P(),P=u(xe,t=>o(19,f=t)),xe),E=e,F=()=>(E(),E=u(ke,t=>o(20,y=t)),ke),j=e,Y=()=>(j(),j=u(ve,t=>o(21,p=t)),ve),R=e,z=()=>(R(),R=u(be,t=>o(22,g=t)),be),q=e,H=()=>(q(),q=u(Me,t=>o(23,m=t)),Me),G=e,B=()=>(G(),G=u(we,t=>o(24,x=t)),we),Z=e,V=()=>(Z(),Z=u(_e,t=>o(25,k=t)),_e);t.$$.on_destroy.push(()=>M()),t.$$.on_destroy.push(()=>$()),t.$$.on_destroy.push(()=>T()),t.$$.on_destroy.push(()=>O()),t.$$.on_destroy.push(()=>P()),t.$$.on_destroy.push(()=>E()),t.$$.on_destroy.push(()=>j()),t.$$.on_destroy.push(()=>R()),t.$$.on_destroy.push(()=>q()),t.$$.on_destroy.push(()=>G()),t.$$.on_destroy.push(()=>Z());const J="layer"+Ad++;let K=!0;const U=()=>!K;let{type:Q}=n,{x:tt}=n,{y:et}=n,{x1:nt}=n,{x2:ot}=n,{y1:it}=n,{y2:rt}=n,{geometry:st}=n,{shape:at}=n,{size:ct}=n,{independentAxis:ut}=n,{radius:lt}=n,{fill:dt}=n,{stroke:ft}=n,{strokeWidth:yt}=n,{strokeOpacity:pt}=n,{fillOpacity:gt}=n,{opacity:mt}=n,{text:xt}=n,{fontFamily:kt}=n,{fontSize:vt}=n,{fontWeight:bt}=n,{rotation:Mt}=n,{anchorPoint:wt}=n,{transition:$t}=n,{onClick:_t}=n,{onMousedown:Tt}=n,{onMouseup:St}=n,{onMouseover:Ot}=n,{onMouseout:Ct}=n,{onMousedrag:Pt}=n,{onTouchdown:At}=n,{onTouchup:It}=n,{onTouchover:Nt}=n,{onTouchout:Wt}=n,{onTouchdrag:Lt}=n,{onSelect:Et}=n,{onDeselect:Ft}=n,{key:jt}=n,{renderSettings:Yt}=n,{blockReindexing:Rt=!1}=n,{_asPolygon:Xt=!0}=n,zt=$u(Q,{x:tt,y:et,x1:nt,x2:ot,y1:it,y2:rt,geometry:st,shape:at,size:ct,independentAxis:ut,radius:lt,fill:dt,stroke:ft,strokeWidth:yt,strokeOpacity:pt,fillOpacity:gt,opacity:mt,text:xt,fontFamily:kt,fontSize:vt,fontWeight:bt,rotation:Mt,anchorPoint:wt}),Dt={x:tt,y:et,x1:nt,x2:ot,y1:it,y2:rt,geometry:st,shape:at,size:ct,independentAxis:ut},qt=nl[Q],Ht=pl[Q],Gt=!0===Xt&&void 0!==representAsPolygon;const Bt=ht();l(t,Bt,t=>o(30,b=t));const Zt=Ye();l(t,Zt,t=>o(91,i=t));const Vt=Ve();l(t,Vt,t=>o(92,r=t));const Jt=He();l(t,Jt,t=>o(97,v=t));const Kt=en();let Ut,Qt;l(t,Kt,t=>o(93,s=t)),Le();let te=Object.keys(Ut),ee=gd(zt.radius,te);const ne=gd(zt.fill,te),oe=gd(zt.stroke,te);let ie=gd(zt.strokeWidth,te);const re=gd(zt.strokeOpacity,te),se=gd(zt.fillOpacity,te),ae=gd(zt.opacity,te);let ce=gd(zt.text,te),ue=gd(zt.fontFamily,te);const le=gd(zt.fontSize,te),de=gd(zt.fontWeight,te),he=gd(zt.rotation,te);let fe=gd(zt.anchorPoint,te);Ee();let ye=Tl("geometry",Qt,$t);w();let pe=Tl("radius",ee,$t);_();let ge=Tl("fill",ne,$t);S();let me=Tl("stroke",oe,$t);C();let xe=Tl("strokeWidth",ie,$t);L();let ke=Tl("strokeOpacity",re,$t);F();let ve=Tl("fillOpacity",se,$t);Y();let be=Tl("opacity",ae,$t);z();let Me=Tl("fontSize",le,$t);H();let we=Tl("fontWeight",de,$t);B();let $e,_e=Tl("rotation",he,$t);V();let Te,Se,Oe,Ce,Pe,Ae,Ie,Ne=!1,We=!1;function Le(){o(83,Ut=qt(Dt,jt,i,r,s,Pl(Yt,r)))}function Ee(){Qt=Gt?Ht(Ut,{radiusObject:ee,strokeWidthObject:ie}):Ut}function Fe(){if(K||!Rt&&!i.blockReindexing){if(je(),Te){const t=v.mouse().marks();t.loadLayer(Q,Re()),_t&&t.addLayerInteraction("click",J,_t),Tt&&t.addLayerInteraction("mousedown",J,Tt),St&&t.addLayerInteraction("mouseup",J,St),Ct&&t.addLayerInteraction("mouseout",J,Ct),Ot&&t.addLayerInteraction("mouseover",J,Ot),Pt&&t.addLayerInteraction("mousedrag",J,Pt)}if(Se){const t=v.touch().marks();t.loadLayer(Q,Re()),At&&t.addLayerInteraction("touchdown",J,At),It&&t.addLayerInteraction("touchup",J,It),Nt&&t.addLayerInteraction("touchover",J,Nt),Wt&&t.addLayerInteraction("touchout",J,Wt),Lt&&t.addLayerInteraction("touchdrag",J,Lt)}}if(function(){const t=v.select();t.layerIsLoaded(J)&&t.removeLayer(J)}(),Oe){v.select().loadLayer(Q,Re(),{onSelect:Et,onDeselect:Ft})}}function je(){if(dn.hasMouse){const t=v.mouse().marks();t.layerIsLoaded(J)&&(t.removeAllLayerInteractions(J),t.removeLayer(J))}if(dn.hasTouch){const t=v.touch().marks();t.layerIsLoaded(J)&&(t.removeAllLayerInteractions(J),t.removeLayer(J))}}function Re(){return function(t,e,n,o,i){const r={layerId:e,keyArray:n};let s;return"Point"===t&&(s={pixelGeometryObject:o.pixelGeometryObject,radiusObject:i.radiusObject}),"Label"===t&&(s={pixelGeometryObject:o.pixelGeometryObject,radiusObject:i.fontSizeObject}),"Rectangle"===t&&(s={screenGeometryObject:o.screenGeometryObject}),"Polygon"===t&&(s={screenGeometryObject:o.screenGeometryObject}),"Line"===t&&(s={pixelGeometryObject:o.pixelGeometryObject,strokeWidthObject:i.strokeWidthObject}),"Symbol"===t&&(s={screenGeometryObject:o.screenGeometryObject}),"Area"===t&&(s={screenGeometryObject:o.screenGeometryObject}),r.layerAttributes=s,r}(Q,J,te,{pixelGeometryObject:Ut,screenGeometryObject:Qt},{radiusObject:ee,strokeWidthObject:ie})}return A(()=>{!wl($e,$t)&&U()&&(w(o(4,ye=Tl("geometry",a,$t))),_(o(5,pe=Tl("radius",c,$t))),S(o(6,ge=Tl("fill",d,$t))),C(o(7,me=Tl("stroke",h,$t))),L(o(8,xe=Tl("strokeWidth",f,$t))),F(o(9,ke=Tl("strokeOpacity",y,$t))),Y(o(10,ve=Tl("fillOpacity",p,$t))),z(o(11,be=Tl("opacity",g,$t))),H(o(12,Me=Tl("fontSize",m,$t))),B(o(13,we=Tl("fontWeight",x,$t))),V(o(14,_e=Tl("rotation",k,$t)))),$e=$t}),N(()=>{K=!1}),I(()=>{Fe()}),W(()=>{je()}),t.$set=t=>{"type"in t&&o(0,Q=t.type),"x"in t&&o(36,tt=t.x),"y"in t&&o(37,et=t.y),"x1"in t&&o(38,nt=t.x1),"x2"in t&&o(39,ot=t.x2),"y1"in t&&o(40,it=t.y1),"y2"in t&&o(41,rt=t.y2),"geometry"in t&&o(42,st=t.geometry),"shape"in t&&o(43,at=t.shape),"size"in t&&o(44,ct=t.size),"independentAxis"in t&&o(45,ut=t.independentAxis),"radius"in t&&o(46,lt=t.radius),"fill"in t&&o(47,dt=t.fill),"stroke"in t&&o(48,ft=t.stroke),"strokeWidth"in t&&o(49,yt=t.strokeWidth),"strokeOpacity"in t&&o(50,pt=t.strokeOpacity),"fillOpacity"in t&&o(51,gt=t.fillOpacity),"opacity"in t&&o(52,mt=t.opacity),"text"in t&&o(53,xt=t.text),"fontFamily"in t&&o(54,kt=t.fontFamily),"fontSize"in t&&o(55,vt=t.fontSize),"fontWeight"in t&&o(56,bt=t.fontWeight),"rotation"in t&&o(57,Mt=t.rotation),"anchorPoint"in t&&o(58,wt=t.anchorPoint),"transition"in t&&o(59,$t=t.transition),"onClick"in t&&o(60,_t=t.onClick),"onMousedown"in t&&o(61,Tt=t.onMousedown),"onMouseup"in t&&o(62,St=t.onMouseup),"onMouseover"in t&&o(63,Ot=t.onMouseover),"onMouseout"in t&&o(64,Ct=t.onMouseout),"onMousedrag"in t&&o(65,Pt=t.onMousedrag),"onTouchdown"in t&&o(66,At=t.onTouchdown),"onTouchup"in t&&o(67,It=t.onTouchup),"onTouchover"in t&&o(68,Nt=t.onTouchover),"onTouchout"in t&&o(69,Wt=t.onTouchout),"onTouchdrag"in t&&o(70,Lt=t.onTouchdrag),"onSelect"in t&&o(71,Et=t.onSelect),"onDeselect"in t&&o(72,Ft=t.onDeselect),"key"in t&&o(73,jt=t.key),"renderSettings"in t&&o(74,Yt=t.renderSettings),"blockReindexing"in t&&o(75,Rt=t.blockReindexing),"_asPolygon"in t&&o(76,Xt=t._asPolygon)},t.$$.update=()=>{1&t.$$.dirty[0]|268435424&t.$$.dirty[1]&&U()&&o(78,zt=$u(Q,{x:tt,y:et,x1:nt,x2:ot,y1:it,y2:rt,geometry:st,shape:at,size:ct,independentAxis:ut,radius:lt,fill:dt,stroke:ft,strokeWidth:yt,strokeOpacity:pt,fillOpacity:gt,opacity:mt,text:xt,fontFamily:kt,fontSize:vt,fontWeight:bt,rotation:Mt,anchorPoint:wt})),32736&t.$$.dirty[1]&&U()&&o(79,Dt={x:tt,y:et,x1:nt,x2:ot,y1:it,y2:rt,geometry:st,shape:at,size:ct,independentAxis:ut}),1&t.$$.dirty[0]&&U()&&(qt=nl[Q],Ht=pl[Q]),16384&t.$$.dirty[2]&&U()&&o(82,Gt=!0===Xt&&void 0!==representAsPolygon),1610749952&t.$$.dirty[2]|1&t.$$.dirty[3]&&U()&&(o(89,Ne=!0),o(90,We=!0)),405798912&t.$$.dirty[2]&&(D(),X).then(()=>{Ne&&(Le(),o(85,te=Object.keys(Ut)),Gt&&(ee=gd(zt.radius,te),ie=gd(zt.strokeWidth,te))),We&&(Ee(),ye.set(Qt),Fe()),o(89,Ne=!1),o(90,We=!1)}),288&t.$$.dirty[0]|9502720&t.$$.dirty[2]&&U()&&(Gt||(pe.set(gd(zt.radius,te)),xe.set(gd(zt.strokeWidth,te)))),64&t.$$.dirty[0]|8454144&t.$$.dirty[2]&&U()&&ge.set(gd(zt.fill,te)),128&t.$$.dirty[0]|8454144&t.$$.dirty[2]&&U()&&me.set(gd(zt.stroke,te)),512&t.$$.dirty[0]|8454144&t.$$.dirty[2]&&U()&&ke.set(gd(zt.strokeOpacity,te)),1024&t.$$.dirty[0]|8454144&t.$$.dirty[2]&&U()&&ve.set(gd(zt.fillOpacity,te)),2048&t.$$.dirty[0]|8454144&t.$$.dirty[2]&&U()&&be.set(gd(zt.opacity,te)),4096&t.$$.dirty[0]|8454144&t.$$.dirty[2]&&U()&&Me.set(gd(zt.fontSize,te)),8192&t.$$.dirty[0]|8454144&t.$$.dirty[2]&&U()&&we.set(gd(zt.fontWeight,te)),16384&t.$$.dirty[0]|8454144&t.$$.dirty[2]&&U()&&_e.set(gd(zt.rotation,te)),8454144&t.$$.dirty[2]&&U()&&o(1,ce=gd(zt.text,te)),8454144&t.$$.dirty[2]&&U()&&o(2,ue=gd(zt.fontFamily,te)),8454144&t.$$.dirty[2]&&U()&&o(3,fe=gd(zt.anchorPoint,te)),1610612736&t.$$.dirty[1]|15&t.$$.dirty[2]&&(Te=dn.hasMouse&&Cl(_t,Tt,St,Ot,Ct,Pt)),496&t.$$.dirty[2]&&(Se=dn.hasTouch&&Cl(At,It,Nt,Wt,Lt)),1536&t.$$.dirty[2]&&(Oe=void 0!==Et||void 0!==Ft),1&t.$$.dirty[0]|1048576&t.$$.dirty[2]&&o(26,Ce=!["Point","Line","Label"].includes(Q)||Gt),1&t.$$.dirty[0]|1048576&t.$$.dirty[2]&&o(27,Pe="Point"===Q&&!Gt),1&t.$$.dirty[0]|1048576&t.$$.dirty[2]&&o(28,Ae="Line"===Q&&!Gt),1&t.$$.dirty[0]&&o(29,Ie="Label"===Q)},[Q,ce,ue,fe,ye,pe,ge,me,xe,ke,ve,be,Me,we,_e,a,c,d,h,f,y,p,g,m,x,k,Ce,Pe,Ae,Ie,b,Bt,Zt,Vt,Jt,Kt,tt,et,nt,ot,it,rt,st,at,ct,ut,lt,dt,ft,yt,pt,gt,mt,xt,kt,vt,bt,Mt,wt,$t,_t,Tt,St,Ot,Ct,Pt,At,It,Nt,Wt,Lt,Et,Ft,jt,Yt,Rt,Xt]}class Nd extends at{constructor(t){super(),st(this,t,Id,Pd,c,{type:0,x:36,y:37,x1:38,x2:39,y1:40,y2:41,geometry:42,shape:43,size:44,independentAxis:45,radius:46,fill:47,stroke:48,strokeWidth:49,strokeOpacity:50,fillOpacity:51,opacity:52,text:53,fontFamily:54,fontSize:55,fontWeight:56,rotation:57,anchorPoint:58,transition:59,onClick:60,onMousedown:61,onMouseup:62,onMouseover:63,onMouseout:64,onMousedrag:65,onTouchdown:66,onTouchup:67,onTouchover:68,onTouchout:69,onTouchdrag:70,onSelect:71,onDeselect:72,key:73,renderSettings:74,blockReindexing:75,_asPolygon:76},[-1,-1,-1,-1,-1])}}function Wd(t){let e;const n=new Nd({props:{type:"Point",x:t[0],y:t[1],geometry:t[2],radius:t[3],fill:t[4],stroke:t[5],strokeWidth:t[6],strokeOpacity:t[7],fillOpacity:t[8],opacity:t[9],transition:t[10],onClick:t[11],onMousedown:t[12],onMouseup:t[13],onMouseover:t[14],onMouseout:t[15],onMousedrag:t[16],onTouchdown:t[17],onTouchup:t[18],onTouchover:t[19],onTouchout:t[20],onTouchdrag:t[21],onSelect:t[22],onDeselect:t[23],key:t[24],renderSettings:t[25],blockReindexing:t[26],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,[e]){const o={};1&e&&(o.x=t[0]),2&e&&(o.y=t[1]),4&e&&(o.geometry=t[2]),8&e&&(o.radius=t[3]),16&e&&(o.fill=t[4]),32&e&&(o.stroke=t[5]),64&e&&(o.strokeWidth=t[6]),128&e&&(o.strokeOpacity=t[7]),256&e&&(o.fillOpacity=t[8]),512&e&&(o.opacity=t[9]),1024&e&&(o.transition=t[10]),2048&e&&(o.onClick=t[11]),4096&e&&(o.onMousedown=t[12]),8192&e&&(o.onMouseup=t[13]),16384&e&&(o.onMouseover=t[14]),32768&e&&(o.onMouseout=t[15]),65536&e&&(o.onMousedrag=t[16]),131072&e&&(o.onTouchdown=t[17]),262144&e&&(o.onTouchup=t[18]),524288&e&&(o.onTouchover=t[19]),1048576&e&&(o.onTouchout=t[20]),2097152&e&&(o.onTouchdrag=t[21]),4194304&e&&(o.onSelect=t[22]),8388608&e&&(o.onDeselect=t[23]),16777216&e&&(o.key=t[24]),33554432&e&&(o.renderSettings=t[25]),67108864&e&&(o.blockReindexing=t[26]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function Ld(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{radius:s}=e,{fill:a}=e,{stroke:c}=e,{strokeWidth:u}=e,{strokeOpacity:l}=e,{fillOpacity:d}=e,{opacity:h}=e,{transition:f}=e,{onClick:y}=e,{onMousedown:p}=e,{onMouseup:g}=e,{onMouseover:m}=e,{onMouseout:x}=e,{onMousedrag:k}=e,{onTouchdown:v}=e,{onTouchup:b}=e,{onTouchover:M}=e,{onTouchout:w}=e,{onTouchdrag:$}=e,{onSelect:_}=e,{onDeselect:T}=e,{key:S}=e,{renderSettings:O}=e,{blockReindexing:C=!1}=e;return t.$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"radius"in t&&n(3,s=t.radius),"fill"in t&&n(4,a=t.fill),"stroke"in t&&n(5,c=t.stroke),"strokeWidth"in t&&n(6,u=t.strokeWidth),"strokeOpacity"in t&&n(7,l=t.strokeOpacity),"fillOpacity"in t&&n(8,d=t.fillOpacity),"opacity"in t&&n(9,h=t.opacity),"transition"in t&&n(10,f=t.transition),"onClick"in t&&n(11,y=t.onClick),"onMousedown"in t&&n(12,p=t.onMousedown),"onMouseup"in t&&n(13,g=t.onMouseup),"onMouseover"in t&&n(14,m=t.onMouseover),"onMouseout"in t&&n(15,x=t.onMouseout),"onMousedrag"in t&&n(16,k=t.onMousedrag),"onTouchdown"in t&&n(17,v=t.onTouchdown),"onTouchup"in t&&n(18,b=t.onTouchup),"onTouchover"in t&&n(19,M=t.onTouchover),"onTouchout"in t&&n(20,w=t.onTouchout),"onTouchdrag"in t&&n(21,$=t.onTouchdrag),"onSelect"in t&&n(22,_=t.onSelect),"onDeselect"in t&&n(23,T=t.onDeselect),"key"in t&&n(24,S=t.key),"renderSettings"in t&&n(25,O=t.renderSettings),"blockReindexing"in t&&n(26,C=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$,_,T,S,O,C]}function Ed(t){let e;const n=new Nd({props:{type:"Rectangle",x1:t[0],x2:t[1],y1:t[2],y2:t[3],fill:t[4],stroke:t[5],strokeWidth:t[6],strokeOpacity:t[7],fillOpacity:t[8],opacity:t[9],transition:t[10],onClick:t[11],onMousedown:t[12],onMouseup:t[13],onMouseover:t[14],onMouseout:t[15],onMousedrag:t[16],onTouchdown:t[17],onTouchup:t[18],onTouchover:t[19],onTouchout:t[20],onTouchdrag:t[21],onSelect:t[22],onDeselect:t[23],key:t[24],renderSettings:t[25],blockReindexing:t[26],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,[e]){const o={};1&e&&(o.x1=t[0]),2&e&&(o.x2=t[1]),4&e&&(o.y1=t[2]),8&e&&(o.y2=t[3]),16&e&&(o.fill=t[4]),32&e&&(o.stroke=t[5]),64&e&&(o.strokeWidth=t[6]),128&e&&(o.strokeOpacity=t[7]),256&e&&(o.fillOpacity=t[8]),512&e&&(o.opacity=t[9]),1024&e&&(o.transition=t[10]),2048&e&&(o.onClick=t[11]),4096&e&&(o.onMousedown=t[12]),8192&e&&(o.onMouseup=t[13]),16384&e&&(o.onMouseover=t[14]),32768&e&&(o.onMouseout=t[15]),65536&e&&(o.onMousedrag=t[16]),131072&e&&(o.onTouchdown=t[17]),262144&e&&(o.onTouchup=t[18]),524288&e&&(o.onTouchover=t[19]),1048576&e&&(o.onTouchout=t[20]),2097152&e&&(o.onTouchdrag=t[21]),4194304&e&&(o.onSelect=t[22]),8388608&e&&(o.onDeselect=t[23]),16777216&e&&(o.key=t[24]),33554432&e&&(o.renderSettings=t[25]),67108864&e&&(o.blockReindexing=t[26]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function Fd(t,e,n){let{x1:o}=e,{x2:i}=e,{y1:r}=e,{y2:s}=e,{fill:a}=e,{stroke:c}=e,{strokeWidth:u}=e,{strokeOpacity:l}=e,{fillOpacity:d}=e,{opacity:h}=e,{transition:f}=e,{onClick:y}=e,{onMousedown:p}=e,{onMouseup:g}=e,{onMouseover:m}=e,{onMouseout:x}=e,{onMousedrag:k}=e,{onTouchdown:v}=e,{onTouchup:b}=e,{onTouchover:M}=e,{onTouchout:w}=e,{onTouchdrag:$}=e,{onSelect:_}=e,{onDeselect:T}=e,{key:S}=e,{renderSettings:O}=e,{blockReindexing:C=!1}=e;return t.$set=t=>{"x1"in t&&n(0,o=t.x1),"x2"in t&&n(1,i=t.x2),"y1"in t&&n(2,r=t.y1),"y2"in t&&n(3,s=t.y2),"fill"in t&&n(4,a=t.fill),"stroke"in t&&n(5,c=t.stroke),"strokeWidth"in t&&n(6,u=t.strokeWidth),"strokeOpacity"in t&&n(7,l=t.strokeOpacity),"fillOpacity"in t&&n(8,d=t.fillOpacity),"opacity"in t&&n(9,h=t.opacity),"transition"in t&&n(10,f=t.transition),"onClick"in t&&n(11,y=t.onClick),"onMousedown"in t&&n(12,p=t.onMousedown),"onMouseup"in t&&n(13,g=t.onMouseup),"onMouseover"in t&&n(14,m=t.onMouseover),"onMouseout"in t&&n(15,x=t.onMouseout),"onMousedrag"in t&&n(16,k=t.onMousedrag),"onTouchdown"in t&&n(17,v=t.onTouchdown),"onTouchup"in t&&n(18,b=t.onTouchup),"onTouchover"in t&&n(19,M=t.onTouchover),"onTouchout"in t&&n(20,w=t.onTouchout),"onTouchdrag"in t&&n(21,$=t.onTouchdrag),"onSelect"in t&&n(22,_=t.onSelect),"onDeselect"in t&&n(23,T=t.onDeselect),"key"in t&&n(24,S=t.key),"renderSettings"in t&&n(25,O=t.renderSettings),"blockReindexing"in t&&n(26,C=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$,_,T,S,O,C]}class jd extends at{constructor(t){super(),st(this,t,Fd,Ed,c,{x1:0,x2:1,y1:2,y2:3,fill:4,stroke:5,strokeWidth:6,strokeOpacity:7,fillOpacity:8,opacity:9,transition:10,onClick:11,onMousedown:12,onMouseup:13,onMouseover:14,onMouseout:15,onMousedrag:16,onTouchdown:17,onTouchup:18,onTouchover:19,onTouchout:20,onTouchdrag:21,onSelect:22,onDeselect:23,key:24,renderSettings:25,blockReindexing:26})}}function Yd(t){let e;const n=new Nd({props:{type:"Polygon",x:t[0],y:t[1],geometry:t[2],fill:t[3],stroke:t[4],strokeWidth:t[5],strokeOpacity:t[6],fillOpacity:t[7],opacity:t[8],transition:t[9],onClick:t[10],onMousedown:t[11],onMouseup:t[12],onMouseover:t[13],onMouseout:t[14],onMousedrag:t[15],onTouchdown:t[16],onTouchup:t[17],onTouchover:t[18],onTouchout:t[19],onTouchdrag:t[20],onSelect:t[21],onDeselect:t[22],key:t[24],renderSettings:t[23],blockReindexing:t[25],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,[e]){const o={};1&e&&(o.x=t[0]),2&e&&(o.y=t[1]),4&e&&(o.geometry=t[2]),8&e&&(o.fill=t[3]),16&e&&(o.stroke=t[4]),32&e&&(o.strokeWidth=t[5]),64&e&&(o.strokeOpacity=t[6]),128&e&&(o.fillOpacity=t[7]),256&e&&(o.opacity=t[8]),512&e&&(o.transition=t[9]),1024&e&&(o.onClick=t[10]),2048&e&&(o.onMousedown=t[11]),4096&e&&(o.onMouseup=t[12]),8192&e&&(o.onMouseover=t[13]),16384&e&&(o.onMouseout=t[14]),32768&e&&(o.onMousedrag=t[15]),65536&e&&(o.onTouchdown=t[16]),131072&e&&(o.onTouchup=t[17]),262144&e&&(o.onTouchover=t[18]),524288&e&&(o.onTouchout=t[19]),1048576&e&&(o.onTouchdrag=t[20]),2097152&e&&(o.onSelect=t[21]),4194304&e&&(o.onDeselect=t[22]),16777216&e&&(o.key=t[24]),8388608&e&&(o.renderSettings=t[23]),33554432&e&&(o.blockReindexing=t[25]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function Rd(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{fill:s}=e,{stroke:a}=e,{strokeWidth:c}=e,{strokeOpacity:u}=e,{fillOpacity:l}=e,{opacity:d}=e,{transition:h}=e,{onClick:f}=e,{onMousedown:y}=e,{onMouseup:p}=e,{onMouseover:g}=e,{onMouseout:m}=e,{onMousedrag:x}=e,{onTouchdown:k}=e,{onTouchup:v}=e,{onTouchover:b}=e,{onTouchout:M}=e,{onTouchdrag:w}=e,{onSelect:$}=e,{onDeselect:_}=e,{renderSettings:T}=e,{key:S}=e,{blockReindexing:O=!1}=e;return t.$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"fill"in t&&n(3,s=t.fill),"stroke"in t&&n(4,a=t.stroke),"strokeWidth"in t&&n(5,c=t.strokeWidth),"strokeOpacity"in t&&n(6,u=t.strokeOpacity),"fillOpacity"in t&&n(7,l=t.fillOpacity),"opacity"in t&&n(8,d=t.opacity),"transition"in t&&n(9,h=t.transition),"onClick"in t&&n(10,f=t.onClick),"onMousedown"in t&&n(11,y=t.onMousedown),"onMouseup"in t&&n(12,p=t.onMouseup),"onMouseover"in t&&n(13,g=t.onMouseover),"onMouseout"in t&&n(14,m=t.onMouseout),"onMousedrag"in t&&n(15,x=t.onMousedrag),"onTouchdown"in t&&n(16,k=t.onTouchdown),"onTouchup"in t&&n(17,v=t.onTouchup),"onTouchover"in t&&n(18,b=t.onTouchover),"onTouchout"in t&&n(19,M=t.onTouchout),"onTouchdrag"in t&&n(20,w=t.onTouchdrag),"onSelect"in t&&n(21,$=t.onSelect),"onDeselect"in t&&n(22,_=t.onDeselect),"renderSettings"in t&&n(23,T=t.renderSettings),"key"in t&&n(24,S=t.key),"blockReindexing"in t&&n(25,O=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$,_,T,S,O]}function Xd(t){let e;const n=new Nd({props:{type:"Line",x:t[0],y:t[1],geometry:t[2],strokeWidth:t[3],stroke:t[4],opacity:t[5],transition:t[6],onClick:t[7],onMousedown:t[8],onMouseup:t[9],onMouseover:t[10],onMouseout:t[11],onMousedrag:t[12],onTouchdown:t[13],onTouchup:t[14],onTouchover:t[15],onTouchout:t[16],onTouchdrag:t[17],onSelect:t[18],onDeselect:t[19],key:t[20],renderSettings:t[21],blockReindexing:t[22],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,[e]){const o={};1&e&&(o.x=t[0]),2&e&&(o.y=t[1]),4&e&&(o.geometry=t[2]),8&e&&(o.strokeWidth=t[3]),16&e&&(o.stroke=t[4]),32&e&&(o.opacity=t[5]),64&e&&(o.transition=t[6]),128&e&&(o.onClick=t[7]),256&e&&(o.onMousedown=t[8]),512&e&&(o.onMouseup=t[9]),1024&e&&(o.onMouseover=t[10]),2048&e&&(o.onMouseout=t[11]),4096&e&&(o.onMousedrag=t[12]),8192&e&&(o.onTouchdown=t[13]),16384&e&&(o.onTouchup=t[14]),32768&e&&(o.onTouchover=t[15]),65536&e&&(o.onTouchout=t[16]),131072&e&&(o.onTouchdrag=t[17]),262144&e&&(o.onSelect=t[18]),524288&e&&(o.onDeselect=t[19]),1048576&e&&(o.key=t[20]),2097152&e&&(o.renderSettings=t[21]),4194304&e&&(o.blockReindexing=t[22]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function zd(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{strokeWidth:s}=e,{stroke:a}=e,{opacity:c}=e,{transition:u}=e,{onClick:l}=e,{onMousedown:d}=e,{onMouseup:h}=e,{onMouseover:f}=e,{onMouseout:y}=e,{onMousedrag:p}=e,{onTouchdown:g}=e,{onTouchup:m}=e,{onTouchover:x}=e,{onTouchout:k}=e,{onTouchdrag:v}=e,{onSelect:b}=e,{onDeselect:M}=e,{key:w}=e,{renderSettings:$}=e,{blockReindexing:_=!1}=e;return t.$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"strokeWidth"in t&&n(3,s=t.strokeWidth),"stroke"in t&&n(4,a=t.stroke),"opacity"in t&&n(5,c=t.opacity),"transition"in t&&n(6,u=t.transition),"onClick"in t&&n(7,l=t.onClick),"onMousedown"in t&&n(8,d=t.onMousedown),"onMouseup"in t&&n(9,h=t.onMouseup),"onMouseover"in t&&n(10,f=t.onMouseover),"onMouseout"in t&&n(11,y=t.onMouseout),"onMousedrag"in t&&n(12,p=t.onMousedrag),"onTouchdown"in t&&n(13,g=t.onTouchdown),"onTouchup"in t&&n(14,m=t.onTouchup),"onTouchover"in t&&n(15,x=t.onTouchover),"onTouchout"in t&&n(16,k=t.onTouchout),"onTouchdrag"in t&&n(17,v=t.onTouchdrag),"onSelect"in t&&n(18,b=t.onSelect),"onDeselect"in t&&n(19,M=t.onDeselect),"key"in t&&n(20,w=t.key),"renderSettings"in t&&n(21,$=t.renderSettings),"blockReindexing"in t&&n(22,_=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$,_]}class Dd extends at{constructor(t){super(),st(this,t,zd,Xd,c,{x:0,y:1,geometry:2,strokeWidth:3,stroke:4,opacity:5,transition:6,onClick:7,onMousedown:8,onMouseup:9,onMouseover:10,onMouseout:11,onMousedrag:12,onTouchdown:13,onTouchup:14,onTouchover:15,onTouchout:16,onTouchdrag:17,onSelect:18,onDeselect:19,key:20,renderSettings:21,blockReindexing:22})}}function qd(t){let e;const n=new Nd({props:{type:"Label",x:t[0],y:t[1],geometry:t[2],fill:t[3],stroke:t[4],strokeWidth:t[5],strokeOpacity:t[6],fillOpacity:t[7],opacity:t[8],text:t[9],fontFamily:t[10],fontSize:t[11],fontWeight:t[12],rotation:t[13],anchorPoint:t[14],transition:t[15],onClick:t[16],onMousedown:t[17],onMouseup:t[18],onMouseover:t[19],onMouseout:t[20],onMousedrag:t[21],onTouchdown:t[22],onTouchup:t[23],onTouchover:t[24],onTouchout:t[25],onTouchdrag:t[26],onSelect:t[27],onDeselect:t[28],key:t[29],renderSettings:t[30],blockReindexing:t[31],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,e){const o={};1&e[0]&&(o.x=t[0]),2&e[0]&&(o.y=t[1]),4&e[0]&&(o.geometry=t[2]),8&e[0]&&(o.fill=t[3]),16&e[0]&&(o.stroke=t[4]),32&e[0]&&(o.strokeWidth=t[5]),64&e[0]&&(o.strokeOpacity=t[6]),128&e[0]&&(o.fillOpacity=t[7]),256&e[0]&&(o.opacity=t[8]),512&e[0]&&(o.text=t[9]),1024&e[0]&&(o.fontFamily=t[10]),2048&e[0]&&(o.fontSize=t[11]),4096&e[0]&&(o.fontWeight=t[12]),8192&e[0]&&(o.rotation=t[13]),16384&e[0]&&(o.anchorPoint=t[14]),32768&e[0]&&(o.transition=t[15]),65536&e[0]&&(o.onClick=t[16]),131072&e[0]&&(o.onMousedown=t[17]),262144&e[0]&&(o.onMouseup=t[18]),524288&e[0]&&(o.onMouseover=t[19]),1048576&e[0]&&(o.onMouseout=t[20]),2097152&e[0]&&(o.onMousedrag=t[21]),4194304&e[0]&&(o.onTouchdown=t[22]),8388608&e[0]&&(o.onTouchup=t[23]),16777216&e[0]&&(o.onTouchover=t[24]),33554432&e[0]&&(o.onTouchout=t[25]),67108864&e[0]&&(o.onTouchdrag=t[26]),134217728&e[0]&&(o.onSelect=t[27]),268435456&e[0]&&(o.onDeselect=t[28]),536870912&e[0]&&(o.key=t[29]),1073741824&e[0]&&(o.renderSettings=t[30]),1&e[1]&&(o.blockReindexing=t[31]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function Hd(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{fill:s}=e,{stroke:a}=e,{strokeWidth:c}=e,{strokeOpacity:u}=e,{fillOpacity:l}=e,{opacity:d}=e,{text:h}=e,{fontFamily:f}=e,{fontSize:y}=e,{fontWeight:p}=e,{rotation:g}=e,{anchorPoint:m}=e,{transition:x}=e,{onClick:k}=e,{onMousedown:v}=e,{onMouseup:b}=e,{onMouseover:M}=e,{onMouseout:w}=e,{onMousedrag:$}=e,{onTouchdown:_}=e,{onTouchup:T}=e,{onTouchover:S}=e,{onTouchout:O}=e,{onTouchdrag:C}=e,{onSelect:P}=e,{onDeselect:A}=e,{key:I}=e,{renderSettings:N}=e,{blockReindexing:W=!1}=e;return t.$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"fill"in t&&n(3,s=t.fill),"stroke"in t&&n(4,a=t.stroke),"strokeWidth"in t&&n(5,c=t.strokeWidth),"strokeOpacity"in t&&n(6,u=t.strokeOpacity),"fillOpacity"in t&&n(7,l=t.fillOpacity),"opacity"in t&&n(8,d=t.opacity),"text"in t&&n(9,h=t.text),"fontFamily"in t&&n(10,f=t.fontFamily),"fontSize"in t&&n(11,y=t.fontSize),"fontWeight"in t&&n(12,p=t.fontWeight),"rotation"in t&&n(13,g=t.rotation),"anchorPoint"in t&&n(14,m=t.anchorPoint),"transition"in t&&n(15,x=t.transition),"onClick"in t&&n(16,k=t.onClick),"onMousedown"in t&&n(17,v=t.onMousedown),"onMouseup"in t&&n(18,b=t.onMouseup),"onMouseover"in t&&n(19,M=t.onMouseover),"onMouseout"in t&&n(20,w=t.onMouseout),"onMousedrag"in t&&n(21,$=t.onMousedrag),"onTouchdown"in t&&n(22,_=t.onTouchdown),"onTouchup"in t&&n(23,T=t.onTouchup),"onTouchover"in t&&n(24,S=t.onTouchover),"onTouchout"in t&&n(25,O=t.onTouchout),"onTouchdrag"in t&&n(26,C=t.onTouchdrag),"onSelect"in t&&n(27,P=t.onSelect),"onDeselect"in t&&n(28,A=t.onDeselect),"key"in t&&n(29,I=t.key),"renderSettings"in t&&n(30,N=t.renderSettings),"blockReindexing"in t&&n(31,W=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$,_,T,S,O,C,P,A,I,N,W]}class Gd extends at{constructor(t){super(),st(this,t,Hd,qd,c,{x:0,y:1,geometry:2,fill:3,stroke:4,strokeWidth:5,strokeOpacity:6,fillOpacity:7,opacity:8,text:9,fontFamily:10,fontSize:11,fontWeight:12,rotation:13,anchorPoint:14,transition:15,onClick:16,onMousedown:17,onMouseup:18,onMouseover:19,onMouseout:20,onMousedrag:21,onTouchdown:22,onTouchup:23,onTouchover:24,onTouchout:25,onTouchdrag:26,onSelect:27,onDeselect:28,key:29,renderSettings:30,blockReindexing:31},[-1,-1])}}function Bd(t){let e;const n=new Nd({props:{type:"Symbol",x:t[0],y:t[1],geometry:t[2],size:t[3],shape:t[4],fill:t[5],stroke:t[6],strokeWidth:t[7],strokeOpacity:t[8],fillOpacity:t[9],opacity:t[10],transition:t[11],onClick:t[12],onMousedown:t[13],onMouseup:t[14],onMouseover:t[15],onMouseout:t[16],onMousedrag:t[17],onTouchdown:t[18],onTouchup:t[19],onTouchover:t[20],onTouchout:t[21],onTouchdrag:t[22],onSelect:t[23],onDeselect:t[24],key:t[25],renderSettings:t[26],blockReindexing:t[27],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,[e]){const o={};1&e&&(o.x=t[0]),2&e&&(o.y=t[1]),4&e&&(o.geometry=t[2]),8&e&&(o.size=t[3]),16&e&&(o.shape=t[4]),32&e&&(o.fill=t[5]),64&e&&(o.stroke=t[6]),128&e&&(o.strokeWidth=t[7]),256&e&&(o.strokeOpacity=t[8]),512&e&&(o.fillOpacity=t[9]),1024&e&&(o.opacity=t[10]),2048&e&&(o.transition=t[11]),4096&e&&(o.onClick=t[12]),8192&e&&(o.onMousedown=t[13]),16384&e&&(o.onMouseup=t[14]),32768&e&&(o.onMouseover=t[15]),65536&e&&(o.onMouseout=t[16]),131072&e&&(o.onMousedrag=t[17]),262144&e&&(o.onTouchdown=t[18]),524288&e&&(o.onTouchup=t[19]),1048576&e&&(o.onTouchover=t[20]),2097152&e&&(o.onTouchout=t[21]),4194304&e&&(o.onTouchdrag=t[22]),8388608&e&&(o.onSelect=t[23]),16777216&e&&(o.onDeselect=t[24]),33554432&e&&(o.key=t[25]),67108864&e&&(o.renderSettings=t[26]),134217728&e&&(o.blockReindexing=t[27]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function Zd(t,e,n){let{x:o}=e,{y:i}=e,{geometry:r}=e,{size:s}=e,{shape:a}=e,{fill:c}=e,{stroke:u}=e,{strokeWidth:l}=e,{strokeOpacity:d}=e,{fillOpacity:h}=e,{opacity:f}=e,{transition:y}=e,{onClick:p}=e,{onMousedown:g}=e,{onMouseup:m}=e,{onMouseover:x}=e,{onMouseout:k}=e,{onMousedrag:v}=e,{onTouchdown:b}=e,{onTouchup:M}=e,{onTouchover:w}=e,{onTouchout:$}=e,{onTouchdrag:_}=e,{onSelect:T}=e,{onDeselect:S}=e,{key:O}=e,{renderSettings:C}=e,{blockReindexing:P=!1}=e;return t.$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"geometry"in t&&n(2,r=t.geometry),"size"in t&&n(3,s=t.size),"shape"in t&&n(4,a=t.shape),"fill"in t&&n(5,c=t.fill),"stroke"in t&&n(6,u=t.stroke),"strokeWidth"in t&&n(7,l=t.strokeWidth),"strokeOpacity"in t&&n(8,d=t.strokeOpacity),"fillOpacity"in t&&n(9,h=t.fillOpacity),"opacity"in t&&n(10,f=t.opacity),"transition"in t&&n(11,y=t.transition),"onClick"in t&&n(12,p=t.onClick),"onMousedown"in t&&n(13,g=t.onMousedown),"onMouseup"in t&&n(14,m=t.onMouseup),"onMouseover"in t&&n(15,x=t.onMouseover),"onMouseout"in t&&n(16,k=t.onMouseout),"onMousedrag"in t&&n(17,v=t.onMousedrag),"onTouchdown"in t&&n(18,b=t.onTouchdown),"onTouchup"in t&&n(19,M=t.onTouchup),"onTouchover"in t&&n(20,w=t.onTouchover),"onTouchout"in t&&n(21,$=t.onTouchout),"onTouchdrag"in t&&n(22,_=t.onTouchdrag),"onSelect"in t&&n(23,T=t.onSelect),"onDeselect"in t&&n(24,S=t.onDeselect),"key"in t&&n(25,O=t.key),"renderSettings"in t&&n(26,C=t.renderSettings),"blockReindexing"in t&&n(27,P=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$,_,T,S,O,C,P]}function Vd(t){let e;const n=new Nd({props:{type:"Area",x1:t[0],x2:t[1],y1:t[2],y2:t[3],independentAxis:t[4],fill:t[5],stroke:t[6],strokeWidth:t[7],strokeOpacity:t[8],fillOpacity:t[9],opacity:t[10],transition:t[11],onClick:t[12],onMousedown:t[13],onMouseup:t[14],onMouseover:t[15],onMouseout:t[16],onMousedrag:t[17],onTouchdown:t[18],onTouchup:t[19],onTouchover:t[20],onTouchout:t[21],onTouchdrag:t[22],onSelect:t[23],onDeselect:t[24],key:t[25],renderSettings:t[26],blockReindexing:t[27],_asPolygon:!1}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,[e]){const o={};1&e&&(o.x1=t[0]),2&e&&(o.x2=t[1]),4&e&&(o.y1=t[2]),8&e&&(o.y2=t[3]),16&e&&(o.independentAxis=t[4]),32&e&&(o.fill=t[5]),64&e&&(o.stroke=t[6]),128&e&&(o.strokeWidth=t[7]),256&e&&(o.strokeOpacity=t[8]),512&e&&(o.fillOpacity=t[9]),1024&e&&(o.opacity=t[10]),2048&e&&(o.transition=t[11]),4096&e&&(o.onClick=t[12]),8192&e&&(o.onMousedown=t[13]),16384&e&&(o.onMouseup=t[14]),32768&e&&(o.onMouseover=t[15]),65536&e&&(o.onMouseout=t[16]),131072&e&&(o.onMousedrag=t[17]),262144&e&&(o.onTouchdown=t[18]),524288&e&&(o.onTouchup=t[19]),1048576&e&&(o.onTouchover=t[20]),2097152&e&&(o.onTouchout=t[21]),4194304&e&&(o.onTouchdrag=t[22]),8388608&e&&(o.onSelect=t[23]),16777216&e&&(o.onDeselect=t[24]),33554432&e&&(o.key=t[25]),67108864&e&&(o.renderSettings=t[26]),134217728&e&&(o.blockReindexing=t[27]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function Jd(t,e,n){let{x1:o}=e,{x2:i}=e,{y1:r}=e,{y2:s}=e,{independentAxis:a}=e,{fill:c}=e,{stroke:u}=e,{strokeWidth:l}=e,{strokeOpacity:d}=e,{fillOpacity:h}=e,{opacity:f}=e,{transition:y}=e,{onClick:p}=e,{onMousedown:g}=e,{onMouseup:m}=e,{onMouseover:x}=e,{onMouseout:k}=e,{onMousedrag:v}=e,{onTouchdown:b}=e,{onTouchup:M}=e,{onTouchover:w}=e,{onTouchout:$}=e,{onTouchdrag:_}=e,{onSelect:T}=e,{onDeselect:S}=e,{key:O}=e,{renderSettings:C}=e,{blockReindexing:P=!1}=e;return t.$set=t=>{"x1"in t&&n(0,o=t.x1),"x2"in t&&n(1,i=t.x2),"y1"in t&&n(2,r=t.y1),"y2"in t&&n(3,s=t.y2),"independentAxis"in t&&n(4,a=t.independentAxis),"fill"in t&&n(5,c=t.fill),"stroke"in t&&n(6,u=t.stroke),"strokeWidth"in t&&n(7,l=t.strokeWidth),"strokeOpacity"in t&&n(8,d=t.strokeOpacity),"fillOpacity"in t&&n(9,h=t.fillOpacity),"opacity"in t&&n(10,f=t.opacity),"transition"in t&&n(11,y=t.transition),"onClick"in t&&n(12,p=t.onClick),"onMousedown"in t&&n(13,g=t.onMousedown),"onMouseup"in t&&n(14,m=t.onMouseup),"onMouseover"in t&&n(15,x=t.onMouseover),"onMouseout"in t&&n(16,k=t.onMouseout),"onMousedrag"in t&&n(17,v=t.onMousedrag),"onTouchdown"in t&&n(18,b=t.onTouchdown),"onTouchup"in t&&n(19,M=t.onTouchup),"onTouchover"in t&&n(20,w=t.onTouchover),"onTouchout"in t&&n(21,$=t.onTouchout),"onTouchdrag"in t&&n(22,_=t.onTouchdrag),"onSelect"in t&&n(23,T=t.onSelect),"onDeselect"in t&&n(24,S=t.onDeselect),"key"in t&&n(25,O=t.key),"renderSettings"in t&&n(26,C=t.renderSettings),"blockReindexing"in t&&n(27,P=t.blockReindexing)},[o,i,r,s,a,c,u,l,d,h,f,y,p,g,m,x,k,v,b,M,w,$,_,T,S,O,C,P]}function Kd(t,e,n,o){let i;if(Array.isArray(t)&&t.length>0)i=t;else if("ticks"in e)i=e.ticks(n);else{if(!("domain"in e))throw new Error("Couldn't construct axis. Please provide 'tickValues' or a scale with\n      either a 'ticks' or a 'domain' method.");i=e.domain()}return o&&"domain"in e&&i[0]!==e.domain()[0]&&i.unshift(e.domain()[0]),i}function Ud(t,e,n){return t||("tickFormat"in e?e.tickFormat(n):t=>t)}function Qd(t){let e;const n=new nd({props:{x:t[23],y:t[24],strokeWidth:t[3],opacity:t[2],stroke:t[1]}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,e){const o={};8388608&e[0]&&(o.x=t[23]),16777216&e[0]&&(o.y=t[24]),8&e[0]&&(o.strokeWidth=t[3]),4&e[0]&&(o.opacity=t[2]),2&e[0]&&(o.stroke=t[1]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function th(t){let e;const n=new Dd({props:{x:t[25],y:t[26],strokeWidth:t[5],opacity:t[7],stroke:t[6],transition:t[22]}}),o=new Gd({props:{x:t[27],y:t[28],text:t[29],anchorPoint:t[32],rotation:t[8],fontFamily:t[9],fontSize:t[10],fontWeight:t[11],opacity:t[12],fill:t[13],transition:t[22]}});return{c(){ot(n.$$.fragment),ot(o.$$.fragment)},m(t,i){it(n,t,i),it(o,t,i),e=!0},p(t,e){const i={};33554432&e[0]&&(i.x=t[25]),67108864&e[0]&&(i.y=t[26]),32&e[0]&&(i.strokeWidth=t[5]),128&e[0]&&(i.opacity=t[7]),64&e[0]&&(i.stroke=t[6]),4194304&e[0]&&(i.transition=t[22]),n.$set(i);const r={};134217728&e[0]&&(r.x=t[27]),268435456&e[0]&&(r.y=t[28]),536870912&e[0]&&(r.text=t[29]),2&e[1]&&(r.anchorPoint=t[32]),256&e[0]&&(r.rotation=t[8]),512&e[0]&&(r.fontFamily=t[9]),1024&e[0]&&(r.fontSize=t[10]),2048&e[0]&&(r.fontWeight=t[11]),4096&e[0]&&(r.opacity=t[12]),8192&e[0]&&(r.fill=t[13]),4194304&e[0]&&(r.transition=t[22]),o.$set(r)},i(t){e||(Q(n.$$.fragment,t),Q(o.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),tt(o.$$.fragment,t),e=!1},d(t){rt(n,t),rt(o,t)}}}function eh(t){let e;const n=new rd({props:{x:t[30],y:t[31],text:t[14],anchorPoint:t[21],rotation:t[20],fontFamily:t[16],fontSize:t[17],fontWeight:t[18],opacity:t[19],fill:t[15]}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,e){const o={};1073741824&e[0]&&(o.x=t[30]),1&e[1]&&(o.y=t[31]),16384&e[0]&&(o.text=t[14]),2097152&e[0]&&(o.anchorPoint=t[21]),1048576&e[0]&&(o.rotation=t[20]),65536&e[0]&&(o.fontFamily=t[16]),131072&e[0]&&(o.fontSize=t[17]),262144&e[0]&&(o.fontWeight=t[18]),524288&e[0]&&(o.opacity=t[19]),32768&e[0]&&(o.fill=t[15]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function nh(t){let e,n,o,i,r=t[0]&&Qd(t),s=t[4]&&th(t),a=t[14].length>0&&eh(t);return{c(){e=M("g"),r&&r.c(),n=_(),s&&s.c(),o=_(),a&&a.c(),T(e,"class","x-axis")},m(t,c){v(t,e,c),r&&r.m(e,null),k(e,n),s&&s.m(e,null),k(e,o),a&&a.m(e,null),i=!0},p(t,i){t[0]?r?(r.p(t,i),Q(r,1)):(r=Qd(t),r.c(),Q(r,1),r.m(e,n)):r&&(K(),tt(r,1,1,()=>{r=null}),U()),t[4]?s?(s.p(t,i),Q(s,1)):(s=th(t),s.c(),Q(s,1),s.m(e,o)):s&&(K(),tt(s,1,1,()=>{s=null}),U()),t[14].length>0?a?(a.p(t,i),Q(a,1)):(a=eh(t),a.c(),Q(a,1),a.m(e,null)):a&&(K(),tt(a,1,1,()=>{a=null}),U())},i(t){i||(Q(r),Q(s),Q(a),i=!0)},o(t){tt(r),tt(s),tt(a),i=!1},d(t){t&&b(e),r&&r.d(),s&&s.d(),a&&a.d()}}}function oh(t,e,n){let o,{scale:i}=e,{flip:r=!1}=e,{baseLine:s=!0}=e,{baseLineColor:a="black"}=e,{baseLineOpacity:c=1}=e,{baseLineWidth:u=1}=e,{vjust:d="bottom"}=e,{y:h}=e,{yOffset:f=0}=e,{ticks:y=!0}=e,{tickCount:p=10}=e,{tickExtra:g=!1}=e,{tickValues:m}=e,{tickSize:x=5}=e,{tickWidth:k=.5}=e,{tickColor:v="black"}=e,{tickOpacity:b=1}=e,{labelFormat:M}=e,{labelOffset:w=2}=e,{labelRotate:$=0}=e,{labelFont:_="Helvetica"}=e,{labelFontSize:T=10}=e,{labelFontWeight:S="normal"}=e,{labelOpacity:O=1}=e,{labelColor:C="black"}=e,{titleHjust:P="center"}=e,{titleXOffset:A=0}=e,{titleX:I}=e,{titleVjust:N="axis"}=e,{titleYOffset:W="axis"}=e,{titleY:L}=e,{title:E=""}=e,{titleColor:F="black"}=e,{titleFont:j="Helvetica"}=e,{titleFontSize:Y="12"}=e,{titleFontWeight:R="normal"}=e,{titleOpacity:X=1}=e,{titleRotation:z=0}=e,{titleAnchorPoint:D="t"}=e,{transition:q}=e;const H=Ye();let G,B,Z,V,J,K,U,Q,tt,et,nt,ot;l(t,H,t=>n(55,o=t));let it,rt="t";return t.$set=t=>{"scale"in t&&n(34,i=t.scale),"flip"in t&&n(35,r=t.flip),"baseLine"in t&&n(0,s=t.baseLine),"baseLineColor"in t&&n(1,a=t.baseLineColor),"baseLineOpacity"in t&&n(2,c=t.baseLineOpacity),"baseLineWidth"in t&&n(3,u=t.baseLineWidth),"vjust"in t&&n(36,d=t.vjust),"y"in t&&n(37,h=t.y),"yOffset"in t&&n(38,f=t.yOffset),"ticks"in t&&n(4,y=t.ticks),"tickCount"in t&&n(39,p=t.tickCount),"tickExtra"in t&&n(40,g=t.tickExtra),"tickValues"in t&&n(41,m=t.tickValues),"tickSize"in t&&n(42,x=t.tickSize),"tickWidth"in t&&n(5,k=t.tickWidth),"tickColor"in t&&n(6,v=t.tickColor),"tickOpacity"in t&&n(7,b=t.tickOpacity),"labelFormat"in t&&n(43,M=t.labelFormat),"labelOffset"in t&&n(44,w=t.labelOffset),"labelRotate"in t&&n(8,$=t.labelRotate),"labelFont"in t&&n(9,_=t.labelFont),"labelFontSize"in t&&n(10,T=t.labelFontSize),"labelFontWeight"in t&&n(11,S=t.labelFontWeight),"labelOpacity"in t&&n(12,O=t.labelOpacity),"labelColor"in t&&n(13,C=t.labelColor),"titleHjust"in t&&n(45,P=t.titleHjust),"titleXOffset"in t&&n(46,A=t.titleXOffset),"titleX"in t&&n(47,I=t.titleX),"titleVjust"in t&&n(48,N=t.titleVjust),"titleYOffset"in t&&n(49,W=t.titleYOffset),"titleY"in t&&n(50,L=t.titleY),"title"in t&&n(14,E=t.title),"titleColor"in t&&n(15,F=t.titleColor),"titleFont"in t&&n(16,j=t.titleFont),"titleFontSize"in t&&n(17,Y=t.titleFontSize),"titleFontWeight"in t&&n(18,R=t.titleFontWeight),"titleOpacity"in t&&n(19,X=t.titleOpacity),"titleRotation"in t&&n(20,z=t.titleRotation),"titleAnchorPoint"in t&&n(21,D=t.titleAnchorPoint),"transition"in t&&n(22,q=t.transition)},t.$$.update=()=>{25166056&t.$$.dirty[1]&&(n(54,it=void 0===i?o.scaleX:i),n(23,({xCoords:G,yCoords:B}=function(t,e,n,o,i,r){const s=o.range(),a=i.range();r.flipX&&s.reverse(),r.flipY||a.reverse();const c=s[0],u=s[1],l=a[0],d=a[1];let h;if("bottom"===t&&(h=()=>[l+n,l+n]),"center"===t||"centre"===t){const t=.5*(d-l)+l;h=()=>[t+n,t+n]}if("top"===t&&(h=()=>[d-n,d-n]),!isNaN(t)){const e=(d-l)*t+l;h=()=>[e,e]}return isNaN(e)||(h=()=>[i(e),i(e)]),"function"==typeof e&&(h=e),void 0===h&&(h=()=>[l+n,l+n]),{xCoords:()=>[c,u],yCoords:h}}(d,h,f,it,o.scaleY,o)),G,(n(24,B),n(34,i),n(55,o),n(36,d),n(37,h),n(38,f),n(54,it)))),16778248&t.$$.dirty[0]|11550480&t.$$.dirty[1]&&(n(51,Z=Kd(m,it,p,g)),n(25,({tickXCoords:V,tickYCoords:J}=function(t,e,n,o,i,r){const s=[],a=[],c=e()[0]-o/2;let u=o+i;r&&(u=-u);const l=n.bandwidth?n.bandwidth()/2:0;for(let e=0;e<t.length;e++){const o=n(t[e])+l;s.push([o,o]),a.push([c,c+u])}return{tickXCoords:()=>s,tickYCoords:()=>a}}(Z,B,it,u,x,r)),V,(n(26,J),n(41,m),n(54,it),n(39,p),n(40,g),n(51,Z),n(24,B),n(3,u),n(42,x),n(35,r),n(44,w),n(43,M),n(52,Q),n(10,T),n(34,i),n(55,o),n(36,d),n(37,h),n(38,f))),n(27,({tickLabelXCoords:K,tickLabelYCoords:U}=function(t,e,n,o,i,r,s){const a=[],c=[],u=e()[0];let l=o+i+r;s&&(l=-l);const d=n.bandwidth?n.bandwidth()/2:0;for(let e=0;e<t.length;e++){const o=n(t[e])+d;a.push(o),c.push(u+l)}return{tickLabelXCoords:()=>a,tickLabelYCoords:()=>c}}(Z,B,it,u,x,w,r)),K,(n(28,U),n(41,m),n(54,it),n(39,p),n(40,g),n(51,Z),n(24,B),n(3,u),n(42,x),n(35,r),n(44,w),n(43,M),n(52,Q),n(10,T),n(34,i),n(55,o),n(36,d),n(37,h),n(38,f))),n(52,Q=Ud(M,it,Z.length)),n(29,tt=Z.map(Q)),n(53,ot=u+x+w+T),n(32,rt=r?"b":"t")),25313280&t.$$.dirty[0]|30392336&t.$$.dirty[1]&&E.length>0&&(n(30,et=function(t,e,n,o,i,r,s,a,c,u){if(n)return()=>n;const l=o.range();u.flipX&&l.reverse();const d=l[0],h=l[1];let f;return"axis"===t?()=>e()[0]:("center"!==t&&"centre"!==t||(f=.5),"left"===t&&(f=0),"right"===t&&(f=1),isNaN(t)||(f=t),void 0===f&&(f=.5),()=>d+Math.abs(d-h)*f+r)}(P,G,I,it,o.scaleY,A,0,0,0,o)),n(31,nt=function(t,e,n,o,i,r,s,a,c,u){const l=i.range();u.flipY||l.reverse();const d=l[0],h=l[1];if(n)return()=>n;let f,y;return"axis"===r?(f=s+1,a&&(f=-f-c)):f=r,"axis"===t?()=>e()[0]+f:("center"!==t&&"centre"!==t||(y=.5),"bottom"===t&&(y=0),"top"===t&&(y=1),isNaN(t)||(y=t),void 0===y&&(y=.5),()=>d-Math.abs(d-h)*y+f)}(N,B,L,0,o.scaleY,W,ot,r,Y,o)))},[s,a,c,u,y,k,v,b,$,_,T,S,O,C,E,F,j,Y,R,X,z,D,q,G,B,V,J,K,U,tt,et,nt,rt,H,i,r,d,h,f,p,g,m,x,M,w,P,A,I,N,W,L]}function ih(t){let e;const n=new nd({props:{x:t[23],y:t[24],strokeWidth:t[3],opacity:t[2],stroke:t[1]}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,e){const o={};8388608&e[0]&&(o.x=t[23]),16777216&e[0]&&(o.y=t[24]),8&e[0]&&(o.strokeWidth=t[3]),4&e[0]&&(o.opacity=t[2]),2&e[0]&&(o.stroke=t[1]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function rh(t){let e;const n=new Dd({props:{x:t[25],y:t[26],strokeWidth:t[5],opacity:t[7],stroke:t[6],transition:t[22]}}),o=new Gd({props:{x:t[27],y:t[28],text:t[29],anchorPoint:t[32],rotation:t[8],fontFamily:t[9],fontSize:t[10],fontWeight:t[11],opacity:t[12],fill:t[13],transition:t[22]}});return{c(){ot(n.$$.fragment),ot(o.$$.fragment)},m(t,i){it(n,t,i),it(o,t,i),e=!0},p(t,e){const i={};33554432&e[0]&&(i.x=t[25]),67108864&e[0]&&(i.y=t[26]),32&e[0]&&(i.strokeWidth=t[5]),128&e[0]&&(i.opacity=t[7]),64&e[0]&&(i.stroke=t[6]),4194304&e[0]&&(i.transition=t[22]),n.$set(i);const r={};134217728&e[0]&&(r.x=t[27]),268435456&e[0]&&(r.y=t[28]),536870912&e[0]&&(r.text=t[29]),2&e[1]&&(r.anchorPoint=t[32]),256&e[0]&&(r.rotation=t[8]),512&e[0]&&(r.fontFamily=t[9]),1024&e[0]&&(r.fontSize=t[10]),2048&e[0]&&(r.fontWeight=t[11]),4096&e[0]&&(r.opacity=t[12]),8192&e[0]&&(r.fill=t[13]),4194304&e[0]&&(r.transition=t[22]),o.$set(r)},i(t){e||(Q(n.$$.fragment,t),Q(o.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),tt(o.$$.fragment,t),e=!1},d(t){rt(n,t),rt(o,t)}}}function sh(t){let e;const n=new rd({props:{x:t[30],y:t[31],text:t[14],anchorPoint:t[21],rotation:t[20],fontFamily:t[16],fontSize:t[17],fontWeight:t[18],opacity:t[19],fill:t[15]}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,e){const o={};1073741824&e[0]&&(o.x=t[30]),1&e[1]&&(o.y=t[31]),16384&e[0]&&(o.text=t[14]),2097152&e[0]&&(o.anchorPoint=t[21]),1048576&e[0]&&(o.rotation=t[20]),65536&e[0]&&(o.fontFamily=t[16]),131072&e[0]&&(o.fontSize=t[17]),262144&e[0]&&(o.fontWeight=t[18]),524288&e[0]&&(o.opacity=t[19]),32768&e[0]&&(o.fill=t[15]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function ah(t){let e,n,o,i,r=t[0]&&ih(t),s=t[4]&&rh(t),a=t[14].length>0&&sh(t);return{c(){e=M("g"),r&&r.c(),n=_(),s&&s.c(),o=_(),a&&a.c(),T(e,"class","y-axis")},m(t,c){v(t,e,c),r&&r.m(e,null),k(e,n),s&&s.m(e,null),k(e,o),a&&a.m(e,null),i=!0},p(t,i){t[0]?r?(r.p(t,i),Q(r,1)):(r=ih(t),r.c(),Q(r,1),r.m(e,n)):r&&(K(),tt(r,1,1,()=>{r=null}),U()),t[4]?s?(s.p(t,i),Q(s,1)):(s=rh(t),s.c(),Q(s,1),s.m(e,o)):s&&(K(),tt(s,1,1,()=>{s=null}),U()),t[14].length>0?a?(a.p(t,i),Q(a,1)):(a=sh(t),a.c(),Q(a,1),a.m(e,null)):a&&(K(),tt(a,1,1,()=>{a=null}),U())},i(t){i||(Q(r),Q(s),Q(a),i=!0)},o(t){tt(r),tt(s),tt(a),i=!1},d(t){t&&b(e),r&&r.d(),s&&s.d(),a&&a.d()}}}function ch(t,e,n){let o,{scale:i}=e,{flip:r=!1}=e,{baseLine:s=!0}=e,{baseLineColor:a="black"}=e,{baseLineOpacity:c=1}=e,{baseLineWidth:u=1}=e,{hjust:d="left"}=e,{x:h}=e,{xOffset:f=0}=e,{ticks:y=!0}=e,{tickCount:p=10}=e,{tickExtra:g=!1}=e,{tickValues:m}=e,{tickSize:x=5}=e,{tickWidth:k=.5}=e,{tickColor:v="black"}=e,{tickOpacity:b=1}=e,{labelFormat:M}=e,{labelOffset:w=2}=e,{labelRotate:$=0}=e,{labelFont:_="Helvetica"}=e,{labelFontSize:T=10}=e,{labelFontWeight:S="normal"}=e,{labelOpacity:O=1}=e,{labelColor:C="black"}=e,{titleHjust:P="axis"}=e,{titleXOffset:A="axis"}=e,{titleX:I}=e,{titleVjust:N="center"}=e,{titleYOffset:W=0}=e,{titleY:L}=e,{title:E=""}=e,{titleColor:F="black"}=e,{titleFont:j="Helvetica"}=e,{titleFontSize:Y="12"}=e,{titleFontWeight:R="normal"}=e,{titleOpacity:X=1}=e,{titleRotation:z=-90}=e,{titleAnchorPoint:D="center"}=e,{transition:q}=e;const H=Ye();let G,B,Z,V,J,K,U,Q,tt,et,nt,ot;l(t,H,t=>n(55,o=t));let it,rt="r";return t.$set=t=>{"scale"in t&&n(34,i=t.scale),"flip"in t&&n(35,r=t.flip),"baseLine"in t&&n(0,s=t.baseLine),"baseLineColor"in t&&n(1,a=t.baseLineColor),"baseLineOpacity"in t&&n(2,c=t.baseLineOpacity),"baseLineWidth"in t&&n(3,u=t.baseLineWidth),"hjust"in t&&n(36,d=t.hjust),"x"in t&&n(37,h=t.x),"xOffset"in t&&n(38,f=t.xOffset),"ticks"in t&&n(4,y=t.ticks),"tickCount"in t&&n(39,p=t.tickCount),"tickExtra"in t&&n(40,g=t.tickExtra),"tickValues"in t&&n(41,m=t.tickValues),"tickSize"in t&&n(42,x=t.tickSize),"tickWidth"in t&&n(5,k=t.tickWidth),"tickColor"in t&&n(6,v=t.tickColor),"tickOpacity"in t&&n(7,b=t.tickOpacity),"labelFormat"in t&&n(43,M=t.labelFormat),"labelOffset"in t&&n(44,w=t.labelOffset),"labelRotate"in t&&n(8,$=t.labelRotate),"labelFont"in t&&n(9,_=t.labelFont),"labelFontSize"in t&&n(10,T=t.labelFontSize),"labelFontWeight"in t&&n(11,S=t.labelFontWeight),"labelOpacity"in t&&n(12,O=t.labelOpacity),"labelColor"in t&&n(13,C=t.labelColor),"titleHjust"in t&&n(45,P=t.titleHjust),"titleXOffset"in t&&n(46,A=t.titleXOffset),"titleX"in t&&n(47,I=t.titleX),"titleVjust"in t&&n(48,N=t.titleVjust),"titleYOffset"in t&&n(49,W=t.titleYOffset),"titleY"in t&&n(50,L=t.titleY),"title"in t&&n(14,E=t.title),"titleColor"in t&&n(15,F=t.titleColor),"titleFont"in t&&n(16,j=t.titleFont),"titleFontSize"in t&&n(17,Y=t.titleFontSize),"titleFontWeight"in t&&n(18,R=t.titleFontWeight),"titleOpacity"in t&&n(19,X=t.titleOpacity),"titleRotation"in t&&n(20,z=t.titleRotation),"titleAnchorPoint"in t&&n(21,D=t.titleAnchorPoint),"transition"in t&&n(22,q=t.transition)},t.$$.update=()=>{25166056&t.$$.dirty[1]&&(n(54,it=void 0===i?o.scaleY:i),n(23,({xCoords:G,yCoords:B}=function(t,e,n,o,i,r){const s=o.range(),a=i.range();r.flipX&&s.reverse(),r.flipY||a.reverse();const c=s[0],u=s[1],l=a[0],d=a[1];let h;if("left"===t&&(h=()=>[c-n,c-n]),"center"===t||"centre"===t){const t=.5*(u-c)+c;h=()=>[t+n,t+n]}if("right"===t&&(h=()=>[u+n,u+n]),!isNaN(t)){const e=(u-c)*t+c;h=()=>[e,e]}return isNaN(e)||(h=()=>[o(e),o(e)]),"function"==typeof e&&(h=e),void 0===h&&(h=()=>[c+n,c+n]),{xCoords:h,yCoords:()=>[l,d]}}(d,h,f,o.scaleX,it,o)),G,(n(24,B),n(34,i),n(55,o),n(36,d),n(37,h),n(38,f),n(54,it)))),8389640&t.$$.dirty[0]|11550480&t.$$.dirty[1]&&(n(51,Z=Kd(m,it,p,g)),n(25,({tickXCoords:V,tickYCoords:J}=function(t,e,n,o,i,r){const s=[],a=[],c=e()[0]-o/2;let u=o+i;r||(u=-u);const l=n.bandwidth?n.bandwidth()/2:0;for(let e=0;e<t.length;e++){const o=n(t[e])+l;s.push([c,c+u]),a.push([o,o])}return{tickXCoords:()=>s,tickYCoords:()=>a}}(Z,G,it,u,x,r)),V,(n(26,J),n(41,m),n(54,it),n(39,p),n(40,g),n(51,Z),n(23,G),n(3,u),n(42,x),n(35,r),n(44,w),n(43,M),n(52,Q),n(10,T),n(34,i),n(55,o),n(36,d),n(37,h),n(38,f))),n(27,({tickLabelXCoords:K,tickLabelYCoords:U}=function(t,e,n,o,i,r,s){const a=[],c=[],u=e()[0];let l=o+i+r;s||(l=-l);const d=n.bandwidth?n.bandwidth()/2:0;for(let e=0;e<t.length;e++){const o=n(t[e])+d;a.push(u+l),c.push(o)}return{tickLabelXCoords:()=>a,tickLabelYCoords:()=>c}}(Z,G,it,u,x,w,r)),K,(n(28,U),n(41,m),n(54,it),n(39,p),n(40,g),n(51,Z),n(23,G),n(3,u),n(42,x),n(35,r),n(44,w),n(43,M),n(52,Q),n(10,T),n(34,i),n(55,o),n(36,d),n(37,h),n(38,f))),n(52,Q=Ud(M,it,Z.length)),n(29,tt=Z.map(Q)),n(53,ot=u+x+w+T),n(32,rt=r?"l":"r")),25313280&t.$$.dirty[0]|30392336&t.$$.dirty[1]&&E.length>0&&(n(30,et=function(t,e,n,o,i,r,s,a,c,u){if(n)return()=>n;const l=o.range();u.flipX&&l.reverse();const d=l[0],h=l[1];let f,y;return"axis"===r?(y=1.65*s,a&&(y=-y-c)):y=r,"axis"===t?()=>e()[0]-y:("center"!==t&&"centre"!==t||(f=.5),"left"===t&&(f=0),"right"===t&&(f=1),isNaN(t)||(f=t),void 0===f&&(f=.5),()=>d+Math.abs(d-h)*f-y)}(P,G,I,o.scaleX,0,A,ot,r,Y,o)),n(31,nt=function(t,e,n,o,i,r,s,a,c,u){if(n)return()=>n;const l=i.range();u.flipY||l.reverse();const d=l[0],h=l[1];let f;return"axis"===t?()=>e()[0]:("center"!==t&&"centre"!==t||(f=.5),"bottom"===t&&(f=0),"top"===t&&(f=1),isNaN(t)||(f=t),void 0===f&&(f=.5),()=>d-Math.abs(d-h)*f+r)}(N,B,L,o.scaleX,it,W,0,0,0,o)))},[s,a,c,u,y,k,v,b,$,_,T,S,O,C,E,F,j,Y,R,X,z,D,q,G,B,V,J,K,U,tt,et,nt,rt,H,i,r,d,h,f,p,g,m,x,M,w,P,A,I,N,W,L]}const uh=()=>{};function lh(t,e,n,o,i){return o+-((n-o)/t)*(e-t)}function dh(t,e,n,o,i,r,s){let a,c;const u=e[0],l=e[1],d=r;if(o=0===o||void 0===o?(l-u)*("vertical"===n?.3:.1):o,"top"===t&&(a=u+i+d,c=u+o+i+d),"center"===t||"centre"===t){const t=.5*(l-u)+u;a=t-o/2+i+d,c=t+o/2+i+d}if("bottom"===t&&(a=l-o+i-d,c=l+i-d),!isNaN(t)&&t<=1&&t>=-1){const e=(l-u)*t+u;a=e+i-d,c=e+o+i-d}if(!["top","bottom","center"].includes(t)&&void 0===a)throw Error("Please specify either `top`, `center`, `bottom` or a number in the range [-1, 1] for `vjust`");return{y1:a,y2:c,height:o}}function hh(t,e,n,o,i,r,s){let a,c;const u=e[0],l=e[1];if(o=0===o?(l-u)*("vertical"===n?.1:.3):o,"left"===t&&(a=u+i+1.05*r,c=u+o+i+1.05*r),"center"===t||"centre"===t){const t=.5*(l-u)+u;a=t-o/2+i,c=t+o/2+i}if("right"===t&&(a=l-o+i-1.05*r,c=l+i-1.05*r),!isNaN(t)){const e=(l-u)*t+u;a=e-1.05*r,c=e+o-1.05*r}if(!["left","center","right"].includes(t)&&void 0===a)throw Error("Please specify either `left`, `center`, `right` or a number from 0 to 1 for `vjust`");return{x1:a,x2:c,width:o}}function fh(t,e,n,o,i,r,s,a){if(n)return()=>n;const c=e.x1,u=e.x2;let l;if("center"!==t&&"centre"!==t||(l=.5),"left"===t&&(l=0),"right"===t&&(l=1),isNaN(t)||(l=t),void 0===l&&(l=.5),!["left","center","right"].includes(t)&&isNaN(t))throw Error("Please specify either `left`, `center`, `right` or a number from 0 to 1 for `hjust`");return c+Math.abs(c-u)*l+a+o}function yh(t,e,n,o,i,r,s,a){if(n)return()=>n;const c=e.y1,u=e.y2;let l,d;if("center"===t&&(l=.5,d=0),"bottom"===t&&(l=1,d=i/2),"top"===t&&(l=0,d=-i/2),isNaN(t)||(l=t,d=0),void 0===l&&(l=.5,d=0),!["center","bottom","top"].includes(t)&&isNaN(t))throw Error("Please specify either `top`, `center`, `bottom` or a number for `vjust`");return c+Math.abs(c-u)*l+d+a+o}function ph(t,e,n,o){let i=0;for(const r in[t,e,n,o])gh(r)&&(i+=1);if(i<4)throw new Error("Couldn't construct legend because of invalid x1, x2, y1, y2 inputs.");return 4!==i||void 0!==t||void 0!==e||void 0!==n||void 0!==o}function gh(t){return!isNaN(t)||"[object Function]"==={}.toString.call(t)||void 0===t}function mh(t,e,n,o){let i;if(Array.isArray(t[0])&&t.length>0){i=[],i.push(t[0][0]);for(let e=0;e<t.length;e++)i.push(t[e][1])}else if(Array.isArray(t))t[0].constructor===Number?(i=xr(...t,e),void 0!==o&&n&&i[0]!==o&&i.unshift(o)):i=t;else if("ticks"in t)i=t.ticks(e);else{if(!("domain"in t))throw new Error("Couldn't construct legend. Please provide 'tickValues' or a scale with\n        either a 'ticks' or a 'domain' method.");i=t.domain()}return n&&"domain"in t&&i[0]!==t.domain()[0]&&i.unshift(t.domain()[0]),i}function xh(t,e,n,o,i,r,s,a){let c;if(a){let n;const a="vertical"===r?[o.y1,o.y2]:[o.x1,o.x2];n=i?Fe().domain(e).range(a.reverse()):Fe().domain(e).range(a),c=t.map((t,e)=>n(t)+s)}else{if(!Array.isArray(e))throw new Error("Couldn't construct legend. Please provide 'tickValues' or a scale with\n        either a 'ticks' or a 'domain' method.");{const e="vertical"===r?o.height/t.length:o.width/t.length,n="vertical"===r?o.y1:o.x1;c=(t=i?t.reverse():t).map((t,o)=>n+e*(o+.5)+s)}}return n&&c[0]!==e[0]&&a&&c.unshift(e[0]),c}function kh(t,e,n){return t||("tickFormat"in e?e.tickFormat(n):t=>t)}function vh(t,e,n,o,i,r,s,a,c,u,l,d,h,f){let y=[],p=[],g=[],m=[];if("vertical"===e){if(y=o.map(t=>u?r-s-c*d.width:r+s),p=o.map((t,e)=>u?r-s:r+s+c*d.width),f)g=o.map((t,e)=>i[e]),m=JSON.parse(JSON.stringify(g)),y.pop(),p.pop(),g.pop(),m.shift(),t.pop();else if(Array.isArray(n)||"ticks"in n||"domain"in n){const e=Math.abs(h.y2-h.y1)/t.length;let n=h.y1;g=t.map((t,o)=>(o>0&&(n+=e,m.push(n)),n)),m.push(n+e)}}else if("horizontal"===e){const e=Math.abs(h.y2-h.y1);if(g=o.map(t=>u?r+s:r-s),m=o.map((t,e)=>u?r+s+a*h.height:r-s-a*h.height),o.map((t,n)=>u?h.y2:h.y1+a*e),f)y=o.map((t,e)=>0===e?i[e]-.02:i[e]),p=o.map((t,e)=>e===o.length-1?i[e]+.02:i[e]),g.pop(),m.pop(),y.pop(),p.shift(),t.pop();else if(Array.isArray(n)||"ticks"in n||"domain"in n){const e=Math.abs(d.x2-d.x1)/t.length;let n=d.x1;y=t.map((t,o)=>(o>0&&(n+=e,p.push(n)),n)),p.push(n+e)}}return{colorXStartCoords:y,colorXEndCoords:p,colorYStartCoords:g,colorYEndCoords:m}}function bh(t,e,n,o,i,r,s,a,c,u,l,d){let h,f,y,p,g,m,x;"vertical"===e?(f={x1:"0%",x2:"0%"},y=s?{y1:"100%",y2:"0%"}:{y1:"0%",y2:"100%"},m=c.y1,x=c.y2,r?(p=u-l-i*a.width,g=u-l):(p=u+l,g=u+l+i*a.width)):"horizontal"===e&&(f=s?{x1:"100%",x2:"0%"}:{x1:"0%",x2:"100%"},y={y1:"0%",y2:"0%"},p=a.x1,g=a.x2,r?(m=u+l,x=u+o*c.height+l):(m=u-o*c.height-l,x=u-l));const k={x1:p,x2:g,y1:m,y2:x};if(d){let t;t=s?Fe().domain(n.domain()).range([1,0]):Fe().domain(n.domain()).range([0,1]),h=d.map((e,n)=>s?1-t(e):t(e))}else{if(void 0!==d)throw new Error("Couldn't construct legend. Please provide 'tickValues' or a scale with\n        either a 'ticks' or a 'domain' method.");{const e=1/t.length;h=t.map((t,n)=>e*(n+.5))}}return{offsets:h,gradX:f,gradY:y,rectCoords:k}}function Mh(t){let e;const n=new rd({props:{x:t[85],y:t[86],text:t[11],fontFamily:t[13],fontSize:t[14],fontWeight:t[15],rotation:t[17],anchorPoint:t[18],opacity:t[16],fill:t[12],transition:t[19]}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,e){const o={};1&e[0]&&(o.x=t[85]),2&e[0]&&(o.y=t[86]),2048&e[0]&&(o.text=t[11]),8192&e[0]&&(o.fontFamily=t[13]),16384&e[0]&&(o.fontSize=t[14]),32768&e[0]&&(o.fontWeight=t[15]),131072&e[0]&&(o.rotation=t[17]),262144&e[0]&&(o.anchorPoint=t[18]),65536&e[0]&&(o.opacity=t[16]),4096&e[0]&&(o.fill=t[12]),524288&e[0]&&(o.transition=t[19]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function wh(t){let e,n;const o=new jd({props:{x1:t[79],x2:t[80],y1:t[81],y2:t[82],fill:t[23],fillOpacity:t[24],transition:t[19],stroke:t[2],strokeWidth:t[3]}}),i=new Gd({props:{x:t[83],y:t[84],text:t[20],anchorPoint:t[10],rotation:t[4],fontFamily:t[5],fontSize:t[6],fontWeight:t[7],opacity:t[8],fill:t[9],transition:t[19]}});let r=t[11].length>0&&Mh(t);return{c(){e=M("g"),ot(o.$$.fragment),ot(i.$$.fragment),r&&r.c(),T(e,"class","discrete-legend")},m(t,s){v(t,e,s),it(o,e,null),it(i,e,null),r&&r.m(e,null),n=!0},p(t,n){const s={};33554432&n[0]&&(s.x1=t[79]),67108864&n[0]&&(s.x2=t[80]),134217728&n[0]&&(s.y1=t[81]),268435456&n[0]&&(s.y2=t[82]),8388608&n[0]&&(s.fill=t[23]),16777216&n[0]&&(s.fillOpacity=t[24]),524288&n[0]&&(s.transition=t[19]),4&n[0]&&(s.stroke=t[2]),8&n[0]&&(s.strokeWidth=t[3]),o.$set(s);const a={};2097152&n[0]&&(a.x=t[83]),4194304&n[0]&&(a.y=t[84]),1048576&n[0]&&(a.text=t[20]),1024&n[0]&&(a.anchorPoint=t[10]),16&n[0]&&(a.rotation=t[4]),32&n[0]&&(a.fontFamily=t[5]),64&n[0]&&(a.fontSize=t[6]),128&n[0]&&(a.fontWeight=t[7]),256&n[0]&&(a.opacity=t[8]),512&n[0]&&(a.fill=t[9]),524288&n[0]&&(a.transition=t[19]),i.$set(a),t[11].length>0?r?(r.p(t,n),Q(r,1)):(r=Mh(t),r.c(),Q(r,1),r.m(e,null)):r&&(K(),tt(r,1,1,()=>{r=null}),U())},i(t){n||(Q(o.$$.fragment,t),Q(i.$$.fragment,t),Q(r),n=!0)},o(t){tt(o.$$.fragment,t),tt(i.$$.fragment,t),tt(r),n=!1},d(t){t&&b(e),rt(o),rt(i),r&&r.d()}}}function $h(t,e,n){let o,{x1:i}=e,{x2:r}=e,{y1:s}=e,{y2:a}=e,{orient:c="vertical"}=e,{vjust:u="center"}=e,{height:d}=e,{hjust:h="left"}=e,{width:f=0}=e,{xOffset:y=0}=e,{yOffset:p=0}=e,{usePadding:g=!1}=e,{flip:m=!1}=e,{flipLabels:x=!1}=e,{stroke:k="none"}=e,{strokeWidth:v=2}=e,{fill:b}=e,{fillOpacity:M}=e,{labels:w}=e,{labelFormat:$}=e,{labelRotate:_=0}=e,{labelX:T}=e,{labelY:S}=e,{labelFont:O="Helvetica"}=e,{labelFontSize:C=10}=e,{labelFontWeight:P="normal"}=e,{labelOpacity:A=1}=e,{labelColor:I="black"}=e,{labelAnchorPoint:N="center"}=e,{labelCount:W=10}=e,{labelExtra:L=!1}=e,{firstLabel:E}=e,{format:F}=e,{labelPaddingY:j=0}=e,{labelPaddingX:Y=0}=e,{titleHjust:R="center"}=e,{titleXOffset:X=0}=e,{titleX:z}=e,{titleVjust:D="top"}=e,{titleYOffset:q=0}=e,{titleY:H}=e,{title:G="Legend"}=e,{titleColor:B="black"}=e,{titleFont:Z="Helvetica"}=e,{titleFontSize:V=12}=e,{titleFontWeight:J="bold"}=e,{titleOpacity:K=1}=e,{titleRotation:U=0}=e,{titleAnchorPoint:Q="t"}=e,{titlePaddingX:tt=0}=e,{titlePaddingY:et=-3}=e,{transition:nt}=e;const ot=Ye();let it,rt;l(t,ot,t=>n(78,o=t));let st,at,ct,ut,lt,dt,ht,ft,yt,pt,gt,mt,xt,kt,vt,bt,Mt,wt,$t,_t,Tt=!1,St=o.scaleX.range(),Ot=o.scaleY.range();return t.$set=t=>{"x1"in t&&n(30,i=t.x1),"x2"in t&&n(31,r=t.x2),"y1"in t&&n(32,s=t.y1),"y2"in t&&n(33,a=t.y2),"orient"in t&&n(37,c=t.orient),"vjust"in t&&n(38,u=t.vjust),"height"in t&&n(34,d=t.height),"hjust"in t&&n(39,h=t.hjust),"width"in t&&n(35,f=t.width),"xOffset"in t&&n(40,y=t.xOffset),"yOffset"in t&&n(41,p=t.yOffset),"usePadding"in t&&n(42,g=t.usePadding),"flip"in t&&n(43,m=t.flip),"flipLabels"in t&&n(44,x=t.flipLabels),"stroke"in t&&n(2,k=t.stroke),"strokeWidth"in t&&n(3,v=t.strokeWidth),"fill"in t&&n(45,b=t.fill),"fillOpacity"in t&&n(46,M=t.fillOpacity),"labels"in t&&n(47,w=t.labels),"labelFormat"in t&&n(48,$=t.labelFormat),"labelRotate"in t&&n(4,_=t.labelRotate),"labelX"in t&&n(49,T=t.labelX),"labelY"in t&&n(50,S=t.labelY),"labelFont"in t&&n(5,O=t.labelFont),"labelFontSize"in t&&n(6,C=t.labelFontSize),"labelFontWeight"in t&&n(7,P=t.labelFontWeight),"labelOpacity"in t&&n(8,A=t.labelOpacity),"labelColor"in t&&n(9,I=t.labelColor),"labelAnchorPoint"in t&&n(10,N=t.labelAnchorPoint),"labelCount"in t&&n(51,W=t.labelCount),"labelExtra"in t&&n(52,L=t.labelExtra),"firstLabel"in t&&n(53,E=t.firstLabel),"format"in t&&n(36,F=t.format),"labelPaddingY"in t&&n(54,j=t.labelPaddingY),"labelPaddingX"in t&&n(55,Y=t.labelPaddingX),"titleHjust"in t&&n(56,R=t.titleHjust),"titleXOffset"in t&&n(57,X=t.titleXOffset),"titleX"in t&&n(0,z=t.titleX),"titleVjust"in t&&n(58,D=t.titleVjust),"titleYOffset"in t&&n(59,q=t.titleYOffset),"titleY"in t&&n(1,H=t.titleY),"title"in t&&n(11,G=t.title),"titleColor"in t&&n(12,B=t.titleColor),"titleFont"in t&&n(13,Z=t.titleFont),"titleFontSize"in t&&n(14,V=t.titleFontSize),"titleFontWeight"in t&&n(15,J=t.titleFontWeight),"titleOpacity"in t&&n(16,K=t.titleOpacity),"titleRotation"in t&&n(17,U=t.titleRotation),"titleAnchorPoint"in t&&n(18,Q=t.titleAnchorPoint),"titlePaddingX"in t&&n(60,tt=t.titlePaddingX),"titlePaddingY"in t&&n(61,et=t.titlePaddingY),"transition"in t&&n(19,nt=t.transition)},t.$$.update=()=>{if(2048&t.$$.dirty[1]|66336&t.$$.dirty[2]&&!0===g&&(n(67,ft=o.padding),n(70,St=cc(St,ft.left,ft.right)),n(71,Ot=cc(Ot,ft.top,ft.bottom))),1073760320&t.$$.dirty[0]|6111&t.$$.dirty[1]|99264&t.$$.dirty[2]){if(!["horizontal","vertical"].includes(c))throw Error("Invalid input for `orient` property. Please provide either `horizontal` or `vertical` as inputs.");if(n(77,_t=G.length>0?1.5*V:0),!ph(i,r,s,a)&&["horizontal","vertical"].includes(c))ot.flipX&&St.reverse(),n(68,yt=hh(h,St,c,f,y,C)),n(30,i=yt.x1),n(31,r=yt.x2),n(35,f=Math.abs(r-i)),n(75,wt={x1:i,x2:r,width:f}),ot.flipY&&Ot.reverse(),n(69,pt=dh(u,Ot,c,d,p,_t)),n(32,s=pt.y1),n(33,a=pt.y2),n(34,d=Math.abs(a-s)),n(76,$t={y1:s,y2:a,height:d});else{let t,e,c,u;t="[object Function]"==={}.toString.call(i)?i():o.scaleX(i),e="[object Function]"==={}.toString.call(r)?r():o.scaleX(r),c="[object Function]"==={}.toString.call(s)?s():o.scaleY(s),u="[object Function]"==={}.toString.call(a)?a():o.scaleY(a),n(75,wt={x1:t,x2:e,width:Math.abs(e-t)}),n(76,$t={y1:c,y2:u,height:Math.abs(u-c)})}}if(2115&t.$$.dirty[0]|2113929280&t.$$.dirty[1]|122880&t.$$.dirty[2]&&G.length>0&&(z||0===z?"[object Function]"==={}.toString.call(z)?n(0,z=z()):n(0,z=o.scaleX(z)):n(0,z=fh(R,wt,z,X,0,0,0,tt)),H||0===H?"[object Function]"==={}.toString.call(H)?n(1,H=H()):n(1,H=o.scaleY(H)):n(1,H=yh(D,$t,H,q,_t,0,0,et))),49152&t.$$.dirty[1]|1&t.$$.dirty[2])if(b||M){if("function"==typeof b&&n(62,it=b),"function"==typeof M&&n(62,it=M),!it)throw new Error("Couldn't construct legend. Please provide at least 'fill' or 'fillOpacity'\n        with a scale or function that has domain and range properties or methods.");Object.prototype.hasOwnProperty.call(it,"domain")&&("function"==typeof it.domain?n(63,rt=it.domain()):n(63,rt=it.domain))}else if(void 0===b&&void 0===M)throw new Error("Couldn't construct legend. Please provide at least 'fill' or 'fillOpacity'\n      with a scale or function that has domain and range properties or methods.");if(64&t.$$.dirty[1]&&(n(73,bt="horizontal"===c?.75:1),n(74,Mt="horizontal"===c?0:.75)),1081081856&t.$$.dirty[0]|33501280&t.$$.dirty[1]|30726&t.$$.dirty[2])if(void 0===w?(n(20,st=mh(rt,W,L,E)),n(20,st=void 0!==F?st.map(F):st)):(n(20,st=void 0!==F?w.map(F):w),n(64,Tt=!0)),"vertical"===c)n(22,ut=xh(st,rt,L,$t,m,c,j,Tt)),n(21,ct=x?i+bt*wt.width:i+(1-bt)*wt.width),n(21,ct=T||ct),void 0!==Y&&n(21,ct=x?ct+Y:ct-Y),n(36,F=kh($,rt,ut.length));else{if("horizontal"!==c)throw new Error("Could not construct legend. Please provide either 'vertical' or 'horizontal' to 'orient' prop.");n(21,ct=xh(st,rt,L,wt,m,c,Y,Tt)),n(22,ut=x?$t.y2-(1-Mt)*$t.height:$t.y2-Mt*$t.height),n(22,ut=S||ut),void 0!==j&&n(22,ut=x?ut-j:ut+j),n(36,F=kh($,rt,ct.length))}32505920&t.$$.dirty[0]|25194560&t.$$.dirty[1]|30751&t.$$.dirty[2]&&b&&"function"==typeof b&&(n(23,lt=st.map((t,e)=>Array.isArray(rt[0])&&rt.length>0?b(e):b(t))),"vertical"===c?(n(65,at=ut),n(66,ht=ct-Y)):(n(65,at=ct),n(66,ht=ut-j)),n(72,vt=vh(lt,c,it,st,at,ht,C,bt,Mt,x,0,wt,$t,Tt)),dt||n(24,dt=1)),32505920&t.$$.dirty[0]|61504&t.$$.dirty[1]|30749&t.$$.dirty[2]&&M&&("function"==typeof M?(n(24,dt=st.map((t,e)=>Array.isArray(it[0])&&it.length>0?M(e):M(t))),"vertical"===c?(n(65,at=ut),n(66,ht=ct)):(n(65,at=ct),n(66,ht=ut)),n(72,vt=vh(dt,c,it,st,at,ht,C,bt,Mt,x,0,wt,$t,Tt)),lt||n(23,lt=b)):M.constructor===Number&&n(24,dt=M)),1024&t.$$.dirty[2]&&(n(25,gt=vt.colorXStartCoords),n(26,mt=vt.colorXEndCoords),n(27,xt=vt.colorYStartCoords),n(28,kt=vt.colorYEndCoords))},[z,H,k,v,_,O,C,P,A,I,N,G,B,Z,V,J,K,U,Q,nt,st,ct,ut,lt,dt,gt,mt,xt,kt,ot,i,r,s,a,d,f,F,c,u,h,y,p,g,m,x,b,M,w,$,T,S,W,L,E,j,Y,R,X,D,q,tt,et,it,rt,Tt,at,ht,ft,yt,pt,St,Ot,vt,bt,Mt,wt,$t,_t,o,()=>gt,()=>mt,()=>xt,()=>kt,()=>ct,()=>ut,()=>z,()=>H]}function _h(t,e,n){const o=t.slice();return o[87]=e[n],o[89]=n,o}function Th(t){let e,n,o,i;return{c(){e=M("stop"),T(e,"key",n=t[89]),T(e,"offset",o=`${100*t[87]+"%"}`),T(e,"style",i=`stop-color:${Array.isArray(t[23])?t[23][t[89]]:t[23]};stop-opacity:${Array.isArray(t[24])?t[24][t[89]]:t[24]}`)},m(t,n){v(t,e,n)},p(t,n){33554432&n[0]&&o!==(o=`${100*t[87]+"%"}`)&&T(e,"offset",o),25165824&n[0]&&i!==(i=`stop-color:${Array.isArray(t[23])?t[23][t[89]]:t[23]};stop-opacity:${Array.isArray(t[24])?t[24][t[89]]:t[24]}`)&&T(e,"style",i)},d(t){t&&b(e)}}}function Sh(t){let e;const n=new rd({props:{x:t[85],y:t[86],text:t[11],fontFamily:t[13],fontSize:t[14],fontWeight:t[15],rotation:t[17],anchorPoint:t[18],opacity:t[16],fill:t[12],transition:t[19]}});return{c(){ot(n.$$.fragment)},m(t,o){it(n,t,o),e=!0},p(t,e){const o={};1&e[0]&&(o.x=t[85]),2&e[0]&&(o.y=t[86]),2048&e[0]&&(o.text=t[11]),8192&e[0]&&(o.fontFamily=t[13]),16384&e[0]&&(o.fontSize=t[14]),32768&e[0]&&(o.fontWeight=t[15]),131072&e[0]&&(o.rotation=t[17]),262144&e[0]&&(o.anchorPoint=t[18]),65536&e[0]&&(o.opacity=t[16]),4096&e[0]&&(o.fill=t[12]),524288&e[0]&&(o.transition=t[19]),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){tt(n.$$.fragment,t),e=!1},d(t){rt(n,t)}}}function Oh(t){let e,n,o,i,r,s,a,c,u=t[25],l=[];for(let e=0;e<u.length;e+=1)l[e]=Th(_h(t,u,e));const d=new Kl({props:{x1:t[79],x2:t[80],y1:t[81],y2:t[82],fill:`url(#${t[29]})`,transition:t[19],stroke:t[2],strokeWidth:t[3]}}),h=new Gd({props:{x:t[83],y:t[84],text:t[20],anchorPoint:t[10],rotation:t[4],fontFamily:t[5],fontSize:t[6],fontWeight:t[7],opacity:t[8],fill:t[9],transition:t[19]}});let f=t[11].length>0&&Sh(t);return{c(){e=M("g"),n=M("defs"),o=M("linearGradient");for(let t=0;t<l.length;t+=1)l[t].c();ot(d.$$.fragment),ot(h.$$.fragment),f&&f.c(),T(o,"id",t[29]),T(o,"x1",i=t[26].x1),T(o,"y1",r=t[27].y1),T(o,"x2",s=t[26].x2),T(o,"y2",a=t[27].y2),T(e,"class","gradient-legend")},m(t,i){v(t,e,i),k(e,n),k(n,o);for(let t=0;t<l.length;t+=1)l[t].m(o,null);it(d,e,null),it(h,e,null),f&&f.m(e,null),c=!0},p(t,n){if(58720256&n[0]){let e;for(u=t[25],e=0;e<u.length;e+=1){const i=_h(t,u,e);l[e]?l[e].p(i,n):(l[e]=Th(i),l[e].c(),l[e].m(o,null))}for(;e<l.length;e+=1)l[e].d(1);l.length=u.length}(!c||67108864&n[0]&&i!==(i=t[26].x1))&&T(o,"x1",i),(!c||134217728&n[0]&&r!==(r=t[27].y1))&&T(o,"y1",r),(!c||67108864&n[0]&&s!==(s=t[26].x2))&&T(o,"x2",s),(!c||134217728&n[0]&&a!==(a=t[27].y2))&&T(o,"y2",a);const y={};268435456&n[0]&&(y.x1=t[79]),268435456&n[0]&&(y.x2=t[80]),268435456&n[0]&&(y.y1=t[81]),268435456&n[0]&&(y.y2=t[82]),524288&n[0]&&(y.transition=t[19]),4&n[0]&&(y.stroke=t[2]),8&n[0]&&(y.strokeWidth=t[3]),d.$set(y);const p={};2097152&n[0]&&(p.x=t[83]),4194304&n[0]&&(p.y=t[84]),1048576&n[0]&&(p.text=t[20]),1024&n[0]&&(p.anchorPoint=t[10]),16&n[0]&&(p.rotation=t[4]),32&n[0]&&(p.fontFamily=t[5]),64&n[0]&&(p.fontSize=t[6]),128&n[0]&&(p.fontWeight=t[7]),256&n[0]&&(p.opacity=t[8]),512&n[0]&&(p.fill=t[9]),524288&n[0]&&(p.transition=t[19]),h.$set(p),t[11].length>0?f?(f.p(t,n),Q(f,1)):(f=Sh(t),f.c(),Q(f,1),f.m(e,null)):f&&(K(),tt(f,1,1,()=>{f=null}),U())},i(t){c||(Q(d.$$.fragment,t),Q(h.$$.fragment,t),Q(f),c=!0)},o(t){tt(d.$$.fragment,t),tt(h.$$.fragment,t),tt(f),c=!1},d(t){t&&b(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(l,t),rt(d),rt(h),f&&f.d()}}}let Ch=0;function Ph(t,e,n){let o;const i="gradient"+Ch++;let{x1:r}=e,{x2:s}=e,{y1:a}=e,{y2:c}=e,{orient:u="vertical"}=e,{vjust:d="center"}=e,{height:h}=e,{hjust:f="left"}=e,{width:y=0}=e,{xOffset:p=0}=e,{yOffset:g=0}=e,{usePadding:m=!1}=e,{flip:x=!1}=e,{flipLabels:k=!1}=e,{stroke:v="none"}=e,{strokeWidth:b=2}=e,{fill:M}=e,{fillOpacity:w}=e,{labels:$}=e,{labelFormat:_}=e,{labelRotate:T=0}=e,{labelX:S}=e,{labelY:O}=e,{labelFont:C="Helvetica"}=e,{labelFontSize:P=10}=e,{labelFontWeight:A="normal"}=e,{labelOpacity:I=1}=e,{labelColor:N="black"}=e,{labelAnchorPoint:W="center"}=e,{labelCount:L=10}=e,{labelExtra:E=!1}=e,{firstLabel:F}=e,{format:j}=e,{labelPaddingX:Y=0}=e,{labelPaddingY:R=0}=e,{titleHjust:X="center"}=e,{titleXOffset:z=0}=e,{titleX:D}=e,{titleVjust:q="top"}=e,{titleYOffset:H=0}=e,{titleY:G}=e,{title:B="Legend"}=e,{titleColor:Z="black"}=e,{titleFont:V="Helvetica"}=e,{titleFontSize:J=12}=e,{titleFontWeight:K="bold"}=e,{titleOpacity:U=1}=e,{titleRotation:Q=0}=e,{titleAnchorPoint:tt="t"}=e,{titlePaddingX:et=0}=e,{titlePaddingY:nt=-3}=e,{transition:ot}=e;const it=Ye();let rt,st,at,ct,ut,lt,dt,ht,ft,yt,pt,gt;l(t,it,t=>n(78,o=t));let mt,xt,kt,vt,bt,Mt,wt,$t,_t,Tt,St=o.scaleX.range(),Ot=o.scaleY.range();return t.$set=t=>{"x1"in t&&n(31,r=t.x1),"x2"in t&&n(32,s=t.x2),"y1"in t&&n(33,a=t.y1),"y2"in t&&n(34,c=t.y2),"orient"in t&&n(38,u=t.orient),"vjust"in t&&n(39,d=t.vjust),"height"in t&&n(35,h=t.height),"hjust"in t&&n(40,f=t.hjust),"width"in t&&n(36,y=t.width),"xOffset"in t&&n(41,p=t.xOffset),"yOffset"in t&&n(42,g=t.yOffset),"usePadding"in t&&n(43,m=t.usePadding),"flip"in t&&n(44,x=t.flip),"flipLabels"in t&&n(45,k=t.flipLabels),"stroke"in t&&n(2,v=t.stroke),"strokeWidth"in t&&n(3,b=t.strokeWidth),"fill"in t&&n(46,M=t.fill),"fillOpacity"in t&&n(47,w=t.fillOpacity),"labels"in t&&n(48,$=t.labels),"labelFormat"in t&&n(49,_=t.labelFormat),"labelRotate"in t&&n(4,T=t.labelRotate),"labelX"in t&&n(50,S=t.labelX),"labelY"in t&&n(51,O=t.labelY),"labelFont"in t&&n(5,C=t.labelFont),"labelFontSize"in t&&n(6,P=t.labelFontSize),"labelFontWeight"in t&&n(7,A=t.labelFontWeight),"labelOpacity"in t&&n(8,I=t.labelOpacity),"labelColor"in t&&n(9,N=t.labelColor),"labelAnchorPoint"in t&&n(10,W=t.labelAnchorPoint),"labelCount"in t&&n(52,L=t.labelCount),"labelExtra"in t&&n(53,E=t.labelExtra),"firstLabel"in t&&n(54,F=t.firstLabel),"format"in t&&n(37,j=t.format),"labelPaddingX"in t&&n(55,Y=t.labelPaddingX),"labelPaddingY"in t&&n(56,R=t.labelPaddingY),"titleHjust"in t&&n(57,X=t.titleHjust),"titleXOffset"in t&&n(58,z=t.titleXOffset),"titleX"in t&&n(0,D=t.titleX),"titleVjust"in t&&n(59,q=t.titleVjust),"titleYOffset"in t&&n(60,H=t.titleYOffset),"titleY"in t&&n(1,G=t.titleY),"title"in t&&n(11,B=t.title),"titleColor"in t&&n(12,Z=t.titleColor),"titleFont"in t&&n(13,V=t.titleFont),"titleFontSize"in t&&n(14,J=t.titleFontSize),"titleFontWeight"in t&&n(15,K=t.titleFontWeight),"titleOpacity"in t&&n(16,U=t.titleOpacity),"titleRotation"in t&&n(17,Q=t.titleRotation),"titleAnchorPoint"in t&&n(18,tt=t.titleAnchorPoint),"titlePaddingX"in t&&n(61,et=t.titlePaddingX),"titlePaddingY"in t&&n(62,nt=t.titlePaddingY),"transition"in t&&n(19,ot=t.transition)},t.$$.update=()=>{if(4096&t.$$.dirty[1]|66336&t.$$.dirty[2]&&!0===m&&(n(67,yt=o.padding),n(70,St=cc(St,yt.left,yt.right)),n(71,Ot=cc(Ot,yt.top,yt.bottom))),18496&t.$$.dirty[0]|12223&t.$$.dirty[1]|99264&t.$$.dirty[2]){if(!["horizontal","vertical"].includes(u))throw Error("Invalid input for `orient` property. Please provide either `horizontal` or `vertical` as inputs.");if(n(77,Tt=B.length>0?1.5*J:0),!ph(r,s,a,c)&&["horizontal","vertical"].includes(u))it.flipX&&St.reverse(),n(68,pt=hh(f,St,u,y,p,P)),n(31,r=pt.x1),n(32,s=pt.x2),n(36,y=Math.abs(s-r)),n(75,$t={x1:r,x2:s,width:y}),it.flipY&&Ot.reverse(),n(69,gt=dh(d,Ot,u,h,g,Tt)),n(33,a=gt.y1),n(34,c=gt.y2),n(35,h=Math.abs(c-a)),n(76,_t={y1:a,y2:c,height:h});else{let t,e,i,u;t="[object Function]"==={}.toString.call(r)?r():o.scaleX(r),e="[object Function]"==={}.toString.call(s)?s():o.scaleX(s),i="[object Function]"==={}.toString.call(a)?a():o.scaleY(a),u="[object Function]"==={}.toString.call(c)?c():o.scaleY(c),n(75,$t={x1:t,x2:e,width:Math.abs(e-t)}),n(76,_t={y1:i,y2:u,height:Math.abs(u-i)})}}if(2115&t.$$.dirty[0]|2080374912&t.$$.dirty[1]|122881&t.$$.dirty[2]&&B.length>0&&(D||0===D?"[object Function]"==={}.toString.call(D)?n(0,D=D()):n(0,D=o.scaleX(D)):n(0,D=fh(X,$t,D,z,0,0,0,et)),G||0===G?"[object Function]"==={}.toString.call(G)?n(1,G=G()):n(1,G=o.scaleY(G)):n(1,G=yh(q,_t,G,H,Tt,0,0,nt))),98304&t.$$.dirty[1]|2&t.$$.dirty[2])if(M||w){if("function"==typeof M&&n(63,rt=M),"function"==typeof w&&n(63,rt=w),!rt)throw new Error("Couldn't construct legend. Please provide at least 'fill' or 'fillOpacity'\n        with a scale or function that has domain and range properties or methods.");Object.prototype.hasOwnProperty.call(rt,"domain")&&("function"==typeof rt.domain?n(64,st=rt.domain()):n(64,st=rt.domain))}else if(void 0===M&&void 0===w)throw new Error("Couldn't construct legend. Please provide at least 'fill' or 'fillOpacity'\n      with a scale or function that has domain and range properties or methods.");if(128&t.$$.dirty[1]&&(n(73,Mt="horizontal"===u?.75:1),n(74,wt="horizontal"===u?0:.75)),7340032&t.$$.dirty[0]|67002561&t.$$.dirty[1]|30724&t.$$.dirty[2]){let t=!1;if(void 0===$?(n(20,ct=mh(st,L,E,F)),n(20,ct=void 0!==j?ct.map(j):ct)):(n(20,ct=void 0!==j?$.map(j):$),t=!0),"vertical"===u)n(22,lt=xh(ct,st,E,_t,x,u,R,t)),n(21,ut=k?r+Mt*$t.width:r+(1-Mt)*$t.width),n(21,ut=S||ut),void 0!==Y&&n(21,ut=k?ut+Y:ut-Y),n(37,j=kh(_,st,lt.length));else{if("horizontal"!==u)throw new Error("Could not construct legend. Please provide either 'vertical' or 'horizontal' to 'orient' prop.");n(21,ut=xh(ct,st,E,$t,x,u,Y,t)),n(22,lt=k?_t.y2-(1-wt)*_t.height:_t.y2-wt*_t.height),n(22,lt=O||lt),void 0!==R&&n(22,lt=k?lt-R:lt+R),n(37,j=kh(_,st,ut.length))}}32505920&t.$$.dirty[0]|123008&t.$$.dirty[1]|30738&t.$$.dirty[2]&&M&&"function"==typeof M&&(n(23,dt=ct.map((t,e)=>Array.isArray(rt[0])&&rt.length>0?M(e):M(t))),"vertical"===u?(at=lt,n(66,ft=ut)):(at=ut,n(66,ft=lt)),n(72,mt=bh(dt,u,rt,Mt,wt,k,x,$t,_t,ft,P)),ht||n(24,ht=void 0!==w?w:1)),32505920&t.$$.dirty[0]|50585728&t.$$.dirty[1]|30738&t.$$.dirty[2]&&w&&(w.constructor===Function&&n(24,ht=ct.map((t,e)=>Array.isArray(rt[0])&&rt.length>0?w(e):w(t))),"vertical"===u?(at=lt,n(66,ft=ut-Y)):(at=ut,n(66,ft=lt-R)),n(72,mt=bh(ht,u,rt,Mt,wt,k,x,$t,_t,ft,P,$)),dt||n(23,dt=void 0!==M?M:"black")),1024&t.$$.dirty[2]&&(n(25,xt=mt.offsets),n(26,kt=mt.gradX),n(27,vt=mt.gradY),n(28,bt=mt.rectCoords))},[D,G,v,b,T,C,P,A,I,N,W,B,Z,V,J,K,U,Q,tt,ot,ct,ut,lt,dt,ht,xt,kt,vt,bt,i,it,r,s,a,c,h,y,j,u,d,f,p,g,m,x,k,M,w,$,_,S,O,L,E,F,Y,R,X,z,q,H,et,nt,rt,st,at,ft,yt,pt,gt,St,Ot,mt,Mt,wt,$t,_t,Tt,o,()=>bt.x1,()=>bt.x2,()=>bt.y1,()=>bt.y2,()=>ut,()=>lt,()=>D,()=>G]}t.Area=class extends at{constructor(t){super(),st(this,t,pd,yd,c,{x1:0,x2:1,y1:2,y2:3,independentAxis:4,fill:5,stroke:6,strokeWidth:7,strokeOpacity:8,fillOpacity:9,opacity:10,transition:11,onClick:12,onMousedown:13,onMouseup:14,onMouseover:15,onMouseout:16,onMousedrag:17,onTouchdown:18,onTouchup:19,onTouchover:20,onTouchout:21,onTouchdrag:22,onSelect:23,onDeselect:24,renderSettings:25,blockReindexing:26})}},t.AreaLayer=class extends at{constructor(t){super(),st(this,t,Jd,Vd,c,{x1:0,x2:1,y1:2,y2:3,independentAxis:4,fill:5,stroke:6,strokeWidth:7,strokeOpacity:8,fillOpacity:9,opacity:10,transition:11,onClick:12,onMousedown:13,onMouseup:14,onMouseover:15,onMouseout:16,onMousedrag:17,onTouchdown:18,onTouchup:19,onTouchover:20,onTouchout:21,onTouchdrag:22,onSelect:23,onDeselect:24,key:25,renderSettings:26,blockReindexing:27})}},t.DiscreteLegend=class extends at{constructor(t){super(),st(this,t,$h,wh,c,{x1:30,x2:31,y1:32,y2:33,orient:37,vjust:38,height:34,hjust:39,width:35,xOffset:40,yOffset:41,usePadding:42,flip:43,flipLabels:44,stroke:2,strokeWidth:3,fill:45,fillOpacity:46,labels:47,labelFormat:48,labelRotate:4,labelX:49,labelY:50,labelFont:5,labelFontSize:6,labelFontWeight:7,labelOpacity:8,labelColor:9,labelAnchorPoint:10,labelCount:51,labelExtra:52,firstLabel:53,format:36,labelPaddingY:54,labelPaddingX:55,titleHjust:56,titleXOffset:57,titleX:0,titleVjust:58,titleYOffset:59,titleY:1,title:11,titleColor:12,titleFont:13,titleFontSize:14,titleFontWeight:15,titleOpacity:16,titleRotation:17,titleAnchorPoint:18,titlePaddingX:60,titlePaddingY:61,transition:19},[-1,-1,-1])}},t.FuncLine=class extends at{constructor(t){super(),st(this,t,fd,dd,c,{func:14,x:15,strokeWidth:16,stroke:17,opacity:18,transition:19,onClick:20,onMousedown:21,onMouseup:22,onMouseover:23,onMouseout:24,onMousedrag:25,onTouchdown:26,onTouchup:27,onTouchover:28,onTouchout:29,onTouchdrag:30,onSelect:31,onDeselect:32,blockReindexing:33},[-1,-1])}},t.GradientLegend=class extends at{constructor(t){super(),st(this,t,Ph,Oh,c,{x1:31,x2:32,y1:33,y2:34,orient:38,vjust:39,height:35,hjust:40,width:36,xOffset:41,yOffset:42,usePadding:43,flip:44,flipLabels:45,stroke:2,strokeWidth:3,fill:46,fillOpacity:47,labels:48,labelFormat:49,labelRotate:4,labelX:50,labelY:51,labelFont:5,labelFontSize:6,labelFontWeight:7,labelOpacity:8,labelColor:9,labelAnchorPoint:10,labelCount:52,labelExtra:53,firstLabel:54,format:37,labelPaddingX:55,labelPaddingY:56,titleHjust:57,titleXOffset:58,titleX:0,titleVjust:59,titleYOffset:60,titleY:1,title:11,titleColor:12,titleFont:13,titleFontSize:14,titleFontWeight:15,titleOpacity:16,titleRotation:17,titleAnchorPoint:18,titlePaddingX:61,titlePaddingY:62,transition:19},[-1,-1,-1])}},t.Graphic=class extends at{constructor(t){super(),st(this,t,lc,uc,c,{width:0,height:1,padding:5,scaleX:6,scaleY:7,flipX:8,flipY:9,renderer:10,blockReindexing:11})}},t.Grid=class extends at{constructor(t){super(),st(this,t,gu,pu,c,{x1:3,x2:4,y1:5,y2:6,rows:7,columns:8,rowGap:9,columnGap:10,areaNames:11,viewGridTemplate:12,viewGridShape:13})}},t.Label=rd,t.LabelLayer=Gd,t.Layer=Nd,t.Line=nd,t.LineLayer=Dd,t.Mark=zl,t.Point=class extends at{constructor(t){super(),st(this,t,Zl,Bl,c,{x:0,y:1,geometry:2,radius:3,fill:4,stroke:5,strokeWidth:6,strokeOpacity:7,fillOpacity:8,opacity:9,transition:10,onClick:11,onMousedown:12,onMouseup:13,onMouseover:14,onMouseout:15,onMousedrag:16,onTouchdown:17,onTouchup:18,onTouchover:19,onTouchout:20,onTouchdrag:21,onSelect:22,onDeselect:23,renderSettings:24,blockReindexing:25})}},t.PointLayer=class extends at{constructor(t){super(),st(this,t,Ld,Wd,c,{x:0,y:1,geometry:2,radius:3,fill:4,stroke:5,strokeWidth:6,strokeOpacity:7,fillOpacity:8,opacity:9,transition:10,onClick:11,onMousedown:12,onMouseup:13,onMouseover:14,onMouseout:15,onMousedrag:16,onTouchdown:17,onTouchup:18,onTouchover:19,onTouchout:20,onTouchdrag:21,onSelect:22,onDeselect:23,key:24,renderSettings:25,blockReindexing:26})}},t.Polygon=class extends at{constructor(t){super(),st(this,t,Ql,Ul,c,{x:0,y:1,geometry:2,fill:3,stroke:4,strokeWidth:5,strokeOpacity:6,fillOpacity:7,opacity:8,transition:9,onClick:10,onMousedown:11,onMouseup:12,onMouseover:13,onMouseout:14,onMousedrag:15,onTouchdown:16,onTouchup:17,onTouchover:18,onTouchout:19,onTouchdrag:20,onSelect:21,onDeselect:22,renderSettings:23,blockReindexing:24})}},t.PolygonLayer=class extends at{constructor(t){super(),st(this,t,Rd,Yd,c,{x:0,y:1,geometry:2,fill:3,stroke:4,strokeWidth:5,strokeOpacity:6,fillOpacity:7,opacity:8,transition:9,onClick:10,onMousedown:11,onMouseup:12,onMouseover:13,onMouseout:14,onMousedrag:15,onTouchdown:16,onTouchup:17,onTouchover:18,onTouchout:19,onTouchdrag:20,onSelect:21,onDeselect:22,renderSettings:23,key:24,blockReindexing:25})}},t.Rectangle=Kl,t.RectangleLayer=jd,t.Section=class extends at{constructor(t){super(),st(this,t,Wc,Ic,c,{x1:13,x2:14,y1:15,y2:16,padding:17,scaleX:18,scaleY:19,flipX:20,flipY:21,zoomIdentity:22,transformation:23,blockReindexing:24,backgroundColor:0,paddingColor:1,onClick:25,onWheel:26,onMousedown:27,onMouseup:28,onMouseover:29,onMouseout:30,onMousemove:31,onPinch:32,onTouchdown:33,onTouchmove:34,onTouchup:35,onTouchover:36,onTouchout:37,selectRectangle:38,updateSelectRectangle:39,resetSelectRectangle:40,startSelectPolygon:41,addPointToSelectPolygon:42,moveSelectPolygon:43,getSelectPolygon:44,resetSelectPolygon:45},[-1,-1])}get selectRectangle(){return this.$$.ctx[38]}get updateSelectRectangle(){return this.$$.ctx[39]}get resetSelectRectangle(){return this.$$.ctx[40]}get startSelectPolygon(){return this.$$.ctx[41]}get addPointToSelectPolygon(){return this.$$.ctx[42]}get moveSelectPolygon(){return this.$$.ctx[43]}get getSelectPolygon(){return this.$$.ctx[44]}get resetSelectPolygon(){return this.$$.ctx[45]}},t.SymbolLayer=class extends at{constructor(t){super(),st(this,t,Zd,Bd,c,{x:0,y:1,geometry:2,size:3,shape:4,fill:5,stroke:6,strokeWidth:7,strokeOpacity:8,fillOpacity:9,opacity:10,transition:11,onClick:12,onMousedown:13,onMouseup:14,onMouseover:15,onMouseout:16,onMousedrag:17,onTouchdown:18,onTouchup:19,onTouchover:20,onTouchout:21,onTouchdrag:22,onSelect:23,onDeselect:24,key:25,renderSettings:26,blockReindexing:27})}},t.Symbol_=class extends at{constructor(t){super(),st(this,t,ad,sd,c,{x:0,y:1,geometry:2,shape:3,size:4,fill:5,stroke:6,strokeWidth:7,strokeOpacity:8,fillOpacity:9,opacity:10,transition:11,onClick:12,onMousedown:13,onMouseup:14,onMouseover:15,onMouseout:16,onMousedrag:17,onTouchdown:18,onTouchup:19,onTouchover:20,onTouchout:21,onTouchdrag:22,onSelect:23,onDeselect:24,renderSettings:25,blockReindexing:26})}},t.Title=class extends at{constructor(t){super(),st(this,t,Gl,Hl,c,{x:0,y:1,geometry:4,vjust:34,hjust:35,xOffset:36,yOffset:37,usePadding:38,title:5,titleFill:6,titleStroke:7,titleStrokeWidth:8,titleStrokeOpacity:9,titleFillOpacity:10,titleOpacity:11,titleFontFamily:12,titleFontSize:13,titleFontWeight:14,titleRotation:15,titleAnchorPoint:16,subtitle:17,subtitleFill:18,subtitleStroke:19,subtitleStrokeWidth:20,subtitleStrokeOpacity:21,subtitleFillOpacity:22,subtitleOpacity:23,subtitleFontFamily:24,subtitleFontSize:25,subtitleFontWeight:26,subtitleRotation:27,subtitleX:2,subtitleY:3,subtitleAnchorPoint:28,transition:29,onClick:30,onMouseover:31,onMouseout:32},[-1,-1])}},t.XAxis=class extends at{constructor(t){super(),st(this,t,oh,nh,c,{scale:34,flip:35,baseLine:0,baseLineColor:1,baseLineOpacity:2,baseLineWidth:3,vjust:36,y:37,yOffset:38,ticks:4,tickCount:39,tickExtra:40,tickValues:41,tickSize:42,tickWidth:5,tickColor:6,tickOpacity:7,labelFormat:43,labelOffset:44,labelRotate:8,labelFont:9,labelFontSize:10,labelFontWeight:11,labelOpacity:12,labelColor:13,titleHjust:45,titleXOffset:46,titleX:47,titleVjust:48,titleYOffset:49,titleY:50,title:14,titleColor:15,titleFont:16,titleFontSize:17,titleFontWeight:18,titleOpacity:19,titleRotation:20,titleAnchorPoint:21,transition:22},[-1,-1])}},t.YAxis=class extends at{constructor(t){super(),st(this,t,ch,ah,c,{scale:34,flip:35,baseLine:0,baseLineColor:1,baseLineOpacity:2,baseLineWidth:3,hjust:36,x:37,xOffset:38,ticks:4,tickCount:39,tickExtra:40,tickValues:41,tickSize:42,tickWidth:5,tickColor:6,tickOpacity:7,labelFormat:43,labelOffset:44,labelRotate:8,labelFont:9,labelFontSize:10,labelFontWeight:11,labelOpacity:12,labelColor:13,titleHjust:45,titleXOffset:46,titleX:47,titleVjust:48,titleYOffset:49,titleY:50,title:14,titleColor:15,titleFont:16,titleFontSize:17,titleFontWeight:18,titleOpacity:19,titleRotation:20,titleAnchorPoint:21,transition:22},[-1,-1])}},t.createGeoScales=function(t){const e=t.x,n=t.y;let o,i;const r=Fe().domain(e),s=Fe().domain(n);function a(){if(o&&i){const t=Math.abs(o[1]-o[0]),a=Math.abs(i[1]-i[0]),c=(o[0]+o[1])/2,u=(i[0]+i[1])/2,l=t/(e[1]-e[0]),d=a/(n[1]-n[0]);if(l<d){const t=(n[1]-n[0])/2*l,e=[u-t,u+t];i[0]>i[1]&&e.reverse(),r.range(o),s.range(e)}if(l>=d){const t=(e[1]-e[0])/2*d,n=[c-t,c+t];r.range(n),s.range(i)}}}return{scaleX:{range:t=>(o=t,a(),r),copy:function(){return this}},scaleY:{range:t=>(i=t,a(),s),copy:function(){return this}}}},t.createPanHandler=function(t,e){const n=e.dimension||"both",o=e.setZoomIdentity||uh,i=e.setBlockReindexing||uh;let r,s=!1;return{handlers:{onMousedown:function(t){i(!0),s=!0,r=t.screenCoordinates},onMousemove:function(i){if(!s)return;const a=i.screenCoordinates,c=function(t,e){return{x:t.x-e.x,y:t.y-e.y}}(r,a);r=a;const u=e.extentX,l=e.extentY,d=t.x-c.x,h=t.y-c.y;d<=u[1]&&d>=u[0]&&(t.x-=c.x),h<=l[1]&&h>=l[0]&&(t.y-=c.y),"x"===n&&(t.y=0),"y"===n&&(t.x=0),o(t)},onMouseup:function(t){i(!1),s=!1}},reset:function(){t.x=0,t.y=0,o(t)}}},t.createZoomHandler=function(t,{setZoomIdentity:e=(()=>{}),minZoom:n,maxZoom:o,step:i=1,center:r,dimension:s="both"}){const a=function(r){const a=function(t){if("wheel"===t.type)return t.screenCoordinates;if("pinch"===t.type)return t.screenCenter}(r),c=r.delta*i,u=t.kx,l=t.ky,d=u-c,h=l-c,f=Math.max(d,h);if(p=o,n<=(y=f)&&y<=p){if("both"===s||"x"===s){t.kx=d;const e=lh(u,d,a.x,t.x);t.x=e}if("both"===s||"y"===s){t.ky=h;const e=lh(l,h,a.y,t.y);t.y=e}e(t)}var y,p};return{handlers:{onWheel:a,onPinch:a},reset:function(){t.x=0,t.y=0,t.kx=1,t.ky=1,e(t)},center:function(){t.x=r.x,t.y=r.y,e(t)}}},Object.defineProperty(t,"__esModule",{value:!0})}));
