import { interpolate } from 'd3-interpolate'
import transshape from './transshape.umd.js'

export function transitionGeometry (fromGeometry, toGeometry) {
  if (pointTransition(fromGeometry, toGeometry)) {
    return interpolate(fromGeometry, toGeometry)
  }

  if (polygonTransition(fromGeometry, toGeometry)) {
    return transshape.transshape(fromGeometry, toGeometry)
  }

  throw new Error('Invalid input')
}

export function transitionGeometries (fromLayer, toLayer) {
  // TODO set up with transshape
}

function pointTransition (fromGeometry, toGeometry) {
  return fromGeometry.type === 'Point' && toGeometry.type === 'Point'
}

const polygonTypes = ['Polygon', 'MultiPolygon']

function polygonTransition (fromGeometry, toGeometry) {
  return polygonTypes.includes(fromGeometry.type) &&
    polygonTypes.includes(toGeometry.type)
}
