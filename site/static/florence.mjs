function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function i(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(i)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function h(t,e,n){const i=e.subscribe(n);t.$$.on_destroy.push(i.unsubscribe?()=>i.unsubscribe():i)}function c(t,e,n){if(t){const i=u(t,e,n);return t[0](i)}}function u(t,e,i){return t[1]?n({},n(e.$$scope.ctx,t[1](i?i(e):{}))):e.$$scope.ctx}function l(t,e,i,r){return t[1]?n({},n(e.$$scope.changed||{},t[1](r?r(i):{}))):e.$$scope.changed||{}}let f="undefined"!=typeof window?()=>window.performance.now():()=>Date.now(),d=t=>requestAnimationFrame(t);const p=new Set;let y,g=!1;function m(){p.forEach(t=>{t[0](f())||(p.delete(t),t[1]())}),(g=p.size>0)&&d(m)}function M(t,e){t.appendChild(e)}function x(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function _(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function b(t){return document.createTextNode(t)}function k(){return b(" ")}function w(){return b("")}function O(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function C(t){y=t}function P(){if(!y)throw new Error("Function called outside component initialization");return y}function A(t){P().$$.before_update.push(t)}function E(t){P().$$.on_mount.push(t)}function j(t){P().$$.after_update.push(t)}function S(t){P().$$.on_destroy.push(t)}function N(t,e){P().$$.context.set(t,e)}function I(t){return P().$$.context.get(t)}const T=[],W=[],R=[],q=[],G=Promise.resolve();let z=!1;function L(t){R.push(t)}function F(){const t=new Set;do{for(;T.length;){const t=T.shift();C(t),D(t.$$)}for(;W.length;)W.pop()();for(let e=0;e<R.length;e+=1){const n=R[e];t.has(n)||(n(),t.add(n))}R.length=0}while(T.length);for(;q.length;)q.pop()();z=!1}function D(t){t.fragment&&(t.update(t.dirty),o(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(L))}const Y=new Set;let U;function B(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function X(t,e,n,i){if(t&&t.o){if(Y.has(t))return;Y.add(t),U.c.push(()=>{Y.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}}function H(t,e){t.d(1),e.delete(t.key)}function Q(t,e,n,i,r,o,s,a,h,c,u,l){let f=t.length,d=o.length,p=f;const y={};for(;p--;)y[t[p].key]=p;const g=[],m=new Map,M=new Map;for(p=d;p--;){const t=l(r,o,p),a=n(t);let h=s.get(a);h?i&&h.p(e,t):(h=c(a,t)).c(),m.set(a,g[p]=h),a in y&&M.set(a,Math.abs(p-y[a]))}const x=new Set,v=new Set;function _(t){B(t,1),t.m(a,u),s.set(t.key,t),u=t.first,d--}for(;f&&d;){const e=g[d-1],n=t[f-1],i=e.key,r=n.key;e===n?(u=e.first,f--,d--):m.has(r)?!s.has(i)||x.has(i)?_(e):v.has(r)?f--:M.get(i)>M.get(r)?(v.add(i),_(e)):(x.add(r),f--):(h(n,s),f--)}for(;f--;){const e=t[f];m.has(e.key)||h(e,s)}for(;d;)_(g[d-1]);return g}function Z(t,e,n){const{fragment:r,on_mount:a,on_destroy:h,after_update:c}=t.$$;r.m(e,n),L(()=>{const e=a.map(i).filter(s);h?h.push(...e):o(e),t.$$.on_mount=[]}),c.forEach(L)}function J(t,e){t.$$.fragment&&(o(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function V(t,e){t.$$.dirty||(T.push(t),z||(z=!0,G.then(F)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function K(e,n,i,s,a,h){const c=y;C(e);const u=n.props||{},l=e.$$={fragment:null,ctx:null,props:h,update:t,not_equal:a,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:r(),dirty:null};let f=!1;var d;l.ctx=i?i(e,u,(t,n)=>{l.ctx&&a(l.ctx[t],l.ctx[t]=n)&&(l.bound[t]&&l.bound[t](n),f&&V(e,t))}):u,l.update(),f=!0,o(l.before_update),l.fragment=s(l.ctx),n.target&&(n.hydrate?l.fragment.l((d=n.target,Array.from(d.childNodes))):l.fragment.c(),n.intro&&B(e.$$.fragment),Z(e,n.target,n.anchor),F()),C(c)}class tt{$destroy(){J(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function et(e,n=t){let i;const r=[];function o(t){if(a(e,t)){if(e=t,!i)return;r.forEach(t=>t[1]()),r.forEach(t=>t[0](e))}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,a=t){const h=[s,a];return r.push(h),1===r.length&&(i=n(o)||t),s(e),()=>{const t=r.indexOf(h);-1!==t&&r.splice(t,1),0===r.length&&(i(),i=null)}}}}class nt{constructor({renderer:t}){t||(this._rendererOptions={output:"svg"}),t&&(!function(t){if(!(t.constructor===Object&&"output"in t&&["svg"].includes(t.output)))throw new Error(`Invalid renderer options: ${JSON.stringify(t)}`)}(t),this._rendererOptions=t)}output(){return this._rendererOptions.output}}const it={};function rt(){return I(it)}class ot{constructor({sectionId:t,rangeX:e,rangeY:n,scaleX:i,scaleY:r}){this._sectionId=t,this._rangeX=void 0,this._rangeY=void 0,this._scaleX=void 0,this._scaleY=void 0,this._handleRanges(e,n),this._handleScales(i,r)}rangeX(){return this._rangeX}rangeY(){return this._rangeY}x1(){return this._rangeX[0]}x2(){return this._rangeX[1]}y1(){return this._rangeY[0]}y2(){return this._rangeY[1]}scales(){return{scaleX:this._scaleX,scaleY:this._scaleY}}interactionManager(){return this._interactionManager}_handleRanges(t,e){this._rangeX=t,this._rangeY=e}_handleScales(t,e){t&&(this._scaleX=t.copy().range(this._rangeX)),t||(this._scaleX=t=>t),e&&(this._scaleY=e.copy().range(this._rangeY)),e||(this._scaleY=t=>t)}}const st={};function at(){return I(st)}function ht(){const t=et();return N(st,t),t}function ct(t,e){t.set(new ot(e))}const ut={};const lt={};function ft(){return I(lt)}function dt(){const t=et();return N(lt,t),t}function pt(t,e){t.set(e)}const yt={};function gt(){return I(yt)}function mt(){const t=et();return N(yt,t),t}let Mt;class xt{constructor(){this._mounted=!1,this._clickTracker=new vt(this,"click"),this._mousemoveTracker=new vt(this,"mousemove"),this._mousedownTracker=new vt(this,"mousedown"),this._mouseupTracker=new vt(this,"mouseup"),this._listeners={}}addRootNode(t){this._domNode=t,this._svgPoint=this._domNode.createSVGPoint(),this._mounted=!0}attachEventListeners(){if(this._mounted)for(const t in this._listeners){const{eventName:e,callback:n}=this._listeners[t];this[_t(e)].addEventListener(t,n)}}addEventListener(t,e,n){if(this._listeners[e]=Object.assign({},{eventName:t,callback:n}),this._mounted){this[_t(t)].addEventListener(e,n)}}removeEventListener(t,e){delete this._listeners[e],this[_t(t)].removeEventListener(e)}_getMouseCoordinates(t){return this._svgPoint.x=t.clientX,this._svgPoint.y=t.clientY,this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())}}class vt{constructor(t,e){this._eventManager=t,this._eventName=e,this._numberOfListeners=0,this._callbacks={}}addEventListener(t,e){0===this._numberOfListeners&&(Mt=this._handleEvent.bind(this),this._eventManager._domNode.addEventListener(this._eventName,Mt)),this._numberOfListeners++,this._callbacks[t]=e}removeEventListener(t){this._numberOfListeners--,delete this._callbacks[t],0===this._numberOfListeners&&this._eventManager._domNode.removeEventListener(this._eventName,Mt)}_handleEvent(t){const e=this._eventManager._getMouseCoordinates(t);for(const n in this._callbacks)this._callbacks[n](e,t)}}function _t(t){const e=bt[t];if(e)return e;throw new Error(`Invalid event name: '${t}'`)}const bt={click:"_clickTracker",mousemove:"_mousemoveTracker",mousedown:"_mousedownTracker",mouseup:"_mouseupTracker"};function kt(t,e,n,i,r){!function t(e,n,i,r,o){for(;r>i;){if(r-i>600){var s=r-i+1,a=n-i+1,h=Math.log(s),c=.5*Math.exp(2*h/3),u=.5*Math.sqrt(h*c*(s-c)/s)*(a-s/2<0?-1:1),l=Math.max(i,Math.floor(n-a*c/s+u)),f=Math.min(r,Math.floor(n+(s-a)*c/s+u));t(e,n,l,f,o)}var d=e[n],p=i,y=r;for(wt(e,i,n),o(e[r],d)>0&&wt(e,i,r);p<y;){for(wt(e,p,y),p++,y--;o(e[p],d)<0;)p++;for(;o(e[y],d)>0;)y--}0===o(e[i],d)?wt(e,i,y):wt(e,++y,r),y<=n&&(i=y+1),n<=y&&(r=y-1)}}(t,e,n||0,i||t.length-1,r||Ot)}function wt(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Ot(t,e){return t<e?-1:t>e?1:0}class $t{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!Rt(t,e))return n;const i=this.toBBox,r=[];for(;e;){for(let o=0;o<e.children.length;o++){const s=e.children[o],a=e.leaf?i(s):s;Rt(t,a)&&(e.leaf?n.push(s):Wt(t,a)?this._all(s,n):r.push(s))}e=r.pop()}return n}collides(t){let e=this.data;if(!Rt(t,e))return!1;const n=[];for(;e;){for(let i=0;i<e.children.length;i++){const r=e.children[i],o=e.leaf?this.toBBox(r):r;if(Rt(t,o)){if(e.leaf||Wt(t,o))return!0;n.push(r)}}e=n.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let e=0;e<t.length;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=qt([]),this}remove(t,e){if(!t)return this;let n=this.data;const i=this.toBBox(t),r=[],o=[];let s,a,h;for(;n||r.length;){if(n||(n=r.pop(),a=r[r.length-1],s=o.pop(),h=!0),n.leaf){const i=Ct(t,n.children,e);if(-1!==i)return n.children.splice(i,1),r.push(n),this._condense(r),this}h||n.leaf||!Wt(n,i)?a?(s++,n=a.children[s],h=!1):n=null:(r.push(n),o.push(s),s=0,a=n,n=n.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,i){const r=n-e+1;let o,s=this._maxEntries;if(r<=s)return Pt(o=qt(t.slice(e,n+1)),this.toBBox),o;i||(i=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/Math.pow(s,i-1))),(o=qt([])).leaf=!1,o.height=i;const a=Math.ceil(r/s),h=a*Math.ceil(Math.sqrt(s));Gt(t,e,n,h,this.compareMinX);for(let r=e;r<=n;r+=h){const e=Math.min(r+h-1,n);Gt(t,r,e,a,this.compareMinY);for(let n=r;n<=e;n+=a){const r=Math.min(n+a-1,e);o.children.push(this._build(t,n,r,i-1))}}return Pt(o,this.toBBox),o}_chooseSubtree(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){let n,i=1/0,s=1/0;for(let a=0;a<e.children.length;a++){const h=e.children[a],c=Nt(h),u=(r=t,o=h,(Math.max(o.maxX,r.maxX)-Math.min(o.minX,r.minX))*(Math.max(o.maxY,r.maxY)-Math.min(o.minY,r.minY))-c);u<s?(s=u,i=c<i?c:i,n=h):u===s&&c<i&&(i=c,n=h)}e=n||e.children[0]}var r,o;return e}_insert(t,e,n){const i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),Et(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)}_split(t,e){const n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);const o=this._chooseSplitIndex(n,r,i),s=qt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Pt(n,this.toBBox),Pt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)}_splitRoot(t,e){this.data=qt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Pt(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let i,r=1/0,o=1/0;for(let s=e;s<=n-e;s++){const e=At(t,0,s,this.toBBox),a=At(t,s,n,this.toBBox),h=Tt(e,a),c=Nt(e)+Nt(a);h<r?(r=h,i=s,o=c<o?c:o):h===r&&c<o&&(o=c,i=s)}return i}_chooseSplitAxis(t,e,n){const i=t.leaf?this.compareMinX:jt,r=t.leaf?this.compareMinY:St;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)}_allDistMargin(t,e,n,i){t.children.sort(i);const r=this.toBBox,o=At(t,0,e,r),s=At(t,n-e,n,r);let a=It(o)+It(s);for(let i=e;i<n-e;i++){const e=t.children[i];Et(o,t.leaf?r(e):e),a+=It(o)}for(let i=n-e-1;i>=e;i--){const e=t.children[i];Et(s,t.leaf?r(e):e),a+=It(s)}return a}_adjustParentBBoxes(t,e,n){for(let i=n;i>=0;i--)Et(e[i],t)}_condense(t){for(let e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Pt(t[n],this.toBBox)}}function Ct(t,e,n){if(!n)return e.indexOf(t);for(let i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function Pt(t,e){At(t,0,t.children.length,e,t)}function At(t,e,n,i,r){r||(r=qt(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<n;o++){const e=t.children[o];Et(r,t.leaf?i(e):e)}return r}function Et(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function jt(t,e){return t.minX-e.minX}function St(t,e){return t.minY-e.minY}function Nt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function It(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Tt(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}function Wt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Rt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function qt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Gt(t,e,n,i,r){const o=[e,n];for(;o.length;){if((n=o.pop())-(e=o.pop())<=i)continue;const s=e+Math.ceil((n-e)/i/2)*i;kt(t,s,e,n,r),o.push(e,s,s,n)}}function zt(){return new Lt}function Lt(){this.reset()}Lt.prototype={constructor:Lt,reset:function(){this.s=this.t=0},add:function(t){Dt(Ft,t,this.t),Dt(this,Ft.s,this.s),this.s?this.t+=Ft.t:this.s=Ft.t},valueOf:function(){return this.s}};var Ft=new Lt;function Dt(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}var Yt=2*Math.PI,Ut=Math.abs,Bt=Math.sqrt;function Xt(){}function Ht(t,e){t&&Zt.hasOwnProperty(t.type)&&Zt[t.type](t,e)}var Qt={Feature:function(t,e){Ht(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Ht(n[i].geometry,e)}},Zt={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Jt(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Jt(n[i],e,0)},Polygon:function(t,e){Vt(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Vt(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Ht(n[i],e)}};function Jt(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Vt(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Jt(t[n],e,1);e.polygonEnd()}function Kt(t,e){t&&Qt.hasOwnProperty(t.type)?Qt[t.type](t,e):Ht(t,e)}zt(),zt(),zt(),zt();function te(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var ee,ne;1===(ee=te).length&&(ne=ee,ee=function(t,e){return te(ne(t),e)}),zt();function ie(t){return t}var re,oe,se,ae,he=zt(),ce=zt(),ue={point:Xt,lineStart:Xt,lineEnd:Xt,polygonStart:function(){ue.lineStart=le,ue.lineEnd=pe},polygonEnd:function(){ue.lineStart=ue.lineEnd=ue.point=Xt,he.add(Ut(ce)),ce.reset()},result:function(){var t=he/2;return he.reset(),t}};function le(){ue.point=fe}function fe(t,e){ue.point=de,re=se=t,oe=ae=e}function de(t,e){ce.add(ae*t-se*e),se=t,ae=e}function pe(){de(re,oe)}var ye=1/0,ge=ye,me=-ye,Me=me,xe={point:function(t,e){t<ye&&(ye=t);t>me&&(me=t);e<ge&&(ge=e);e>Me&&(Me=e)},lineStart:Xt,lineEnd:Xt,polygonStart:Xt,polygonEnd:Xt,result:function(){var t=[[ye,ge],[me,Me]];return me=Me=-(ge=ye=1/0),t}};var ve,_e,be,ke,we=0,Oe=0,$e=0,Ce=0,Pe=0,Ae=0,Ee=0,je=0,Se=0,Ne={point:Ie,lineStart:Te,lineEnd:qe,polygonStart:function(){Ne.lineStart=Ge,Ne.lineEnd=ze},polygonEnd:function(){Ne.point=Ie,Ne.lineStart=Te,Ne.lineEnd=qe},result:function(){var t=Se?[Ee/Se,je/Se]:Ae?[Ce/Ae,Pe/Ae]:$e?[we/$e,Oe/$e]:[NaN,NaN];return we=Oe=$e=Ce=Pe=Ae=Ee=je=Se=0,t}};function Ie(t,e){we+=t,Oe+=e,++$e}function Te(){Ne.point=We}function We(t,e){Ne.point=Re,Ie(be=t,ke=e)}function Re(t,e){var n=t-be,i=e-ke,r=Bt(n*n+i*i);Ce+=r*(be+t)/2,Pe+=r*(ke+e)/2,Ae+=r,Ie(be=t,ke=e)}function qe(){Ne.point=Ie}function Ge(){Ne.point=Le}function ze(){Fe(ve,_e)}function Le(t,e){Ne.point=Fe,Ie(ve=be=t,_e=ke=e)}function Fe(t,e){var n=t-be,i=e-ke,r=Bt(n*n+i*i);Ce+=r*(be+t)/2,Pe+=r*(ke+e)/2,Ae+=r,Ee+=(r=ke*t-be*e)*(be+t),je+=r*(ke+e),Se+=3*r,Ie(be=t,ke=e)}function De(t){this._context=t}De.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Yt)}},result:Xt};var Ye,Ue,Be,Xe,He,Qe=zt(),Ze={point:Xt,lineStart:function(){Ze.point=Je},lineEnd:function(){Ye&&Ve(Ue,Be),Ze.point=Xt},polygonStart:function(){Ye=!0},polygonEnd:function(){Ye=null},result:function(){var t=+Qe;return Qe.reset(),t}};function Je(t,e){Ze.point=Ve,Ue=Xe=t,Be=He=e}function Ve(t,e){Xe-=t,He-=e,Qe.add(Bt(Xe*Xe+He*He)),Xe=t,He=e}function Ke(){this._string=[]}function tn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function en(t,e){var n,i,r=4.5;function o(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),Kt(t,n(i))),i.result()}return o.area=function(t){return Kt(t,n(ue)),ue.result()},o.measure=function(t){return Kt(t,n(Ze)),Ze.result()},o.bounds=function(t){return Kt(t,n(xe)),xe.result()},o.centroid=function(t){return Kt(t,n(Ne)),Ne.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,ie):(t=e).stream,o):t},o.context=function(t){return arguments.length?(i=null==t?(e=null,new Ke):new De(e=t),"function"!=typeof r&&i.pointRadius(r),o):e},o.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),o):r},o.projection(t).context(e)}function nn(t){return null==t||t.constructor===Number&&!isFinite(t)}function rn(t){return void 0!==t}function on(t){return void 0===t}function sn(t){const e=an.bounds(t);return{x:[e[0][0],e[1][0]],y:[e[0][1],e[1][1]]}}Ke.prototype={_radius:4.5,_circle:tn(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=tn(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};const an=en();function hn(t,e){const n=an.bounds(e);return t[0][0]=t[0][0]<n[0][0]?t[0][0]:n[0][0],t[0][1]=t[0][1]<n[0][1]?t[0][1]:n[0][1],t[1][0]=t[1][0]>n[1][0]?t[1][0]:n[1][0],t[1][1]=t[1][1]>n[1][1]?t[1][1]:n[1][1],t}function cn(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function un(t,e,n){return function(t,e){const n=function(t,e){const n=t[0],i=t[1],r=e[0][0],o=e[0][1],s=e[1][0],a=e[1][1],h=s-r,c=a-o,u=(n-r)*h+(i-o)*c,l=h*h+c*c;let f,d,p=-1;0!==l&&(p=u/l);p<0?(f=r,d=o):p>1?(f=s,d=a):(f=r+p*h,d=o+p*c);return[f,d]}(t,e);return cn(t,n)}(t,e)<n/2}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function ln(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function fn(t,e){return t(e={exports:{}},e.exports),e.exports}var dn=function(t,e,n){var i=t*e,r=pn*t,o=r-(r-t),s=t-o,a=pn*e,h=a-(a-e),c=e-h,u=s*c-(i-o*h-s*h-o*c);if(n)return n[0]=u,n[1]=i,n;return[u,i]},pn=+(Math.pow(2,27)+1);var yn=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);if(r)return[r,n];return[n]}(t[0],e[0]);var r,o,s=new Array(n+i),a=0,h=0,c=0,u=Math.abs,l=t[h],f=u(l),d=e[c],p=u(d);f<p?(o=l,(h+=1)<n&&(l=t[h],f=u(l))):(o=d,(c+=1)<i&&(d=e[c],p=u(d)));h<n&&f<p||c>=i?(r=l,(h+=1)<n&&(l=t[h],f=u(l))):(r=d,(c+=1)<i&&(d=e[c],p=u(d)));var y,g,m=r+o,M=m-r,x=o-M,v=x,_=m;for(;h<n&&c<i;)f<p?(r=l,(h+=1)<n&&(l=t[h],f=u(l))):(r=d,(c+=1)<i&&(d=e[c],p=u(d))),(x=(o=v)-(M=(m=r+o)-r))&&(s[a++]=x),v=_-((y=_+m)-(g=y-_))+(m-g),_=y;for(;h<n;)(x=(o=v)-(M=(m=(r=l)+o)-r))&&(s[a++]=x),v=_-((y=_+m)-(g=y-_))+(m-g),_=y,(h+=1)<n&&(l=t[h]);for(;c<i;)(x=(o=v)-(M=(m=(r=d)+o)-r))&&(s[a++]=x),v=_-((y=_+m)-(g=y-_))+(m-g),_=y,(c+=1)<i&&(d=e[c]);v&&(s[a++]=v);_&&(s[a++]=_);a||(s[a++]=0);return s.length=a,s};var gn=function(t,e,n){var i=t+e,r=i-t,o=e-r,s=t-(i-r);if(n)return n[0]=s+o,n[1]=i,n;return[s+o,i]};var mn=function(t,e){var n=t.length;if(1===n){var i=dn(t[0],e);return i[0]?i:[i[1]]}var r=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;dn(t[0],e,o),o[0]&&(r[a++]=o[0]);for(var h=1;h<n;++h){dn(t[h],e,s);var c=o[1];gn(c,s[0],o),o[0]&&(r[a++]=o[0]);var u=s[1],l=o[1],f=u+l,d=f-u,p=l-d;o[1]=f,p&&(r[a++]=p)}o[1]&&(r[a++]=o[1]);0===a&&(r[a++]=0);return r.length=a,r};var Mn=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);if(r)return[r,n];return[n]}(t[0],-e[0]);var r,o,s=new Array(n+i),a=0,h=0,c=0,u=Math.abs,l=t[h],f=u(l),d=-e[c],p=u(d);f<p?(o=l,(h+=1)<n&&(l=t[h],f=u(l))):(o=d,(c+=1)<i&&(d=-e[c],p=u(d)));h<n&&f<p||c>=i?(r=l,(h+=1)<n&&(l=t[h],f=u(l))):(r=d,(c+=1)<i&&(d=-e[c],p=u(d)));var y,g,m=r+o,M=m-r,x=o-M,v=x,_=m;for(;h<n&&c<i;)f<p?(r=l,(h+=1)<n&&(l=t[h],f=u(l))):(r=d,(c+=1)<i&&(d=-e[c],p=u(d))),(x=(o=v)-(M=(m=r+o)-r))&&(s[a++]=x),v=_-((y=_+m)-(g=y-_))+(m-g),_=y;for(;h<n;)(x=(o=v)-(M=(m=(r=l)+o)-r))&&(s[a++]=x),v=_-((y=_+m)-(g=y-_))+(m-g),_=y,(h+=1)<n&&(l=t[h]);for(;c<i;)(x=(o=v)-(M=(m=(r=d)+o)-r))&&(s[a++]=x),v=_-((y=_+m)-(g=y-_))+(m-g),_=y,(c+=1)<i&&(d=-e[c]);v&&(s[a++]=v);_&&(s[a++]=_);a||(s[a++]=0);return s.length=a,s};var xn=fn(function(t){var e=5;function n(t,e){for(var n=new Array(t.length-1),i=1;i<t.length;++i)for(var r=n[i-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(r[s++]=t[i][o]);return n}function i(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",i(t.slice(0,e)),",",i(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],o=0;o<t.length;++o)e.push(["scale(",i(r(n(t,o))),",",(s=o,1&s?"-":""),t[0][o],")"].join(""));return e;var s}function o(t){for(var e=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var i=0;i<t;++i)e[n][i]=["m",i,"[",t-n-1,"]"].join("")}return e}(t),a=[],h=0;h<t;++h)0==(1&h)?e.push.apply(e,r(n(s,h))):o.push.apply(o,r(n(s,h))),a.push("m"+h);var c=i(e),u=i(o),l="orientation"+t+"Exact",f=["function ",l,"(",a.join(),"){var p=",c,",n=",u,",d=sub(p,n);return d[d.length-1];};return ",l].join("");return new Function("sum","prod","scale","sub",f)(yn,dn,mn,Mn)}var s=o(3),a=o(4),h=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var i,r=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),a=r-o;if(r>0){if(o<=0)return a;i=r+o}else{if(!(r<0))return a;if(o>=0)return a;i=-(r+o)}var h=33306690738754716e-32*i;return a>=h||a<=-h?a:s(t,e,n)},function(t,e,n,i){var r=t[0]-i[0],o=e[0]-i[0],s=n[0]-i[0],h=t[1]-i[1],c=e[1]-i[1],u=n[1]-i[1],l=t[2]-i[2],f=e[2]-i[2],d=n[2]-i[2],p=o*u,y=s*c,g=s*h,m=r*u,M=r*c,x=o*h,v=l*(p-y)+f*(g-m)+d*(M-x),_=7771561172376103e-31*((Math.abs(p)+Math.abs(y))*Math.abs(l)+(Math.abs(g)+Math.abs(m))*Math.abs(f)+(Math.abs(M)+Math.abs(x))*Math.abs(d));return v>_||-v>_?v:a(t,e,n,i)}];function c(t){var e=h[t.length];return e||(e=h[t.length]=o(t.length)),e.apply(void 0,t)}!function(){for(;h.length<=e;)h.push(o(h.length));for(var n=[],i=["slow"],r=0;r<=e;++r)n.push("a"+r),i.push("o"+r);var s=["function getOrientation(",n.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=e;++r)s.push("case ",r,":return o",r,"(",n.slice(0,r).join(),");");s.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),i.push(s.join(""));var a=Function.apply(void 0,i);for(t.exports=a.apply(void 0,[c].concat(h)),r=0;r<=e;++r)t.exports[r]=h[r]}()}),vn=function(t,e){for(var n=e[0],i=e[1],r=t.length,o=1,s=r,a=0,h=r-1;a<s;h=a++){var c=t[a],u=t[h],l=c[1],f=u[1];if(f<l){if(f<i&&i<l){var d=xn(c,u,e);if(0===d)return 0;o^=0<d|0}else if(i===l){var p=t[(a+1)%r],y=p[1];if(l<y){var d=xn(c,u,e);if(0===d)return 0;o^=0<d|0}}}else if(l<f){if(l<i&&i<f){var d=xn(c,u,e);if(0===d)return 0;o^=d<0|0}else if(i===l){var p=t[(a+1)%r],y=p[1];if(y<l){var d=xn(c,u,e);if(0===d)return 0;o^=d<0|0}}}else if(i===l){var g=Math.min(c[0],u[0]),m=Math.max(c[0],u[0]);if(0===a){for(;h>0;){var M=(h+r-1)%r,x=t[M];if(x[1]!==i)break;var v=x[0];g=Math.min(g,v),m=Math.max(m,v),h=M}if(0===h)return g<=n&&n<=m?0:1;s=h+1}for(var _=t[(h+r-1)%r][1];a+1<s;){var x=t[a+1];if(x[1]!==i)break;var v=x[0];g=Math.min(g,v),m=Math.max(m,v),a+=1}if(g<=n&&n<=m)return 0;var b=t[(a+1)%r][1];n<g&&_<i!=b<i&&(o^=1)}}return 2*o-1};function _n(t,e){switch(e.type){case"Polygon":return bn(t,e);case"MultiPolygon":return function(t,e){const n=e.coordinates;for(let e=0;e<n.length;e++){const i=n[e];if(bn(t,i))return!0}return!1}(t,e)}}function bn(t,e){const n=e.coordinates;if(!kn(t,n[0]))return!1;for(let e=1;e<n.length;e++){if(kn(t,n[e]))return!1}return!0}function kn(t,e){return 1!==vn(e,t)}var wn=fn(function(t,e){function n(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function i(t,e,i){return void 0===i&&(i={}),n({type:"Point",coordinates:t},e,i)}function r(t,e,i){void 0===i&&(i={});for(var r=0,o=t;r<o.length;r++){var s=o[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,i)}function o(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,i)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,i){return void 0===i&&(i={}),n({type:"MultiLineString",coordinates:t},e,i)}function h(t,e,i){return void 0===i&&(i={}),n({type:"MultiPoint",coordinates:t},e,i)}function c(t,e,i){return void 0===i&&(i={}),n({type:"MultiPolygon",coordinates:t},e,i)}function u(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t*i}function l(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t/i}function f(t){return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return i(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return r(e).geometry;case"MultiPoint":return h(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return i(t,e)}),n)},e.polygon=r,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return r(t,e)}),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return o(t,e)}),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=h,e.multiPolygon=c,e.geometryCollection=function(t,e,i){return void 0===i&&(i={}),n({type:"GeometryCollection",geometries:t},e,i)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=u,e.lengthToRadians=l,e.lengthToDegrees=function(t,e){return f(l(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return u(l(t,e),n)},e.convertArea=function(t,n,i){if(void 0===n&&(n="meters"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=e.areaFactors[n];if(!r)throw new Error("invalid original units");var o=e.areaFactors[i];if(!o)throw new Error("invalid final units");return t/r*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!d(t))throw new Error("bbox must only contain numbers")})},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}});ln(wn);wn.earthRadius,wn.factors,wn.unitsFactors,wn.areaFactors,wn.feature,wn.geometry,wn.point,wn.points,wn.polygon,wn.polygons,wn.lineString,wn.lineStrings,wn.featureCollection,wn.multiLineString,wn.multiPoint,wn.multiPolygon,wn.geometryCollection,wn.round,wn.radiansToLength,wn.lengthToRadians,wn.lengthToDegrees,wn.bearingToAzimuth,wn.radiansToDegrees,wn.degreesToRadians,wn.convertLength,wn.convertArea,wn.isNumber,wn.isObject,wn.validateBBox,wn.validateId,wn.radians2degrees,wn.degrees2radians,wn.distanceToDegrees,wn.distanceToRadians,wn.radiansToDistance,wn.bearingToAngle,wn.convertDistance;var On=fn(function(t,e){function n(t,e,i){if(null!==t)for(var r,o,s,a,h,c,u,l,f=0,d=0,p=t.type,y="FeatureCollection"===p,g="Feature"===p,m=y?t.features.length:1,M=0;M<m;M++){h=(l=!!(u=y?t.features[M].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var x=0;x<h;x++){var v=0,_=0;if(null!==(a=l?u.geometries[x]:u)){c=a.coordinates;var b=a.type;switch(f=!i||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(c,d,M,v,_))return!1;d++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===e(c[r],d,M,v,_))return!1;d++,"MultiPoint"===b&&v++}"LineString"===b&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-f;o++){if(!1===e(c[r][o],d,M,v,_))return!1;d++}"MultiLineString"===b&&v++,"Polygon"===b&&_++}"Polygon"===b&&v++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(_=0,o=0;o<c[r].length;o++){for(s=0;s<c[r][o].length-f;s++){if(!1===e(c[r][o][s],d,M,v,_))return!1;d++}_++}v++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===n(a.geometries[r],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function r(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function o(t,e){var n,i,r,o,s,a,h,c,u,l,f=0,d="FeatureCollection"===t.type,p="Feature"===t.type,y=d?t.features.length:1;for(n=0;n<y;n++){for(a=d?t.features[n].geometry:p?t.geometry:t,c=d?t.features[n].properties:p?t.properties:{},u=d?t.features[n].bbox:p?t.bbox:void 0,l=d?t.features[n].id:p?t.id:void 0,s=(h=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=h?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,c,u,l))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],f,c,u,l))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,c,u,l))return!1;f++}}function s(t,e){o(t,function(t,n,i,r,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(wn.feature(t,i,{bbox:r,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var h=0;h<t.coordinates.length;h++){var c={type:s,coordinates:t.coordinates[h]};if(!1===e(wn.feature(c,i),n,h))return!1}})}function a(t,e){s(t,function(t,i,r){var o=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var a,h=0,c=0,u=0;return!1!==n(t,function(n,s,l,f,d){if(void 0===a||i>h||f>c||d>u)return a=n,h=i,c=f,u=d,void(o=0);var p=wn.lineString([a,n],t.properties);if(!1===e(p,i,r,d,o))return!1;o++,a=n})&&void 0}}})}function h(t,e){if(!t)throw new Error("geojson is required");s(t,function(t,n,i){if(null!==t.geometry){var r=t.geometry.type,o=t.geometry.coordinates;switch(r){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(wn.lineString(o[s],t.properties),n,i,s))return!1}}})}Object.defineProperty(e,"__esModule",{value:!0}),e.coordEach=n,e.coordReduce=function(t,e,i,r){var o=i;return n(t,function(t,n,r,s,a){o=0===n&&void 0===i?t:e(o,t,n,r,s,a)},r),o},e.propEach=i,e.propReduce=function(t,e,n){var r=n;return i(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r},e.featureEach=r,e.featureReduce=function(t,e,n){var i=n;return r(t,function(t,r){i=0===r&&void 0===n?t:e(i,t,r)}),i},e.coordAll=function(t){var e=[];return n(t,function(t){e.push(t)}),e},e.geomEach=o,e.geomReduce=function(t,e,n){var i=n;return o(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),i},e.flattenEach=s,e.flattenReduce=function(t,e,n){var i=n;return s(t,function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)}),i},e.segmentEach=a,e.segmentReduce=function(t,e,n){var i=n,r=!1;return a(t,function(t,o,s,a,h){i=!1===r&&void 0===n?t:e(i,t,o,s,a,h),r=!0}),i},e.lineEach=h,e.lineReduce=function(t,e,n){var i=n;return h(t,function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)}),i},e.findSegment=function(t,e){if(e=e||{},!wn.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var h=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=h.length+s-1),wn.lineString([h[s],h[s+1]],a,e);case"Polygon":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s-1),wn.lineString([h[o][s],h[o][s+1]],a,e);case"MultiLineString":return r<0&&(r=h.length+r),s<0&&(s=h[r].length+s-1),wn.lineString([h[r][s],h[r][s+1]],a,e);case"MultiPolygon":return r<0&&(r=h.length+r),o<0&&(o=h[r].length+o),s<0&&(s=h[r][o].length-s-1),wn.lineString([h[r][o][s],h[r][o][s+1]],a,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(e=e||{},!wn.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var h=n.coordinates;switch(n.type){case"Point":return wn.point(h,a,e);case"MultiPoint":return r<0&&(r=h.length+r),wn.point(h[r],a,e);case"LineString":return s<0&&(s=h.length+s),wn.point(h[s],a,e);case"Polygon":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s),wn.point(h[o][s],a,e);case"MultiLineString":return r<0&&(r=h.length+r),s<0&&(s=h[r].length+s),wn.point(h[r][s],a,e);case"MultiPolygon":return r<0&&(r=h.length+r),o<0&&(o=h[r].length+o),s<0&&(s=h[r][o].length-s),wn.point(h[r][o][s],a,e)}throw new Error("geojson is invalid")}});ln(On);var $n=On.coordEach;On.coordReduce,On.propEach,On.propReduce,On.featureEach,On.featureReduce,On.coordAll,On.geomEach,On.geomReduce,On.flattenEach,On.flattenReduce,On.segmentEach,On.segmentReduce,On.lineEach,On.lineReduce,On.findSegment,On.findPoint;function Cn(t,{scaleX:e,scaleY:n}){return Pn(t,t=>[e(t[0]),n(t[1])])}function Pn(t,e){const n=JSON.parse(JSON.stringify(t));if(n.constructor===Array)for(let t=0;t<n.length;t++)jn(n[t],e);if(n.constructor===Object)for(const t in n)jn(n[t],e);return n}function An(t,{scaleX:e,scaleY:n}){const i=JSON.parse(JSON.stringify(t));return jn(i,t=>[e(t[0]),n(t[1])]),i}function En(t,e){const n=JSON.parse(JSON.stringify(t));return jn(n,e),n}function jn(t,e){$n(t,t=>{const n=e(t);t[0]=n[0],t[1]=n[1]})}function Sn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Nn(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function In(){}var Tn="\\s*([+-]?\\d+)\\s*",Wn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qn=/^#([0-9a-f]{3})$/,Gn=/^#([0-9a-f]{6})$/,zn=new RegExp("^rgb\\("+[Tn,Tn,Tn]+"\\)$"),Ln=new RegExp("^rgb\\("+[Rn,Rn,Rn]+"\\)$"),Fn=new RegExp("^rgba\\("+[Tn,Tn,Tn,Wn]+"\\)$"),Dn=new RegExp("^rgba\\("+[Rn,Rn,Rn,Wn]+"\\)$"),Yn=new RegExp("^hsl\\("+[Wn,Rn,Rn]+"\\)$"),Un=new RegExp("^hsla\\("+[Wn,Rn,Rn,Wn]+"\\)$"),Bn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Xn(t){var e;return t=(t+"").trim().toLowerCase(),(e=qn.exec(t))?new Vn((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=Gn.exec(t))?Hn(parseInt(e[1],16)):(e=zn.exec(t))?new Vn(e[1],e[2],e[3],1):(e=Ln.exec(t))?new Vn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Fn.exec(t))?Qn(e[1],e[2],e[3],e[4]):(e=Dn.exec(t))?Qn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Yn.exec(t))?ti(e[1],e[2]/100,e[3]/100,1):(e=Un.exec(t))?ti(e[1],e[2]/100,e[3]/100,e[4]):Bn.hasOwnProperty(t)?Hn(Bn[t]):"transparent"===t?new Vn(NaN,NaN,NaN,0):null}function Hn(t){return new Vn(t>>16&255,t>>8&255,255&t,1)}function Qn(t,e,n,i){return i<=0&&(t=e=n=NaN),new Vn(t,e,n,i)}function Zn(t){return t instanceof In||(t=Xn(t)),t?new Vn((t=t.rgb()).r,t.g,t.b,t.opacity):new Vn}function Jn(t,e,n,i){return 1===arguments.length?Zn(t):new Vn(t,e,n,null==i?1:i)}function Vn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Kn(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ti(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ei(t,e,n,i)}function ei(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function ni(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Sn(In,Xn,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Sn(Vn,Jn,Nn(In,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Vn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Vn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Kn(this.r)+Kn(this.g)+Kn(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Sn(ei,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof ei)return new ei(t.h,t.s,t.l,t.opacity);if(t instanceof In||(t=Xn(t)),!t)return new ei;if(t instanceof ei)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,h=(o+r)/2;return a?(s=e===o?(n-i)/a+6*(n<i):n===o?(i-e)/a+2:(e-n)/a+4,a/=h<.5?o+r:2-o-r,s*=60):a=h>0&&h<1?0:s,new ei(s,a,h,t.opacity)}(t):new ei(t,e,n,null==i?1:i)},Nn(In,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ei(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ei(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Vn(ni(t>=240?t-240:t+120,r,i),ni(t,r,i),ni(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var ii=Math.PI/180,ri=180/Math.PI,oi=.96422,si=1,ai=.82521,hi=4/29,ci=6/29,ui=3*ci*ci,li=ci*ci*ci;function fi(t){if(t instanceof di)return new di(t.l,t.a,t.b,t.opacity);if(t instanceof Mi){if(isNaN(t.h))return new di(t.l,0,0,t.opacity);var e=t.h*ii;return new di(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Vn||(t=Zn(t));var n,i,r=mi(t.r),o=mi(t.g),s=mi(t.b),a=pi((.2225045*r+.7168786*o+.0606169*s)/si);return r===o&&o===s?n=i=a:(n=pi((.4360747*r+.3850649*o+.1430804*s)/oi),i=pi((.0139322*r+.0971045*o+.7141733*s)/ai)),new di(116*a-16,500*(n-a),200*(a-i),t.opacity)}function di(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function pi(t){return t>li?Math.pow(t,1/3):t/ui+hi}function yi(t){return t>ci?t*t*t:ui*(t-hi)}function gi(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function mi(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Mi(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}Sn(di,function(t,e,n,i){return 1===arguments.length?fi(t):new di(t,e,n,null==i?1:i)},Nn(In,{brighter:function(t){return new di(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new di(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Vn(gi(3.1338561*(e=oi*yi(e))-1.6168667*(t=si*yi(t))-.4906146*(n=ai*yi(n))),gi(-.9787684*e+1.9161415*t+.033454*n),gi(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Sn(Mi,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Mi)return new Mi(t.h,t.c,t.l,t.opacity);if(t instanceof di||(t=fi(t)),0===t.a&&0===t.b)return new Mi(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*ri;return new Mi(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Mi(t,e,n,null==i?1:i)},Nn(In,{brighter:function(t){return new Mi(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Mi(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return fi(this).rgb()}}));var xi=-.14861,vi=1.78277,_i=-.29227,bi=-.90649,ki=1.97294,wi=ki*bi,Oi=ki*vi,$i=vi*_i-bi*xi;function Ci(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Pi(t){return function(){return t}}function Ai(t){return 1==(t=+t)?Ei:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Pi(isNaN(e)?n:e)}}function Ei(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Pi(isNaN(t)?e:t)}Sn(Ci,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Ci)return new Ci(t.h,t.s,t.l,t.opacity);t instanceof Vn||(t=Zn(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=($i*i+wi*e-Oi*n)/($i+wi-Oi),o=i-r,s=(ki*(n-r)-_i*o)/bi,a=Math.sqrt(s*s+o*o)/(ki*r*(1-r)),h=a?Math.atan2(s,o)*ri-120:NaN;return new Ci(h<0?h+360:h,a,r,t.opacity)}(t):new Ci(t,e,n,null==i?1:i)},Nn(In,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ci(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ci(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ii,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Vn(255*(e+n*(xi*i+vi*r)),255*(e+n*(_i*i+bi*r)),255*(e+n*(ki*i)),this.opacity)}}));var ji=function t(e){var n=Ai(e);function i(t,e){var i=n((t=Jn(t)).r,(e=Jn(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),s=Ei(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function Si(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),s=new Array(i);for(n=0;n<r;++n)o[n]=Wi(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<r;++n)s[n]=o[n](t);return s}}function Ni(t,e){return e-=t=+t,function(n){return t+e*n}}var Ii=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ti=new RegExp(Ii.source,"g");function Wi(t,e){var n,i=typeof e;return null==e||"boolean"===i?Pi(e):("number"===i?Ni:"string"===i?(n=Xn(e))?(e=n,ji):function(t,e){var n,i,r,o=Ii.lastIndex=Ti.lastIndex=0,s=-1,a=[],h=[];for(t+="",e+="";(n=Ii.exec(t))&&(i=Ti.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,h.push({i:s,x:Ni(n,i)})),o=Ti.lastIndex;return o<e.length&&(r=e.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,i=0;i<e;++i)a[(n=h[i]).i]=n.x(t);return a.join("")})}:e instanceof Xn?ji:e instanceof Date?function(t,e){var n=new Date;return e-=t=+t,function(i){return n.setTime(t+e*i),n}}:Array.isArray(e)?Si:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Wi(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}:Ni)(t,e)}function Ri(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}}Math.PI,Math.SQRT2;function qi(t,e,n){const i=[];let r,o;for(let s=0;s<t.length-1;s++){const a=s+1;Gi(r=t[s],o=t[a],e,n,i)}return i.push(e(o)),i}function Gi(t,e,n,i,r){if(function(t,e,n,i){const r=zi(t,e,2),o=[t,...r,e].map(n);return!function(t,e){const n=t[0],i=t[1],r=t[t.length-1];return cn(n,r)<e&&cn(i,r<e)}(o,i)&&!function(t,e){const n=t[0],i=t[1],r=t[2],o=t[t.length-1],s=[n,o];return un(i,s,e)&&un(r,s,e)}(o,i)}(t,e,n,i)){const o=zi(t,e,1)[0];Gi(t,o,n,i,r),Gi(o,e,n,i,r)}else{const e=n(t);r.push(e)}}function zi(t,e,n){const i=Si(t,e),r=[];for(let t=1;t<n+1;t++){const e=1/(n+1)*t;r.push(i(e))}return r}function Li(t,e,n=1){switch(t.type){case"LineString":return function(t,e,n){return{type:"LineString",coordinates:qi(t.coordinates,e,n)}}(t,e,n);case"Polygon":return function(t,e,n){const i=t.coordinates,r=[];for(let t=0;t<i.length;t++){const o=i[t],s=qi(o,e,n);r.push(s)}return{type:"Polygon",coordinates:r}}(t,e,n);case"MultiPolygon":return function(t,e,n){const i=t.coordinates,r=[];for(let t=0;t<i.length;t++){const o=i[t],s=[];for(let t=0;t<o.length;t++){const i=o[t],r=qi(i,e,n);s.push(r)}r.push(s)}return{type:"MultiPolygon",coordinates:r}}(t,e,n)}}var Fi=ln(fn(function(t,e){!function(t){function e(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function n(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function i(){}var r=1/.7,o="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3})$/,c=/^#([0-9a-f]{6})$/,u=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),l=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),f=new RegExp("^rgba\\("+[o,o,o,s]+"\\)$"),d=new RegExp("^rgba\\("+[a,a,a,s]+"\\)$"),p=new RegExp("^hsl\\("+[s,a,a]+"\\)$"),y=new RegExp("^hsla\\("+[s,a,a,s]+"\\)$"),g={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function m(t){var e;return t=(t+"").trim().toLowerCase(),(e=h.exec(t))?new b((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=c.exec(t))?M(parseInt(e[1],16)):(e=u.exec(t))?new b(e[1],e[2],e[3],1):(e=l.exec(t))?new b(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=f.exec(t))?x(e[1],e[2],e[3],e[4]):(e=d.exec(t))?x(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=p.exec(t))?w(e[1],e[2]/100,e[3]/100,1):(e=y.exec(t))?w(e[1],e[2]/100,e[3]/100,e[4]):g.hasOwnProperty(t)?M(g[t]):"transparent"===t?new b(NaN,NaN,NaN,0):null}function M(t){return new b(t>>16&255,t>>8&255,255&t,1)}function x(t,e,n,i){return i<=0&&(t=e=n=NaN),new b(t,e,n,i)}function v(t){return t instanceof i||(t=m(t)),t?new b((t=t.rgb()).r,t.g,t.b,t.opacity):new b}function _(t,e,n,i){return 1===arguments.length?v(t):new b(t,e,n,null==i?1:i)}function b(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function k(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function w(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new O(t,e,n,i)}function O(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function $(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}e(i,m,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),e(b,_,n(i,{brighter:function(t){return t=null==t?r:Math.pow(r,t),new b(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new b(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+k(this.r)+k(this.g)+k(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),e(O,function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof O)return new O(t.h,t.s,t.l,t.opacity);if(t instanceof i||(t=m(t)),!t)return new O;if(t instanceof O)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,h=s-o,c=(s+o)/2;return h?(a=e===s?(n-r)/h+6*(n<r):n===s?(r-e)/h+2:(e-n)/h+4,h/=c<.5?s+o:2-s-o,a*=60):h=c>0&&c<1?0:a,new O(a,h,c,t.opacity)}(t):new O(t,e,n,null==r?1:r)},n(i,{brighter:function(t){return t=null==t?r:Math.pow(r,t),new O(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new O(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new b($(t>=240?t-240:t+120,r,i),$(t,r,i),$(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var C=Math.PI/180,P=180/Math.PI,A=.96422,E=1,j=.82521,S=4/29,N=6/29,I=3*N*N,T=N*N*N;function W(t){if(t instanceof R)return new R(t.l,t.a,t.b,t.opacity);if(t instanceof F)return D(t);t instanceof b||(t=v(t));var e,n,i=L(t.r),r=L(t.g),o=L(t.b),s=q((.2225045*i+.7168786*r+.0606169*o)/E);return i===r&&r===o?e=n=s:(e=q((.4360747*i+.3850649*r+.1430804*o)/A),n=q((.0139322*i+.0971045*r+.7141733*o)/j)),new R(116*s-16,500*(e-s),200*(s-n),t.opacity)}function R(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function q(t){return t>T?Math.pow(t,1/3):t/I+S}function G(t){return t>N?t*t*t:I*(t-S)}function z(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function L(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function F(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function D(t){if(isNaN(t.h))return new R(t.l,0,0,t.opacity);var e=t.h*C;return new R(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}e(R,function(t,e,n,i){return 1===arguments.length?W(t):new R(t,e,n,null==i?1:i)},n(i,{brighter:function(t){return new R(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new R(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=A*G(e),t=E*G(t),n=j*G(n),new b(z(3.1338561*e-1.6168667*t-.4906146*n),z(-.9787684*e+1.9161415*t+.033454*n),z(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),e(F,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof F)return new F(t.h,t.c,t.l,t.opacity);if(t instanceof R||(t=W(t)),0===t.a&&0===t.b)return new F(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*P;return new F(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new F(t,e,n,null==i?1:i)},n(i,{brighter:function(t){return new F(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new F(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return D(this).rgb()}}));var Y=-.14861,U=1.78277,B=-.29227,X=-.90649,H=1.97294,Q=H*X,Z=H*U,J=U*B-X*Y;function V(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function K(t){return function(){return t}}function tt(t){return 1==(t=+t)?et:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):K(isNaN(e)?n:e)}}function et(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):K(isNaN(t)?e:t)}e(V,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof V)return new V(t.h,t.s,t.l,t.opacity);t instanceof b||(t=v(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(J*i+Q*e-Z*n)/(J+Q-Z),o=i-r,s=(H*(n-r)-B*o)/X,a=Math.sqrt(s*s+o*o)/(H*r*(1-r)),h=a?Math.atan2(s,o)*P-120:NaN;return new V(h<0?h+360:h,a,r,t.opacity)}(t):new V(t,e,n,null==i?1:i)},n(i,{brighter:function(t){return t=null==t?r:Math.pow(r,t),new V(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new V(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*C,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new b(255*(e+n*(Y*i+U*r)),255*(e+n*(B*i+X*r)),255*(e+n*(H*i)),this.opacity)}}));var nt=function t(e){var n=tt(e);function i(t,e){var i=n((t=_(t)).r,(e=_(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),s=et(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function it(t,e){return e-=t=+t,function(n){return t+e*n}}var rt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ot=new RegExp(rt.source,"g");function st(t,e){var n,i=typeof e;return null==e||"boolean"===i?K(e):("number"===i?it:"string"===i?(n=m(e))?(e=n,nt):function(t,e){var n,i,r,o=rt.lastIndex=ot.lastIndex=0,s=-1,a=[],h=[];for(t+="",e+="";(n=rt.exec(t))&&(i=ot.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,h.push({i:s,x:it(n,i)})),o=ot.lastIndex;return o<e.length&&(r=e.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,i=0;i<e;++i)a[(n=h[i]).i]=n.x(t);return a.join("")})}:e instanceof m?nt:e instanceof Date?function(t,e){var n=new Date;return e-=t=+t,function(i){return n.setTime(t+e*i),n}}:Array.isArray(e)?function(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),s=new Array(i);for(n=0;n<r;++n)o[n]=st(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<r;++n)s[n]=o[n](t);return s}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=st(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}:it)(t,e)}function at(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function ht(t,e){const n=[];for(let i=0;i<t.length;i++)n.push(e(t[i],i));return n}function ct(t,e){for(let n=0;n<t.length;n++)if(e(t[n],n))return!1;return!0}function ut(t){const e=ht(t,(t,e)=>e);return e.sort((e,n)=>t[n]-t[e]),e}function lt(t,e){return ht(e,e=>t[e])}function ft(t,e){if(0===t.length)return 0;for(let n=t.length-1;n>=0;n--){const i=t[n];if(e<=i)return n}return 0}function dt(t){return t.pop(),t}function pt(t){let e=t[0];return t.push(e),t}function yt(t,e){let n=gt(t);const i=function(t){const e=[];for(let n=0;n<t.length;n++){const i=mt(t,n);e.push(at(i[0],i[1]))}return e}(n=dt(n));let r=ut(i);for(let t=0;t<e;t++){const t=r[0],e=mt(n,t),o=i[t],s=Mt(e),a=o/2;r.shift(),n[t]=null,i[t]=null,r=xt(r,i,t,a),n[t]=s[0][0],n.splice(t+1,0,s[1][0]),i[t]=a,i.splice(t+1,0,a)}return n=pt(n)}function gt(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].slice(0));return e}function mt(t,e){return[t[e],t[(e+1)%t.length]]}function Mt(t){const e=st(t[0],t[1])(.5);return[[t[0],e],[e,t[1]]]}function xt(t,e,n,i){let r=!1;for(let o=0;o<t.length;o++){const s=t[o];s>n&&(t[o]=t[o]+1);const a=e[s];if(null!==a&&i>=a){t.splice(o,0,n),t.splice(o+1,0,n+1),r=!0;break}}return r||(t.push(n),t.push(n+1)),t}function vt(t,e){let n=gt(t);const i=(n=dt(n)).length;let r,o,s,a=1/0;for(let t=0;t<i;t++)o=0,e.forEach((e,r)=>{const s=at(n[(t+r)%i],e);o+=s*s}),o<a&&(a=o,r=t);return r&&(s=n.splice(0,r),n.splice(n.length,0,...s)),n=pt(n)}function _t(t){return t.constructor===Array}function bt(t){return t.constructor===Object&&"Polygon"===t.type}function kt(t){return t.constructor===Object&&"MultiPolygon"===t.type}function wt(t){return bt(t)||kt(t)}function Ot(t){if(_t(t))return $t(t);if(bt(t))return Pt(t);if(kt(t))return function(t){let e=0;for(let n=0;n<t.coordinates.length;n++)e+=Pt(t.coordinates[n]);return e}(t);throw new Error("Invalid input")}function $t(t){return Math.abs(Ct(t))}function Ct(t){let e=0;for(let n=0,i=t.length;n<i;n++){const i=t[n][0],r=t[n===t.length-1?0:n+1][1],o=t[n===t.length-1?0:n+1][0],s=t[n][1];e+=i*r*.5,e-=o*s*.5}return e}function Pt(t){let e=$t(t.coordinates[0]);for(let n=1;n<t.coordinates.length;n++){const i=$t(t.coordinates[n]);e-=i}return e}function At(t,e){return t.length>9?ht(t,(t,e)=>e):function(t,e){const n=ht(t,Ot),i=ht(e,Ot),r=ut(n),o=ut(i),s={};for(let t=0;t<o.length;t++){const e=r[t],n=o[t];s[n]=e}const a=[];for(let t=0;t<e.length;t++)a.push(s[t]);return a}(t,e)}function Et(t){return _t(t)?jt(t):bt(t)?jt(t.coordinates[0]):kt(t)?function(t){let e=0,n=0,i=0;for(let r=0;r<t.coordinates.length;r++){const o=t.coordinates[r],s=jt(o[0]),a=Ot(o[0]);e+=s[0]*a,n+=s[1]*a,i+=a}return[e/i,n/i]}(t):void 0}function jt(t){const e=t.length,n=t[0];let i,r,o,s=0,a=0,h=0;for(let c=0,u=e-1;c<e;u=c++)i=t[c],r=t[u],o=(i[0]-n[0])*(r[1]-n[1])-(r[0]-n[0])*(i[1]-n[1]),s+=o,a+=(i[0]+r[0]-2*n[0])*o,h+=(i[1]+r[1]-2*n[1])*o;return[a/(o=3*s)+n[0],h/o+n[1]]}function St(t,e){const n=t.coordinates[0],i=e.coordinates[0],[r,o]=Nt(n,i);if(function(t,e){return 1===t.coordinates.length&&1===e.coordinates.length}(t,e))return function(t,e,n,i){const r=st(n,i);return function(n){if(0===n)return t;if(1===n)return e;const i=r(n);return{type:"Polygon",coordinates:[i]}}}(t,e,r,o);const s=function(t,e){let n=[];const i=Math.min(t.coordinates.length,e.coordinates.length)-1;i>0&&(n=n.concat(function(t,e,n){const i=[],r=It(t,n),o=It(e,n),s=ht(At(r,o),t=>r[t]);for(let t=0;t<n;t++){const e=s[t],n=o[t],[r,a]=Nt(e,n),h=st(r,a);i.push(h)}return i}(t,e,i)));const r=t.coordinates.length-e.coordinates.length;return r>0&&(n=n.concat(Tt(t,r))),r<0&&(n=n.concat(function(t,e){return ht(Tt(t,e),t=>e=>t(1-e))}(e,-r))),n}(t,e);return function(t,e,n,i,r){const o=st(n,i);return function(n){if(0===n)return t;if(1===n)return e;const i=o(n);return{type:"Polygon",coordinates:[i,...ht(r,t=>t(n))]}}}(t,e,r,o,s)}function Nt(t,e){const n=t.length-e.length;n>0&&(e=yt(e,n)),n<0&&(t=yt(t,-n));const i=vt(t,e);return[i,e]}function It(t,e){const n=[];for(let i=1;i<=e;i++)n.push(t.coordinates[i]);return n}function Tt(t,e){const n=[],i=t.coordinates.length-e;for(let e=i;e<t.coordinates.length;e++){const i=t.coordinates[e],r=Et(i),o=Wt(r),[s,a]=Nt(i,o);n.push(st(s,a))}return n}function Wt([t,e]){const n=t-1e-6,i=t+1e-6,r=e-1e-6,o=e+1e-6;return[[n,r],[n,o],[i,o],[i,r],[n,r]]}Math.PI,Math.SQRT2;var Rt=Gt,qt=Gt;function Gt(t,e,n){n=n||2;var i,r,o,s,a,h,c,u=e&&e.length,l=u?e[0]*n:t.length,f=zt(t,0,l,n,!0),d=[];if(!f||f.next===f.prev)return d;if(u&&(f=function(t,e,n,i){var r,o,s,a,h,c=[];for(r=0,o=e.length;r<o;r++)s=e[r]*i,a=r<o-1?e[r+1]*i:t.length,(h=zt(t,s,a,i,!1))===h.next&&(h.steiner=!0),c.push(Zt(h));for(c.sort(Xt),r=0;r<c.length;r++)Ht(c[r],n),n=Lt(n,n.next);return n}(t,e,f,n)),t.length>80*n){i=o=t[0],r=s=t[1];for(var p=n;p<l;p+=n)a=t[p],h=t[p+1],a<i&&(i=a),h<r&&(r=h),a>o&&(o=a),h>s&&(s=h);c=0!==(c=Math.max(o-i,s-r))?1/c:0}return Ft(f,d,n,i,r,c),d}function zt(t,e,n,i,r){var o,s;if(r===ae(t,e,n,i)>0)for(o=e;o<n;o+=i)s=re(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=re(o,t[o],t[o+1],s);return s&&te(s,s.next)&&(oe(s),s=s.next),s}function Lt(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!te(i,i.next)&&0!==Kt(i.prev,i,i.next))i=i.next;else{if(oe(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Ft(t,e,n,i,r,o,s){if(t){!s&&o&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=Qt(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,h,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ);e++);for(h=c;a>0||h>0&&i;)0!==a&&(0===h||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,h--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(s>1)}(r)}(t,i,r,o);for(var a,h,c=t;t.prev!==t.next;)if(a=t.prev,h=t.next,o?Yt(t,i,r,o):Dt(t))e.push(a.i/n),e.push(t.i/n),e.push(h.i/n),oe(t),t=h.next,c=h.next;else if((t=h)===c){s?1===s?Ft(t=Ut(t,e,n),e,n,i,r,o,2):2===s&&Bt(t,e,n,i,r,o):Ft(Lt(t),e,n,i,r,o,1);break}}}function Dt(t){var e=t.prev,n=t,i=t.next;if(Kt(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Jt(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Kt(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Yt(t,e,n,i){var r=t.prev,o=t,s=t.next;if(Kt(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,h=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,c=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,u=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,l=Qt(a,h,e,n,i),f=Qt(c,u,e,n,i),d=t.prevZ,p=t.nextZ;d&&d.z>=l&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&Jt(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Kt(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&Jt(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Kt(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=l;){if(d!==t.prev&&d!==t.next&&Jt(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Kt(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&Jt(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Kt(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Ut(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!te(r,o)&&ee(r,i,i.next,o)&&ne(r,o)&&ne(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),oe(i),oe(i.next),i=t=o),i=i.next}while(i!==t);return i}function Bt(t,e,n,i,r,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Vt(s,a)){var h=ie(s,a);return s=Lt(s,s.next),h=Lt(h,h.next),Ft(s,e,n,i,r,o),void Ft(h,e,n,i,r,o)}a=a.next}s=s.next}while(s!==t)}function Xt(t,e){return t.x-e.x}function Ht(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n.prev;var h,c=n,u=n.x,l=n.y,f=1/0;for(i=n.next;i!==c;)r>=i.x&&i.x>=u&&r!==i.x&&Jt(o<l?r:s,o,u,l,o<l?s:r,o,i.x,i.y)&&((h=Math.abs(o-i.y)/(r-i.x))<f||h===f&&i.x>n.x)&&ne(i,t)&&(n=i,f=h),i=i.next;return n}(t,e)){var n=ie(e,t);Lt(n,n.next)}}function Qt(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Zt(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Jt(t,e,n,i,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function Vt(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ee(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&ne(t,e)&&ne(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}function Kt(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function te(t,e){return t.x===e.x&&t.y===e.y}function ee(t,e,n,i){return!!(te(t,e)&&te(n,i)||te(t,i)&&te(n,e))||Kt(t,e,n)>0!=Kt(t,e,i)>0&&Kt(n,i,t)>0!=Kt(n,i,e)>0}function ne(t,e){return Kt(t.prev,t,t.next)<0?Kt(t,e,t.next)>=0&&Kt(t,t.prev,e)>=0:Kt(t,e,t.prev)<0||Kt(t,t.next,e)<0}function ie(t,e){var n=new se(t.i,t.x,t.y),i=new se(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function re(t,e,n,i){var r=new se(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function oe(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function se(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ae(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}function he(t,e){const n=t[e],i=t[e+1],r=t[e+2];return[[n,i],[i,r],[r,n]]}function ce(t){return t[0]<t[1]?t.join(","):t[1]+","+t[0]}function ue(t,e){return[t[2*e],t[2*e+1]]}function le(t,e){return{type:"Polygon",area:t,arcs:[e]}}function fe(t,e){return Math.abs(Ot(ht(e,e=>ue(t,e[0]))))}function de(t){return t}function pe(t,e){var n=e.id,i=e.bbox,r=null==e.properties?{}:e.properties,o=ye(t,e);return null==n&&null==i?{type:"Feature",properties:r,geometry:o}:null==i?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:i,properties:r,geometry:o}}function ye(t,e){var n=function(t){if(null==t)return de;var e,n,i=t.scale[0],r=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var h=2,c=t.length,u=new Array(c);for(u[0]=(e+=t[0])*i+o,u[1]=(n+=t[1])*r+s;h<c;)u[h]=t[h],++h;return u}}(t.transform),i=t.arcs;function r(t,e){e.length&&e.pop();for(var r=i[t<0?~t:t],o=0,s=r.length;o<s;++o)e.push(n(r[o],o));t<0&&function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,i=t.length;n<i;++n)r(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function h(t){return t.map(a)}return function t(e){var n,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=h(e.arcs);break;case"MultiPolygon":n=e.arcs.map(h);break;default:return null}return{type:i,coordinates:n}}(e)}function ge(t,e){var n={},i={},r={},o=[],s=-1;function a(t,e){for(var i in t){var r=t[i];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){n[t<0?~t:t]=1}),o.push(r)}}return e.forEach(function(n,i){var r,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++s],e[s]=n,e[i]=r)}),e.forEach(function(e){var n,o,s=function(e){var n,i=t.arcs[e<0?~e:e],r=i[0];return t.transform?(n=[0,0],i.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=i[i.length-1],e<0?[n,r]:[r,n]}(e),a=s[0],h=s[1];if(n=r[a])if(delete r[n.end],n.push(e),n.end=h,o=i[h]){delete i[o.start];var c=o===n?n:n.concat(o);i[c.start=n.start]=r[c.end=o.end]=c}else i[n.start]=r[n.end]=n;else if(n=i[h])if(delete i[n.start],n.unshift(e),n.start=a,o=r[a]){delete r[o.end];var u=o===n?n:o.concat(n);i[u.start=o.start]=r[u.end=n.end]=u}else i[n.start]=r[n.end]=n;else i[(n=[e]).start=a]=r[n.end=h]=n}),a(r,i),a(i,r),e.forEach(function(t){n[t<0?~t:t]||o.push([t])}),o}function me(t,e){var n={},i=[],r=[];function o(t){t.forEach(function(e){e.forEach(function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)})}),i.push(t)}function s(e){return function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0];return Math.abs(o)}(ye(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}}),i.forEach(function(t){if(!t._){var e=[],i=[t];for(t._=1,r.push(e);t=i.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].forEach(function(t){t._||(t._=1,i.push(t))})})})}}),i.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:r.map(function(e){var i,r=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].length<2&&r.push(t)})})}),r=ge(t,r),(i=r.length)>1)for(var o,a,h=1,c=s(r[0]);h<i;++h)(o=s(r[h]))>c&&(a=r[0],r[0]=r[h],r[h]=a,c=o);return r})}}function Me(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function xe(t){return 1===t.length&&(t=function(t){return function(e,n){return Me(t(e),n)}}(t)),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}}}Gt.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(ae(t,0,o,n));if(r)for(var a=0,h=e.length;a<h;a++){var c=e[a]*n,u=a<h-1?e[a+1]*n:t.length;s-=Math.abs(ae(t,c,u,n))}var l=0;for(a=0;a<i.length;a+=3){var f=i[a]*n,d=i[a+1]*n,p=i[a+2]*n;l+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},Gt.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},Rt.default=qt,xe(Me);const ve=xe(t=>t.area).left;function _e(t,e){const n=t.objects.triangles.geometries;for(;n.length>e;)o();if(e>n.length)throw new RangeError("Can't collapse topology into "+e+" pieces.");const i=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return pe(t,e)})}:pe(t,e)}(t,t.objects.triangles),r=ht(i.features,t=>t.geometry);return r;function o(){const e=n[0],i=function(t){const e=t[0].arcs[0].map(t=>t<0?~t:t);let n;for(let i=1;i<t.length;i++){const r=t[i].arcs[0].map(t=>t<0?~t:t);if(e.some(t=>r.includes(t))){n=i;break}}return n}(n),r=n[i],o=me(t,[e,r]);o.area=e.area+r.area,o.type="Polygon",o.arcs=o.arcs[0],n.splice(i,1),n.shift(),n.splice(ve(n,o.area),0,o)}}function be(t){const e=t.coordinates[0][0],n=t.coordinates[0][1],i=t.coordinates[0][2],r=st(e,n)(.5),o=ke([e,r,i,e]),s=ke([n,i,r,n]);return[o,s]}function ke(t){return{type:"Polygon",coordinates:[t]}}const we=2;function Oe(t,e){if(e<2)throw new Error("Cannot cut polygon in less than 2 pieces");const n=Rt.flatten(t.coordinates),i=Rt(n.vertices,n.holes,we),r=function(t){return t.length/3}(i);if(r>=e){const t=function(t,e){const n={},i={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};for(let r=0;r<e.length;r+=3){const o=[],s=he(e,r);s.forEach(e=>{const r=ce(e),s=ht(e,e=>ue(t,e));r in n?o.push(~n[r]):(o.push(n[r]=i.arcs.length),i.arcs.push(s))});const a=fe(t,s),h=le(a,o);i.objects.triangles.geometries.push(h)}return i.objects.triangles.geometries.sort((t,e)=>t.area-e.area),i}(n.vertices,i);return _e(t,e)}if(r<e){const t=function(t,e){const n=[];for(let i=0;i<e.length;i+=3){const r=he(e,i);let o=ht(r,e=>ue(t,e[0]));o.push(ue(t,r[0][0])),Ct(o)<0&&(o=o.reverse()),n.push({type:"Polygon",coordinates:[o]})}return n}(n.vertices,i);return function(t,e){const n=ht(t,Ot),i=ut(n),r=lt(n,i),o=lt(t,i);for(;o.length<e;){r.shift();const t=o.shift(),e=be(t),n=ht(e,Ot);for(let t=0;t<e.length;t++){const i=n[t],s=e[t],a=ft(r,i);r.splice(a,0,i),o.splice(a,0,s)}}return o}(t,e)}}function $e(t,e){if(e<1)throw Ce;const n=ht(t,Ot),i=function(t,e){const n=[];let i=function(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}(t);for(let r=0;r<t.length;r++){const o=t[r],s=Math.round(o/i*e);n.push(s),i-=o,e-=s}return n}(n,e);let r=[];for(let e=0;e<t.length;e++){const n=t[e],o=i[e];if(0===o&&r.push(n),o>0){const t=o+1;r=r.concat(Oe(n,t))}}return r}const Ce=new Error("Number of desired additional polygons must be larger than 0");function Pe(t){const e=[];for(const n of t.coordinates){const t={type:"Polygon",coordinates:void 0};t.coordinates=n,e.push(t)}return e}function Ae(t,e,n,i){const r=ht(n,t=>t.coordinates[0]),o=ht(i,t=>t.coordinates[0]),s=At(r,o);n=ht(s,t=>n[t]);const a=[];for(let t=0;t<n.length;t++){const e=n[t],r=i[t];a.push(St(e,r))}return function(n){return 0===n?t:1===n?e:(ht(a,t=>t(n)),function(t){const e={type:"MultiPolygon",coordinates:[]};for(const n of t)if("Polygon"===n.type&&e.coordinates.push(n.coordinates),"MultiPolygon"===n.type)for(const t of n.coordinates)e.coordinates.push(t);return e}(ht(a,t=>t(n))))}}function Ee(t,e){const n=Pe(t);let i=[e];const r=n.length,o=r-1;return o>0&&(i=Oe(e,r)),Ae(t,e,n,i)}function je(t,e){return function(t,e){if(!wt(t)||!wt(e))throw new Error("Invalid input")}(t,e),"Polygon"===t.type&&"Polygon"===e.type?St(t,e):"MultiPolygon"===t.type&&"Polygon"===e.type?Ee(t,e):"Polygon"===t.type&&"MultiPolygon"===e.type?function(t,e){const n=Ee(e,t);return function(t){return n(1-t)}}(t,e):"MultiPolygon"===t.type&&"MultiPolygon"===e.type?function(t,e){let n=Pe(t),i=Pe(e);const r=n.length-i.length;return r>0&&(i=$e(i,r)),r<0&&(n=$e(n,-r)),Ae(t,e,n,i)}(t,e):void 0}function Se(t){Ie(t);const e=Et(t),n=Te(e);return je(t,n)}function Ne(t){Ie(t);const e=Et(t),n=Te(e);return je(n,t)}function Ie(t){if(!wt(t))throw new Error("Invalid input")}function Te(t){const e=Wt(t);return{type:"Polygon",coordinates:[e]}}t.cutPolygon=Oe,t.cutPolygons=$e,t.explode=Ne,t.implode=Se,t.insertPointsLinearRing=yt,t.matchLinearRings=At,t.rotatePointsLinearRing=vt,t.transshape=je,t.transshapeLayer=function(t,e){!function(t,e){ct(Object.values(t),wt)&&ct(Object.values(t),wt)}(t);const n=function(t,e){const n={};for(const e in t)n[e]="from";for(const t in e)n[t]?n[t]="both":n[t]="to";return n}(t,e),i=function(t,e,n){const i={};for(const r in n){const o=n[r];"both"===o&&(i[r]=je(t[r],e[r])),"from"===o&&(i[r]=Se(t[r])),"to"===o&&(i[r]=Ne(e[r]))}return i}(t,e,n);return function(t,e,n){return function(i){if(0===i)return t;if(1===i)return e;const r={};for(const t in n)r[t]=n[t](i);return r}}(t,e,i)},Object.defineProperty(t,"__esModule",{value:!0})}(e)}));function Di(t,e){if(Ui(t,e))return Wi(t,e);if(Xi(t,e))return Fi.transshape(t,e);throw new Error("Invalid input")}function Yi(t,e){const n=Hi(t),i=Hi(e);return Ui(n,i)?Wi(t,e):Xi(n,i)?Fi.transshapeLayer(t,e):void 0}function Ui(t,e){return"Point"===t.type&&"Point"===e.type}const Bi=["Polygon","MultiPolygon"];function Xi(t,e){return Bi.includes(t.type)&&Bi.includes(e.type)}function Hi(t){return t[Object.keys(t)[0]]}function Qi(t,e){return cn([t.x,t.y],e.pixelGeometry.coordinates)<e.radius}var Zi={Point:Qi,Rectangle:function(t,e){return _n([t.x,t.y],e.screenGeometry)},Polygon:function(t,e){return _n([t.x,t.y],e.screenGeometry)},Label:Qi};class Ji{constructor(t){this._rbush=new $t,this._interactionHandler=t}indexLayer(t){const e=this._interactionHandler._layers[t];this._rbush.load(e)}unindexLayer(t){const e=this._interactionHandler._layers[t];for(let t=0;t<e.length;t++){const n=e[t];this._rbush.remove(n)}}indexMark(t){const e=this._interactionHandler._marks[t];this._rbush.insert(e)}unindexMark(t){const e=this._interactionHandler._marks[t];this._rbush.remove(e)}queryMouseCoordinates(t,e){const n=function(t,e=3){return{minX:t.x-e,maxX:t.x+e,minY:t.y-e,maxY:t.y+e}}(t,e),i=this._rbush.search(n);return this._getHits(t,i)}_getHits(t,e){const n=[];for(let i=0;i<e.length;i++){const r=e[i];(0,Zi[r.markType])(t,r.attributes)&&n.push(r)}return n}}class Vi{constructor(t){this._spatialIndex=new Ji(t),this._interactionManager=t,this._numberOfInteractions=0,this._layerCallbacks={},this._markCallbacks={}}addLayerInteraction(t,e){t in this._layerCallbacks||(this._addEventListenerIfNecessary(),this._numberOfInteractions++,this._layerCallbacks[t]=e,this._spatialIndex.indexLayer(t))}removeLayerInteraction(t){t in this._layerCallbacks&&(this._numberOfInteractions--,delete this._layerCallbacks[t],this._removeEventListenerIfNecessary(),this._spatialIndex.unindexLayer(t))}addMarkInteraction(t,e){this._addEventListenerIfNecessary(),this._numberOfInteractions++,this._markCallbacks[t]=e,this._spatialIndex.indexMark(t)}removeMarkInteraction(t){this._removeEventListenerIfNecessary(),delete this._markCallbacks[t],this._numberOfInteractions--,this._spatialIndex.unindexMark(t)}_isInSection(t,e){return t.x<=e.x2&&t.x>=e.x1&&t.y<=e.y2&&t.y>=e.y1}_isInLayer(t){return"layerId"in t}_isMark(t){return"markId"in t}}class Ki extends Vi{_addEventListenerIfNecessary(){if(0===this._numberOfInteractions){const t=this._handleEvent.bind(this),e=this._interactionManager,n=e._eventManager,i=e._id+"-click";n.addEventListener("click",i,t)}}_removeEventListenerIfNecessary(){if(0===this._numberOfInteractions){const t=this._interactionManager,e=t._eventManager,n=t._id+"-click";e.removeEventListener("click",n)}}_handleEvent(t,e){const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const i=n[t];this._isInLayer(i)&&this._layerCallbacks[i.layerId](i.$index,e),this._isMark(i)&&this._markCallbacks[i.markId](e)}}}class tr extends Vi{constructor(t){super(t),this._previousMouseoverIds={},this._currentMouseoverIds={}}_addEventListenerIfNecessary(){if(0===this._numberOfInteractions){const t=this._handleEvent.bind(this),e=this._interactionManager,n=e._eventManager,i=e._id+"-mouseover";n.addEventListener("mousemove",i,t)}}_removeEventListenerIfNecessary(){if(0===this._numberOfInteractions){const t=this._interactionManager,e=t._eventManager,n=t._id+"-mouseover";e.removeEventListener("mousemove",n)}}_handleEvent(t,e){this._currentMouseoverIds={};const n=this._spatialIndex.queryMouseCoordinates(t);this._handleHits(n,e),this._cleanupPreviousHits()}_handleHits(t,e){for(let n=0;n<t.length;n++){const i=t[n],r=this._getHitId(i);this._mouseAlreadyOver(r)||(this._previousMouseoverIds[r]=!0,this._isInLayer(i)&&this._layerCallbacks[i.layerId](i.$index,e),this._isMark(i)&&this._markCallbacks[i.markId](e)),this._currentMouseoverIds[r]=!0}}_cleanupPreviousHits(){for(const t in this._previousMouseoverIds)t in this._currentMouseoverIds||delete this._previousMouseoverIds[t]}_getHitId(t){let e;return this._isInLayer(t)&&(e=t.layerId+"-"+t.$index),this._isMark(t)&&(e=t.markId),e}_mouseAlreadyOver(t){return t in this._previousMouseoverIds}}class er extends Vi{constructor(t){super(t),this._previousHits={},this._currentMouseoverIds={}}_addEventListenerIfNecessary(){if(0===this._numberOfInteractions){const t=this._handleEvent.bind(this),e=this._interactionManager,n=e._eventManager,i=e._id+"-mouseout";n.addEventListener("mousemove",i,t)}}_removeEventListenerIfNecessary(){if(0===this._numberOfInteractions){const t=this._interactionManager,e=t._eventManager,n=t._id+"-mouseout";e.removeEventListener("mousemove",n)}}_handleEvent(t,e){this._currentMouseoverIds={};const n=this._spatialIndex.queryMouseCoordinates(t);this._storeHits(n),this._fireForMouseOutHits(e)}_storeHits(t){for(let e=0;e<t.length;e++){const n=t[e],i=this._getHitId(n);this._mouseAlreadyOver(i)||(this._previousHits[i]=n),this._currentMouseoverIds[i]=!0}}_fireForMouseOutHits(t){for(const e in this._previousHits)if(!(e in this._currentMouseoverIds)){const n=this._previousHits[e];this._isInLayer(n)&&this._layerCallbacks[n.layerId](n.$index,t),this._isMark(n)&&this._markCallbacks[n.markId](t),delete this._previousHits[e]}}_getHitId(t){let e;return this._isInLayer(t)&&(e=t.layerId+"-"+t.$index),this._isMark(t)&&(e=t.markId),e}_mouseAlreadyOver(t){return t in this._previousHits}}function nr(t){const e=t.attributes,n=rr(e);return n.attributes=e,n.markType="Point",n.markId=t.markId,n}function ir({layerAttributes:t,indexArray:e,layerId:n}){const i=[];for(let r=0;r<e.length;r++){const o=e[r],s=or(t,o),a=rr(s);a.$index=o,a.attributes=s,a.markType="Point",a.layerId=n,i.push(a)}return i}function rr(t){const e=t.pixelGeometry.coordinates[0],n=t.pixelGeometry.coordinates[1];return{minX:e-t.radius,maxX:e+t.radius,minY:n-t.radius,maxY:n+t.radius}}function or(t,e){return{pixelGeometry:t.pixelGeometryObject[e],radius:t.radiusObject[e]}}function sr(t){return{minX:t.x[0],maxX:t.x[1],minY:t.y[0],maxY:t.y[1]}}function ar(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function hr(t,e){return{screenGeometry:t.screenGeometryObject[e]}}const cr={Point:nr,Rectangle:function(t){const e=t.attributes,n=sr(sn(e.screenGeometry));return n.attributes=e,n.markType="Rectangle",n.markId=t.markId,n},Polygon:function(t){const e=t.attributes,n=sr(sn(e.screenGeometry));return n.attributes=e,n.markType="Polygon",n.markId=t.markId,n},Label:nr},ur={Point:ir,Rectangle:function({layerAttributes:t,indexArray:e,layerId:n}){const i=[];for(let r=0;r<e.length;r++){const o=e[r],s=ar(t,o),a=sr(sn(s.screenGeometry));a.$index=o,a.attributes=s,a.markType="Rectangle",a.layerId=n,i.push(a)}return i},Polygon:function({layerAttributes:t,indexArray:e,layerId:n}){const i=[];for(let r=0;r<e.length;r++){const o=e[r],s=hr(t,o),a=sr(sn(s.screenGeometry));a.$index=o,a.attributes=s,a.markType="Polygon",a.layerId=n,i.push(a)}return i},Label:ir};class lr{constructor(){this._sections={},this._layers={},this._marks={},this._id=void 0,this._eventManager=void 0,this._clickHandler=new Ki(this),this._mouseoverHandler=new tr(this),this._mouseoutHandler=new er(this)}setId(t){this._id=t}linkEventManager(t){this._eventManager=t}loadLayer(t,e){const n=(0,ur[t])(e),i=e.layerId;this._layers[i]=n}layerIsLoaded(t){return t in this._layers}removeLayer(t){delete this._layers[t]}loadMark(t,e){const n=(0,cr[t])(e),i=e.markId;this._marks[i]=n}markIsLoaded(t){return t in this._marks}removeMark(t){delete this._marks[t]}addLayerInteraction(t,e,n){"click"===t&&this._clickHandler.addLayerInteraction(e,n),"mouseover"===t&&this._mouseoverHandler.addLayerInteraction(e,n),"mouseout"===t&&this._mouseoutHandler.addLayerInteraction(e,n)}removeAllLayerInteractions(t){this._clickHandler.removeLayerInteraction(t),this._mouseoverHandler.removeLayerInteraction(t),this._mouseoutHandler.removeLayerInteraction(t)}addMarkInteraction(t,e,n){"click"===t&&this._clickHandler.addMarkInteraction(e,n),"mouseover"===t&&this._mouseoverHandler.addMarkInteraction(e,n),"mouseout"===t&&this._mouseoutHandler.addMarkInteraction(e,n)}removeAllMarkInteractions(t){this._clickHandler.removeMarkInteraction(t),this._mouseoverHandler.removeMarkInteraction(t),this._mouseoutHandler.removeMarkInteraction(t)}}function fr(t){var e,n;const i=t.$$slots.default,r=c(i,t,null);return{c(){e=_("svg"),r&&r.c(),O(e,"width",t.width),O(e,"height",t.height)},l(t){r&&r.l(svg_nodes)},m(i,o){x(i,e,o),r&&r.m(e,null),t.svg_binding(e),n=!0},p(t,o){r&&r.p&&t.$$scope&&r.p(l(i,o,t,null),u(i,o,null)),n&&!t.width||O(e,"width",o.width),n&&!t.height||O(e,"height",o.height)},i(t){n||(B(r,t),n=!0)},o(t){X(r,t),n=!1},d(n){n&&v(e),r&&r.d(n),t.svg_binding(null)}}}function dr(t,e,n){let{width:i,height:r,scaleX:o,scaleY:s,flipX:a=!1,flipY:h=!1,renderer:c}=e;const u=function(){const t=et();return N(it,t),t}(),l=ht(),f=function(){const t=et();return N(ut,t),t}(),d=dt();let p;mt();let y=new xt;!function(t,e){t.set(e)}(f,y);let g=new lr;g.setId("graphic"),g.linkEventManager(y),pt(d,g),E(()=>{console.log(p),y.addRootNode(p),y.attachEventListeners()});let{$$slots:m={},$$scope:M}=e;return t.$set=t=>{"width"in t&&n("width",i=t.width),"height"in t&&n("height",r=t.height),"scaleX"in t&&n("scaleX",o=t.scaleX),"scaleY"in t&&n("scaleY",s=t.scaleY),"flipX"in t&&n("flipX",a=t.flipX),"flipY"in t&&n("flipY",h=t.flipY),"renderer"in t&&n("renderer",c=t.renderer),"$$scope"in t&&n("$$scope",M=t.$$scope)},t.$$.update=(t={renderer:1,width:1,height:1,flipX:1,flipY:1,scaleX:1,scaleY:1,rootNode:1,eventManager:1})=>{if(t.renderer&&function(t,e){t.set(new nt(e))}(u,{renderer:c}),t.width||t.height||t.flipX||t.flipY||t.scaleX||t.scaleY){let t=[0,i],e=[0,r];a&&t.reverse(),h&&e.reverse(),ct(l,{rangeX:t,rangeY:e,scaleX:o,scaleY:s})}(t.rootNode||t.eventManager)&&p&&!y._mounted&&(console.log(p),y.addRootNode(p),y.attachEventListeners())},{width:i,height:r,scaleX:o,scaleY:s,flipX:a,flipY:h,renderer:c,rootNode:p,svg_binding:function(t){W[t?"unshift":"push"](()=>{n("rootNode",p=t)})},$$slots:m,$$scope:M}}class pr extends tt{constructor(t){super(),K(this,t,dr,fr,a,["width","height","scaleX","scaleY","flipX","flipY","renderer"])}}function yr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var gr=function(t){return 1===t.length&&(t=function(t){return function(e,n){return yr(t(e),n)}}(t)),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}}}(yr).right,mr=Math.sqrt(50),Mr=Math.sqrt(10),xr=Math.sqrt(2);function vr(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=mr?10:o>=Mr?5:o>=xr?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=mr?10:o>=Mr?5:o>=xr?2:1)}function _r(t){return+t}var br=[0,1];function kr(t){return t}function wr(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Or(t){var e,n=t[0],i=t[t.length-1];return n>i&&(e=n,n=i,i=e),function(t){return Math.max(n,Math.min(i,t))}}function $r(t,e,n){var i=t[0],r=t[1],o=e[0],s=e[1];return r<i?(i=wr(r,i),o=n(s,o)):(i=wr(i,r),o=n(o,s)),function(t){return o(i(t))}}function Cr(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=wr(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var n=gr(t,e,1,i)-1;return o[n](r[n](e))}}function Pr(t,e){return function(){var t,e,n,i,r,o,s=br,a=br,h=Wi,c=kr;function u(){return i=Math.min(s.length,a.length)>2?Cr:$r,r=o=null,l}function l(e){return isNaN(e=+e)?n:(r||(r=i(s.map(t),a,h)))(t(c(e)))}return l.invert=function(n){return c(e((o||(o=i(a,s.map(t),Ni)))(n)))},l.domain=function(t){return arguments.length?(s=Array.from(t,_r),c===kr||(c=Or(s)),u()):s.slice()},l.range=function(t){return arguments.length?(a=Array.from(t),u()):a.slice()},l.rangeRound=function(t){return a=Array.from(t),h=Ri,u()},l.clamp=function(t){return arguments.length?(c=t?Or(s):kr,l):c!==kr},l.interpolate=function(t){return arguments.length?(h=t,u()):h},l.unknown=function(t){return arguments.length?(n=t,l):n},function(n,i){return t=n,e=i,u()}}()(t,e)}function Ar(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Er(t){return(t=Ar(Math.abs(t)))?t[1]:NaN}var jr,Sr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nr(t){return new Ir(t)}function Ir(t){if(!(e=Sr.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}function Tr(t,e){var n=Ar(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Nr.prototype=Ir.prototype,Ir.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Wr={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Tr(100*t,e)},r:Tr,s:function(t,e){var n=Ar(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(jr=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Ar(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Rr(t){return t}var qr,Gr,zr,Lr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Fr(t){var e,n,i=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,i){for(var r=t.length,o=[],s=0,a=e[0],h=0;r>0&&a>0&&(h+a+1>i&&(a=Math.max(1,i-h)),o.push(t.substring(r-=a,r+a)),!((h+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(n)}):Rr,r=t.currency,o=t.decimal,s=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):Rr,a=t.percent||"%";function h(t){var e=(t=Nr(t)).fill,n=t.align,h=t.sign,c=t.symbol,u=t.zero,l=t.width,f=t.comma,d=t.precision,p=t.trim,y=t.type;"n"===y?(f=!0,y="g"):Wr[y]||(null==d&&(d=12),p=!0,y="g"),(u||"0"===e&&"="===n)&&(u=!0,e="0",n="=");var g="$"===c?r[0]:"#"===c&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",m="$"===c?r[1]:/[%p]/.test(y)?a:"",M=Wr[y],x=/[defgprs%]/.test(y);function v(t){var r,a,c,v=g,_=m;if("c"===y)_=M(t)+_,t="";else{var b=(t=+t)<0;if(t=M(Math.abs(t),d),p&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(r>0){if(!+t[i])break t;r=0}}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),b&&0==+t&&(b=!1),v=(b?"("===h?h:"-":"-"===h||"("===h?"":h)+v,_=("s"===y?Lr[8+jr/3]:"")+_+(b&&"("===h?")":""),x)for(r=-1,a=t.length;++r<a;)if(48>(c=t.charCodeAt(r))||c>57){_=(46===c?o+t.slice(r+1):t.slice(r))+_,t=t.slice(0,r);break}}f&&!u&&(t=i(t,1/0));var k=v.length+t.length+_.length,w=k<l?new Array(l-k+1).join(e):"";switch(f&&u&&(t=i(w+t,w.length?l-_.length:1/0),w=""),n){case"<":t=v+t+_+w;break;case"=":t=v+w+t+_;break;case"^":t=w.slice(0,k=w.length>>1)+v+t+_+w.slice(k);break;default:t=w+v+t+_}return s(t)}return d=null==d?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),v.toString=function(){return t+""},v}return{format:h,formatPrefix:function(t,e){var n=h(((t=Nr(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Er(e)/3))),r=Math.pow(10,-i),o=Lr[8+i/3];return function(t){return n(r*t)+o}}}}function Dr(t,e,n,i){var r,o=function(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=mr?r*=10:o>=Mr?r*=5:o>=xr&&(r*=2),e<t?-r:r}(t,e,n);switch((i=Nr(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Er(e)/3)))-Er(Math.abs(t)))}(o,s))||(i.precision=r),zr(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Er(e)-Er(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-Er(Math.abs(t)))}(o))||(i.precision=r-2*("%"===i.type))}return Gr(i)}function Yr(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var i,r,o,s,a=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(s=vr(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(r=Math.ceil(e-t+1));++a<r;)o[a]=(t+a)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),o=new Array(r=Math.ceil(t-e+1));++a<r;)o[a]=(t-a)/s;return i&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return Dr(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r=e(),o=0,s=r.length-1,a=r[o],h=r[s];return h<a&&(i=a,a=h,h=i,i=o,o=s,s=i),(i=vr(a,h,n))>0?i=vr(a=Math.floor(a/i)*i,h=Math.ceil(h/i)*i,n):i<0&&(i=vr(a=Math.ceil(a*i)/i,h=Math.floor(h*i)/i,n)),i>0?(r[o]=Math.floor(a/i)*i,r[s]=Math.ceil(h/i)*i,e(r)):i<0&&(r[o]=Math.ceil(a*i)/i,r[s]=Math.floor(h*i)/i,e(r)),t},t}function Ur(){var t=Pr(kr,kr);return t.copy=function(){return function(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}(t,Ur())},function(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}.apply(t,arguments),Yr(t)}qr=Fr({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Gr=qr.format,zr=qr.formatPrefix;var Br=new Date,Xr=new Date;function Hr(t,e,n,i){function r(e){return t(e=new Date(+e)),e}return r.floor=r,r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,o){var s,a=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<i&&o>0))return a;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<i);return a},r.filter=function(n){return Hr(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););})},n&&(r.count=function(e,i){return Br.setTime(+e),Xr.setTime(+i),t(Br),t(Xr),Math.floor(n(Br,Xr))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var Qr=Hr(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Qr.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Hr(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Qr:null};var Zr=6e4,Jr=6048e5,Vr=(Hr(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Hr(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+e*Zr)},function(t,e){return(e-t)/Zr},function(t){return t.getMinutes()}),Hr(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*Zr)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),Hr(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Zr)/864e5},function(t){return t.getDate()-1}));function Kr(t){return Hr(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Zr)/Jr})}var to=Kr(0),eo=Kr(1),no=(Kr(2),Kr(3),Kr(4)),io=(Kr(5),Kr(6),Hr(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Hr(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));io.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Hr(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};Hr(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Zr)},function(t,e){return(e-t)/Zr},function(t){return t.getUTCMinutes()}),Hr(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()});var ro=Hr(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1});function oo(t){return Hr(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Jr})}var so=oo(0),ao=oo(1),ho=(oo(2),oo(3),oo(4)),co=(oo(5),oo(6),Hr(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Hr(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));function uo(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function lo(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function fo(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}co.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Hr(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var po,yo,go,mo={"-":"",_:" ",0:"0"},Mo=/^\s*\d+/,xo=/^%/,vo=/[\\^$*+?|[\]().{}]/g;function _o(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function bo(t){return t.replace(vo,"\\$&")}function ko(t){return new RegExp("^(?:"+t.map(bo).join("|")+")","i")}function wo(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function Oo(t,e,n){var i=Mo.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function $o(t,e,n){var i=Mo.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Co(t,e,n){var i=Mo.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Po(t,e,n){var i=Mo.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Ao(t,e,n){var i=Mo.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Eo(t,e,n){var i=Mo.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function jo(t,e,n){var i=Mo.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function So(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function No(t,e,n){var i=Mo.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Io(t,e,n){var i=Mo.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function To(t,e,n){var i=Mo.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Wo(t,e,n){var i=Mo.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Ro(t,e,n){var i=Mo.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function qo(t,e,n){var i=Mo.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Go(t,e,n){var i=Mo.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function zo(t,e,n){var i=Mo.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Lo(t,e,n){var i=xo.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Fo(t,e,n){var i=Mo.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function Do(t,e,n){var i=Mo.exec(e.slice(n));return i?(t.Q=1e3*+i[0],n+i[0].length):-1}function Yo(t,e){return _o(t.getDate(),e,2)}function Uo(t,e){return _o(t.getHours(),e,2)}function Bo(t,e){return _o(t.getHours()%12||12,e,2)}function Xo(t,e){return _o(1+Vr.count(io(t),t),e,3)}function Ho(t,e){return _o(t.getMilliseconds(),e,3)}function Qo(t,e){return Ho(t,e)+"000"}function Zo(t,e){return _o(t.getMonth()+1,e,2)}function Jo(t,e){return _o(t.getMinutes(),e,2)}function Vo(t,e){return _o(t.getSeconds(),e,2)}function Ko(t){var e=t.getDay();return 0===e?7:e}function ts(t,e){return _o(to.count(io(t),t),e,2)}function es(t,e){var n=t.getDay();return t=n>=4||0===n?no(t):no.ceil(t),_o(no.count(io(t),t)+(4===io(t).getDay()),e,2)}function ns(t){return t.getDay()}function is(t,e){return _o(eo.count(io(t),t),e,2)}function rs(t,e){return _o(t.getFullYear()%100,e,2)}function os(t,e){return _o(t.getFullYear()%1e4,e,4)}function ss(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+_o(e/60|0,"0",2)+_o(e%60,"0",2)}function as(t,e){return _o(t.getUTCDate(),e,2)}function hs(t,e){return _o(t.getUTCHours(),e,2)}function cs(t,e){return _o(t.getUTCHours()%12||12,e,2)}function us(t,e){return _o(1+ro.count(co(t),t),e,3)}function ls(t,e){return _o(t.getUTCMilliseconds(),e,3)}function fs(t,e){return ls(t,e)+"000"}function ds(t,e){return _o(t.getUTCMonth()+1,e,2)}function ps(t,e){return _o(t.getUTCMinutes(),e,2)}function ys(t,e){return _o(t.getUTCSeconds(),e,2)}function gs(t){var e=t.getUTCDay();return 0===e?7:e}function ms(t,e){return _o(so.count(co(t),t),e,2)}function Ms(t,e){var n=t.getUTCDay();return t=n>=4||0===n?ho(t):ho.ceil(t),_o(ho.count(co(t),t)+(4===co(t).getUTCDay()),e,2)}function xs(t){return t.getUTCDay()}function vs(t,e){return _o(ao.count(co(t),t),e,2)}function _s(t,e){return _o(t.getUTCFullYear()%100,e,2)}function bs(t,e){return _o(t.getUTCFullYear()%1e4,e,4)}function ks(){return"+0000"}function ws(){return"%"}function Os(t){return+t}function $s(t){return Math.floor(+t/1e3)}!function(t){po=function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,s=t.shortDays,a=t.months,h=t.shortMonths,c=ko(r),u=wo(r),l=ko(o),f=wo(o),d=ko(s),p=wo(s),y=ko(a),g=wo(a),m=ko(h),M=wo(h),x={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return h[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Yo,e:Yo,f:Qo,H:Uo,I:Bo,j:Xo,L:Ho,m:Zo,M:Jo,p:function(t){return r[+(t.getHours()>=12)]},Q:Os,s:$s,S:Vo,u:Ko,U:ts,V:es,w:ns,W:is,x:null,X:null,y:rs,Y:os,Z:ss,"%":ws},v={a:function(t){return s[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return h[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:as,e:as,f:fs,H:hs,I:cs,j:us,L:ls,m:ds,M:ps,p:function(t){return r[+(t.getUTCHours()>=12)]},Q:Os,s:$s,S:ys,u:gs,U:ms,V:Ms,w:xs,W:vs,x:null,X:null,y:_s,Y:bs,Z:ks,"%":ws},_={a:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=p[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=l.exec(e.slice(n));return i?(t.w=f[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=M[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=y.exec(e.slice(n));return i?(t.m=g[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,n,i){return w(t,e,n,i)},d:Io,e:Io,f:zo,H:Wo,I:Wo,j:To,L:Go,m:No,M:Ro,p:function(t,e,n){var i=c.exec(e.slice(n));return i?(t.p=u[i[0].toLowerCase()],n+i[0].length):-1},Q:Fo,s:Do,S:qo,u:$o,U:Co,V:Po,w:Oo,W:Ao,x:function(t,e,i){return w(t,n,e,i)},X:function(t,e,n){return w(t,i,e,n)},y:jo,Y:Eo,Z:So,"%":Lo};function b(t,e){return function(n){var i,r,o,s=[],a=-1,h=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(s.push(t.slice(h,a)),null!=(r=mo[i=t.charAt(++a)])?i=t.charAt(++a):r="e"===i?" ":"0",(o=e[i])&&(i=o(n,r)),s.push(i),h=a+1);return s.push(t.slice(h,a)),s.join("")}}function k(t,e){return function(n){var i,r,o=fo(1900);if(w(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=lo(fo(o.y))).getUTCDay(),i=r>4||0===r?ao.ceil(i):ao(i),i=ro.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(r=(i=e(fo(o.y))).getDay(),i=r>4||0===r?eo.ceil(i):eo(i),i=Vr.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),r="Z"in o?lo(fo(o.y)).getUTCDay():e(fo(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(r+5)%7:o.w+7*o.U-(r+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,lo(o)):e(o)}}function w(t,e,n,i){for(var r,o,s=0,a=e.length,h=n.length;s<a;){if(i>=h)return-1;if(37===(r=e.charCodeAt(s++))){if(r=e.charAt(s++),!(o=_[r in mo?e.charAt(s++):r])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return x.x=b(n,x),x.X=b(i,x),x.c=b(e,x),v.x=b(n,v),v.X=b(i,v),v.c=b(e,v),{format:function(t){var e=b(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",uo);return e.toString=function(){return t},e},utcFormat:function(t){var e=b(t+="",v);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t,lo);return e.toString=function(){return t},e}}}(t),po.format,po.parse,yo=po.utcFormat,go=po.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||yo("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||go("%Y-%m-%dT%H:%M:%S.%LZ");function Cs(t,e){const n=Ur().domain(t).range([0,2*Math.PI]),i=Ur().domain(e).range([0,1]),r=Ur().domain([-1,1]).range(t),o=Ur().domain([-1,1]).range(e);return function([t,e]){const s=function(t,e){const n=e*Math.sin(t),i=e*Math.cos(t);return[n,i]}(n(t),i(e));return[r(s[0]),o(s[1])]}}class Ps{constructor({rangeX:t,rangeY:e,transformation:n}){if(n.constructor===Function&&(this._transformation=n(t,e),this._type="custom"),n.constructor===String)switch(this._type=n,n){case"identity":this._transformation=t=>t;break;case"polar":this._transformation=Cs(t,e);break;default:throw new Error(`Invalid transformation name: '${n}'`)}}transform(t){return this._transformation(t)}type(){return this._type}}const As={};function Es(){return I(As)?I(As):et()}function js(){if(I(As))throw new Error("CoordinateTransformation components cannot contain anything other than Marks or Layers")}function Ss(t,e,n,i=1){if(Ns(e)){const r=e.transform.bind(e);if(n)return Li(t,r,i);if(!n)return En(t,r)}if(!Ns(e))return t}function Ns(t){return t&&"identity"!==t.type()}function Is(t,e,n,i,r=1){const o={};for(let s=0;s<t.length;s++){const a=Ss(t[s],e,i,r);o[n[s]]=a}return o}function Ts(t,e){Rs(t),function(t){for(const e in t){const n=t[e];if(rn(n)){if(nn(n))throw Gs(n,e);if(![Number,String,Date,Function].includes(n.constructor))throw Gs(n,e)}}}(t);const{x1:n,x2:i,y1:r,y2:o}=t,s={};return zs(n,i)?(s.x1=Ls(n,"x1",e),s.x2=Ls(i,"x2",e)):(s.x1=e.x1(),s.x2=e.x2()),zs(r,o)?(s.y1=Ls(r,"y1",e),s.y2=Ls(o,"y2",e)):(s.y1=e.y1(),s.y2=e.y2()),s}const Ws=JSON.stringify;function Rs(t){if(qs(t.x1,t.x2))throw new Error(`Rectangle: invalid combination of 'x1' and 'x2': ${Ws(t.x1)}, ${Ws(t.x2)}. Either provide both or none.`);if(qs(t.y1,t.y2))throw new Error(`Rectangle: invalid combination of 'y1' and 'y2': ${Ws(t.y1)}, ${Ws(t.y2)}. Either provide both or none.`)}function qs(t,e){return on(t)?rn(e):on(e)}const Gs=(t,e)=>new Error(`Rectangle: invalid coordinate value for '${e}': ${Ws(t)}`);function zs(t,e){return rn(t)&&rn(e)}function Ls(t,e,n){const i=n.scales();if(t.constructor===Function)return t(i);{const n=(["x1","x2"].includes(e)?i.scaleX:i.scaleY)(t);return function(t,e,n){const i=["x1","x2"].includes(n)?"scaleX":"scaleY";if(nn(e))throw new Error(`Scale '${i}' received '${Ws(t)}' and returned '${Ws(e)}`)}(t,n,e),n}}function Fs(t){return{type:"Polygon",coordinates:[[[t.x1,t.y1],[t.x2,t.y1],[t.x2,t.y2],[t.x1,t.y2],[t.x1,t.y1]]]}}function Ds(t){var e;return{c(){O(e=_("rect"),"width","100%"),O(e,"height","100%"),O(e,"fill",t.backgroundColor)},m(t,n){x(t,e,n)},p(t,n){t.backgroundColor&&O(e,"fill",n.backgroundColor)},d(t){t&&v(e)}}}function Ys(t){var e,n,i,r,o,s,a,h,f,d,p,y=t.backgroundColor&&Ds(t);const g=t.$$slots.default,m=c(g,t,null);return{c(){e=_("defs"),n=_("clipPath"),i=_("rect"),h=k(),f=_("g"),y&&y.c(),d=w(),m&&m.c(),O(i,"x",r=Math.min(t.scaledCoordinates.x1,t.scaledCoordinates.x2)),O(i,"y",o=Math.min(t.scaledCoordinates.y1,t.scaledCoordinates.y2)),O(i,"width",s=Math.abs(t.scaledCoordinates.x2-t.scaledCoordinates.x1)),O(i,"height",a=Math.abs(t.scaledCoordinates.y2-t.scaledCoordinates.y1)),O(n,"id",`clip-${t.sectionId}`),O(f,"class","section"),O(f,"clip-path",`url(#clip-${t.sectionId})`)},l(t){m&&m.l(g_nodes)},m(t,r){x(t,e,r),M(e,n),M(n,i),x(t,h,r),x(t,f,r),y&&y.m(f,null),M(f,d),m&&m.m(f,null),p=!0},p(t,e){p&&!t.scaledCoordinates||r===(r=Math.min(e.scaledCoordinates.x1,e.scaledCoordinates.x2))||O(i,"x",r),p&&!t.scaledCoordinates||o===(o=Math.min(e.scaledCoordinates.y1,e.scaledCoordinates.y2))||O(i,"y",o),p&&!t.scaledCoordinates||s===(s=Math.abs(e.scaledCoordinates.x2-e.scaledCoordinates.x1))||O(i,"width",s),p&&!t.scaledCoordinates||a===(a=Math.abs(e.scaledCoordinates.y2-e.scaledCoordinates.y1))||O(i,"height",a),e.backgroundColor?y?y.p(t,e):((y=Ds(e)).c(),y.m(f,d)):y&&(y.d(1),y=null),m&&m.p&&t.$$scope&&m.p(l(g,e,t,null),u(g,e,null))},i(t){p||(B(m,t),p=!0)},o(t){X(m,t),p=!1},d(t){t&&(v(e),v(h),v(f)),y&&y.d(),m&&m.d(t)}}}let Us=0;function Bs(t,e,n){let i,r,o="sc"+Us++,{x1:s,x2:a,y1:c,y2:u,scaleX:l,scaleY:f,flipX:d=!1,flipY:p=!1,zoomIdentity:y,padding:g=3,backgroundColor:m}=e;rt();const M=at();h(t,M,t=>{n("$sectionContext",r=t)});const x=ht();js();const v=I(ut);h(t,v,t=>{n("$eventManagerContext",i=t)});const _=dt(),b=mt();let k,w=new lr;w.setId(o),w.linkEventManager(i),pt(_,w);let{$$slots:O={},$$scope:$}=e;return t.$set=t=>{"x1"in t&&n("x1",s=t.x1),"x2"in t&&n("x2",a=t.x2),"y1"in t&&n("y1",c=t.y1),"y2"in t&&n("y2",u=t.y2),"scaleX"in t&&n("scaleX",l=t.scaleX),"scaleY"in t&&n("scaleY",f=t.scaleY),"flipX"in t&&n("flipX",d=t.flipX),"flipY"in t&&n("flipY",p=t.flipY),"zoomIdentity"in t&&n("zoomIdentity",y=t.zoomIdentity),"padding"in t&&n("padding",g=t.padding),"backgroundColor"in t&&n("backgroundColor",m=t.backgroundColor),"$$scope"in t&&n("$$scope",$=t.$$scope)},t.$$.update=(t={x1:1,x2:1,y1:1,y2:1,$sectionContext:1,scaledCoordinates:1,padding:1,flipX:1,flipY:1,sectionId:1,scaleX:1,scaleY:1,zoomIdentity:1})=>{if(t.x1||t.x2||t.y1||t.y2||t.$sectionContext||t.scaledCoordinates||t.padding||t.flipX||t.flipY||t.sectionId||t.scaleX||t.scaleY){n("scaledCoordinates",k=Ts({x1:s,x2:a,y1:c,y2:u},r));let t=[k.x1+g,k.x2-g],e=[k.y1+g,k.y2-g];d&&t.reverse(),p&&e.reverse(),ct(x,{sectionId:o,rangeX:t,rangeY:e,scaleX:l,scaleY:f})}t.zoomIdentity&&function(t,e){if(e){const{x:n,y:i,k:r}=e,o=t=>[t[0]*r+n,t[1]*r+i];t.set(o)}e||t.set(void 0)}(b,y)},{sectionId:o,x1:s,x2:a,y1:c,y2:u,scaleX:l,scaleY:f,flipX:d,flipY:p,zoomIdentity:y,padding:g,backgroundColor:m,sectionContext:M,eventManagerContext:v,scaledCoordinates:k,$$slots:O,$$scope:$}}class Xs extends tt{constructor(t){super(),K(this,t,Bs,Ys,a,["x1","x2","y1","y2","scaleX","scaleY","flipX","flipY","zoomIdentity","padding","backgroundColor"])}}function Hs(t){var e;const n=t.$$slots.default,i=c(n,t,null);return{c(){i&&i.c()},l(t){i&&i.l(t)},m(t,n){i&&i.m(t,n),e=!0},p(t,e){i&&i.p&&t.$$scope&&i.p(l(n,e,t,null),u(n,e,null))},i(t){e||(B(i,t),e=!0)},o(t){X(i,t),e=!1},d(t){i&&i.d(t)}}}function Qs(t,e,n){let i,{transformation:r}=e;js();const o=at();h(t,o,t=>{n("$sectionContext",i=t)});const s=function(){const t=et();return N(As,t),t}();let{$$slots:a={},$$scope:c}=e;return t.$set=t=>{"transformation"in t&&n("transformation",r=t.transformation),"$$scope"in t&&n("$$scope",c=t.$$scope)},t.$$.update=(t={$sectionContext:1,transformation:1})=>{if(t.$sectionContext||t.transformation){let t=i.rangeX(),e=i.rangeY();!function(t,e){t.set(new Ps(e))}(s,{rangeX:t,rangeY:e,transformation:r})}},{transformation:r,sectionContext:o,$$slots:a,$$scope:c}}class Zs extends tt{constructor(t){super(),K(this,t,Qs,Hs,a,["transformation"])}}var Js="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Vs(){throw new Error("setTimeout has not been defined")}function Ks(){throw new Error("clearTimeout has not been defined")}var ta=Vs,ea=Ks;function na(t){if(ta===setTimeout)return setTimeout(t,0);if((ta===Vs||!ta)&&setTimeout)return ta=setTimeout,setTimeout(t,0);try{return ta(t,0)}catch(e){try{return ta.call(null,t,0)}catch(e){return ta.call(this,t,0)}}}"function"==typeof Js.setTimeout&&(ta=setTimeout),"function"==typeof Js.clearTimeout&&(ea=clearTimeout);var ia,ra=[],oa=!1,sa=-1;function aa(){oa&&ia&&(oa=!1,ia.length?ra=ia.concat(ra):sa=-1,ra.length&&ha())}function ha(){if(!oa){var t=na(aa);oa=!0;for(var e=ra.length;e;){for(ia=ra,ra=[];++sa<e;)ia&&ia[sa].run();sa=-1,e=ra.length}ia=null,oa=!1,function(t){if(ea===clearTimeout)return clearTimeout(t);if((ea===Ks||!ea)&&clearTimeout)return ea=clearTimeout,clearTimeout(t);try{ea(t)}catch(e){try{return ea.call(null,t)}catch(e){return ea.call(this,t)}}}(t)}}function ca(t,e){this.fun=t,this.array=e}ca.prototype.run=function(){this.fun.apply(null,this.array)};function ua(){}var la=ua,fa=ua,da=ua,pa=ua,ya=ua,ga=ua,ma=ua;var Ma=Js.performance||{},xa=Ma.now||Ma.mozNow||Ma.msNow||Ma.oNow||Ma.webkitNow||function(){return(new Date).getTime()};var va=new Date;var _a={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];ra.push(new ca(t,e)),1!==ra.length||oa||na(ha)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:la,addListener:fa,once:da,off:pa,removeListener:ya,removeAllListeners:ga,emit:ma,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*xa.call(Ma),n=Math.floor(e),i=Math.floor(e%1*1e9);return t&&(n-=t[0],(i-=t[1])<0&&(n--,i+=1e9)),[n,i]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-va)/1e3}};function ba(t){_a||console.warn(t),_a&&"test"!==_a.env.NODE_ENV&&console.warn(t)}function ka(t,e,n,i,r){let o;const s=function(t,e,n){let i=n.y1;const r=[];if((t=Pa(t,"gridTemplateColumns")).constructor===String){const e=t.split(/\s/),i=Oa(e,n.y2-n.y1);for(const t of e)t.endsWith("px")?r.push(parseInt(t.slice(0,-2))):t.endsWith("fr")&&r.push(i*parseInt(t.slice(0,-2)))}else if(t.constructor===Array){const e=(n.y2-n.y1)/t.length;for(let n=0;n<t.length;n++)r.push(e)}else if(t.constructor===Number){const e=(n.y2-n.y1)/t;for(let n=0;n<t;n++)r.push(e)}const o=r.length,s=[];for(let t=0;t<o;t++)s.push({y1:i,y2:i+r[t]-e/2,x1:n.x1,x2:n.x2}),i=i+r[t]+e/2;return s}(t,n,r),a=s.length;let h=[];const c=[];let u=[];for(const t of s){const n=wa(e,i,t);u=u.concat(n),c.push(t),h=n,o=n.length}return[u,c,h,a,o]}function wa(t,e,n){let i=n.x1;const r=[];if((t=Pa(t,"gridTemplateColumns")).constructor===String){const e=t.split(/\s/),i=Oa(e,n.x2-n.x1);for(const t of e){const e=parseInt(t.slice(0,-2));t.endsWith("px")?r.push(e):t.endsWith("fr")&&r.push(i*e)}}else if(t.constructor===Array){const e=(n.x2-n.x1)/t.length;for(let n=0;n<t.length;n++)r.push(e)}else if(t.constructor===Number){const e=(n.x2-n.x1)/t;for(let n=0;n<t;n++)r.push(e)}const o=r.length,s=[];for(let t=0;t<o;t++)s.push({x1:i,x2:i+r[t]-e/2,y1:n.y1,y2:n.y2}),i=i+r[t]+e/2;return s}function Oa(t,e){let n=0;for(const i of t){const t=parseInt(i.slice(0,-2));i.endsWith("px")?e-=t:i.endsWith("fr")?n+=t:ba(`Grid cell size should be specified in -px or -fr. Ignoring input ${i}`)}return 0===n?0:e/n}function $a(t,e,n){const i=t.length,r=e.length;if(i<r){ba("Cell names do not match up with number of cells specified, this may cause errors in your chart.");for(let e=0;e<r;e++)i[e]||t.push(e)}else i>r&&ba("Cell names do not match up with number of cells specified, this may cause errors in your chart.");const o={},s={};for(let i=0;i<r;i++){const r=t[i];if(void 0===r)o[i]=e[i];else if(r in o){o[r]=Ca(r,o[r],e[i]);const t=Math.floor(i/n),a=i%n,h=s[r].endRow,c=s[r].endCol;s[r].endRow=t>h?t:h,s[r].endCol=a>c?a:c}else o[r]=e[i],s[r]={startRow:Math.floor(i/n),startCol:i%n,endRow:Math.floor(i/n),endCol:i%n}}return function(t,e,n){for(const i in t){const r=t[i],o=r.startRow,s=r.startCol,a=r.endRow,h=r.endCol;for(let t=o;t<=a;t++)for(let r=s;r<=h;r++){const o=t*n+r;e[o]!==i&&ba(`Area ${i} may not be rectangular in prop gridTemplateAreas, this can cause errors in your chart.`)}}}(s,t,n),o}function Ca(t,e,n){const i={};return i.x1=e.x1<n.x1?e.x1:n.x1,i.x2=e.x2>n.x2?e.x2:n.x2,i.y1=e.y1<n.y1?e.y1:n.y1,i.y2=e.y2>n.y2?e.y2:n.y2,i}function Pa(t,e){return t.constructor===String&&""===t?(ba(`Please specify at least one cell in ${e}. Automatically adding 1 cell to ${e}.`),"1fr"):t.constructor===Number&&0===t?(ba(`Please specify at least one cell in ${e}. Automatically adding 1 cell to ${e}.`),1):t.constructor===Number&&t%1!=0?(ba(`Please specify ${e} with integers only. Using rounded value ${Math.ceil(t)}.`),Math.ceil(t)):t.constructor===Array&&0===t.length?(ba(`Please specify at least one cell in ${e}. Automatically adding 1 cell to ${e}.`),[0]):-1===[Array,Number,String].indexOf(t.constructor)?(ba(`Please specify ${e} with Number, String or Array. Assuming 1 cell specified.`),1):t}const Aa=({allSpecs:t})=>({cells:t}),Ea=({allSpecs:t})=>({cells:t});function ja(t){var e,n;const i=t.$$slots.default,r=c(i,t,Ea);return{c(){e=_("g"),r&&r.c()},l(t){r&&r.l(g_nodes)},m(t,i){x(t,e,i),r&&r.m(e,null),n=!0},p(t,e){r&&r.p&&(t.$$scope||t.allSpecs)&&r.p(l(i,e,t,Aa),u(i,e,Ea))},i(t){n||(B(r,t),n=!0)},o(t){X(r,t),n=!1},d(t){t&&v(e),r&&r.d(t)}}}function Sa(t,e,n){let i,{x1:r,x2:o,y1:s,y2:a,rows:c=1,columns:u=1,rowGap:l=0,columnGap:f=0,areaNames:d,viewGridTemplate:p=!1,viewGridShape:y=!1}=e;js();const g=at();let m,M;h(t,g,t=>{n("$sectionContext",i=t)});let x,v,_,b,k,{$$slots:w={},$$scope:O}=e;return t.$set=t=>{"x1"in t&&n("x1",r=t.x1),"x2"in t&&n("x2",o=t.x2),"y1"in t&&n("y1",s=t.y1),"y2"in t&&n("y2",a=t.y2),"rows"in t&&n("rows",c=t.rows),"columns"in t&&n("columns",u=t.columns),"rowGap"in t&&n("rowGap",l=t.rowGap),"columnGap"in t&&n("columnGap",f=t.columnGap),"areaNames"in t&&n("areaNames",d=t.areaNames),"viewGridTemplate"in t&&n("viewGridTemplate",p=t.viewGridTemplate),"viewGridShape"in t&&n("viewGridShape",y=t.viewGridShape),"$$scope"in t&&n("$$scope",O=t.$$scope)},t.$$.update=(t={x1:1,x2:1,y1:1,y2:1,$sectionContext:1,rows:1,columns:1,rowGap:1,columnGap:1,scaledCoordinates:1,viewGridTemplate:1,rowSizes:1,colSizes:1,viewGridShape:1,numRows:1,numCols:1,areaNames:1,allCells:1})=>{(t.x1||t.x2||t.y1||t.y2||t.$sectionContext)&&n("scaledCoordinates",m=Ts({x1:r,x2:o,y1:s,y2:a},i)),(t.rows||t.columns||t.rowGap||t.columnGap||t.scaledCoordinates)&&([M,x,v,_,b]=ka(c,u,l,f,m),n("allCells",M),n("rows",c),n("columns",u),n("rowGap",l),n("columnGap",f),n("scaledCoordinates",m),n("x1",r),n("x2",o),n("y1",s),n("y2",a),n("$sectionContext",i),n("rowSizes",x),n("rows",c),n("columns",u),n("rowGap",l),n("columnGap",f),n("scaledCoordinates",m),n("x1",r),n("x2",o),n("y1",s),n("y2",a),n("$sectionContext",i),n("colSizes",v),n("rows",c),n("columns",u),n("rowGap",l),n("columnGap",f),n("scaledCoordinates",m),n("x1",r),n("x2",o),n("y1",s),n("y2",a),n("$sectionContext",i),n("numRows",_),n("rows",c),n("columns",u),n("rowGap",l),n("columnGap",f),n("scaledCoordinates",m),n("x1",r),n("x2",o),n("y1",s),n("y2",a),n("$sectionContext",i),n("numCols",b),n("rows",c),n("columns",u),n("rowGap",l),n("columnGap",f),n("scaledCoordinates",m),n("x1",r),n("x2",o),n("y1",s),n("y2",a),n("$sectionContext",i)),(t.viewGridTemplate||t.rowSizes||t.colSizes)&&p&&function(t,e){let n,i,r="",o="",s="",a="";for(const t of e){n=t.x2-t.x1;const e=Math.round(n).toString()+"px",i=e.length;o=o+"-- "+e+" --|",s=s+"---"+new Array(i+1).join("-")+"---|",a=a+"   "+new Array(i+1).join(" ")+"   |"}r=o+"\n";for(const e of t){i=e.y2-e.y1;const t=Math.round(i).toString()+"px",n=t.length,o=a.substring(1)+"\n";r=r+"|"+o+t+a.substring(n)+"\n|"+o+s+"\n"}console.log(r)}(x,v),(t.viewGridShape||t.numRows||t.numCols)&&y&&console.log("rows:",_," columns:",b),(t.areaNames||t.allCells||t.numCols)&&n("allSpecs",k=$a(d,M,b))},{x1:r,x2:o,y1:s,y2:a,rows:c,columns:u,rowGap:l,columnGap:f,areaNames:d,viewGridTemplate:p,viewGridShape:y,sectionContext:g,allSpecs:k,$$slots:w,$$scope:O}}class Na extends tt{constructor(t){super(),K(this,t,Sa,ja,a,["x1","x2","y1","y2","rows","columns","rowGap","columnGap","areaNames","viewGridTemplate","viewGridShape"])}}var Ia={x:{required:!1},y:{required:!1},geometry:{required:!1},radius:{required:!1,default:3},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},Ta={x1:{required:!1},x2:{required:!1},y1:{required:!1},y2:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},Wa={x:{required:!1},y:{required:!1},geometry:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},Ra={x:{required:!1},y:{required:!1},geometry:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1},text:{required:!1},fontFamily:{required:!1,default:"Helvetica"},fontSize:{required:!1,default:16},fontWeight:{required:!1,default:"normal"},rotation:{required:!1,default:0},anchorPoint:{required:!1,default:"center"}};function qa(t,e){return"Point"===t?Ga(e,Ia):"Rectangle"===t?Ga(e,Ta):"Polygon"===t?Ga(e,Wa):"Label"===t?Ga(e,Ra):void 0}function Ga(t,e){const n={};for(const i in t){const r=t[i],o=e[i];if(rn(r)){if(!(i in e))throw za(i);n[i]=r}if(on(r)&&i in e){if(o.required)throw La(i);o.default?n[i]=o.default:n[i]=r}}return n}const za=t=>new Error(`Aesthetic '${t}' not allowed`),La=t=>new Error(`Required aesthetic '${t}' is missing`);function Fa(t,e,n){return Ss(function(t,e){if(Da(t),rn(t.geometry))return function(t,e){return An(t,e.scales())}(t.geometry,e);if(on(t.geometry))return function(t,e,n){const i=n.scales(),{scaleX:r,scaleY:o}=i,s=t.constructor===Function?t(i):r(t),a=e.constructor===Function?e(i):o(e);return{type:"Point",coordinates:[s,a]}}(t.x,t.y,e)}(t,e),n)}function Da(t){if(rn(t.geometry)){if(rn(t.x)||rn(t.y))throw Ya}else if(!rn(t.x)||!rn(t.y))throw Ya}const Ya=new Error("Point: invalid combination of props 'x', 'y' and 'geometry'");function Ua(t){if(rn(t.geometry)){if(rn(t.x)||rn(t.y))throw Ba}else if(!rn(t.x)||!rn(t.y))throw Ba}const Ba=new Error("Polygon: Invalid combination of 'x', 'y', and 'geometry' props");function Xa(t){return function(e,n,i){const r=n[t];return e.constructor===Function?function(t,e){const n=t(e);if(n.constructor===Array)return n;throw Za}(e,n):function(t,e,n){if(t.constructor===Array)return t.map(e);throw Za}(e,r)}}const Ha=Xa("scaleX"),Qa=Xa("scaleY");const Za=new Error("Polygon: 'x' and 'y' must evaluate to an Array");function Ja(t,e){!function(t,e){if(t.length!==e.length)throw Va;if(t.length<3)throw Ka}(t,e);const n=[];for(let i=0;i<t.length;i++)n.push([t[i],e[i]]);return function(t){const e=t[0],n=t[t.length-1];return e[0]!==n[0]||e[1]!==n[1]}(n)&&n.push([t[0],e[0]]),function(t){let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n][0]*t[n===t.length-1?0:n+1][1]*.5,e-=t[n===t.length-1?0:n+1][0]*t[n][1]*.5;return e}(n)<0&&n.reverse(),{type:"Polygon",coordinates:[n]}}const Va=new Error("Polygon: 'x' and 'y' must have same length"),Ka=new Error("Polygon: must consist of at least 3 points");function th(t,e){return new Array(e).fill(t)}function eh(t,e){if(t){if(t.constructor!==Array)throw new Error("index must be Array");if(t.length!==e)throw new Error("index must be of same length as coordinates");return t}return new Array(e).fill(0).map((t,e)=>e)}function nh(t){return function(e,n){if(e.constructor!==Array&&n.constructor!==Array)throw new Error(`${t}: at least 'x' or 'y' must evaluate to an Array`);const i=e.constructor===Array?e.length:n.length;if(e.constructor===Array&&n.constructor===Array&&(e.length!==i||n.length!==i))throw new Error(`${t}: 'x' and 'y' have different lengths`);return i}}function ih(t,e,n,i){const{scaledGeometryArray:r,length:o}=function(t,e){if(Da(t),rn(t.geometry))return function(t,e){const n=Cn(t,e.scales()),i=n.length;return{scaledGeometryArray:n,length:i}}(t.geometry,e);if(on(t.geometry))return function(t,e,n){const i=n.scales(),r=t.constructor!==Function,o=e.constructor!==Function,s=t.constructor===Function?t(i):t,a=e.constructor===Function?e(i):e,h=rh(s,a),c=s.constructor!==Array,u=a.constructor!==Array,l=oh(s,i.scaleX,r,c,h),f=oh(a,i.scaleY,o,u,h);return{scaledGeometryArray:sh(l,f,h),length:h}}(t.x,t.y,e)}(t,e),s=eh(i,o);return{coordSysGeometryObject:Is(r,n,s),indexArray:s}}const rh=nh("PointLayer");function oh(t,e,n,i,r){let o;return i&&(o=th(t,r)),i||(o=t),n?o.map(e):n?void 0:o}function sh(t,e,n){const i=[];for(let r=0;r<n;r++)i.push({type:"Point",coordinates:[t[r],e[r]]});return i}const ah=["x1","x2","y1","y2"];const hh=new Error("RectangleLayer: invalid coordinate specification");function ch(t,e,n,i,r){const o={};for(const s in t){const a=t[s];let h;const c=s.startsWith("x")?e.scaleX:e.scaleY;i[s]&&(h=th(a,r)),i[s]||(h=a),o[s]=n[s]?h.map(c):h}return o}const uh=nh("PolygonLayer"),lh=new Proxy({Point:Fa,Rectangle:function(t,e,n,i){return Ss(Fs(Ts(t,e)),n,i)},Polygon:function(t,e,n,i){return Ss(function(t,e){Ua(t);const n=e.scales();return rn(t.geometry)?An(t.geometry,n):on(t.geometry)?function(t,e,n){const i=Ha(t,n),r=Qa(e,n);return Ja(i,r)}(t.x,t.y,n):void 0}(t,e),n,i)},Label:Fa},{get:(t,e)=>{if(e in t)return t[e];throw new Error(`Invalid Mark type: '${e}'`)}}),fh=new Proxy({Point:ih,Rectangle:function(t,e,n,i,r){const{scaledCoordinates:o,length:s}=function(t,e){Rs(t);const n=function(t){const e={};for(const n of ah){const i=t[n];e[n]=i&&i.constructor!==Function}return e}(t),i=function(t,e){const n=e.scales(),i={};for(const e in t){const r=t[e];r.constructor===Function?i[e]=r(n):i[e]=r}return i}(function(t,e){const n={};for(const i of ah){const r=t[i];n[i]=r||e[i]()}return n}(t,e),e),r=function(t){let e,n=!1;for(const i in t){const r=t[i];if(r.constructor===Array&&(n=!0,(e=e||r.length)!==r.length))throw hh}if(!n)throw hh;return e}(i),o=function(t){const e={};for(const n in t){const i=t[n];e[n]=i.constructor!==Array}return e}(i);return{scaledCoordinates:ch(i,e.scales(),n,o,r),length:r}}(t,e),a=eh(i,s);return{coordSysGeometryObject:Is(function(t,e){const n=[];for(let i=0;i<e;i++)n.push(Fs({x1:t.x1[i],x2:t.x2[i],y1:t.y1[i],y2:t.y2[i]}));return n}(o,s),n,a,r),indexArray:a}},Polygon:function(t,e,n,i,r){const{scaledGeometryArray:o,length:s}=function(t,e){return Ua(t),rn(t.geometry)?function(t,e){const n=Cn(t,e.scales()),i=n.length;return{scaledGeometryArray:n,length:i}}(t.geometry,e):on(t.geometry)?function(t,e,n){const i=n.scales(),{scaleX:r,scaleY:o}=i,s=t.constructor!==Function,a=e.constructor!==Function,h=s?t:t(i),c=a?e:e(i),u=uh(h,c),l=[];for(let n=0;n<h.length;n++){const i=s?t[n].map(r):h[n],u=a?e[n].map(o):c[n],f=Ja(i,u);l.push(f)}return{scaledGeometryArray:l,length:u}}(t.x,t.y,e):void 0}(t,e),a=eh(i,s);return{coordSysGeometryObject:Is(o,n,a,r),indexArray:a}},Label:ih},{get:(t,e)=>{if(e in t)return t[e];throw new Error(`Invalid Layer type: '${e}'`)}});function dh(t,{radius:e}){const n=t.coordinates[0],i=t.coordinates[1],r=2*Math.PI*e,o=Math.max(Math.ceil(r),9),s={type:"Polygon",coordinates:[[]]};for(let t=0;t<o;t++)s.coordinates[0].push([n+e*Math.cos(Math.PI*t/o*2-Math.PI/2),i+e*Math.sin(Math.PI*t/o*2-Math.PI/2)]);return s.coordinates[0].push(s.coordinates[0][0]),s}const ph=new Proxy({Point:dh},{get:(t,e)=>e in t?t[e]:t=>t}),yh=new Proxy({Point:function(t,{radiusObject:e}){const n={};for(const i in t)n[i]=dh(t[i],{radius:e[i]});return n}},{get:(t,e)=>e in t?t[e]:t=>t});function gh(t){const e=t-1;return e*e*e+1}function mh(t){return"[object Date]"===Object.prototype.toString.call(t)}function Mh(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((e,n)=>Mh(t[n],e));return t=>n.map(e=>e(t))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(mh(t)&&mh(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),i={};return n.forEach(n=>{i[n]=Mh(t[n],e[n])}),t=>{const e={};return n.forEach(n=>{e[n]=i[n](t)}),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}function xh(t,i={}){const r=et(t);let o,s=t;function a(a,h){s=a;let c=o,u=!1,{delay:l=0,duration:y=400,easing:M=e,interpolate:x=Mh}=n(n({},i),h);const v=f()+l;let _;return(o=function(t){let e;return g||(g=!0,d(m)),{promise:new Promise(n=>{p.add(e=[t,n])}),abort(){p.delete(e)}}}(e=>{if(e<v)return!0;u||(_=x(t,a),"function"==typeof y&&(y=y(t,a)),u=!0),c&&(c.abort(),c=null);const n=e-v;return n>y?(r.set(t=a),!1):(r.set(t=_(M(n/y))),!0)})).promise}return{set:a,update:(e,n)=>a(e(s,t),n),subscribe:r.subscribe}}function vh(t,e,n){if(void 0===n)return et(e);if(n.constructor===Number){return xh(e,_h(t,n))}if(n.constructor===Object){if(!(t in n))return et(e);const i=n[t];if(i&&i.constructor===Number){return xh(e,_h(t,i))}if(i&&i.constructor===Object){return xh(e,function(t,e){switch(t){case"geometry":return Object.assign({interpolate:Di},e);case"fill":return Object.assign({interpolate:Wi},e);default:return e}}(t,i))}}throw new Error(`Invalid transition for ${t}`)}function _h(t,e){switch(t){case"geometry":return{duration:e,easing:gh,interpolate:Di};case"fill":return{duration:e,easing:gh,interpolate:Wi};default:return{duration:e,easing:gh}}}function bh(t,e){return void 0===t||void 0===e?t===e:t.constructor!==Object?t===e:function(t,e){if(e.constructor!==Object)return!1;if(wh(t)!==wh(e))return!1;for(const n in t){const i=t[n],r=e[n];if(i.constructor!==Object)return i===r;if(!kh(i,r))return!1}return!0}(t,e)}function kh(t,e){if(e.constructor!==Object)return!1;if(wh(t)!==wh(e))return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function wh(t){return Object.keys(t).length}function Oh(t,e,n){if(void 0===n)return et(e);if(n.constructor===Number){return xh(e,$h(t,n))}if(n.constructor===Object){if(!(t in n))return et(e);const i=n[t];if(i&&i.constructor===Number){return xh(e,$h(t,i))}if(i&&i.constructor===Object){return xh(e,function(t,e){switch(t){case"geometry":return Object.assign({interpolate:Yi},e);default:return Object.assign({interpolate:Ch},e)}}(t,i))}}throw new Error(`Invalid transition for ${t}`)}function $h(t,e){switch(t){case"geometry":return{duration:e,easing:gh,interpolate:Yi};default:return{duration:e,easing:gh,interpolate:Ch}}}function Ch(t,e){const n={};for(const i in t)i in e&&(n[i]=t[i]);return Wi(n,e)}const Ph=en();function Ah(t){return Ph(t)}function Eh(t){switch(t){case"center":return{textAnchor:"middle",dominantBaseline:"middle"};case"lb":return{textAnchor:"start",dominantBaseline:"alphabetic"};case"lt":return{textAnchor:"start",dominantBaseline:"hanging"};case"rt":return{textAnchor:"end",dominantBaseline:"hanging"};case"rb":return{textAnchor:"end",dominantBaseline:"alphabetic"};case"l":return{textAnchor:"start",dominantBaseline:"middle"};case"r":return{textAnchor:"end",dominantBaseline:"middle"};case"b":return{textAnchor:"middle",dominantBaseline:"alphabetic"};case"t":return{textAnchor:"middle",dominantBaseline:"hanging"}}}function jh(t){var e,n,i,r=(!["Point","Label"].includes(t.type)||t._asPolygon)&&Sh(t),o="Point"===t.type&&!t._asPolygon&&Nh(t),s="Label"===t.type&&Ih(t);return{c(){r&&r.c(),e=k(),o&&o.c(),n=k(),s&&s.c(),i=w()},m(t,a){r&&r.m(t,a),x(t,e,a),o&&o.m(t,a),x(t,n,a),s&&s.m(t,a),x(t,i,a)},p(t,a){!["Point","Label"].includes(a.type)||a._asPolygon?r?r.p(t,a):((r=Sh(a)).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),"Point"!==a.type||a._asPolygon?o&&(o.d(1),o=null):o?o.p(t,a):((o=Nh(a)).c(),o.m(n.parentNode,n)),"Label"===a.type?s?s.p(t,a):((s=Ih(a)).c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(t){r&&r.d(t),t&&v(e),o&&o.d(t),t&&v(n),s&&s.d(t),t&&v(i)}}}function Sh(t){var e,n,i;return{c(){O(e=_("path"),"class",n=t.type.toLowerCase()),O(e,"d",i=Ah(t.$tr_screenGeometry)),O(e,"fill",t.$tr_fill),O(e,"stroke",t.$tr_stroke),O(e,"stroke-width",t.$tr_strokeWidth),O(e,"fill-opacity",t.$tr_fillOpacity),O(e,"stroke-opacity",t.$tr_strokeOpacity),O(e,"opacity",t.$tr_opacity)},m(t,n){x(t,e,n)},p(t,r){t.type&&n!==(n=r.type.toLowerCase())&&O(e,"class",n),t.$tr_screenGeometry&&i!==(i=Ah(r.$tr_screenGeometry))&&O(e,"d",i),t.$tr_fill&&O(e,"fill",r.$tr_fill),t.$tr_stroke&&O(e,"stroke",r.$tr_stroke),t.$tr_strokeWidth&&O(e,"stroke-width",r.$tr_strokeWidth),t.$tr_fillOpacity&&O(e,"fill-opacity",r.$tr_fillOpacity),t.$tr_strokeOpacity&&O(e,"stroke-opacity",r.$tr_strokeOpacity),t.$tr_opacity&&O(e,"opacity",r.$tr_opacity)},d(t){t&&v(e)}}}function Nh(t){var e,n,i;return{c(){O(e=_("circle"),"class","point"),O(e,"cx",n=t.$tr_screenGeometry.coordinates[0]),O(e,"cy",i=t.$tr_screenGeometry.coordinates[1]),O(e,"r",t.$tr_radius),O(e,"fill",t.$tr_fill),O(e,"stroke",t.$tr_stroke),O(e,"stroke-width",t.$tr_strokeWidth),O(e,"fill-opacity",t.$tr_fillOpacity),O(e,"stroke-opacity",t.$tr_strokeOpacity),O(e,"opacity",t.$tr_opacity)},m(t,n){x(t,e,n)},p(t,r){t.$tr_screenGeometry&&n!==(n=r.$tr_screenGeometry.coordinates[0])&&O(e,"cx",n),t.$tr_screenGeometry&&i!==(i=r.$tr_screenGeometry.coordinates[1])&&O(e,"cy",i),t.$tr_radius&&O(e,"r",r.$tr_radius),t.$tr_fill&&O(e,"fill",r.$tr_fill),t.$tr_stroke&&O(e,"stroke",r.$tr_stroke),t.$tr_strokeWidth&&O(e,"stroke-width",r.$tr_strokeWidth),t.$tr_fillOpacity&&O(e,"fill-opacity",r.$tr_fillOpacity),t.$tr_strokeOpacity&&O(e,"stroke-opacity",r.$tr_strokeOpacity),t.$tr_opacity&&O(e,"opacity",r.$tr_opacity)},d(t){t&&v(e)}}}function Ih(t){var e,n,i,r,o,s,a,h=t.aesthetics.text;return{c(){e=_("text"),n=b(h),O(e,"class","label"),O(e,"x",i=t.$tr_screenGeometry.coordinates[0]),O(e,"y",r=t.$tr_screenGeometry.coordinates[1]),O(e,"fill",t.$tr_fill),O(e,"stroke",t.$tr_stroke),O(e,"stroke-width",t.$tr_strokeWidth),O(e,"fill-opacity",t.$tr_fillOpacity),O(e,"stroke-opacity",t.$tr_strokeOpacity),O(e,"opacity",t.$tr_opacity),O(e,"transform",t.rotateTransform),O(e,"font-family",t.fontFamily),O(e,"font-size",o=t.$tr_fontSize+" px"),O(e,"font-weight",t.$tr_fontWeight),O(e,"text-anchor",s=t.parsedTextAnchorPoint.textAnchor),O(e,"dominant-baseline",a=t.parsedTextAnchorPoint.dominantBaseline)},m(t,i){x(t,e,i),M(e,n)},p(t,c){t.aesthetics&&h!==(h=c.aesthetics.text)&&$(n,h),t.$tr_screenGeometry&&i!==(i=c.$tr_screenGeometry.coordinates[0])&&O(e,"x",i),t.$tr_screenGeometry&&r!==(r=c.$tr_screenGeometry.coordinates[1])&&O(e,"y",r),t.$tr_fill&&O(e,"fill",c.$tr_fill),t.$tr_stroke&&O(e,"stroke",c.$tr_stroke),t.$tr_strokeWidth&&O(e,"stroke-width",c.$tr_strokeWidth),t.$tr_fillOpacity&&O(e,"fill-opacity",c.$tr_fillOpacity),t.$tr_strokeOpacity&&O(e,"stroke-opacity",c.$tr_strokeOpacity),t.$tr_opacity&&O(e,"opacity",c.$tr_opacity),t.rotateTransform&&O(e,"transform",c.rotateTransform),t.fontFamily&&O(e,"font-family",c.fontFamily),t.$tr_fontSize&&o!==(o=c.$tr_fontSize+" px")&&O(e,"font-size",o),t.$tr_fontWeight&&O(e,"font-weight",c.$tr_fontWeight),t.parsedTextAnchorPoint&&s!==(s=c.parsedTextAnchorPoint.textAnchor)&&O(e,"text-anchor",s),t.parsedTextAnchorPoint&&a!==(a=c.parsedTextAnchorPoint.dominantBaseline)&&O(e,"dominant-baseline",a)},d(t){t&&v(e)}}}function Th(e){var n,i="svg"===e.$graphicContext.output()&&jh(e);return{c(){i&&i.c(),n=w()},m(t,e){i&&i.m(t,e),x(t,n,e)},p(t,e){"svg"===e.$graphicContext.output()?i?i.p(t,e):((i=jh(e)).c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:t,o:t,d(t){i&&i.d(t),t&&v(n)}}}let Wh=0;function Rh(e,n,i){let r,o,s,a,c,u,l,f,d,p,y,g,m,M,x,v,_=t,b=()=>{_(),_=Qt.subscribe(t=>{i("$tr_rotation",a=t)})},k=t,w=()=>{k(),k=Gt.subscribe(t=>{i("$tr_screenGeometry",c=t)})},O=t,$=()=>{O(),O=zt.subscribe(t=>{i("$tr_radius",u=t)})},C=t,P=()=>{C(),C=Lt.subscribe(t=>{i("$tr_fill",l=t)})},N=t,I=()=>{N(),N=Ft.subscribe(t=>{i("$tr_stroke",f=t)})},T=t,W=()=>{T(),T=Dt.subscribe(t=>{i("$tr_strokeWidth",d=t)})},R=t,q=()=>{R(),R=Yt.subscribe(t=>{i("$tr_fillOpacity",p=t)})},G=t,z=()=>{G(),G=Ut.subscribe(t=>{i("$tr_strokeOpacity",y=t)})},L=t,F=()=>{L(),L=Bt.subscribe(t=>{i("$tr_opacity",g=t)})},D=t,Y=()=>{D(),D=Xt.subscribe(t=>{i("$tr_fontSize",m=t)})},U=t,B=()=>{U(),U=Ht.subscribe(t=>{i("$tr_fontWeight",M=t)})};e.$$.on_destroy.push(()=>_()),e.$$.on_destroy.push(()=>k()),e.$$.on_destroy.push(()=>O()),e.$$.on_destroy.push(()=>C()),e.$$.on_destroy.push(()=>N()),e.$$.on_destroy.push(()=>T()),e.$$.on_destroy.push(()=>R()),e.$$.on_destroy.push(()=>G()),e.$$.on_destroy.push(()=>L()),e.$$.on_destroy.push(()=>D()),e.$$.on_destroy.push(()=>U());let X="mark"+Wh++,H=!0;const Q=()=>!H;let{type:Z,x:J,y:V,x1:K,x2:tt,y1:et,y2:nt,geometry:it,radius:ot,fill:st,stroke:ht,strokeWidth:ct,strokeOpacity:ut,fillOpacity:lt,opacity:dt,text:pt,fontFamily:yt,fontSize:mt,fontWeight:Mt,rotation:xt,anchorPoint:vt,transition:_t,onClick:bt,onHover:kt,onMouseout:wt,interpolate:Ot=!1,_asPolygon:$t=!0}=n,Ct=qa(Z,{x:J,y:V,x1:K,x2:tt,y1:et,y2:nt,geometry:it,radius:ot,fill:st,stroke:ht,strokeWidth:ct,strokeOpacity:ut,fillOpacity:lt,opacity:dt,text:pt,fontFamily:yt,fontSize:mt,fontWeight:Mt,rotation:xt,anchorPoint:vt}),Pt={x:J,y:V,x1:K,x2:tt,y1:et,y2:nt,geometry:it},At=lh[Z],Et=ph[Z];const jt=rt();h(e,jt,t=>{i("$graphicContext",v=t)});const St=at();h(e,St,t=>{i("$sectionContext",r=t)});const Nt=Es();h(e,Nt,t=>{i("$coordinateTransformationContext",o=t)});const It=ft();h(e,It,t=>{i("$interactionManagerContext",x=t)});const Tt=gt();let Wt,Rt,qt;h(e,Tt,t=>{i("$zoomContext",s=t)}),ie(),re(),oe();let Gt=vh("geometry",qt,_t);w();let zt=vh("radius",Ct.radius,_t);$();let Lt=vh("fill",Ct.fill,_t);P();let Ft=vh("stroke",Ct.stroke,_t);I();let Dt=vh("strokeWidth",Ct.strokeWidth,_t);W();let Yt=vh("fillOpacity",Ct.fillOpacity,_t);q();let Ut=vh("strokeOpacity",Ct.strokeOpacity,_t);z();let Bt=vh("opacity",Ct.opacity,_t);F();let Xt=vh("fontSize",Ct.fontSize,_t);Y();let Ht=vh("fontWeight",Ct.fontWeight,_t);B();let Qt=vh("rotation",Ct.rotation,_t);b();let Zt,Jt,Vt=`rotate(${a}, ${c.coordinates[0]}, ${c.coordinates[1]})`,Kt=Eh(Ct.anchorPoint),te=!1,ee=!1,ne=!1;function ie(){Wt=At(Pt,r,o,Ot)}function re(){Rt=s?En(Wt,s):Wt}function oe(){qt=$t?Et(Rt,{radius:Ct.radius}):Rt}function se(){ae(),Jt&&(x.loadMark(Z,function(t,e,n,i){const r={markId:e};let o;return"Point"===t&&(o={pixelGeometry:n.pixelGeometry,radius:i.radius}),"Label"===t&&(o={pixelGeometry:n.pixelGeometry,radius:i.fontSize}),"Rectangle"===t&&(o={screenGeometry:n.screenGeometry}),"Polygon"===t&&(o={screenGeometry:n.screenGeometry}),r.attributes=o,r}(Z,X,{screenGeometry:qt,pixelGeometry:Rt},{radius:Ct.radius,fontSize:Ct.fontSize})),bt&&x.addMarkInteraction("click",X,bt),kt&&x.addMarkInteraction("mouseover",X,kt),wt&&x.addMarkInteraction("mouseout",X,wt))}function ae(){x.markIsLoaded(X)&&(x.removeAllMarkInteractions(X),x.removeMark(X))}return A(()=>{bh(Zt,_t)||(Zt=_t,Gt=vh("geometry",c,_t),w(),i("tr_screenGeometry",Gt),zt=vh("radius",u,_t),$(),i("tr_radius",zt),Lt=vh("fill",l,_t),P(),i("tr_fill",Lt),Ft=vh("stroke",f,_t),I(),i("tr_stroke",Ft),Dt=vh("strokeWidth",d,_t),W(),i("tr_strokeWidth",Dt),Yt=vh("fillOpacity",p,_t),q(),i("tr_fillOpacity",Yt),Ut=vh("strokeOpacity",y,_t),z(),i("tr_strokeOpacity",Ut),Bt=vh("opacity",g,_t),F(),i("tr_opacity",Bt),Xt=vh("fontSize",m,_t),Y(),i("tr_fontSize",Xt),Ht=vh("fontWeight",M,_t),B(),i("tr_fontWeight",Ht),Qt=vh("rotation",a,_t),b(),i("tr_rotation",Qt)),te&&ie(),ee&&re(),ne&&(oe(),Gt.set(qt),se()),te=!1,ee=!1,ne=!1}),j(()=>{H=!1}),E(()=>{se()}),S(()=>{ae()}),e.$set=t=>{"type"in t&&i("type",Z=t.type),"x"in t&&i("x",J=t.x),"y"in t&&i("y",V=t.y),"x1"in t&&i("x1",K=t.x1),"x2"in t&&i("x2",tt=t.x2),"y1"in t&&i("y1",et=t.y1),"y2"in t&&i("y2",nt=t.y2),"geometry"in t&&i("geometry",it=t.geometry),"radius"in t&&i("radius",ot=t.radius),"fill"in t&&i("fill",st=t.fill),"stroke"in t&&i("stroke",ht=t.stroke),"strokeWidth"in t&&i("strokeWidth",ct=t.strokeWidth),"strokeOpacity"in t&&i("strokeOpacity",ut=t.strokeOpacity),"fillOpacity"in t&&i("fillOpacity",lt=t.fillOpacity),"opacity"in t&&i("opacity",dt=t.opacity),"text"in t&&i("text",pt=t.text),"fontFamily"in t&&i("fontFamily",yt=t.fontFamily),"fontSize"in t&&i("fontSize",mt=t.fontSize),"fontWeight"in t&&i("fontWeight",Mt=t.fontWeight),"rotation"in t&&i("rotation",xt=t.rotation),"anchorPoint"in t&&i("anchorPoint",vt=t.anchorPoint),"transition"in t&&i("transition",_t=t.transition),"onClick"in t&&i("onClick",bt=t.onClick),"onHover"in t&&i("onHover",kt=t.onHover),"onMouseout"in t&&i("onMouseout",wt=t.onMouseout),"interpolate"in t&&i("interpolate",Ot=t.interpolate),"_asPolygon"in t&&i("_asPolygon",$t=t._asPolygon)},e.$$.update=(t={type:1,x:1,y:1,x1:1,x2:1,y1:1,y2:1,geometry:1,radius:1,fill:1,stroke:1,strokeWidth:1,strokeOpacity:1,fillOpacity:1,opacity:1,text:1,fontFamily:1,fontSize:1,fontWeight:1,rotation:1,anchorPoint:1,positioningAesthetics:1,$sectionContext:1,$coordinateTransformationContext:1,interpolate:1,$zoomContext:1,_asPolygon:1,tr_radius:1,aesthetics:1,tr_strokeWidth:1,tr_fill:1,tr_stroke:1,tr_fillOpacity:1,tr_strokeOpacity:1,tr_opacity:1,tr_fontSize:1,tr_fontWeight:1,tr_rotation:1,$tr_rotation:1,$tr_screenGeometry:1,onClick:1,onHover:1,onMouseout:1})=>{(t.type||t.x||t.y||t.x1||t.x2||t.y1||t.y2||t.geometry||t.radius||t.fill||t.stroke||t.strokeWidth||t.strokeOpacity||t.fillOpacity||t.opacity||t.text||t.fontFamily||t.fontSize||t.fontWeight||t.rotation||t.anchorPoint)&&Q()&&i("aesthetics",Ct=qa(Z,{x:J,y:V,x1:K,x2:tt,y1:et,y2:nt,geometry:it,radius:ot,fill:st,stroke:ht,strokeWidth:ct,strokeOpacity:ut,fillOpacity:lt,opacity:dt,text:pt,fontFamily:yt,fontSize:mt,fontWeight:Mt,rotation:xt,anchorPoint:vt})),(t.x||t.y||t.x1||t.x2||t.y1||t.y2||t.geometry)&&Q()&&i("positioningAesthetics",Pt={x:J,y:V,x1:K,x2:tt,y1:et,y2:nt,geometry:it}),t.type&&Q()&&(At=lh[Z],Et=ph[Z]),(t.positioningAesthetics||t.$sectionContext||t.$coordinateTransformationContext||t.interpolate)&&Q()&&(te=!0,ee=!0,ne=!0),t.$zoomContext&&Q()&&(ee=!0,ne=!0),(t._asPolygon||t.tr_radius||t.aesthetics||t.tr_strokeWidth)&&Q()&&($t||(zt.set(Ct.radius),Dt.set(Ct.strokeWidth)),$t&&(ne=!0)),(t.tr_fill||t.aesthetics)&&Q()&&Lt.set(Ct.fill),(t.tr_stroke||t.aesthetics)&&Q()&&Ft.set(Ct.stroke),(t.tr_strokeWidth||t.aesthetics)&&Q()&&Dt.set(Ct.strokeWidth),(t.tr_fillOpacity||t.aesthetics)&&Q()&&Yt.set(Ct.fillOpacity),(t.tr_strokeOpacity||t.aesthetics)&&Q()&&Ut.set(Ct.strokeOpacity),(t.tr_opacity||t.aesthetics)&&Q()&&Bt.set(Ct.opacity),(t.tr_fontSize||t.aesthetics)&&Q()&&Xt.set(Ct.fontSize),(t.tr_fontWeight||t.aesthetics)&&Q()&&Ht.set(Ct.fontWeight),(t.tr_rotation||t.aesthetics)&&Q()&&Qt.set(Ct.rotation),(t.$tr_rotation||t.$tr_screenGeometry)&&Q()&&i("rotateTransform",Vt=`rotate(${a}, ${c.coordinates[0]}, ${c.coordinates[1]})`),t.aesthetics&&Q()&&i("parsedTextAnchorPoint",Kt=Eh(Ct.anchorPoint)),(t.onClick||t.onHover||t.onMouseout)&&(Jt=void 0!==bt||void 0!==kt||void 0!==wt)},{type:Z,x:J,y:V,x1:K,x2:tt,y1:et,y2:nt,geometry:it,radius:ot,fill:st,stroke:ht,strokeWidth:ct,strokeOpacity:ut,fillOpacity:lt,opacity:dt,text:pt,fontFamily:yt,fontSize:mt,fontWeight:Mt,rotation:xt,anchorPoint:vt,transition:_t,onClick:bt,onHover:kt,onMouseout:wt,interpolate:Ot,_asPolygon:$t,aesthetics:Ct,graphicContext:jt,sectionContext:St,coordinateTransformationContext:Nt,interactionManagerContext:It,zoomContext:Tt,tr_screenGeometry:Gt,tr_radius:zt,tr_fill:Lt,tr_stroke:Ft,tr_strokeWidth:Dt,tr_fillOpacity:Yt,tr_strokeOpacity:Ut,tr_opacity:Bt,tr_fontSize:Xt,tr_fontWeight:Ht,tr_rotation:Qt,rotateTransform:Vt,parsedTextAnchorPoint:Kt,$tr_screenGeometry:c,$tr_radius:u,$tr_fill:l,$tr_stroke:f,$tr_strokeWidth:d,$tr_fillOpacity:p,$tr_strokeOpacity:y,$tr_opacity:g,$tr_fontSize:m,$tr_fontWeight:M,$graphicContext:v}}class qh extends tt{constructor(t){super(),K(this,t,Rh,Th,a,["type","x","y","x1","x2","y1","y2","geometry","radius","fill","stroke","strokeWidth","strokeOpacity","fillOpacity","opacity","text","fontFamily","fontSize","fontWeight","rotation","anchorPoint","transition","onClick","onHover","onMouseout","interpolate","_asPolygon"])}}function Gh(t){var e,n=new qh({props:{type:"Point",x:t.x,y:t.y,geometry:t.geometry,radius:t.radius,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,fillOpacity:t.fillOpacity,opacity:t.opacity,transition:t.transition,onClick:t.onClick,onHover:t.onHover,onMouseout:t.onMouseout,_asPolygon:!1}});return{c(){n.$$.fragment.c()},m(t,i){Z(n,t,i),e=!0},p(t,e){var i={};t.x&&(i.x=e.x),t.y&&(i.y=e.y),t.geometry&&(i.geometry=e.geometry),t.radius&&(i.radius=e.radius),t.fill&&(i.fill=e.fill),t.stroke&&(i.stroke=e.stroke),t.strokeWidth&&(i.strokeWidth=e.strokeWidth),t.strokeOpacity&&(i.strokeOpacity=e.strokeOpacity),t.fillOpacity&&(i.fillOpacity=e.fillOpacity),t.opacity&&(i.opacity=e.opacity),t.transition&&(i.transition=e.transition),t.onClick&&(i.onClick=e.onClick),t.onHover&&(i.onHover=e.onHover),t.onMouseout&&(i.onMouseout=e.onMouseout),n.$set(i)},i(t){e||(B(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}function zh(t,e,n){let{x:i,y:r,geometry:o,radius:s,fill:a,stroke:h,strokeWidth:c,strokeOpacity:u,fillOpacity:l,opacity:f,transition:d,onClick:p,onHover:y,onMouseout:g}=e;return t.$set=t=>{"x"in t&&n("x",i=t.x),"y"in t&&n("y",r=t.y),"geometry"in t&&n("geometry",o=t.geometry),"radius"in t&&n("radius",s=t.radius),"fill"in t&&n("fill",a=t.fill),"stroke"in t&&n("stroke",h=t.stroke),"strokeWidth"in t&&n("strokeWidth",c=t.strokeWidth),"strokeOpacity"in t&&n("strokeOpacity",u=t.strokeOpacity),"fillOpacity"in t&&n("fillOpacity",l=t.fillOpacity),"opacity"in t&&n("opacity",f=t.opacity),"transition"in t&&n("transition",d=t.transition),"onClick"in t&&n("onClick",p=t.onClick),"onHover"in t&&n("onHover",y=t.onHover),"onMouseout"in t&&n("onMouseout",g=t.onMouseout)},{x:i,y:r,geometry:o,radius:s,fill:a,stroke:h,strokeWidth:c,strokeOpacity:u,fillOpacity:l,opacity:f,transition:d,onClick:p,onHover:y,onMouseout:g}}class Lh extends tt{constructor(t){super(),K(this,t,zh,Gh,a,["x","y","geometry","radius","fill","stroke","strokeWidth","strokeOpacity","fillOpacity","opacity","transition","onClick","onHover","onMouseout"])}}function Fh(t){var e,n=new qh({props:{type:"Rectangle",x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,fillOpacity:t.fillOpacity,opacity:t.opacity,transition:t.transition,onClick:t.onClick,onHover:t.onHover,onMouseout:t.onMouseout,interpolate:t.interpolate}});return{c(){n.$$.fragment.c()},m(t,i){Z(n,t,i),e=!0},p(t,e){var i={};t.x1&&(i.x1=e.x1),t.x2&&(i.x2=e.x2),t.y1&&(i.y1=e.y1),t.y2&&(i.y2=e.y2),t.fill&&(i.fill=e.fill),t.stroke&&(i.stroke=e.stroke),t.strokeWidth&&(i.strokeWidth=e.strokeWidth),t.strokeOpacity&&(i.strokeOpacity=e.strokeOpacity),t.fillOpacity&&(i.fillOpacity=e.fillOpacity),t.opacity&&(i.opacity=e.opacity),t.transition&&(i.transition=e.transition),t.onClick&&(i.onClick=e.onClick),t.onHover&&(i.onHover=e.onHover),t.onMouseout&&(i.onMouseout=e.onMouseout),t.interpolate&&(i.interpolate=e.interpolate),n.$set(i)},i(t){e||(B(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}function Dh(t,e,n){let{x1:i,x2:r,y1:o,y2:s,fill:a,stroke:h,strokeWidth:c,strokeOpacity:u,fillOpacity:l,opacity:f,transition:d,onClick:p,onHover:y,onMouseout:g,interpolate:m=!0}=e;return t.$set=t=>{"x1"in t&&n("x1",i=t.x1),"x2"in t&&n("x2",r=t.x2),"y1"in t&&n("y1",o=t.y1),"y2"in t&&n("y2",s=t.y2),"fill"in t&&n("fill",a=t.fill),"stroke"in t&&n("stroke",h=t.stroke),"strokeWidth"in t&&n("strokeWidth",c=t.strokeWidth),"strokeOpacity"in t&&n("strokeOpacity",u=t.strokeOpacity),"fillOpacity"in t&&n("fillOpacity",l=t.fillOpacity),"opacity"in t&&n("opacity",f=t.opacity),"transition"in t&&n("transition",d=t.transition),"onClick"in t&&n("onClick",p=t.onClick),"onHover"in t&&n("onHover",y=t.onHover),"onMouseout"in t&&n("onMouseout",g=t.onMouseout),"interpolate"in t&&n("interpolate",m=t.interpolate)},{x1:i,x2:r,y1:o,y2:s,fill:a,stroke:h,strokeWidth:c,strokeOpacity:u,fillOpacity:l,opacity:f,transition:d,onClick:p,onHover:y,onMouseout:g,interpolate:m}}class Yh extends tt{constructor(t){super(),K(this,t,Dh,Fh,a,["x1","x2","y1","y2","fill","stroke","strokeWidth","strokeOpacity","fillOpacity","opacity","transition","onClick","onHover","onMouseout","interpolate"])}}function Uh(t){var e,n=new qh({props:{type:"Polygon",x:t.x,y:t.y,geometry:t.geometry,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,fillOpacity:t.fillOpacity,opacity:t.opacity,transition:t.transition,onClick:t.onClick,onHover:t.onHover,onMouseout:t.onMouseout,interpolate:t.interpolate}});return{c(){n.$$.fragment.c()},m(t,i){Z(n,t,i),e=!0},p(t,e){var i={};t.x&&(i.x=e.x),t.y&&(i.y=e.y),t.geometry&&(i.geometry=e.geometry),t.fill&&(i.fill=e.fill),t.stroke&&(i.stroke=e.stroke),t.strokeWidth&&(i.strokeWidth=e.strokeWidth),t.strokeOpacity&&(i.strokeOpacity=e.strokeOpacity),t.fillOpacity&&(i.fillOpacity=e.fillOpacity),t.opacity&&(i.opacity=e.opacity),t.transition&&(i.transition=e.transition),t.onClick&&(i.onClick=e.onClick),t.onHover&&(i.onHover=e.onHover),t.onMouseout&&(i.onMouseout=e.onMouseout),t.interpolate&&(i.interpolate=e.interpolate),n.$set(i)},i(t){e||(B(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}function Bh(t,e,n){let{x:i,y:r,geometry:o,fill:s,stroke:a,strokeWidth:h,strokeOpacity:c,fillOpacity:u,opacity:l,transition:f,onClick:d,onHover:p,onMouseout:y,interpolate:g=!1}=e;return t.$set=t=>{"x"in t&&n("x",i=t.x),"y"in t&&n("y",r=t.y),"geometry"in t&&n("geometry",o=t.geometry),"fill"in t&&n("fill",s=t.fill),"stroke"in t&&n("stroke",a=t.stroke),"strokeWidth"in t&&n("strokeWidth",h=t.strokeWidth),"strokeOpacity"in t&&n("strokeOpacity",c=t.strokeOpacity),"fillOpacity"in t&&n("fillOpacity",u=t.fillOpacity),"opacity"in t&&n("opacity",l=t.opacity),"transition"in t&&n("transition",f=t.transition),"onClick"in t&&n("onClick",d=t.onClick),"onHover"in t&&n("onHover",p=t.onHover),"onMouseout"in t&&n("onMouseout",y=t.onMouseout),"interpolate"in t&&n("interpolate",g=t.interpolate)},{x:i,y:r,geometry:o,fill:s,stroke:a,strokeWidth:h,strokeOpacity:c,fillOpacity:u,opacity:l,transition:f,onClick:d,onHover:p,onMouseout:y,interpolate:g}}class Xh extends tt{constructor(t){super(),K(this,t,Bh,Uh,a,["x","y","geometry","fill","stroke","strokeWidth","strokeOpacity","fillOpacity","opacity","transition","onClick","onHover","onMouseout","interpolate"])}}function Hh(t){var e,n=new qh({props:{type:"Label",x:t.x,y:t.y,geometry:t.geometry,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,fillOpacity:t.fillOpacity,opacity:t.opacity,text:t.text,fontFamily:t.fontFamily,fontSize:t.fontSize,fontWeight:t.fontWeight,rotation:t.rotation,anchorPoint:t.anchorPoint,transition:t.transition,onClick:t.onClick,onHover:t.onHover,onMouseout:t.onMouseout,_asPolygon:!1}});return{c(){n.$$.fragment.c()},m(t,i){Z(n,t,i),e=!0},p(t,e){var i={};t.x&&(i.x=e.x),t.y&&(i.y=e.y),t.geometry&&(i.geometry=e.geometry),t.fill&&(i.fill=e.fill),t.stroke&&(i.stroke=e.stroke),t.strokeWidth&&(i.strokeWidth=e.strokeWidth),t.strokeOpacity&&(i.strokeOpacity=e.strokeOpacity),t.fillOpacity&&(i.fillOpacity=e.fillOpacity),t.opacity&&(i.opacity=e.opacity),t.text&&(i.text=e.text),t.fontFamily&&(i.fontFamily=e.fontFamily),t.fontSize&&(i.fontSize=e.fontSize),t.fontWeight&&(i.fontWeight=e.fontWeight),t.rotation&&(i.rotation=e.rotation),t.anchorPoint&&(i.anchorPoint=e.anchorPoint),t.transition&&(i.transition=e.transition),t.onClick&&(i.onClick=e.onClick),t.onHover&&(i.onHover=e.onHover),t.onMouseout&&(i.onMouseout=e.onMouseout),n.$set(i)},i(t){e||(B(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}function Qh(t,e,n){let{x:i,y:r,geometry:o,fill:s,stroke:a,strokeWidth:h,strokeOpacity:c,fillOpacity:u,opacity:l,text:f,fontFamily:d,fontSize:p,fontWeight:y,rotation:g,anchorPoint:m,transition:M,onClick:x,onHover:v,onMouseout:_}=e;return t.$set=t=>{"x"in t&&n("x",i=t.x),"y"in t&&n("y",r=t.y),"geometry"in t&&n("geometry",o=t.geometry),"fill"in t&&n("fill",s=t.fill),"stroke"in t&&n("stroke",a=t.stroke),"strokeWidth"in t&&n("strokeWidth",h=t.strokeWidth),"strokeOpacity"in t&&n("strokeOpacity",c=t.strokeOpacity),"fillOpacity"in t&&n("fillOpacity",u=t.fillOpacity),"opacity"in t&&n("opacity",l=t.opacity),"text"in t&&n("text",f=t.text),"fontFamily"in t&&n("fontFamily",d=t.fontFamily),"fontSize"in t&&n("fontSize",p=t.fontSize),"fontWeight"in t&&n("fontWeight",y=t.fontWeight),"rotation"in t&&n("rotation",g=t.rotation),"anchorPoint"in t&&n("anchorPoint",m=t.anchorPoint),"transition"in t&&n("transition",M=t.transition),"onClick"in t&&n("onClick",x=t.onClick),"onHover"in t&&n("onHover",v=t.onHover),"onMouseout"in t&&n("onMouseout",_=t.onMouseout)},{x:i,y:r,geometry:o,fill:s,stroke:a,strokeWidth:h,strokeOpacity:c,fillOpacity:u,opacity:l,text:f,fontFamily:d,fontSize:p,fontWeight:y,rotation:g,anchorPoint:m,transition:M,onClick:x,onHover:v,onMouseout:_}}class Zh extends tt{constructor(t){super(),K(this,t,Qh,Hh,a,["x","y","geometry","fill","stroke","strokeWidth","strokeOpacity","fillOpacity","opacity","text","fontFamily","fontSize","fontWeight","rotation","anchorPoint","transition","onClick","onHover","onMouseout"])}}function Jh(t,e){const n={};if(t){if(t.constructor===Array)for(let i=0;i<e.length;i++){n[e[i]]=t[i]}if(t.constructor!==Array)for(let i=0;i<e.length;i++){n[e[i]]=t}}return n}function Vh(t,e,n){const i=Object.create(t);return i.$index=e[n],i}function Kh(t,e,n){const i=Object.create(t);return i.$index=e[n],i}function tc(t,e,n){const i=Object.create(t);return i.$index=e[n],i}function ec(t){var e,n,i,r=(!["Point","Label"].includes(t.type)||t._asPolygon)&&nc(t),o="Point"===t.type&&!t._asPolygon&&rc(t),s="Label"===t.type&&sc(t);return{c(){r&&r.c(),e=k(),o&&o.c(),n=k(),s&&s.c(),i=w()},m(t,a){r&&r.m(t,a),x(t,e,a),o&&o.m(t,a),x(t,n,a),s&&s.m(t,a),x(t,i,a)},p(t,a){!["Point","Label"].includes(a.type)||a._asPolygon?r?r.p(t,a):((r=nc(a)).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),"Point"!==a.type||a._asPolygon?o&&(o.d(1),o=null):o?o.p(t,a):((o=rc(a)).c(),o.m(n.parentNode,n)),"Label"===a.type?s?s.p(t,a):((s=sc(a)).c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(t){r&&r.d(t),t&&v(e),o&&o.d(t),t&&v(n),s&&s.d(t),t&&v(i)}}}function nc(t){var e,n=[],i=new Map,r=t.indexArray;const o=t=>t.$index;for(var s=0;s<r.length;s+=1){let e=tc(t,r,s),a=o(e);i.set(a,n[s]=ic(a,e))}return{c(){for(s=0;s<n.length;s+=1)n[s].c();e=w()},m(t,i){for(s=0;s<n.length;s+=1)n[s].m(t,i);x(t,e,i)},p(t,r){const s=r.indexArray;n=Q(n,t,o,1,r,s,i,e.parentNode,H,ic,e,tc)},d(t){for(s=0;s<n.length;s+=1)n[s].d(t);t&&v(e)}}}function ic(t,e){var n,i,r,o,s,a,h,c,u;return{key:t,first:null,c(){O(n=_("path"),"class",i=e.type.toLowerCase()),O(n,"d",r=Ah(e.$tr_screenGeometryObject[e.$index])),O(n,"fill",o=e.$tr_fillObject[e.$index]),O(n,"stroke",s=e.$tr_strokeObject[e.$index]),O(n,"stroke-width",a=e.$tr_strokeWidthObject[e.$index]),O(n,"fill-opacity",h=e.$tr_fillOpacityObject[e.$index]),O(n,"stroke-opacity",c=e.$tr_strokeOpacityObject[e.$index]),O(n,"opacity",u=e.$tr_opacityObject[e.$index]),this.first=n},m(t,e){x(t,n,e)},p(t,e){t.type&&i!==(i=e.type.toLowerCase())&&O(n,"class",i),(t.$tr_screenGeometryObject||t.indexArray)&&r!==(r=Ah(e.$tr_screenGeometryObject[e.$index]))&&O(n,"d",r),(t.$tr_fillObject||t.indexArray)&&o!==(o=e.$tr_fillObject[e.$index])&&O(n,"fill",o),(t.$tr_strokeObject||t.indexArray)&&s!==(s=e.$tr_strokeObject[e.$index])&&O(n,"stroke",s),(t.$tr_strokeWidthObject||t.indexArray)&&a!==(a=e.$tr_strokeWidthObject[e.$index])&&O(n,"stroke-width",a),(t.$tr_fillOpacityObject||t.indexArray)&&h!==(h=e.$tr_fillOpacityObject[e.$index])&&O(n,"fill-opacity",h),(t.$tr_strokeOpacityObject||t.indexArray)&&c!==(c=e.$tr_strokeOpacityObject[e.$index])&&O(n,"stroke-opacity",c),(t.$tr_opacityObject||t.indexArray)&&u!==(u=e.$tr_opacityObject[e.$index])&&O(n,"opacity",u)},d(t){t&&v(n)}}}function rc(t){var e,n=[],i=new Map,r=t.indexArray;const o=t=>t.$index;for(var s=0;s<r.length;s+=1){let e=Kh(t,r,s),a=o(e);i.set(a,n[s]=oc(a,e))}return{c(){for(s=0;s<n.length;s+=1)n[s].c();e=w()},m(t,i){for(s=0;s<n.length;s+=1)n[s].m(t,i);x(t,e,i)},p(t,r){const s=r.indexArray;n=Q(n,t,o,1,r,s,i,e.parentNode,H,oc,e,Kh)},d(t){for(s=0;s<n.length;s+=1)n[s].d(t);t&&v(e)}}}function oc(t,e){var n,i,r,o,s,a,h,c,u,l;return{key:t,first:null,c(){O(n=_("circle"),"class","point"),O(n,"cx",i=e.$tr_screenGeometryObject[e.$index].coordinates[0]),O(n,"cy",r=e.$tr_screenGeometryObject[e.$index].coordinates[1]),O(n,"r",o=e.$tr_radiusObject[e.$index]),O(n,"fill",s=e.$tr_fillObject[e.$index]),O(n,"stroke",a=e.$tr_strokeObject[e.$index]),O(n,"stroke-width",h=e.$tr_strokeWidthObject[e.$index]),O(n,"fill-opacity",c=e.$tr_fillOpacityObject[e.$index]),O(n,"stroke-opacity",u=e.$tr_strokeOpacityObject[e.$index]),O(n,"opacity",l=e.$tr_opacityObject[e.$index]),this.first=n},m(t,e){x(t,n,e)},p(t,e){(t.$tr_screenGeometryObject||t.indexArray)&&i!==(i=e.$tr_screenGeometryObject[e.$index].coordinates[0])&&O(n,"cx",i),(t.$tr_screenGeometryObject||t.indexArray)&&r!==(r=e.$tr_screenGeometryObject[e.$index].coordinates[1])&&O(n,"cy",r),(t.$tr_radiusObject||t.indexArray)&&o!==(o=e.$tr_radiusObject[e.$index])&&O(n,"r",o),(t.$tr_fillObject||t.indexArray)&&s!==(s=e.$tr_fillObject[e.$index])&&O(n,"fill",s),(t.$tr_strokeObject||t.indexArray)&&a!==(a=e.$tr_strokeObject[e.$index])&&O(n,"stroke",a),(t.$tr_strokeWidthObject||t.indexArray)&&h!==(h=e.$tr_strokeWidthObject[e.$index])&&O(n,"stroke-width",h),(t.$tr_fillOpacityObject||t.indexArray)&&c!==(c=e.$tr_fillOpacityObject[e.$index])&&O(n,"fill-opacity",c),(t.$tr_strokeOpacityObject||t.indexArray)&&u!==(u=e.$tr_strokeOpacityObject[e.$index])&&O(n,"stroke-opacity",u),(t.$tr_opacityObject||t.indexArray)&&l!==(l=e.$tr_opacityObject[e.$index])&&O(n,"opacity",l)},d(t){t&&v(n)}}}function sc(t){var e,n=[],i=new Map,r=t.indexArray;const o=t=>t.$index;for(var s=0;s<r.length;s+=1){let e=Vh(t,r,s),a=o(e);i.set(a,n[s]=ac(a,e))}return{c(){for(s=0;s<n.length;s+=1)n[s].c();e=w()},m(t,i){for(s=0;s<n.length;s+=1)n[s].m(t,i);x(t,e,i)},p(t,r){const s=r.indexArray;n=Q(n,t,o,1,r,s,i,e.parentNode,H,ac,e,Vh)},d(t){for(s=0;s<n.length;s+=1)n[s].d(t);t&&v(e)}}}function ac(t,e){var n,i,r,o,s,a,h,c,u,l,f,d,p,y,g,m,k=e.textObject[e.$index];return{key:t,first:null,c(){n=_("text"),i=b(k),O(n,"class","label"),O(n,"x",r=e.$tr_screenGeometryObject[e.$index].coordinates[0]),O(n,"y",o=e.$tr_screenGeometryObject[e.$index].coordinates[1]),O(n,"fill",s=e.$tr_fillObject[e.$index]),O(n,"stroke",a=e.$tr_strokeObject[e.$index]),O(n,"stroke-width",h=e.$tr_strokeWidthObject[e.$index]),O(n,"fill-opacity",c=e.$tr_fillOpacityObject[e.$index]),O(n,"stroke-opacity",u=e.$tr_strokeOpacityObject[e.$index]),O(n,"opacity",l=e.$tr_opacityObject[e.$index]),O(n,"transform",f=e.rotateTransformObject[e.$index]),O(n,"font-family",d=e.fontFamilyObject[e.$index]),O(n,"font-size",p=e.$tr_fontSizeObject[e.$index]+" px"),O(n,"font-weight",y=e.$tr_fontWeightObject[e.$index]),O(n,"text-anchor",g=e.parsedTextAnchorPointObject[e.$index].textAnchor),O(n,"dominant-baseline",m=e.parsedTextAnchorPointObject[e.$index].dominantBaseline),this.first=n},m(t,e){x(t,n,e),M(n,i)},p(t,e){(t.textObject||t.indexArray)&&k!==(k=e.textObject[e.$index])&&$(i,k),(t.$tr_screenGeometryObject||t.indexArray)&&r!==(r=e.$tr_screenGeometryObject[e.$index].coordinates[0])&&O(n,"x",r),(t.$tr_screenGeometryObject||t.indexArray)&&o!==(o=e.$tr_screenGeometryObject[e.$index].coordinates[1])&&O(n,"y",o),(t.$tr_fillObject||t.indexArray)&&s!==(s=e.$tr_fillObject[e.$index])&&O(n,"fill",s),(t.$tr_strokeObject||t.indexArray)&&a!==(a=e.$tr_strokeObject[e.$index])&&O(n,"stroke",a),(t.$tr_strokeWidthObject||t.indexArray)&&h!==(h=e.$tr_strokeWidthObject[e.$index])&&O(n,"stroke-width",h),(t.$tr_fillOpacityObject||t.indexArray)&&c!==(c=e.$tr_fillOpacityObject[e.$index])&&O(n,"fill-opacity",c),(t.$tr_strokeOpacityObject||t.indexArray)&&u!==(u=e.$tr_strokeOpacityObject[e.$index])&&O(n,"stroke-opacity",u),(t.$tr_opacityObject||t.indexArray)&&l!==(l=e.$tr_opacityObject[e.$index])&&O(n,"opacity",l),t.indexArray&&f!==(f=e.rotateTransformObject[e.$index])&&O(n,"transform",f),(t.fontFamilyObject||t.indexArray)&&d!==(d=e.fontFamilyObject[e.$index])&&O(n,"font-family",d),(t.$tr_fontSizeObject||t.indexArray)&&p!==(p=e.$tr_fontSizeObject[e.$index]+" px")&&O(n,"font-size",p),(t.$tr_fontWeightObject||t.indexArray)&&y!==(y=e.$tr_fontWeightObject[e.$index])&&O(n,"font-weight",y),t.indexArray&&g!==(g=e.parsedTextAnchorPointObject[e.$index].textAnchor)&&O(n,"text-anchor",g),t.indexArray&&m!==(m=e.parsedTextAnchorPointObject[e.$index].dominantBaseline)&&O(n,"dominant-baseline",m)},d(t){t&&v(n)}}}function hc(e){var n,i="svg"===e.$graphicContext.output()&&ec(e);return{c(){i&&i.c(),n=w()},m(t,e){i&&i.m(t,e),x(t,n,e)},p(t,e){"svg"===e.$graphicContext.output()?i?i.p(t,e):((i=ec(e)).c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:t,o:t,d(t){i&&i.d(t),t&&v(n)}}}let cc=0;function uc(e,n,i){let r,o,s,a,c,u,l,f,d,p,y,g,m,M,x,v,_=t,b=()=>{_(),_=te.subscribe(t=>{i("$tr_screenGeometryObject",a=t)})},k=t,w=()=>{k(),k=ee.subscribe(t=>{i("$tr_radiusObject",c=t)})},O=t,$=()=>{O(),O=ne.subscribe(t=>{i("$tr_fillObject",u=t)})},C=t,P=()=>{C(),C=ie.subscribe(t=>{i("$tr_strokeObject",l=t)})},N=t,I=()=>{N(),N=re.subscribe(t=>{i("$tr_strokeWidthObject",f=t)})},T=t,W=()=>{T(),T=oe.subscribe(t=>{i("$tr_strokeOpacityObject",d=t)})},R=t,q=()=>{R(),R=se.subscribe(t=>{i("$tr_fillOpacityObject",p=t)})},G=t,z=()=>{G(),G=ae.subscribe(t=>{i("$tr_opacityObject",y=t)})},L=t,F=()=>{L(),L=he.subscribe(t=>{i("$tr_fontSizeObject",g=t)})},D=t,Y=()=>{D(),D=ce.subscribe(t=>{i("$tr_fontWeightObject",m=t)})},U=t,B=()=>{U(),U=ue.subscribe(t=>{i("$tr_rotationObject",M=t)})};e.$$.on_destroy.push(()=>_()),e.$$.on_destroy.push(()=>k()),e.$$.on_destroy.push(()=>O()),e.$$.on_destroy.push(()=>C()),e.$$.on_destroy.push(()=>N()),e.$$.on_destroy.push(()=>T()),e.$$.on_destroy.push(()=>R()),e.$$.on_destroy.push(()=>G()),e.$$.on_destroy.push(()=>L()),e.$$.on_destroy.push(()=>D()),e.$$.on_destroy.push(()=>U());let X="layer"+cc++,H=!0;const Q=()=>!H;let{type:Z,x:J,y:V,x1:K,x2:tt,y1:et,y2:nt,geometry:it,radius:ot,fill:st,stroke:ht,strokeWidth:ct,strokeOpacity:ut,fillOpacity:lt,opacity:dt,text:pt,fontFamily:yt,fontSize:mt,fontWeight:Mt,rotation:xt,anchorPoint:vt,transition:_t,onClick:bt,onHover:kt,onMouseout:wt,index:Ot,interpolate:$t,_asPolygon:Ct=!0}=n,Pt=qa(Z,{x:J,y:V,x1:K,x2:tt,y1:et,y2:nt,geometry:it,radius:ot,fill:st,stroke:ht,strokeWidth:ct,strokeOpacity:ut,fillOpacity:lt,opacity:dt,text:pt,fontFamily:yt,fontSize:mt,fontWeight:Mt,rotation:xt,anchorPoint:vt}),At={x:J,y:V,x1:K,x2:tt,y1:et,y2:nt,geometry:it},Et=fh[Z],jt=yh[Z];const St=rt();h(e,St,t=>{i("$graphicContext",v=t)});const Nt=at();h(e,Nt,t=>{i("$sectionContext",r=t)});const It=Es();h(e,It,t=>{i("$coordinateTransformationContext",o=t)});const Tt=ft();h(e,Tt,t=>{i("$interactionManagerContext",x=t)});const Wt=gt();let Rt,qt,Gt,zt;h(e,Wt,t=>{i("$zoomContext",s=t)}),ve(),_e();let Lt=Jh(Pt.radius,Rt),Ft=Jh(Pt.fill,Rt),Dt=Jh(Pt.stroke,Rt),Yt=Jh(Pt.strokeWidth,Rt),Ut=Jh(Pt.strokeOpacity,Rt),Bt=Jh(Pt.fillOpacity,Rt),Xt=Jh(Pt.opacity,Rt),Ht=Jh(Pt.text,Rt),Qt=Jh(Pt.fontFamily,Rt),Zt=Jh(Pt.fontSize,Rt),Jt=Jh(Pt.fontWeight,Rt),Vt=Jh(Pt.rotation,Rt),Kt=Jh(Pt.anchorPoint,Rt);be();let te=Oh("geometry",zt,_t);b();let ee=Oh("radius",Lt,_t);w();let ne=Oh("fill",Ft,_t);$();let ie=Oh("stroke",Dt,_t);P();let re=Oh("strokeWidth",Yt,_t);I();let oe=Oh("strokeOpacity",Ut,_t);W();let se=Oh("fillOpacity",Bt,_t);q();let ae=Oh("opacity",Xt,_t);z();let he=Oh("fontSize",Zt,_t);F();let ce=Oh("fontWeight",Jt,_t);Y();let ue=Oh("rotation",Vt,_t);B();let le,fe,de=Me(),pe=xe(),ye=!1,ge=!1,me=!1;function Me(){const t={};for(let e=0;e<Rt.length;e++){const n=Rt[e];t[n]=`rotate(${M[n]}, ${a[n].coordinates[0]}, ${a[n].coordinates[1]})`}return t}function xe(){const t={};for(let e=0;e<Rt.length;e++){const n=Rt[e];t[n]=Eh(Kt[n])}return t}function ve(){let t=Et(At,r,o,Ot,$t);i("indexArray",Rt=t.indexArray),qt=t.coordSysGeometryObject}function _e(){Gt=s?Pn(qt,s):qt}function be(){zt=Ct?jt(Gt,{radiusObject:Lt}):Gt}function ke(){we(),fe&&(x.loadLayer(Z,function(t,e,n,i,r){const o={layerId:e,indexArray:n};let s;return"Point"===t&&(s={pixelGeometryObject:i.pixelGeometryObject,radiusObject:r.radiusObject}),"Label"===t&&(s={pixelGeometryObject:i.pixelGeometryObject,radiusObject:r.fontSizeObject}),"Rectangle"===t&&(s={screenGeometryObject:i.screenGeometryObject}),"Polygon"===t&&(s={screenGeometryObject:i.screenGeometryObject}),o.layerAttributes=s,o}(Z,X,Rt,{pixelGeometryObject:Gt,screenGeometryObject:zt},{radiusObject:Lt})),bt&&x.addLayerInteraction("click",X,bt),kt&&x.addLayerInteraction("mouseover",X,kt),wt&&x.addLayerInteraction("mouseout",X,wt))}function we(){x.layerIsLoaded(X)&&(x.removeAllLayerInteractions(X),x.removeLayer(X))}return A(()=>{bh(le,_t)||(le=_t,te=Oh("geometry",a,_t),b(),i("tr_screenGeometryObject",te),ee=Oh("radius",c,_t),w(),i("tr_radiusObject",ee),ne=Oh("fill",u,_t),$(),i("tr_fillObject",ne),ie=Oh("stroke",l,_t),P(),i("tr_strokeObject",ie),re=Oh("strokeWidth",f,_t),I(),i("tr_strokeWidthObject",re),oe=Oh("strokeOpacity",d,_t),W(),i("tr_strokeOpacityObject",oe),se=Oh("fillOpacity",p,_t),q(),i("tr_fillOpacityObject",se),ae=Oh("opacity",y,_t),z(),i("tr_opacityObject",ae),he=Oh("fontSize",g,_t),F(),i("tr_fontSizeObject",he),ce=Oh("fontWeight",m,_t),Y(),i("tr_fontWeightObject",ce),ue=Oh("rotation",M,_t),B(),i("tr_rotationObject",ue)),ye&&ve(),ge&&_e(),me&&(be(),te.set(zt),ke()),ye=!1,ge=!1,me=!1}),j(()=>{H=!1}),E(()=>{ke()}),S(()=>{we()}),e.$set=t=>{"type"in t&&i("type",Z=t.type),"x"in t&&i("x",J=t.x),"y"in t&&i("y",V=t.y),"x1"in t&&i("x1",K=t.x1),"x2"in t&&i("x2",tt=t.x2),"y1"in t&&i("y1",et=t.y1),"y2"in t&&i("y2",nt=t.y2),"geometry"in t&&i("geometry",it=t.geometry),"radius"in t&&i("radius",ot=t.radius),"fill"in t&&i("fill",st=t.fill),"stroke"in t&&i("stroke",ht=t.stroke),"strokeWidth"in t&&i("strokeWidth",ct=t.strokeWidth),"strokeOpacity"in t&&i("strokeOpacity",ut=t.strokeOpacity),"fillOpacity"in t&&i("fillOpacity",lt=t.fillOpacity),"opacity"in t&&i("opacity",dt=t.opacity),"text"in t&&i("text",pt=t.text),"fontFamily"in t&&i("fontFamily",yt=t.fontFamily),"fontSize"in t&&i("fontSize",mt=t.fontSize),"fontWeight"in t&&i("fontWeight",Mt=t.fontWeight),"rotation"in t&&i("rotation",xt=t.rotation),"anchorPoint"in t&&i("anchorPoint",vt=t.anchorPoint),"transition"in t&&i("transition",_t=t.transition),"onClick"in t&&i("onClick",bt=t.onClick),"onHover"in t&&i("onHover",kt=t.onHover),"onMouseout"in t&&i("onMouseout",wt=t.onMouseout),"index"in t&&i("index",Ot=t.index),"interpolate"in t&&i("interpolate",$t=t.interpolate),"_asPolygon"in t&&i("_asPolygon",Ct=t._asPolygon)},e.$$.update=(t={type:1,x:1,y:1,x1:1,x2:1,y1:1,y2:1,geometry:1,radius:1,fill:1,stroke:1,strokeWidth:1,strokeOpacity:1,fillOpacity:1,opacity:1,text:1,fontFamily:1,fontSize:1,fontWeight:1,rotation:1,anchorPoint:1,positioningAesthetics:1,$sectionContext:1,$coordinateTransformationContext:1,index:1,interpolate:1,$zoomContext:1,_asPolygon:1,aesthetics:1,indexArray:1,tr_radiusObject:1,radiusObject:1,tr_strokeWidthObject:1,strokeWidthObject:1,tr_fillObject:1,tr_strokeObject:1,tr_strokeOpacityObject:1,tr_fillOpacityObject:1,tr_opacityObject:1,tr_fontSizeObject:1,tr_fontWeightObject:1,tr_rotationObject:1,onClick:1,onHover:1,onMouseout:1})=>{(t.type||t.x||t.y||t.x1||t.x2||t.y1||t.y2||t.geometry||t.radius||t.fill||t.stroke||t.strokeWidth||t.strokeOpacity||t.fillOpacity||t.opacity||t.text||t.fontFamily||t.fontSize||t.fontWeight||t.rotation||t.anchorPoint)&&Q()&&i("aesthetics",Pt=qa(Z,{x:J,y:V,x1:K,x2:tt,y1:et,y2:nt,geometry:it,radius:ot,fill:st,stroke:ht,strokeWidth:ct,strokeOpacity:ut,fillOpacity:lt,opacity:dt,text:pt,fontFamily:yt,fontSize:mt,fontWeight:Mt,rotation:xt,anchorPoint:vt})),(t.x||t.y||t.x1||t.x2||t.y1||t.y2||t.geometry)&&Q()&&i("positioningAesthetics",At={x:J,y:V,x1:K,x2:tt,y1:et,y2:nt,geometry:it}),t.type&&Q()&&(Et=fh[Z],jt=yh[Z]),(t.positioningAesthetics||t.$sectionContext||t.$coordinateTransformationContext||t.index||t.interpolate)&&Q()&&(ye=!0,ge=!0,me=!0),t.$zoomContext&&Q()&&(ge=!0,me=!0),(t._asPolygon||t.aesthetics||t.indexArray||t.tr_radiusObject||t.radiusObject||t.tr_strokeWidthObject||t.strokeWidthObject)&&Q()&&(Ct||(i("radiusObject",Lt=Jh(Pt.radius,Rt)),ee.set(Lt),i("strokeWidthObject",Yt=Jh(Pt.strokeWidth,Rt)),re.set(Yt)),Ct&&(me=!0)),(t.tr_fillObject||t.aesthetics||t.indexArray)&&Q()&&ne.set(Jh(Pt.fill,Rt)),(t.tr_strokeObject||t.aesthetics||t.indexArray)&&Q()&&ie.set(Jh(Pt.stroke,Rt)),(t.tr_strokeOpacityObject||t.aesthetics||t.indexArray)&&Q()&&oe.set(Jh(Pt.strokeOpacity,Rt)),(t.tr_fillOpacityObject||t.aesthetics||t.indexArray)&&Q()&&se.set(Jh(Pt.fillOpacity,Rt)),(t.tr_opacityObject||t.aesthetics||t.indexArray)&&Q()&&ae.set(Jh(Pt.opacity,Rt)),(t.tr_fontSizeObject||t.aesthetics||t.indexArray)&&Q()&&he.set(Jh(Pt.fontSize,Rt)),(t.tr_fontWeightObject||t.aesthetics||t.indexArray)&&Q()&&ce.set(Jh(Pt.fontWeight,Rt)),(t.tr_rotationObject||t.aesthetics||t.indexArray)&&Q()&&ue.set(Jh(Pt.rotation,Rt)),(t.aesthetics||t.indexArray)&&Q()&&i("textObject",Ht=Jh(Pt.text,Rt)),(t.aesthetics||t.indexArray)&&Q()&&i("fontFamilyObject",Qt=Jh(Pt.fontFamily,Rt)),(t.aesthetics||t.indexArray)&&Q()&&(Kt=Jh(Pt.anchorPoint,Rt)),(t.onClick||t.onHover||t.onMouseout)&&(fe=void 0!==bt||void 0!==kt||void 0!==wt)},Q()&&(rotateTransform=Me()),Q()&&(parsedTextAnchorPoint=xe()),{type:Z,x:J,y:V,x1:K,x2:tt,y1:et,y2:nt,geometry:it,radius:ot,fill:st,stroke:ht,strokeWidth:ct,strokeOpacity:ut,fillOpacity:lt,opacity:dt,text:pt,fontFamily:yt,fontSize:mt,fontWeight:Mt,rotation:xt,anchorPoint:vt,transition:_t,onClick:bt,onHover:kt,onMouseout:wt,index:Ot,interpolate:$t,_asPolygon:Ct,graphicContext:St,sectionContext:Nt,coordinateTransformationContext:It,interactionManagerContext:Tt,zoomContext:Wt,indexArray:Rt,textObject:Ht,fontFamilyObject:Qt,tr_screenGeometryObject:te,tr_radiusObject:ee,tr_fillObject:ne,tr_strokeObject:ie,tr_strokeWidthObject:re,tr_strokeOpacityObject:oe,tr_fillOpacityObject:se,tr_opacityObject:ae,tr_fontSizeObject:he,tr_fontWeightObject:ce,tr_rotationObject:ue,rotateTransformObject:de,parsedTextAnchorPointObject:pe,$tr_screenGeometryObject:a,$tr_radiusObject:c,$tr_fillObject:u,$tr_strokeObject:l,$tr_strokeWidthObject:f,$tr_strokeOpacityObject:d,$tr_fillOpacityObject:p,$tr_opacityObject:y,$tr_fontSizeObject:g,$tr_fontWeightObject:m,$graphicContext:v}}class lc extends tt{constructor(t){super(),K(this,t,uc,hc,a,["type","x","y","x1","x2","y1","y2","geometry","radius","fill","stroke","strokeWidth","strokeOpacity","fillOpacity","opacity","text","fontFamily","fontSize","fontWeight","rotation","anchorPoint","transition","onClick","onHover","onMouseout","index","interpolate","_asPolygon"])}}function fc(t){var e,n=new lc({props:{type:"Point",x:t.x,y:t.y,geometry:t.geometry,radius:t.radius,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,fillOpacity:t.fillOpacity,opacity:t.opacity,transition:t.transition,onClick:t.onClick,onHover:t.onHover,onMouseout:t.onMouseout,index:t.index,_asPolygon:!1}});return{c(){n.$$.fragment.c()},m(t,i){Z(n,t,i),e=!0},p(t,e){var i={};t.x&&(i.x=e.x),t.y&&(i.y=e.y),t.geometry&&(i.geometry=e.geometry),t.radius&&(i.radius=e.radius),t.fill&&(i.fill=e.fill),t.stroke&&(i.stroke=e.stroke),t.strokeWidth&&(i.strokeWidth=e.strokeWidth),t.strokeOpacity&&(i.strokeOpacity=e.strokeOpacity),t.fillOpacity&&(i.fillOpacity=e.fillOpacity),t.opacity&&(i.opacity=e.opacity),t.transition&&(i.transition=e.transition),t.onClick&&(i.onClick=e.onClick),t.onHover&&(i.onHover=e.onHover),t.onMouseout&&(i.onMouseout=e.onMouseout),t.index&&(i.index=e.index),n.$set(i)},i(t){e||(B(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}function dc(t,e,n){let{x:i,y:r,geometry:o,radius:s,fill:a,stroke:h,strokeWidth:c,strokeOpacity:u,fillOpacity:l,opacity:f,transition:d,onClick:p,onHover:y,onMouseout:g,index:m}=e;return t.$set=t=>{"x"in t&&n("x",i=t.x),"y"in t&&n("y",r=t.y),"geometry"in t&&n("geometry",o=t.geometry),"radius"in t&&n("radius",s=t.radius),"fill"in t&&n("fill",a=t.fill),"stroke"in t&&n("stroke",h=t.stroke),"strokeWidth"in t&&n("strokeWidth",c=t.strokeWidth),"strokeOpacity"in t&&n("strokeOpacity",u=t.strokeOpacity),"fillOpacity"in t&&n("fillOpacity",l=t.fillOpacity),"opacity"in t&&n("opacity",f=t.opacity),"transition"in t&&n("transition",d=t.transition),"onClick"in t&&n("onClick",p=t.onClick),"onHover"in t&&n("onHover",y=t.onHover),"onMouseout"in t&&n("onMouseout",g=t.onMouseout),"index"in t&&n("index",m=t.index)},{x:i,y:r,geometry:o,radius:s,fill:a,stroke:h,strokeWidth:c,strokeOpacity:u,fillOpacity:l,opacity:f,transition:d,onClick:p,onHover:y,onMouseout:g,index:m}}class pc extends tt{constructor(t){super(),K(this,t,dc,fc,a,["x","y","geometry","radius","fill","stroke","strokeWidth","strokeOpacity","fillOpacity","opacity","transition","onClick","onHover","onMouseout","index"])}}function yc(t){var e,n=new lc({props:{type:"Rectangle",x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,fillOpacity:t.fillOpacity,opacity:t.opacity,transition:t.transition,onClick:t.onClick,onHover:t.onHover,onMouseout:t.onMouseout,index:t.index,interpolate:t.interpolate}});return{c(){n.$$.fragment.c()},m(t,i){Z(n,t,i),e=!0},p(t,e){var i={};t.x1&&(i.x1=e.x1),t.x2&&(i.x2=e.x2),t.y1&&(i.y1=e.y1),t.y2&&(i.y2=e.y2),t.fill&&(i.fill=e.fill),t.stroke&&(i.stroke=e.stroke),t.strokeWidth&&(i.strokeWidth=e.strokeWidth),t.strokeOpacity&&(i.strokeOpacity=e.strokeOpacity),t.fillOpacity&&(i.fillOpacity=e.fillOpacity),t.opacity&&(i.opacity=e.opacity),t.transition&&(i.transition=e.transition),t.onClick&&(i.onClick=e.onClick),t.onHover&&(i.onHover=e.onHover),t.onMouseout&&(i.onMouseout=e.onMouseout),t.index&&(i.index=e.index),t.interpolate&&(i.interpolate=e.interpolate),n.$set(i)},i(t){e||(B(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}function gc(t,e,n){let{x1:i,x2:r,y1:o,y2:s,fill:a,stroke:h,strokeWidth:c,strokeOpacity:u,fillOpacity:l,opacity:f,transition:d,onClick:p,onHover:y,onMouseout:g,index:m,interpolate:M=!0}=e;return t.$set=t=>{"x1"in t&&n("x1",i=t.x1),"x2"in t&&n("x2",r=t.x2),"y1"in t&&n("y1",o=t.y1),"y2"in t&&n("y2",s=t.y2),"fill"in t&&n("fill",a=t.fill),"stroke"in t&&n("stroke",h=t.stroke),"strokeWidth"in t&&n("strokeWidth",c=t.strokeWidth),"strokeOpacity"in t&&n("strokeOpacity",u=t.strokeOpacity),"fillOpacity"in t&&n("fillOpacity",l=t.fillOpacity),"opacity"in t&&n("opacity",f=t.opacity),"transition"in t&&n("transition",d=t.transition),"onClick"in t&&n("onClick",p=t.onClick),"onHover"in t&&n("onHover",y=t.onHover),"onMouseout"in t&&n("onMouseout",g=t.onMouseout),"index"in t&&n("index",m=t.index),"interpolate"in t&&n("interpolate",M=t.interpolate)},{x1:i,x2:r,y1:o,y2:s,fill:a,stroke:h,strokeWidth:c,strokeOpacity:u,fillOpacity:l,opacity:f,transition:d,onClick:p,onHover:y,onMouseout:g,index:m,interpolate:M}}class mc extends tt{constructor(t){super(),K(this,t,gc,yc,a,["x1","x2","y1","y2","fill","stroke","strokeWidth","strokeOpacity","fillOpacity","opacity","transition","onClick","onHover","onMouseout","index","interpolate"])}}function Mc(t){var e,n=new lc({props:{type:"Polygon",x:t.x,y:t.y,geometry:t.geometry,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,fillOpacity:t.fillOpacity,opacity:t.opacity,transition:t.transition,onClick:t.onClick,onHover:t.onHover,onMouseout:t.onMouseout,index:t.index,interpolate:t.interpolate}});return{c(){n.$$.fragment.c()},m(t,i){Z(n,t,i),e=!0},p(t,e){var i={};t.x&&(i.x=e.x),t.y&&(i.y=e.y),t.geometry&&(i.geometry=e.geometry),t.fill&&(i.fill=e.fill),t.stroke&&(i.stroke=e.stroke),t.strokeWidth&&(i.strokeWidth=e.strokeWidth),t.strokeOpacity&&(i.strokeOpacity=e.strokeOpacity),t.fillOpacity&&(i.fillOpacity=e.fillOpacity),t.opacity&&(i.opacity=e.opacity),t.transition&&(i.transition=e.transition),t.onClick&&(i.onClick=e.onClick),t.onHover&&(i.onHover=e.onHover),t.onMouseout&&(i.onMouseout=e.onMouseout),t.index&&(i.index=e.index),t.interpolate&&(i.interpolate=e.interpolate),n.$set(i)},i(t){e||(B(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}function xc(t,e,n){let{x:i,y:r,geometry:o,fill:s,stroke:a,strokeWidth:h,strokeOpacity:c,fillOpacity:u,opacity:l,transition:f,onClick:d,onHover:p,onMouseout:y,interpolate:g=!1,index:m}=e;return t.$set=t=>{"x"in t&&n("x",i=t.x),"y"in t&&n("y",r=t.y),"geometry"in t&&n("geometry",o=t.geometry),"fill"in t&&n("fill",s=t.fill),"stroke"in t&&n("stroke",a=t.stroke),"strokeWidth"in t&&n("strokeWidth",h=t.strokeWidth),"strokeOpacity"in t&&n("strokeOpacity",c=t.strokeOpacity),"fillOpacity"in t&&n("fillOpacity",u=t.fillOpacity),"opacity"in t&&n("opacity",l=t.opacity),"transition"in t&&n("transition",f=t.transition),"onClick"in t&&n("onClick",d=t.onClick),"onHover"in t&&n("onHover",p=t.onHover),"onMouseout"in t&&n("onMouseout",y=t.onMouseout),"interpolate"in t&&n("interpolate",g=t.interpolate),"index"in t&&n("index",m=t.index)},{x:i,y:r,geometry:o,fill:s,stroke:a,strokeWidth:h,strokeOpacity:c,fillOpacity:u,opacity:l,transition:f,onClick:d,onHover:p,onMouseout:y,interpolate:g,index:m}}class vc extends tt{constructor(t){super(),K(this,t,xc,Mc,a,["x","y","geometry","fill","stroke","strokeWidth","strokeOpacity","fillOpacity","opacity","transition","onClick","onHover","onMouseout","interpolate","index"])}}function _c(t){var e,n=new lc({props:{type:"Label",x:t.x,y:t.y,geometry:t.geometry,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,fillOpacity:t.fillOpacity,opacity:t.opacity,text:t.text,fontFamily:t.fontFamily,fontSize:t.fontSize,fontWeight:t.fontWeight,rotation:t.rotation,anchorPoint:t.anchorPoint,transition:t.transition,onClick:t.onClick,onHover:t.onHover,onMouseout:t.onMouseout,index:t.index,_asPolygon:!1}});return{c(){n.$$.fragment.c()},m(t,i){Z(n,t,i),e=!0},p(t,e){var i={};t.x&&(i.x=e.x),t.y&&(i.y=e.y),t.geometry&&(i.geometry=e.geometry),t.fill&&(i.fill=e.fill),t.stroke&&(i.stroke=e.stroke),t.strokeWidth&&(i.strokeWidth=e.strokeWidth),t.strokeOpacity&&(i.strokeOpacity=e.strokeOpacity),t.fillOpacity&&(i.fillOpacity=e.fillOpacity),t.opacity&&(i.opacity=e.opacity),t.text&&(i.text=e.text),t.fontFamily&&(i.fontFamily=e.fontFamily),t.fontSize&&(i.fontSize=e.fontSize),t.fontWeight&&(i.fontWeight=e.fontWeight),t.rotation&&(i.rotation=e.rotation),t.anchorPoint&&(i.anchorPoint=e.anchorPoint),t.transition&&(i.transition=e.transition),t.onClick&&(i.onClick=e.onClick),t.onHover&&(i.onHover=e.onHover),t.onMouseout&&(i.onMouseout=e.onMouseout),t.index&&(i.index=e.index),n.$set(i)},i(t){e||(B(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}function bc(t,e,n){let{x:i,y:r,geometry:o,fill:s,stroke:a,strokeWidth:h,strokeOpacity:c,fillOpacity:u,opacity:l,text:f,fontFamily:d,fontSize:p,fontWeight:y,rotation:g,anchorPoint:m,transition:M,onClick:x,onHover:v,onMouseout:_,index:b}=e;return t.$set=t=>{"x"in t&&n("x",i=t.x),"y"in t&&n("y",r=t.y),"geometry"in t&&n("geometry",o=t.geometry),"fill"in t&&n("fill",s=t.fill),"stroke"in t&&n("stroke",a=t.stroke),"strokeWidth"in t&&n("strokeWidth",h=t.strokeWidth),"strokeOpacity"in t&&n("strokeOpacity",c=t.strokeOpacity),"fillOpacity"in t&&n("fillOpacity",u=t.fillOpacity),"opacity"in t&&n("opacity",l=t.opacity),"text"in t&&n("text",f=t.text),"fontFamily"in t&&n("fontFamily",d=t.fontFamily),"fontSize"in t&&n("fontSize",p=t.fontSize),"fontWeight"in t&&n("fontWeight",y=t.fontWeight),"rotation"in t&&n("rotation",g=t.rotation),"anchorPoint"in t&&n("anchorPoint",m=t.anchorPoint),"transition"in t&&n("transition",M=t.transition),"onClick"in t&&n("onClick",x=t.onClick),"onHover"in t&&n("onHover",v=t.onHover),"onMouseout"in t&&n("onMouseout",_=t.onMouseout),"index"in t&&n("index",b=t.index)},{x:i,y:r,geometry:o,fill:s,stroke:a,strokeWidth:h,strokeOpacity:c,fillOpacity:u,opacity:l,text:f,fontFamily:d,fontSize:p,fontWeight:y,rotation:g,anchorPoint:m,transition:M,onClick:x,onHover:v,onMouseout:_,index:b}}class kc extends tt{constructor(t){super(),K(this,t,bc,_c,a,["x","y","geometry","fill","stroke","strokeWidth","strokeOpacity","fillOpacity","opacity","text","fontFamily","fontSize","fontWeight","rotation","anchorPoint","transition","onClick","onHover","onMouseout","index"])}}var wc,Oc="undefined"!=typeof Symbol?Symbol("immer-nothing"):((wc={})["immer-nothing"]=!0,wc),$c="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("immer-draftable"):"__$immer_draftable",Cc="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("immer-state"):"__$immer_state";function Pc(t){return!!t&&!!t[Cc]}function Ac(t){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t))return!0;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype||(!!t[$c]||!!t.constructor[$c])}var Ec=Object.assign||function(t,e){for(var n in e)Tc(e,n)&&(t[n]=e[n]);return t},jc="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function Sc(t,e){if(void 0===e&&(e=!1),Array.isArray(t))return t.slice();var n=Object.create(Object.getPrototypeOf(t));return jc(t).forEach(function(i){if(i!==Cc){var r=Object.getOwnPropertyDescriptor(t,i),o=r.value;if(r.get){if(!e)throw new Error("Immer drafts cannot have computed properties");o=r.get.call(t)}r.enumerable?n[i]=o:Object.defineProperty(n,i,{value:o,writable:!0,configurable:!0})}}),n}function Nc(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(n,t[n],t);else jc(t).forEach(function(n){return e(n,t[n],t)})}function Ic(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!!n&&n.enumerable}function Tc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Wc(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Rc=function(t){this.drafts=[],this.parent=t,this.canAutoFreeze=!0,this.patches=null};function qc(t){t[Cc].revoke()}Rc.prototype.usePatches=function(t){t&&(this.patches=[],this.inversePatches=[],this.patchListener=t)},Rc.prototype.revoke=function(){this.leave(),this.drafts.forEach(qc),this.drafts=null},Rc.prototype.leave=function(){this===Rc.current&&(Rc.current=this.parent)},Rc.current=null,Rc.enter=function(){return this.current=new Rc(this.current)};var Gc={};function zc(t,e){var n=Array.isArray(t),i=Bc(t);Nc(i,function(e){!function(t,e,n){var i=Gc[e];i?i.enumerable=n:Gc[e]=i={configurable:!0,enumerable:n,get:function(){return function(t,e){Xc(t);var n=Dc(Fc(t),e);if(t.finalizing)return n;if(n===Dc(t.base,e)&&Ac(n))return Uc(t),t.copy[e]=zc(n,t);return n}(this[Cc],e)},set:function(t){!function(t,e,n){if(Xc(t),t.assigned[e]=!0,!t.modified){if(Wc(n,Dc(Fc(t),e)))return;Yc(t),Uc(t)}t.copy[e]=n}(this[Cc],e,t)}};Object.defineProperty(t,e,i)}(i,e,n||Ic(t,e))});var r,o,s,a=e?e.scope:Rc.current;return r=i,o=Cc,s={scope:a,modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:e,base:t,draft:i,copy:null,revoke:Lc,revoked:!1},Object.defineProperty(r,o,{value:s,enumerable:!1,writable:!0}),a.drafts.push(i),i}function Lc(){this.revoked=!0}function Fc(t){return t.copy||t.base}function Dc(t,e){var n=t[Cc];if(n&&!n.finalizing){n.finalizing=!0;var i=t[e];return n.finalizing=!1,i}return t[e]}function Yc(t){t.modified||(t.modified=!0,t.parent&&Yc(t.parent))}function Uc(t){t.copy||(t.copy=Bc(t.base))}function Bc(t){var e=t&&t[Cc];if(e){e.finalizing=!0;var n=Sc(e.draft,!0);return e.finalizing=!1,n}return Sc(t)}function Xc(t){if(!0===t.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(Fc(t)))}function Hc(t){for(var e=t.length-1;e>=0;e--){var n=t[e][Cc];n.modified||(Array.isArray(n.base)?Zc(n)&&Yc(n):Qc(n)&&Yc(n))}}function Qc(t){for(var e=t.base,n=t.draft,i=Object.keys(n),r=i.length-1;r>=0;r--){var o=i[r],s=e[o];if(void 0===s&&!Tc(e,o))return!0;var a=n[o],h=a&&a[Cc];if(h?h.base!==s:!Wc(a,s))return!0}return i.length!==Object.keys(e).length}function Zc(t){var e=t.draft;if(e.length!==t.base.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);return!(!n||n.get)}var Jc=Object.freeze({willFinalize:function(t,e,n){t.drafts.forEach(function(t){t[Cc].finalizing=!0}),n?Pc(e)&&e[Cc].scope===t&&Hc(t.drafts):(t.patches&&function t(e){if(e&&"object"==typeof e){var n=e[Cc];if(n){var i=n.base,r=n.draft,o=n.assigned;if(Array.isArray(e)){if(Zc(n)){if(Yc(n),o.length=!0,r.length<i.length)for(var s=r.length;s<i.length;s++)o[s]=!1;else for(var a=i.length;a<r.length;a++)o[a]=!0;for(var h=0;h<r.length;h++)void 0===o[h]&&t(r[h])}}else Object.keys(r).forEach(function(e){void 0!==i[e]||Tc(i,e)?o[e]||t(r[e]):(o[e]=!0,Yc(n))}),Object.keys(i).forEach(function(t){void 0!==r[t]||Tc(r,t)||(o[t]=!1,Yc(n))})}}}(t.drafts[0]),Hc(t.drafts))},createProxy:zc});function Vc(t,e){var n=e?e.scope:Rc.current,i={scope:n,modified:!1,finalized:!1,assigned:{},parent:e,base:t,draft:null,drafts:{},copy:null,revoke:null},r=Array.isArray(t)?Proxy.revocable([i],tu):Proxy.revocable(i,Kc),o=r.revoke,s=r.proxy;return i.draft=s,i.revoke=o,n.drafts.push(s),s}var Kc={get:function(t,e){if(e===Cc)return t;var n=t.drafts;if(!t.modified&&Tc(n,e))return n[e];var i=eu(t)[e];if(t.finalized||!Ac(i))return i;if(t.modified){if(i!==nu(t.base,e))return i;n=t.copy}return n[e]=Vc(i,t)},has:function(t,e){return e in eu(t)},ownKeys:function(t){return Reflect.ownKeys(eu(t))},set:function(t,e,n){if(!t.modified){var i=nu(t.base,e),r=n?Wc(i,n)||n===t.drafts[e]:Wc(i,n)&&e in t.base;if(r)return!0;iu(t)}return t.assigned[e]=!0,t.copy[e]=n,!0},deleteProperty:function(t,e){(void 0!==nu(t.base,e)||e in t.base)&&(t.assigned[e]=!1,iu(t));t.copy&&delete t.copy[e];return!0},getOwnPropertyDescriptor:function(t,e){var n=eu(t),i=Reflect.getOwnPropertyDescriptor(n,e);i&&(i.writable=!0,i.configurable=!Array.isArray(n)||"length"!==e);return i},defineProperty:function(){throw new Error("Object.defineProperty() cannot be used on an Immer draft")},getPrototypeOf:function(t){return Object.getPrototypeOf(t.base)},setPrototypeOf:function(){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}},tu={};function eu(t){return t.copy||t.base}function nu(t,e){var n=t[Cc],i=Reflect.getOwnPropertyDescriptor(n?eu(n):t,e);return i&&i.value}function iu(t){t.modified||(t.modified=!0,t.copy=Ec(Sc(t.base),t.drafts),t.drafts=null,t.parent&&iu(t.parent))}Nc(Kc,function(t,e){tu[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),tu.deleteProperty=function(t,e){if(isNaN(parseInt(e)))throw new Error("Immer only supports deleting array indices");return Kc.deleteProperty.call(this,t[0],e)},tu.set=function(t,e,n){if("length"!==e&&isNaN(parseInt(e)))throw new Error("Immer only supports setting array indices and the 'length' property");return Kc.set.call(this,t[0],e,n)};var ru=Object.freeze({willFinalize:function(){},createProxy:Vc});function ou(t,e,n,i){Array.isArray(t.base)?function(t,e,n,i){var r,o,s=t.base,a=t.copy,h=t.assigned;a.length<s.length&&(s=(r=[a,s])[0],a=r[1],n=(o=[i,n])[0],i=o[1]);var c=a.length-s.length,u=0;for(;s[u]===a[u]&&u<s.length;)++u;var l=s.length;for(;l>u&&s[l-1]===a[l+c-1];)--l;for(var f=u;f<l;++f)if(h[f]&&a[f]!==s[f]){var d=e.concat([f]);n.push({op:"replace",path:d,value:a[f]}),i.push({op:"replace",path:d,value:s[f]})}for(var p=l!=s.length,y=n.length,g=l+c-1;g>=l;--g){var m=e.concat([g]);n[y+g-l]={op:"add",path:m,value:a[g]},p&&i.push({op:"remove",path:m})}p||i.push({op:"replace",path:e.concat(["length"]),value:s.length})}(t,e,n,i):function(t,e,n,i){var r=t.base,o=t.copy;Nc(t.assigned,function(t,s){var a=r[t],h=o[t],c=s?t in r?"replace":"add":"remove";if(a!==h||"replace"!==c){var u=e.concat(t);n.push("remove"===c?{op:c,path:u}:{op:c,path:u,value:h}),i.push("add"===c?{op:"remove",path:u}:"remove"===c?{op:"add",path:u,value:a}:{op:"replace",path:u,value:a})}})}(t,e,n,i)}function su(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=i.path;if(0===r.length&&"replace"===i.op)t=i.value;else{for(var o=t,s=0;s<r.length-1;s++)if(!(o=o[r[s]])||"object"!=typeof o)throw new Error("Cannot apply patch, path doesn't resolve: "+r.join("/"));var a=r[r.length-1];switch(i.op){case"replace":o[a]=i.value;break;case"add":Array.isArray(o)?o.splice(a,0,i.value):o[a]=i.value;break;case"remove":Array.isArray(o)?o.splice(a,1):delete o[a];break;default:throw new Error("Unsupported patch operation: "+i.op)}}}return t}var au={useProxies:"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect,autoFreeze:void 0!==_a?"production"!==_a.env.NODE_ENV:"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},hu=function(t){Ec(this,au,t),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this)};hu.prototype.produce=function(t,e,n){var i,r=this;if("function"==typeof t&&"function"!=typeof e){var o=e;e=t;var s=this;return function(t){var n=this;void 0===t&&(t=o);for(var i=[],r=arguments.length-1;r-- >0;)i[r]=arguments[r+1];return s.produce(t,function(t){return e.call.apply(e,[n,t].concat(i))})}}if("function"!=typeof e)throw new Error("The first or second argument to `produce` must be a function");if(void 0!==n&&"function"!=typeof n)throw new Error("The third argument to `produce` must be a function or undefined");if(Ac(t)){var a=Rc.enter(),h=this.createProxy(t),c=!0;try{i=e(h),c=!1}finally{c?a.revoke():a.leave()}return i instanceof Promise?i.then(function(t){return a.usePatches(n),r.processResult(t,a)},function(t){throw a.revoke(),t}):(a.usePatches(n),this.processResult(i,a))}return void 0===(i=e(t))?t:i!==Oc?i:void 0},hu.prototype.createDraft=function(t){if(!Ac(t))throw new Error("First argument to `createDraft` must be a plain object, an array, or an immerable object");var e=Rc.enter(),n=this.createProxy(t);return n[Cc].isManual=!0,e.leave(),n},hu.prototype.finishDraft=function(t,e){var n=t&&t[Cc];if(!n||!n.isManual)throw new Error("First argument to `finishDraft` must be a draft returned by `createDraft`");if(n.finalized)throw new Error("The given draft is already finalized");var i=n.scope;return i.usePatches(e),this.processResult(void 0,i)},hu.prototype.setAutoFreeze=function(t){this.autoFreeze=t},hu.prototype.setUseProxies=function(t){this.useProxies=t,Ec(this,t?ru:Jc)},hu.prototype.applyPatches=function(t,e){return Pc(t)?su(t,e):this.produce(t,function(t){return su(t,e)})},hu.prototype.processResult=function(t,e){var n=e.drafts[0],i=void 0!==t&&t!==n;if(this.willFinalize(e,t,i),i){if(n[Cc].modified)throw e.revoke(),new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");Ac(t)&&(t=this.finalize(t,null,e)),e.patches&&(e.patches.push({op:"replace",path:[],value:t}),e.inversePatches.push({op:"replace",path:[],value:n[Cc].base}))}else t=this.finalize(n,[],e);return e.revoke(),e.patches&&e.patchListener(e.patches,e.inversePatches),t!==Oc?t:void 0},hu.prototype.finalize=function(t,e,n){var i=this,r=t[Cc];if(!r)return Object.isFrozen(t)?t:this.finalizeTree(t,null,n);if(r.scope!==n)return t;if(!r.modified)return r.base;if(!r.finalized){if(r.finalized=!0,this.finalizeTree(r.draft,e,n),this.onDelete)if(this.useProxies){var o=r.assigned;for(var s in o)o[s]||this.onDelete(r,s)}else{var a=r.base,h=r.copy;Nc(a,function(t){Tc(h,t)||i.onDelete(r,t)})}this.onCopy&&this.onCopy(r),this.autoFreeze&&n.canAutoFreeze&&Object.freeze(r.copy),e&&n.patches&&ou(r,e,n.patches,n.inversePatches)}return r.copy},hu.prototype.finalizeTree=function(t,e,n){var i=this,r=t[Cc];r&&(this.useProxies||(r.copy=Sc(r.draft,!0)),t=r.copy);var o=!!e&&!!n.patches,s=function(a,h,c){if(h===c)throw Error("Immer forbids circular references");var u=!!r&&c===t;if(Pc(h)){var l=u&&o&&!r.assigned[a]?e.concat(a):null;if(Pc(h=i.finalize(h,l,n))&&(n.canAutoFreeze=!1),Array.isArray(c)||Ic(c,a)?c[a]=h:Object.defineProperty(c,a,{value:h}),u&&h===r.base[a])return}else{if(u&&Wc(h,r.base[a]))return;Ac(h)&&!Object.isFrozen(h)&&Nc(h,s)}u&&i.onAssign&&i.onAssign(r,a,h)};return Nc(t,s),t};var cu=new hu,uu=cu.produce;cu.setAutoFreeze.bind(cu),cu.setUseProxies.bind(cu),cu.applyPatches.bind(cu),cu.createDraft.bind(cu),cu.finishDraft.bind(cu);function lu(t){du(t,pu)}function fu(t){du(t,gu)}function du(t,e){let n=null;for(let i in t){e(i);let r=t[i];if(0===(n=n||r.length))throw new Error("Invalid data: columns cannot be empty");if(n!==r.length)throw new Error("Invalid data: columns must be of same length")}}function pu(t){if(t.match(yu))throw new Error(`Invalid column name '${t}': '$' and '/' are not allowed'`)}const yu=/[\/$]/;function gu(t){["$index","$geometry","$grouped"].includes(t)||pu(t)}function mu(t){return t[Object.keys(t)[0]].length}function Mu(t){!function(t){if(0===t.length)throw new Error("Received empty Array while trying to load row-oriented data. This is not allowed.")}(t);let e=function(t){let e=t[0],n=Object.keys(e),i={};for(let t of n)i[t]=[];return i}(t);for(let n of t)for(let t in n)e[t].push(n[t]);return e}let xu=-1;const vu={_setColumnData(t){lu(t),this._storeData(t)},_setRowData(t){let e=Mu(t);this._setColumnData(e)},_setGeoJSON(t){let e=function(t){let e=[],n={},i=t.features,r=i[0];if(r.hasOwnProperty("properties"))for(let t in r.properties)n[t]=[];for(let t=0;t<i.length;t++){let{geometry:r,properties:o}=i[t];e.push(r);for(let t in o)n[t].push(o[t])}return lu(n),n.$geometry=e,n}(t);this._storeData(e)},_setTransformableDataContainer(t){let e=t._data;fu(e),this._storeData(e)},_setGroup(t){let e=t.data;fu(e),this._storeData(e)},_storeData(t){this._data=t,this._length=mu(t),this._createIndexColumn(),this._calculateDomainsAndTypes()},_createIndexColumn(){if(!this._data.hasOwnProperty("$index")){let t=new Array(this._length).fill(0).map(t=>++xu);this._data=uu(this._data,e=>{e.$index=t})}for(let t=0;t<this._length;t++){let e=this._data.$index[t];this._indexToRowNumber[e]=t}}};function _u(t,e=!0){return t.constructor===Number?"quantitative":t.constructor===String?"categorical":t.constructor===Date?"temporal":function(t){return t.constructor===Array&&2===t.length&&t.every(t=>t.constructor===Number)}(t)?"interval":function(t){return t.constructor===Object&&t.hasOwnProperty("type")&&t.hasOwnProperty("coordinates")}(t)?"geometry":t.constructor===ap?"nested":void function(t){if(t)throw new Error("Invalid data")}(e)}function bu(t,e){let{firstValidValue:n,nValidValues:i}=function(t){let e,n=0;for(let i=0;i<t.length&&(nn(t[i])||(n++,e=e||t[i]),!(n>1));i++);return{firstValidValue:e,nValidValues:n}}(t);if(0===i)throw new Error(`Column '${t}' contains only missing values. This is not allowed.`);if(i>0){let r,o=_u(n);return"$geometry"===e&&(r=function(t){let e=[[1/0,1/0],[-1/0,-1/0]];for(let n=0;n<t.length;n++){const i=t[n];nn(i)||(e=hn(e,i))}return{x:[e[0][0],e[1][0]],y:[e[0][1],e[1][1]]}}(t)),"$geometry"!==e&&(r=function(t,e,n,i,r){let o,s=function(t){let e={};for(let n of t){let t=JSON.stringify(n);e[t]=0}return Object.keys(e).length}(t);o=function(t,e){return 1===t||1===e}(n,s)?function(t,e,n,i,r){let o;1===t?(o=$u(n,i),"categorical"!==n&&ba(`Column '${r}' contains only 1 valid value: ${i}.\n`+`Using domain ${JSON.stringify(o)}`)):1===e&&(o=$u(n,i),"categorical"!==n&&ba(`Column '${r}' contains only 1 unique value: ${i}.\n`+`Using domain ${JSON.stringify(o)}`));return o}(n,s,r,i,e):function(t,e,n){let i=function(t){let e;switch(t){case"quantitative":e=[1/0,-1/0];break;case"categorical":e=[];break;case"temporal":e=[wu,ku];break;case"interval":e=[1/0,-1/0]}return e}(t);for(let r=0;r<e.length;r++){let o=e[r];if(!nn(o)){if(_u(o)!==t)throw new Error(`Invalid column ${n}: column contains multiple data types`);i=Ou(i,o,t)}}return i}(r,t,e);return o}(t,e,i,n,o)),{domain:r,type:o}}}const ku=new Date(0),wu=new Date("19 January 2038");function Ou(t,e,n){if("quantitative"===n&&(t[0]>=e&&(t[0]=e),t[1]<=e&&(t[1]=e)),"categorical"===n&&(t.includes(e)||t.push(e)),"temporal"===n){let n=e.getTime();t[0].getTime()>=n&&(t[0]=e),t[1].getTime()<=n&&(t[1]=e)}return"interval"===n&&(t=Ou(t,e[0],"quantitative"),t=Ou(t,e[1],"quantitative")),t}function $u(t,e){let n;return"quantitative"===t&&(n=[e-1,e+1]),"categorical"===t&&(n=[e]),"temporal"===t&&(n=[Cu(e,-1),Cu(e,1)]),"interval"===t&&(n=e.sort((t,e)=>t>e)),n}function Cu(t,e){let n=new Date(t.getTime());return new Date(n.setDate(n.getDate()+e))}function Pu(t,e){!function t(e,n,i){let r=n.data();let o=e[0];!function(t,e,n){if(!t.hasOwnProperty(e))throw Nu(e,n)}(r,o,i);if(e.length>1){!function(t,e){if("$grouped"!==t)throw Iu(e)}(o,i);let n=Su(e),s=r.$grouped;t(n,s[0],i)}}(t.split("/"),e,t)}function Au(t,e){if(!e.data().hasOwnProperty(t))throw new Error(`Invalid column name: '${t}'`)}function Eu(t,e){return function t(e,n){let i=[];let r=e[0];let o=n.data();1===e.length&&(i=o[r]);if(e.length>1){let n=o[r],s=Su(e);n.forEach(e=>{i.push(t(s,e))})}return i}(t.split("/"),e)}function ju(t,e,n){let i=Eu(t,e);return function t(e,n,i){return 1===e?n.map(i):(e--,n.map(n=>t(e,n,i)))}(t.split("/").length,i,n)}function Su(t){return t.splice(1,t.length-1)}const Nu=(t,e)=>new Error(`Could not find column '${t}' while traversing column path '${e}'`),Iu=t=>new Error(`Invalid column path: '${t}`),Tu={domain(t){return Au(t,this),this._domains[t]},type(t){return Au(t,this),this._types[t]},_calculateDomainsAndTypes(){let{domains:t,types:e}=function(t){let e={},n={};for(let i in t){let r=t[i],{domain:o,type:s}=bu(r,i);e[i]=o,n[i]=s}return{domains:e,types:n}}(this._data);this._domains=t,this._types=e}};function Wu(t,e){let n=mu(t);for(;n--;){let i={};for(let e in t)i[e]=t[e][n];if(!e(i,n))for(let e in t)t[e].splice(n,1)}}const Ru={quantitative:{ascending:(t,e)=>t<e?-1:t>e?1:t>=e?0:NaN,descending:(t,e)=>e<t?-1:e>t?1:e>=t?0:NaN},categorical:{ascending:(t,e)=>{return[t,e].sort()[0]===t?-1:1},descending:(t,e)=>{return[t,e].sort()[0]===t?1:-1}},temporal:{ascending:(t,e)=>{let n=t.getTime(),i=t.getTime();return n<i?-1:n>i?1:n>=i?0:NaN},descending:(t,e)=>{let n=t.getTime(),i=t.getTime();return i<n?-1:i>n?1:i>=n?0:NaN}}};function qu(t,e){if(1!==Object.keys(e).length)throw new Error("Only one key-value pair allowed");let n,i=Object.keys(e)[0],r=e[i],o=_u(t[i][0]);r.constructor===String&&(n=Ru[o][r]),r.constructor===Function&&(n=r);let s=t[i],a=s.map((t,e)=>e).sort((t,e)=>n(s[t],s[e]));for(let e in t)t[e]=Gu(t[e],a)}function Gu(t,e){return e.map(e=>t[e])}function zu(t,e){let n=mu(t);for(let i in e)t[i]=new Array(n);for(let i=0;i<n;i++){let r={},o={},s={};for(let e in t)r[e]=t[e][i],o[e]=t[e][i-1],s[e]=t[e][i+1];0===i&&(o=void 0),i===n-1&&(s=void 0);for(let n in e){let a=e[n];t[n][i]=a(r,i,o,s)}}}var Lu={count:Fu,sum:Du,mean:function(t){return Du(t)/Fu(t)},median:function(t){let e=t.sort((t,e)=>t>e),n=Fu(t);if(n%2==1)return e[Math.floor(n/2)];{let t=e[n/2-1],i=e[n/2];return(t+i)/2}},mode:function(t){let e,n={};for(let e of t)n.hasOwnProperty(e)?n[e]++:n[e]=1;let i=0;for(let t in n)n[t]>i&&(i=n[t],e=t);return e},min:function(t){let e=1/0;for(let n of t)n<e&&(e=n);return e},max:function(t){let e=-1/0;for(let n of t)n>e&&(e=n);return e}};function Fu(t){return t.length}function Du(t){let e=0;for(let n of t)e+=n;return e}function Yu(t,e){let n=Object.keys(t);if(1!==n.length)throw new Error("Invalid transformation syntax");let i=n[0];if(!e.includes(i))throw new Error(`Unknown transformation ${i}`);return i}function Uu(t,e){let n={};for(let e in t)n[e]=[];if(e&&e.hasOwnProperty("$grouped"))for(let t in e)"$grouped"!==t&&(n[t]=[]);return n}function Bu(t,e,n){for(let i in e){let r=e[i];if(r.constructor===Object){let e=Yu(r,Object.keys(t)),o=r[e];if(o.constructor===String)n[i].push(Lu[o](t[e]));else{if(o.constructor!==Function)throw new Error(`Invalid aggregation instruction: ${o}. Must be String or Function`);n[i].push(o(t[e]))}}}return n}function Xu(t,e){for(let n in t){let i=t[n],r=Object.keys(i)[0];if(pu(r),e.hasOwnProperty(r))throw new Error(`Cannot summarise the column '${r}': used for grouping`)}}function Hu(t,e,n){for(let i=0;i<n;i++)for(let n in e)t[n].push(e[n][0]);return t}function Qu(t,e,n){let i=[];for(let r of n)i.push(t[r][e]);return i}class Zu{constructor(t,e){this.data={},this.groupedValues=e;for(let e in t)this.data[e]=[]}addRow(t,e){for(let n in t)this.data[n].push(t[n][e])}}var Ju=function(t){return t},Vu=function(t){return!isNaN(parseFloat(t))&&isFinite(t)};function Ku(t){this.objectID="",this.separator=" - ",this.legendSeparator=this.separator,this.method="",this.precision=0,this.precisionflag="auto",this.roundlength=2,this.is_uniqueValues=!1,this.debug=!1,this.silent=!1,this.bounds=[],this.ranges=[],this.inner_ranges=null,this.colors=[],this.counter=[],this.stat_sorted=null,this.stat_mean=null,this.stat_median=null,this.stat_sum=null,this.stat_max=null,this.stat_min=null,this.stat_pop=null,this.stat_variance=null,this.stat_stddev=null,this.stat_cov=null,this.log=function(t,e){!0!==this.debug&&null==e||console.log(this.objectID+"(object id) :: "+t)},this.setBounds=function(t){this.log("Setting bounds ("+t.length+") : "+t.join()),this.bounds=[],this.bounds=t},this.setSerie=function(t){this.log("Setting serie ("+t.length+") : "+t.join()),this.serie=[],this.serie=t,this.resetStatistics(),this.setPrecision()},this.setColors=function(t){this.log("Setting color ramp ("+t.length+") : "+t.join()),this.colors=t},this.doCount=function(){if(!this._nodata()){var t=this.sorted();this.counter=[];for(let t=0;t<this.bounds.length-1;t++)this.counter[t]=0;for(let n=0;n<t.length;n++){var e=this.getClass(t[n]);this.counter[e]++}}},this.setPrecision=function(t){if(void 0!==t&&(this.precisionflag="manual",this.precision=t),"auto"===this.precisionflag)for(var e=0;e<this.serie.length;e++){var n;(n=isNaN(this.serie[e]+"")||-1===(this.serie[e]+"").toString().indexOf(".")?0:(this.serie[e]+"").split(".")[1].length)>this.precision&&(this.precision=n)}this.precision>20&&(this.log("this.precision value ("+this.precision+') is greater than max value. Automatic set-up to 20 to prevent "Uncaught RangeError: toFixed()" when calling decimalFormat() method.'),this.precision=20),this.log("Calling setPrecision(). Mode : "+this.precisionflag+" - Decimals : "+this.precision),this.serie=this.decimalFormat(this.serie)},this.decimalFormat=function(t){for(var e=[],n=0;n<t.length;n++)Vu(t[n])?e[n]=parseFloat(parseFloat(t[n]).toFixed(this.precision)):e[n]=t[n];return e},this.setRanges=function(){this.ranges=[];for(let t=0;t<this.bounds.length-1;t++)this.ranges[t]=this.bounds[t]+this.separator+this.bounds[t+1]},this.min=function(){if(!this._nodata()){this.stat_min=this.serie[0];for(let t=0;t<this.pop();t++)this.serie[t]<this.stat_min&&(this.stat_min=this.serie[t]);return this.stat_min}},this.max=function(){if(!this._nodata()){this.stat_max=this.serie[0];for(let t=0;t<this.pop();t++)this.serie[t]>this.stat_max&&(this.stat_max=this.serie[t]);return this.stat_max}},this.sum=function(){if(!this._nodata()){if(null===this.stat_sum){this.stat_sum=0;for(let t=0;t<this.pop();t++)this.stat_sum+=parseFloat(this.serie[t])}return this.stat_sum}},this.pop=function(){if(!this._nodata())return null===this.stat_pop&&(this.stat_pop=this.serie.length),this.stat_pop},this.mean=function(){if(!this._nodata())return null===this.stat_mean&&(this.stat_mean=parseFloat(this.sum()/this.pop())),this.stat_mean},this.median=function(){if(!this._nodata()){if(null===this.stat_median){this.stat_median=0;var t=this.sorted();t.length%2?this.stat_median=parseFloat(t[Math.ceil(t.length/2)-1]):this.stat_median=(parseFloat(t[t.length/2-1])+parseFloat(t[t.length/2]))/2}return this.stat_median}},this.variance=function(t){if(t=void 0===t,!this._nodata()){if(null===this.stat_variance){for(var e=0,n=this.mean(),i=0;i<this.pop();i++)e+=Math.pow(this.serie[i]-n,2);this.stat_variance=e/this.pop(),!0===t&&(this.stat_variance=Math.round(this.stat_variance*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))}return this.stat_variance}},this.stddev=function(t){if(t=void 0===t,!this._nodata())return null===this.stat_stddev&&(this.stat_stddev=Math.sqrt(this.variance()),!0===t&&(this.stat_stddev=Math.round(this.stat_stddev*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))),this.stat_stddev},this.cov=function(t){if(t=void 0===t,!this._nodata())return null===this.stat_cov&&(this.stat_cov=this.stddev()/this.mean(),!0===t&&(this.stat_cov=Math.round(this.stat_cov*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))),this.stat_cov},this.resetStatistics=function(){this.stat_sorted=null,this.stat_mean=null,this.stat_median=null,this.stat_sum=null,this.stat_max=null,this.stat_min=null,this.stat_pop=null,this.stat_variance=null,this.stat_stddev=null,this.stat_cov=null},this._nodata=function(){if(0===this.serie.length){if(!this.silent)throw new TypeError("Error. You should first enter a serie!");return this.log("[silent mode] Error. You should first enter a serie!",!0),1}return 0},this._nbClassInt=function(t){var e=parseInt(t,10);if(!isNaN(e))return e;if(!this.silent)throw new TypeError("'"+e+"' is not a valid integer. Enable to set class number.");this.log("[silent mode] '"+e+"' is not a valid integer. Enable to set class number.",!0)},this._hasNegativeValue=function(){for(let t=0;t<this.serie.length;t++)if(this.serie[t]<0)return!0;return!1},this._hasZeroValue=function(){for(let t=0;t<this.serie.length;t++)if(0===parseFloat(this.serie[t]))return!0;return!1},this.sorted=function(){return null===this.stat_sorted&&(!1===this.is_uniqueValues?this.stat_sorted=this.serie.sort(function(t,e){return t-e}):this.stat_sorted=this.serie.sort(function(t,e){var n=t.toString().toLowerCase(),i=e.toString().toLowerCase();return n<i?-1:n>i?1:0})),this.stat_sorted},this.setClassManually=function(t){if(!this._nodata()){if(t[0]===this.min()&&t[t.length-1]===this.max())return this.setBounds(t),this.setRanges(),this.method=Ju("manual classification")+" ("+(t.length-1)+" "+Ju("classes")+")",this.bounds;if(!this.silent)throw new TypeError(Ju("Given bounds may not be correct! please check your input.\nMin value : "+this.min()+" / Max value : "+this.max()));this.log("[silent mode] "+Ju("Given bounds may not be correct! please check your input.\nMin value : "+this.min()+" / Max value : "+this.max()),!0)}},this.getClassEqInterval=function(t,e,n){if(t=this._nbClassInt(t),!this._nodata()){var i=void 0===e?this.min():e,r=void 0===n?this.max():n,o=[],s=i,a=(r-i)/t;for(let e=0;e<=t;e++)o[e]=s,s+=a;return o[t]=r,this.setBounds(o),this.setRanges(),this.method=Ju("eq. intervals")+" ("+t+" "+Ju("classes")+")",this.bounds}},this.getQuantiles=function(t){t=this._nbClassInt(t);for(var e=this.sorted(),n=[],i=this.pop()/t,r=1;r<t;r++){var o=Math.round(r*i+.49);n.push(e[o-1])}return n},this.getClassQuantile=function(t){if(t=this._nbClassInt(t),!this._nodata()){var e=this.sorted(),n=this.getQuantiles(t);return n.unshift(e[0]),n[e.length-1]!==e[e.length-1]&&n.push(e[e.length-1]),this.setBounds(n),this.setRanges(),this.method=Ju("quantile")+" ("+t+" "+Ju("classes")+")",this.bounds}},this.getClassStdDeviation=function(t,e){if(t=this._nbClassInt(t),!this._nodata()){var n=this.max(),i=this.min(),r=this.stddev(),o=this.mean(),s=[];if(t%2==1){var a=Math.floor(t/2),h=a+1;s[a]=o-r/2,s[h]=o+r/2;for(let t=a-1;t>0;t--){let e=s[t+1]-r;s[t]=e}for(let e=h+1;e<t;e++){let t=s[e-1]+r;s[e]=t}}else{var c=t/2;s[c]=o;for(let t=c-1;t>0;t--){let e=s[t+1]-r;s[t]=e}for(let e=c+1;e<t;e++){let t=s[e-1]+r;s[e]=t}}return s[0]=void 0===e?s[1]-r:i,s[t]=void 0===e?s[t-1]+r:n,this.setBounds(s),this.setRanges(),this.method=Ju("std deviation")+" ("+t+" "+Ju("classes")+")",this.bounds}},this.getClassGeometricProgression=function(t){if(t=this._nbClassInt(t),!this._nodata()){if(!this._hasNegativeValue()&&!this._hasZeroValue()){var e=[],n=this.min(),i=this.max(),r=Math.log(i)/Math.LN10,o=Math.log(n)/Math.LN10,s=(r-o)/t;for(let n=0;n<t;n++)e[n]=0===n?o:e[n-1]+s;return(e=e.map(function(t){return Math.pow(10,t)})).push(this.max()),this.setBounds(e),this.setRanges(),this.method=Ju("geometric progression")+" ("+t+" "+Ju("classes")+")",this.bounds}if(!this.silent)throw new TypeError(Ju("geometric progression can't be applied with a serie containing negative or zero values."));this.log("[silent mode] "+Ju("geometric progression can't be applied with a serie containing negative or zero values."),!0)}},this.getClassArithmeticProgression=function(t){if(t=this._nbClassInt(t),!this._nodata()){var e=0;for(let n=1;n<=t;n++)e+=n;var n=[],i=this.min(),r=(this.max()-i)/e;for(let e=0;e<=t;e++)n[e]=0===e?i:n[e-1]+e*r;return this.setBounds(n),this.setRanges(),this.method=Ju("arithmetic progression")+" ("+t+" "+Ju("classes")+")",this.bounds}},this.getClassJenks=function(t){if(t=this._nbClassInt(t),this._nodata())return;let e=this.sorted();for(var n=[],i=0;i<e.length+1;i++){for(var r=[],o=0,s=t+1;o<s;o++)r.push(0);n.push(r)}for(var a=[],h=0;h<e.length+1;h++){for(var c=[],u=0,l=t+1;u<l;u++)c.push(0);a.push(c)}for(var f=1,d=t+1;f<d;f++){n[0][f]=1,a[0][f]=0;for(var p=1,y=e.length+1;p<y;p++)a[p][f]=1/0;var g=0}for(var m=2,M=e.length+1;m<M;m++){for(var x=0,v=0,_=0,b=1,k=m+1;b<k;b++){var w=m-b+1,O=parseFloat(e[w-1]);g=(v+=O*O)-(x+=O)*x/(_+=1);var $=w-1;if(0!==$)for(var C=2,P=t+1;C<P;C++)a[m][C]>=g+a[$][C-1]&&(n[m][C]=w,a[m][C]=g+a[$][C-1])}n[m][1]=1,a[m][1]=g}var A=e.length,E=[];for(h=0;h<=t;h++)E.push(0);E[t]=parseFloat(e[e.length-1]),E[0]=parseFloat(e[0]);for(var j=t;j>=2;){var S=parseInt(n[A][j]-2);E[j-1]=e[S],A=parseInt(n[A][j]-1),j-=1}return E[0]===E[1]&&(E[0]=0),this.setBounds(E),this.setRanges(),this.method=Ju("Jenks")+" ("+t+" "+Ju("classes")+")",this.bounds},this.getClassUniqueValues=function(){if(!this._nodata()){this.is_uniqueValues=!0;var t=this.sorted(),e=[];for(let n=0;n<this.pop();n++)-1===e.indexOf(t[n])&&e.push(t[n]);return this.bounds=e,this.method=Ju("unique values"),e}},this.getClass=function(t){for(let e=0;e<this.bounds.length;e++)if(!0===this.is_uniqueValues){if(t===this.bounds[e])return e}else if(parseFloat(t)<=this.bounds[e+1])return e;return Ju("Unable to get value's class.")},this.getRanges=function(){return this.ranges},this.getRangeNum=function(t){var e,n;for(n=0;n<this.ranges.length;n++)if(e=this.ranges[n].split(/ - /),t<=parseFloat(e[1]))return n},this.getInnerRanges=function(){if(null!=this.inner_ranges)return this.inner_ranges;var t=[],e=this.sorted(),n=1;for(let i=0;i<e.length;i++){let r;if(0===i&&(r=e[i]),parseFloat(e[i])>parseFloat(this.bounds[n])&&(t[n-1]=""+r+this.separator+e[i-1],r=e[i],n++),n===this.bounds.length-1)return t[n-1]=""+r+this.separator+e[e.length-1],this.inner_ranges=t,this.inner_ranges}},this.getSortedlist=function(){return this.sorted().join(", ")},this.objectID=(new Date).getUTCMilliseconds(),this.log("Creating new geostats object"),void 0!==t&&t.length>0?(this.serie=t,this.setPrecision(),this.log("Setting serie ("+t.length+") : "+t.join())):this.serie=[],this.getJenks=this.getClassJenks,this.getGeometricProgression=this.getClassGeometricProgression,this.getEqInterval=this.getClassEqInterval,this.getQuantile=this.getClassQuantile,this.getStdDeviation=this.getClassStdDeviation,this.getUniqueValues=this.getClassUniqueValues,this.getArithmeticProgression=this.getClassArithmeticProgression}function tl(t,e,n){let i={bins:n},r=Array(n.length);for(let e=0;e<r.length;e++){r[e]={};for(let n in t)r[e][n]=[]}let o=mu(t);for(let i=0;i<o;i++){let o=t[e][i],s=n.findIndex(function(t,e){return e===n.length-1?o>=t[0]&&o<=t[1]:o>=t[0]&&o<t[1]}),a=r[s];for(let e in t)a[e].push(t[e][i]);let h=new ap(a);r[s]=h}return i.$grouped=r,i}function el(t,e){for(let n of e)if(!t.hasOwnProperty(n))throw new Error(`Column '${n}' not found`)}var nl=1,il=2,rl=4,ol=5,sl=484813681109536e-20,al=Math.PI/2,hl=.16666666666666666,cl=.04722222222222222,ul=.022156084656084655,ll=1e-10,fl=.017453292519943295,dl=57.29577951308232,pl=Math.PI/4,yl=2*Math.PI,gl=3.14159265359,ml={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},Ml={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},xl=/[\s_\-\/\(\)]/g;function vl(t,e){if(t[e])return t[e];for(var n,i=Object.keys(t),r=e.toLowerCase().replace(xl,""),o=-1;++o<i.length;)if((n=i[o]).toLowerCase().replace(xl,"")===r)return t[n]}function _l(t){var e,n,i,r={},o=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t},{}),s={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*fl},lat_1:function(t){r.lat1=t*fl},lat_2:function(t){r.lat2=t*fl},lat_ts:function(t){r.lat_ts=t*fl},lon_0:function(t){r.long0=t*fl},lon_1:function(t){r.long1=t*fl},lon_2:function(t){r.long2=t*fl},alpha:function(t){r.alpha=parseFloat(t)*fl},lonc:function(t){r.longc=t*fl},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var e=vl(Ml,t);e&&(r.to_meter=e.to_meter)},from_greenwich:function(t){r.from_greenwich=t*fl},pm:function(t){var e=vl(ml,t);r.from_greenwich=(e||parseFloat(t))*fl},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(r.axis=t)}};for(e in o)n=o[e],e in s?"function"==typeof(i=s[e])?i(n):r[i]=n:r[e]=n;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r}var bl=1,kl=/\s/,wl=/[A-Za-z]/,Ol=/[A-Za-z84]/,$l=/[,\]]/,Cl=/[\d\.E\-\+]/;function Pl(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=bl}function Al(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var i=e?{}:t,r=n.reduce(function(t,e){return El(e,t),t},i);e&&(t[e]=r)}function El(t,e){if(Array.isArray(t)){var n,i=t.shift();if("PARAMETER"===i&&(i=t.shift()),1===t.length)return Array.isArray(t[0])?(e[i]={},void El(t[0],e[i])):void(e[i]=t[0]);if(t.length)if("TOWGS84"!==i)switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&El(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&El(t[3],e[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Al(e,i,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return El(t,e[i]);return Al(e,i,t)}else e[i]=t;else e[i]=!0}else e[t]=!0}Pl.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;kl.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case bl:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},Pl.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if($l.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},Pl.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=bl)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=bl,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Pl.prototype.number=function(t){if(!Cl.test(t)){if($l.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},Pl.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},Pl.prototype.keyword=function(t){if(Ol.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=bl)}if(!$l.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Pl.prototype.neutral=function(t){if(wl.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(Cl.test(t))return this.word=t,void(this.state=3);if(!$l.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Pl.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var jl=.017453292519943295;function Sl(t){return t*jl}function Nl(t){var e=new Pl(t).output(),n=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",n]);var r={};return El(e,r),function(t){"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var e=t.GEOGCS;function n(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(e=t),e&&(e.DATUM?t.datumCode=e.DATUM.name.toLowerCase():t.datumCode=e.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),e.DATUM&&e.DATUM.SPHEROID&&(t.ellps=e.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=e.DATUM.SPHEROID.a,t.rf=parseFloat(e.DATUM.SPHEROID.rf,10)),e.DATUM&&e.DATUM.TOWGS84&&(t.datum_params=e.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Sl],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Sl],["x0","false_easting",n],["y0","false_northing",n],["long0","central_meridian",Sl],["lat0","latitude_of_origin",Sl],["lat0","standard_parallel_1",Sl],["lat1","standard_parallel_1",Sl],["lat2","standard_parallel_2",Sl],["azimuth","Azimuth"],["alpha","azimuth",Sl],["srsCode","name"]].forEach(function(e){return function(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],3===e.length&&(t[n]=e[2](t[n])))}(t,e)}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=Sl(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(r),r}function Il(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?Il[t]=_l(arguments[1]):Il[t]=Nl(arguments[1]):Il[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?Il.apply(e,t):Il(t)});if("string"==typeof t){if(t in Il)return Il[t]}else"EPSG"in t?Il["EPSG:"+t.EPSG]=t:"ESRI"in t?Il["ESRI:"+t.ESRI]=t:"IAU2000"in t?Il["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Il);var Tl=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var Wl=["3857","900913","3785","102113"];function Rl(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in Il}(t))return Il[t];if(function(t){return Tl.some(function(e){return t.indexOf(e)>-1})}(t)){var e=Nl(t);if(function(t){var e=vl(t,"authority");if(e){var n=vl(e,"epsg");return n&&Wl.indexOf(n)>-1}}(e))return Il["EPSG:3857"];var n=function(t){var e=vl(t,"extension");if(e)return vl(e,"proj4")}(e);return n?_l(n):e}return function(t){return"+"===t[0]}(t)?_l(t):void 0}function ql(t,e){var n,i;if(t=t||{},!e)return t;for(i in e)void 0!==(n=e[i])&&(t[i]=n);return t}function Gl(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}function zl(t){return t<0?-1:1}function Ll(t){return Math.abs(t)<=gl?t:t-zl(t)*yl}function Fl(t,e,n){var i=t*n,r=.5*t;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(al-e))/i}function Dl(t,e){for(var n,i,r=.5*t,o=al-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(o),o+=i=al-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-o,Math.abs(i)<=1e-10)return o;return-9999}function Yl(t){return t}var Ul=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Gl(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,i=t.x,r=t.y;if(r*dl>90&&r*dl<-90&&i*dl>180&&i*dl<-180)return null;if(Math.abs(Math.abs(r)-al)<=ll)return null;if(this.sphere)e=this.x0+this.a*this.k0*Ll(i-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(pl+.5*r));else{var o=Math.sin(r),s=Fl(this.e,r,o);e=this.x0+this.a*this.k0*Ll(i-this.long0),n=this.y0-this.a*this.k0*Math.log(s)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i=t.x-this.x0,r=t.y-this.y0;if(this.sphere)n=al-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var o=Math.exp(-r/(this.a*this.k0));if(-9999===(n=Dl(this.e,o)))return null}return e=Ll(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:Yl,inverse:Yl,names:["longlat","identity"]}],Bl={},Xl=[];function Hl(t,e){var n=Xl.length;return t.names?(Xl[n]=t,t.names.forEach(function(t){Bl[t.toLowerCase()]=n}),this):(console.log(e),!0)}var Ql={start:function(){Ul.forEach(Hl)},add:Hl,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==Bl[e]&&Xl[Bl[e]]?Xl[Bl[e]]:void 0}},Zl={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Jl=Zl.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Zl.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Vl={};function Kl(t,e){if(!(this instanceof Kl))return new Kl(t);e=e||function(t){if(t)throw t};var n=Rl(t);if("object"==typeof n){var i=Kl.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var r=vl(Vl,n.datumCode);r&&(n.datum_params=r.towgs84?r.towgs84.split(","):null,n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var o,s,a,h,c,u,l,f=function(t,e,n,i,r){if(!t){var o=vl(Zl,i);o||(o=Jl),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<ll)&&(r=!0,e=t),{a:t,b:e,rf:n,sphere:r}}(n.a,n.b,n.rf,n.ellps,n.sphere),d=(o=f.a,s=f.b,f.rf,a=n.R_A,u=((h=o*o)-(c=s*s))/h,l=0,a?(h=(o*=1-u*(hl+u*(cl+u*ul)))*o,u=0):l=Math.sqrt(u),{es:u,e:l,ep2:(h-c)/c}),p=n.datum||function(t,e,n,i,r,o){var s={};return s.datum_type=void 0===t||"none"===t?ol:rl,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=nl),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=il,s.datum_params[3]*=sl,s.datum_params[4]*=sl,s.datum_params[5]*=sl,s.datum_params[6]=s.datum_params[6]/1e6+1))),s.a=n,s.b=i,s.es=r,s.ep2=o,s}(n.datumCode,n.datum_params,f.a,f.b,d.es,d.ep2);ql(this,n),ql(this,i),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=d.es,this.e=d.e,this.ep2=d.ep2,this.datum=p,this.init(),e(null,this)}else e(t)}else e(t)}function tf(t){return t===nl||t===il}function ef(t,e,n){return function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===nl?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==il||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e)?n:t.datum_type===ol||e.datum_type===ol?n:t.es!==e.es||t.a!==e.a||tf(t.datum_type)||tf(e.datum_type)?(n=function(t,e,n){var i,r,o,s,a=t.x,h=t.y,c=t.z?t.z:0;if(h<-al&&h>-1.001*al)h=-al;else if(h>al&&h<1.001*al)h=al;else{if(h<-al)return{x:-1/0,y:-1/0,z:t.z};if(h>al)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),r=Math.sin(h),s=Math.cos(h),o=r*r,{x:((i=n/Math.sqrt(1-e*o))+c)*s*Math.cos(a),y:(i+c)*s*Math.sin(a),z:(i*(1-e)+c)*r}}(n,t.es,t.a),tf(t.datum_type)&&(n=function(t,e,n){if(e===nl)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===il){var i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],h=n[5],c=n[6];return{x:c*(t.x-h*t.y+a*t.z)+i,y:c*(h*t.x+t.y-s*t.z)+r,z:c*(-a*t.x+s*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),tf(e.datum_type)&&(n=function(t,e,n){if(e===nl)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===il){var i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],h=n[5],c=n[6],u=(t.x-i)/c,l=(t.y-r)/c,f=(t.z-o)/c;return{x:u+h*l-a*f,y:-h*u+l+s*f,z:a*u-s*l+f}}}(n,e.datum_type,e.datum_params)),function(t,e,n,i){var r,o,s,a,h,c,u,l,f,d,p,y,g,m,M,x=t.x,v=t.y,_=t.z?t.z:0;if(r=Math.sqrt(x*x+v*v),o=Math.sqrt(x*x+v*v+_*_),r/n<1e-12){if(m=0,o/n<1e-12)return M=-i,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(v,x);s=_/o,l=(a=r/o)*(1-e)*(h=1/Math.sqrt(1-e*(2-e)*a*a)),f=s*h,g=0;do{g++,c=e*(u=n/Math.sqrt(1-e*f*f))/(u+(M=r*l+_*f-u*(1-e*f*f))),y=(p=s*(h=1/Math.sqrt(1-c*(2-c)*a*a)))*l-(d=a*(1-c)*h)*f,l=d,f=p}while(y*y>1e-24&&g<30);return{x:m,y:Math.atan(p/Math.abs(d)),z:M}}(n,e.es,e.a,e.b)):n}function nf(t,e,n){var i,r,o,s=n.x,a=n.y,h=n.z||0,c={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(i=s,r="x"):1===o?(i=a,r="y"):(i=h,r="z"),t.axis[o]){case"e":c[r]=i;break;case"w":c[r]=-i;break;case"n":c[r]=i;break;case"s":c[r]=-i;break;case"u":void 0!==n[r]&&(c.z=i);break;case"d":void 0!==n[r]&&(c.z=-i);break;default:return null}return c}function rf(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function of(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function sf(t,e,n){var i;return Array.isArray(n)&&(n=rf(n)),function(t){of(t.x),of(t.y)}(n),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===nl||t.datum.datum_type===il)&&"WGS84"!==e.datumCode||(e.datum.datum_type===nl||e.datum.datum_type===il)&&"WGS84"!==t.datumCode}(t,e)&&(n=sf(t,i=new Kl("WGS84"),n),t=i),"enu"!==t.axis&&(n=nf(t,!1,n)),"longlat"===t.projName?n={x:n.x*fl,y:n.y*fl}:(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter}),n=t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=ef(t.datum,e.datum,n),e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y}),"longlat"===e.projName?n={x:n.x*dl,y:n.y*dl}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter})),"enu"!==e.axis?nf(e,!0,n):n}Vl.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},Vl.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},Vl.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},Vl.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},Vl.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},Vl.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},Vl.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},Vl.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},Vl.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},Vl.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},Vl.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},Vl.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},Vl.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},Vl.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},Vl.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},Vl.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},Vl.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},Kl.projections=Ql,Kl.projections.start();var af=Kl("WGS84");function hf(t,e,n){var i,r,o;return Array.isArray(n)?(i=sf(t,e,n),3===n.length?[i.x,i.y,i.z]:[i.x,i.y]):(r=sf(t,e,n),2===(o=Object.keys(n)).length?r:(o.forEach(function(t){"x"!==t&&"y"!==t&&(r[t]=n[t])}),r))}function cf(t){return t instanceof Kl?t:t.oProj?t.oProj:Kl(t)}function uf(t,e,n){t=cf(t);var i,r=!1;return void 0===e?(e=t,t=af,r=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=af,r=!0),e=cf(e),n?hf(t,e,n):(i={forward:function(n){return hf(t,e,n)},inverse:function(n){return hf(e,t,n)}},r&&(i.oProj=e),i)}var lf=6,ff="AJSAJS",df="AFAFAF",pf=65,yf=73,gf=79,mf=86,Mf=90,xf={forward:vf,inverse:function(t){var e=wf(Cf(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:_f};function vf(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(d=t.easting,p=t.northing,y=t.zoneNumber,g=$f(y),m=Math.floor(d/1e5),M=Math.floor(p/1e5)%20,r=m,o=M,s=g,a=s-1,h=ff.charCodeAt(a),c=df.charCodeAt(a),u=h+r-1,l=c+o,f=!1,u>Mf&&(u=u-Mf+pf-1,f=!0),(u===yf||h<yf&&u>yf||(u>yf||h<yf)&&f)&&u++,(u===gf||h<gf&&u>gf||(u>gf||h<gf)&&f)&&++u===yf&&u++,u>Mf&&(u=u-Mf+pf-1),l>mf?(l=l-mf+pf-1,f=!0):f=!1,(l===yf||c<yf&&l>yf||(l>yf||c<yf)&&f)&&l++,(l===gf||c<gf&&l>gf||(l>gf||c<gf)&&f)&&++l===yf&&l++,l>mf&&(l=l-mf+pf-1),String.fromCharCode(u)+String.fromCharCode(l))+n.substr(n.length-5,e)+i.substr(i.length-5,e);var r,o,s,a,h,c,u,l,f;var d,p,y,g,m,M}(function(t){var e,n,i,r,o,s,a,h=t.lat,c=t.lon,u=6378137,l=bf(h),f=bf(c);a=Math.floor((c+180)/6)+1,180===c&&(a=60);h>=56&&h<64&&c>=3&&c<12&&(a=32);h>=72&&h<84&&(c>=0&&c<9?a=31:c>=9&&c<21?a=33:c>=21&&c<33?a=35:c>=33&&c<42&&(a=37));s=bf(6*(a-1)-180+3),.006739496752268451,e=u/Math.sqrt(1-.00669438*Math.sin(l)*Math.sin(l)),n=Math.tan(l)*Math.tan(l),i=.006739496752268451*Math.cos(l)*Math.cos(l),r=Math.cos(l)*(f-s),o=u*(.9983242984503243*l-.002514607064228144*Math.sin(2*l)+2639046602129982e-21*Math.sin(4*l)-3.418046101696858e-9*Math.sin(6*l));var d=.9996*e*(r+(1-n+i)*r*r*r/6+(5-18*n+n*n+72*i-.39089081163157013)*r*r*r*r*r/120)+5e5,p=.9996*(o+e*Math.tan(l)*(r*r/2+(5-n+9*i+4*i*i)*r*r*r*r/24+(61-58*n+n*n+600*i-2.2240339282485886)*r*r*r*r*r*r/720));h<0&&(p+=1e7);return{northing:Math.round(p),easting:Math.round(d),zoneNumber:a,zoneLetter:Of(h)}}({lat:t[1],lon:t[0]}),e)}function _f(t){var e=wf(Cf(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function bf(t){return t*(Math.PI/180)}function kf(t){return t/Math.PI*180}function wf(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var o,s,a,h,c,u,l,f,d=6378137,p=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),y=n-5e5,g=e;i<"N"&&(g-=1e7),u=6*(r-1)-180+3,f=(l=g/.9996/6367449.145945056)+(3*p/2-27*p*p*p/32)*Math.sin(2*l)+(21*p*p/16-55*p*p*p*p/32)*Math.sin(4*l)+151*p*p*p/96*Math.sin(6*l),o=d/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),s=Math.tan(f)*Math.tan(f),a=.006739496752268451*Math.cos(f)*Math.cos(f),h=.99330562*d/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),c=y/(.9996*o);var m=f-o*Math.tan(f)/h*(c*c/2-(5+3*s+10*a-4*a*a-.06065547077041606)*c*c*c*c/24+(61+90*s+298*a+45*s*s-1.6983531815716497-3*a*a)*c*c*c*c*c*c/720);m=kf(m);var M,x=(c-(1+2*s+a)*c*c*c/6+(5-2*a+28*s-3*a*a+.05391597401814761+24*s*s)*c*c*c*c*c/120)/Math.cos(f);if(x=u+kf(x),t.accuracy){var v=wf({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});M={top:v.lat,right:v.lon,bottom:m,left:x}}else M={lat:m,lon:x};return M}function Of(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function $f(t){var e=t%lf;return 0===e&&(e=lf),e}function Cf(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,r="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,o++}var s=parseInt(r,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(o++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;i=t.substring(o,o+=2);for(var h=$f(s),c=function(t,e){var n=ff.charCodeAt(e-1),i=1e5,r=!1;for(;n!==t.charCodeAt(0);){if(++n===yf&&n++,n===gf&&n++,n>Mf){if(r)throw"Bad character: "+t;n=pf,r=!0}i+=1e5}return i}(i.charAt(0),h),u=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=df.charCodeAt(e-1),i=0,r=!1;for(;n!==t.charCodeAt(0);){if(++n===yf&&n++,n===gf&&n++,n>mf){if(r)throw"Bad character: "+t;n=pf,r=!0}i+=1e5}return i}(i.charAt(1),h);u<Pf(a);)u+=2e6;var l=n-o;if(l%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,d,p,y=l/2,g=0,m=0;return y>0&&(f=1e5/Math.pow(10,y),d=t.substring(o,o+y),g=parseFloat(d)*f,p=t.substring(o+y),m=parseFloat(p)*f),{easting:g+c,northing:m+u,zoneLetter:a,zoneNumber:s,accuracy:f}}function Pf(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Af(t,e,n){if(!(this instanceof Af))return new Af(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Af.fromMGRS=function(t){return new Af(_f(t))},Af.prototype.toMGRS=function(t){return vf([this.x,this.y],t)};var Ef=1,jf=.25,Sf=.046875,Nf=.01953125,If=.01068115234375,Tf=.75,Wf=.46875,Rf=.013020833333333334,qf=.007120768229166667,Gf=.3645833333333333,zf=.005696614583333333,Lf=.3076171875;function Ff(t){var e=[];e[0]=Ef-t*(jf+t*(Sf+t*(Nf+t*If))),e[1]=t*(Tf-t*(Sf+t*(Nf+t*If)));var n=t*t;return e[2]=n*(Wf-t*(Rf+t*qf)),n*=t,e[3]=n*(Gf-t*zf),e[4]=n*t*Lf,e}function Df(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var Yf=20;function Uf(t,e,n){for(var i=1/(1-e),r=t,o=Yf;o;--o){var s=Math.sin(r),a=1-e*s*s;if(r-=a=(Df(r,s,Math.cos(r),n)-t)*(a*Math.sqrt(a))*i,Math.abs(a)<ll)return r}return r}var Bf={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Ff(this.es),this.ml0=Df(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,i,r=t.x,o=t.y,s=Ll(r-this.long0),a=Math.sin(o),h=Math.cos(o);if(this.es){var c=h*s,u=Math.pow(c,2),l=this.ep2*Math.pow(h,2),f=Math.pow(l,2),d=Math.abs(h)>ll?Math.tan(o):0,p=Math.pow(d,2),y=Math.pow(p,2);e=1-this.es*Math.pow(a,2),c/=Math.sqrt(e);var g=Df(o,a,h,this.en);n=this.a*(this.k0*c*(1+u/6*(1-p+l+u/20*(5-18*p+y+14*l-58*p*l+u/42*(61+179*y-y*p-479*p)))))+this.x0,i=this.a*(this.k0*(g-this.ml0+a*s*c/2*(1+u/12*(5-p+9*l+4*f+u/30*(61+y-58*p+270*l-330*p*l+u/56*(1385+543*y-y*p-3111*p))))))+this.y0}else{var m=h*Math.sin(s);if(Math.abs(Math.abs(m)-1)<ll)return 93;if(n=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,i=h*Math.cos(s)/Math.sqrt(1-Math.pow(m,2)),(m=Math.abs(i))>=1){if(m-1>ll)return 93;i=0}else i=Math.acos(i);o<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=n,t.y=i,t},inverse:function(t){var e,n,i,r,o=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(this.es)if(n=Uf(e=this.ml0+s/this.k0,this.es,this.en),Math.abs(n)<al){var a=Math.sin(n),h=Math.cos(n),c=Math.abs(h)>ll?Math.tan(n):0,u=this.ep2*Math.pow(h,2),l=Math.pow(u,2),f=Math.pow(c,2),d=Math.pow(f,2);e=1-this.es*Math.pow(a,2);var p=o*Math.sqrt(e)/this.k0,y=Math.pow(p,2);i=n-(e*=c)*y/(1-this.es)*.5*(1-y/12*(5+3*f-9*u*f+u-4*l-y/30*(61+90*f-252*u*f+45*d+46*u-y/56*(1385+3633*f+4095*d+1574*d*f)))),r=Ll(this.long0+p*(1-y/6*(1+2*f+u-y/20*(5+28*f+24*d+8*u*f+6*u-y/42*(61+662*f+1320*d+720*d*f))))/h)}else i=al*zl(s),r=0;else{var g=Math.exp(o/this.k0),m=.5*(g-1/g),M=this.lat0+s/this.k0,x=Math.cos(M);e=Math.sqrt((1-Math.pow(x,2))/(1+Math.pow(m,2))),i=Math.asin(e),s<0&&(i=-i),r=0===m&&0===x?0:Ll(Math.atan2(m,x)+this.long0)}return t.x=r,t.y=i,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]};function Xf(t){var e=Math.exp(t);return e=(e-1/e)/2}function Hf(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),i=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function Qf(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(Hf(1,e)+1))),t<0?-e:e}function Zf(t,e){for(var n,i=2*Math.cos(2*e),r=t.length-1,o=t[r],s=0;--r>=0;)n=i*o-s+t[r],s=o,o=n;return e+n*Math.sin(2*e)}function Jf(t,e,n){for(var i,r,o=Math.sin(e),s=Math.cos(e),a=Xf(n),h=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(n),c=2*s*h,u=-2*o*a,l=t.length-1,f=t[l],d=0,p=0,y=0;--l>=0;)i=p,r=d,f=c*(p=f)-i-u*(d=y)+t[l],y=u*p-r+c*d;return[(c=o*h)*f-(u=s*a)*y,c*y+u*f]}var Vf={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var i=Zf(this.cbg,this.lat0);this.Zb=-this.Qn*(i+function(t,e){for(var n,i=2*Math.cos(e),r=t.length-1,o=t[r],s=0;--r>=0;)n=i*o-s+t[r],s=o,o=n;return Math.sin(e)*n}(this.gtu,2*i))},forward:function(t){var e=Ll(t.x-this.long0),n=t.y;n=Zf(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),o=Math.sin(e),s=Math.cos(e);n=Math.atan2(i,s*r),e=Math.atan2(o*r,Hf(i,r*s)),e=Qf(Math.tan(e));var a,h,c=Jf(this.gtu,2*n,2*e);return n+=c[0],e+=c[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*n+this.Zb)+this.y0):(a=1/0,h=1/0),t.x=a,t.y=h,t},inverse:function(t){var e,n,i=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,i/=this.Qn,Math.abs(i)<=2.623395162778){var o=Jf(this.utg,2*r,2*i);r+=o[0],i+=o[1],i=Math.atan(Xf(i));var s=Math.sin(r),a=Math.cos(r),h=Math.sin(i),c=Math.cos(i);r=Math.atan2(s*c,Hf(h,c*a)),e=Ll((i=Math.atan2(h,c*a))+this.long0),n=Zf(this.cgb,r)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]};var Kf={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(Ll(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*fl,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Vf.init.apply(this),this.forward=Vf.forward,this.inverse=Vf.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function td(t,e){return Math.pow((1-t)/(1+t),e)}var ed=20;var nd={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+pl)/(Math.pow(Math.tan(.5*this.lat0+pl),this.C)*td(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+pl),this.C)*td(this.e*Math.sin(n),this.ratexp))-al,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,i=Math.pow(Math.tan(.5*n+pl)/this.K,1/this.C),r=ed;r>0&&(n=2*Math.atan(i*td(this.e*Math.sin(t.y),-.5*this.e))-al,!(Math.abs(n-t.y)<1e-14));--r)t.y=n;return r?(t.x=e,t.y=n,t):null},names:["gauss"]};var id={init:function(){nd.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,i,r;return t.x=Ll(t.x-this.long0),nd.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*i),t.x=r*n*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*n*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,i,r,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var s=2*Math.atan2(o,this.R2);e=Math.sin(s),n=Math.cos(s),r=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),i=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else r=this.phic0,i=0;return t.x=i,t.y=r,nd.inverse.apply(this,[t]),t.x=Ll(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var rd={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ll&&(this.k0=.5*(1+zl(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ll&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ll&&(this.k0=.5*this.cons*Gl(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Fl(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Gl(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-al,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,i,r,o,s,a=t.x,h=t.y,c=Math.sin(h),u=Math.cos(h),l=Ll(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=ll&&Math.abs(h+this.lat0)<=ll?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*c+this.coslat0*u*Math.cos(l)),t.x=this.a*e*u*Math.sin(l)+this.x0,t.y=this.a*e*(this.coslat0*c-this.sinlat0*u*Math.cos(l))+this.y0,t):(n=2*Math.atan(this.ssfn_(h,c,this.e))-al,r=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=ll?(o=Fl(this.e,h*this.con,this.con*c),s=2*this.a*this.k0*o/this.cons,t.x=this.x0+s*Math.sin(a-this.long0),t.y=this.y0-this.con*s*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<ll?(e=2*this.a*this.k0/(1+r*Math.cos(l)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*r*Math.cos(l))),t.y=e*(this.cosX0*i-this.sinX0*r*Math.cos(l))+this.y0),t.x=e*r*Math.sin(l)+this.x0,t))},inverse:function(t){var e,n,i,r,o;t.x-=this.x0,t.y-=this.y0;var s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));return e=this.long0,n=this.lat0,s<=ll?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/s),e=Math.abs(this.coslat0)<ll?this.lat0>0?Ll(this.long0+Math.atan2(t.x,-1*t.y)):Ll(this.long0+Math.atan2(t.x,t.y)):Ll(this.long0+Math.atan2(t.x*Math.sin(a),s*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=ll){if(s<=ll)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=s*this.cons/(2*this.a*this.k0),n=this.con*Dl(this.e,i),e=this.con*Ll(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=ll?o=this.X0:(o=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/s),e=Ll(this.long0+Math.atan2(t.x*Math.sin(r),s*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),n=-1*Dl(this.e,Math.tan(.5*(al+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(al+t))*Math.pow((1-e)/(1+e),.5*n)}};var od={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=1/this.rf,r=2*i-Math.pow(i,2),o=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*a+this.alpha*o/2*h},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),s=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+s/this.alpha,h=0,c=o,u=-1e3,l=0;Math.abs(c-u)>1e-7;){if(++l>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=a,t.y=c,t},names:["somerc"]};var sd={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var i,r,o=Fl(this.e,this.lat0,t),s=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(s*s<1&&(s=1),isNaN(this.longc)){var a=Fl(this.e,this.lat1,Math.sin(this.lat1)),h=Fl(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(s+Math.sqrt(s*s-1))*Math.pow(o,this.bl):this.el=(s-Math.sqrt(s*s-1))*Math.pow(o,this.bl);var c=Math.pow(a,this.bl),u=Math.pow(h,this.bl);r=.5*((i=this.el/c)-1/i);var l=(this.el*this.el-u*c)/(this.el*this.el+u*c),f=(u-c)/(u+c),d=Ll(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(l*Math.tan(.5*this.bl*d)/f)/this.bl,this.long0=Ll(this.long0);var p=Ll(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/r),this.alpha=Math.asin(s*Math.sin(this.gamma0))}else i=this.lat0>=0?s+Math.sqrt(s*s-1):s-Math.sqrt(s*s-1),this.el=i*Math.pow(o,this.bl),r=.5*(i-1/i),this.gamma0=Math.asin(Math.sin(this.alpha)/s),this.long0=this.longc-Math.asin(r*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha))},forward:function(t){var e,n,i,r=t.x,o=t.y,s=Ll(r-this.long0);if(Math.abs(Math.abs(o)-al)<=ll)i=o>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(pl+i*this.gamma0*.5)),e=-1*i*al*this.al/this.bl;else{var a=Fl(this.e,o,Math.sin(o)),h=this.el/Math.pow(a,this.bl),c=.5*(h-1/h),u=.5*(h+1/h),l=Math.sin(this.bl*s),f=(c*Math.sin(this.gamma0)-l*Math.cos(this.gamma0))/u;n=Math.abs(Math.abs(f)-1)<=ll?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,e=Math.abs(Math.cos(this.bl*s))<=ll?this.al*this.bl*s:this.al*Math.atan2(c*Math.cos(this.gamma0)+l*Math.sin(this.gamma0),Math.cos(this.bl*s))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var i=Math.exp(-1*this.bl*n/this.al),r=.5*(i-1/i),o=.5*(i+1/i),s=Math.sin(this.bl*e/this.al),a=(s*Math.cos(this.gamma0)+r*Math.sin(this.gamma0))/o,h=Math.pow(this.el/Math.sqrt((1+a)/(1-a)),1/this.bl);return Math.abs(a-1)<ll?(t.x=this.long0,t.y=al):Math.abs(a+1)<ll?(t.x=this.long0,t.y=-1*al):(t.y=Dl(this.e,h),t.x=Ll(this.long0-Math.atan2(r*Math.cos(this.gamma0)-s*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var ad={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ll)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),i=Gl(this.e,e,n),r=Fl(this.e,this.lat1,e),o=Math.sin(this.lat2),s=Math.cos(this.lat2),a=Gl(this.e,o,s),h=Fl(this.e,this.lat2,o),c=Fl(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ll?this.ns=Math.log(i/a)/Math.log(r/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=ll&&(n=zl(n)*(al-2*ll));var i,r,o=Math.abs(Math.abs(n)-al);if(o>ll)i=Fl(this.e,n,Math.sin(n)),r=this.a*this.f0*Math.pow(i,this.ns);else{if((o=n*this.ns)<=0)return null;r=0}var s=this.ns*Ll(e-this.long0);return t.x=this.k0*(r*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(s))+this.y0,t},inverse:function(t){var e,n,i,r,o,s=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+a*a),n=1):(e=-Math.sqrt(s*s+a*a),n=-1);var h=0;if(0!==e&&(h=Math.atan2(n*s,n*a)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),-9999===(r=Dl(this.e,i)))return null}else r=-al;return o=Ll(h/this.ns+this.long0),t.x=o,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var hd={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,i,r,o,s,a,h=t.x,c=t.y,u=Ll(h-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),i=-u*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),o=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=a*Math.cos(s)/1,t.x=a*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,i,r,o,s,a,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e,a=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(a=1),s=t.y,c+=1}while(0===a&&c<15);return c>=15?null:t},names:["Krovak","krovak"]};function cd(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}function ud(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function ld(t){return.375*t*(1+.25*t*(1+.46875*t))}function fd(t){return.05859375*t*t*(1+.75*t)}function dd(t){return t*t*t*(35/3072)}function pd(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}function yd(t){return Math.abs(t)<al?t:t-zl(t)*Math.PI}function gd(t,e,n,i,r){var o,s;o=t/e;for(var a=0;a<15;a++)if(o+=s=(t-(e*o-n*Math.sin(2*o)+i*Math.sin(4*o)-r*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*i*Math.cos(4*o)-6*r*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN}var md={init:function(){this.sphere||(this.e0=ud(this.es),this.e1=ld(this.es),this.e2=fd(this.es),this.e3=dd(this.es),this.ml0=this.a*cd(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,i=t.x,r=t.y;if(i=Ll(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var o=Math.sin(r),s=Math.cos(r),a=pd(this.a,this.e,o),h=Math.tan(r)*Math.tan(r),c=i*Math.cos(r),u=c*c,l=this.es*s*s/(1-this.es);e=a*c*(1-u*h*(1/6-(8-h+8*l)*u/120)),n=this.a*cd(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*o/s*u*(.5+(5-h+6*l)*u/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var o=r+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(o))}else{var s=gd(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-al)<=ll)return t.x=this.long0,t.y=al,r<0&&(t.y*=-1),t;var a=pd(this.a,this.e,Math.sin(s)),h=a*a*a/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),u=i*this.a/a,l=u*u;e=s-a*Math.tan(s)/h*u*u*(.5-(1+3*c)*u*u/24),n=u*(1-l*(c/3+(1+3*c)*c*l/15))/Math.cos(s)}return t.x=Ll(n+this.long0),t.y=yd(e),t},names:["Cassini","Cassini_Soldner","cass"]};function Md(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}var xd=.3333333333333333,vd=.17222222222222222,_d=.10257936507936508,bd=.06388888888888888,kd=.0664021164021164,wd=.016415012942191543;var Od={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-al)<ll?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<ll?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Md(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*xd,e=t*t,n[0]+=e*vd,n[1]=e*bd,e*=t,n[0]+=e*_d,n[1]+=e*kd,n[2]=e*wd,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Md(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,i,r,o,s,a,h,c,u,l=t.x,f=t.y;if(l=Ll(l-this.long0),this.sphere){if(o=Math.sin(f),u=Math.cos(f),i=Math.cos(l),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+u*i:1+this.sinph0*o+this.cosph0*u*i)<=ll)return null;e=(n=Math.sqrt(2/n))*u*Math.sin(l),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*u*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(f+this.phi0)<ll)return null;n=pl-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(l),n*=i}}else{switch(a=0,h=0,c=0,i=Math.cos(l),r=Math.sin(l),o=Math.sin(f),s=Md(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=s/this.qp,h=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*h*i;break;case this.EQUIT:c=1+h*i;break;case this.N_POLE:c=al+f,s=this.qp-s;break;case this.S_POLE:c=f-al,s=this.qp+s}if(Math.abs(c)<ll)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),n=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*a-this.sinb1*h*i):(c=Math.sqrt(2/(1+h*i)))*a*this.ymf,e=this.xmf*c*h*r;break;case this.N_POLE:case this.S_POLE:s>=0?(e=(c=Math.sqrt(s))*r,n=i*(this.mode===this.S_POLE?c:-c)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,o,s,a,h,c,u,l=t.x/this.a,f=t.y/this.a;if(this.sphere){var d,p=0,y=0;if((n=.5*(d=Math.sqrt(l*l+f*f)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(n),p=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(d)<=ll?0:Math.asin(f*y/d),l*=y,f=p*d;break;case this.OBLIQ:n=Math.abs(d)<=ll?this.phi0:Math.asin(p*this.sinph0+f*y*this.cosph0/d),l*=y*this.cosph0,f=(p-Math.sin(n)*this.sinph0)*d;break;case this.N_POLE:f=-f,n=al-n;break;case this.S_POLE:n-=al}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,f):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,f*=this.dd,(s=Math.sqrt(l*l+f*f))<ll)return t.x=0,t.y=this.phi0,t;r=2*Math.asin(.5*s/this.rq),i=Math.cos(r),l*=r=Math.sin(r),this.mode===this.OBLIQ?(a=i*this.sinb1+f*r*this.cosb1/s,o=this.qp*a,f=s*this.cosb1*i-f*this.sinb1*r):(a=f*r/s,o=this.qp*a,f=s*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=l*l+f*f))return t.x=0,t.y=this.phi0,t;a=1-o/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(l,f),h=Math.asin(a),c=this.apa,u=h+h,n=h+c[0]*Math.sin(u)+c[1]*Math.sin(u+u)+c[2]*Math.sin(u+u+u)}return t.x=Ll(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function $d(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var Cd={init:function(){Math.abs(this.lat1+this.lat2)<ll||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Gl(this.e3,this.sin_po,this.cos_po),this.qs1=Md(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Gl(this.e3,this.sin_po,this.cos_po),this.qs2=Md(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Md(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>ll?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=Md(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,o=this.ns0*Ll(e-this.long0),s=r*Math.sin(o)+this.x0,a=this.rh-r*Math.cos(o)+this.y0;return t.x=s,t.y=a,t},inverse:function(t){var e,n,i,r,o,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,0!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,s=this.phi1z(this.e3,n)),o=Ll(r/this.ns0+this.long0),t.x=o,t.y=s,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,i,r,o,s=$d(.5*e);if(t<ll)return s;for(var a=t*t,h=1;h<=25;h++)if(s+=o=.5*(r=1-(i=t*(n=Math.sin(s)))*i)*r/Math.cos(s)*(e/(1-a)-n/r+.5/t*Math.log((1-i)/(1+i))),Math.abs(o)<=1e-7)return s;return null}};var Pd={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,i,r,o,s,a,h=t.x,c=t.y;return i=Ll(h-this.long0),e=Math.sin(c),n=Math.cos(c),r=Math.cos(i),(o=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(o)<=ll?(s=this.x0+1*this.a*n*Math.sin(i)/o,a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)/o):(s=this.x0+this.infinity_dist*n*Math.sin(i),a=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)),t.x=s,t.y=a,t},inverse:function(t){var e,n,i,r,o,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),n=Math.sin(r),s=$d((i=Math.cos(r))*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n),o=Ll(this.long0+o)):(s=this.phic0,o=0),t.x=o,t.y=s,t},names:["gnom"]};var Ad={init:function(){this.sphere||(this.k0=Gl(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,i=t.x,r=t.y,o=Ll(i-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var s=Md(this.e,Math.sin(r));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*s*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Ll(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*al:al;for(var i,r,o,s,a=Math.asin(.5*e),h=0;h<30;h++)if(r=Math.sin(a),o=Math.cos(a),s=t*r,a+=i=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-r/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(i)<=1e-10)return a;return NaN}(this.e,2*t.y*this.k0/this.a),e=Ll(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var Ed={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,i=Ll(e-this.long0),r=yd(n-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,n=t.y;return t.x=Ll(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=yd(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},jd=20;var Sd={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ud(this.es),this.e1=ld(this.es),this.e2=fd(this.es),this.e3=dd(this.es),this.ml0=this.a*cd(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,i,r=t.x,o=t.y,s=Ll(r-this.long0);if(i=s*Math.sin(o),this.sphere)Math.abs(o)<=ll?(e=this.a*s,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(o),n=this.a*(yd(o-this.lat0)+(1-Math.cos(i))/Math.tan(o)));else if(Math.abs(o)<=ll)e=this.a*s,n=-1*this.ml0;else{var a=pd(this.a,this.e,Math.sin(o))/Math.tan(o);e=a*Math.sin(i),n=this.a*cd(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+a*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,i,r,o,s,a,h,c;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=ll)e=Ll(i/this.a+this.long0),n=0;else{var u;for(s=this.lat0+r/this.a,a=i*i/this.a/this.a+s*s,h=s,o=jd;o;--o)if(h+=c=-1*(s*(h*(u=Math.tan(h))+1)-h-.5*(h*h+a)*u)/((h-s)/u-1),Math.abs(c)<=ll){n=h;break}e=Ll(this.long0+Math.asin(i*Math.tan(h)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=ll)n=0,e=Ll(this.long0+i/this.a);else{var l,f,d,p,y;for(s=(this.ml0+r)/this.a,a=i*i/this.a/this.a+s*s,h=s,o=jd;o;--o)if(y=this.e*Math.sin(h),l=Math.sqrt(1-y*y)*Math.tan(h),f=this.a*cd(this.e0,this.e1,this.e2,this.e3,h),d=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=c=(s*(l*(p=f/this.a)+1)-p-.5*l*(p*p+a))/(this.es*Math.sin(2*h)*(p*p+a-2*s*p)/(4*l)+(s-p)*(l*d-2/Math.sin(2*h))-d),Math.abs(c)<=ll){n=h;break}l=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Ll(this.long0+Math.asin(i*l/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var Nd={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,i=t.y-this.lat0,r=n-this.long0,o=i/sl*1e-5,s=r,a=1,h=0;for(e=1;e<=10;e++)a*=o,h+=this.A[e]*a;var c,u=h,l=s,f=1,d=0,p=0,y=0;for(e=1;e<=6;e++)c=d*u+f*l,f=f*u-d*l,d=c,p=p+this.B_re[e]*f-this.B_im[e]*d,y=y+this.B_im[e]*f+this.B_re[e]*d;return t.x=y*this.a+this.x0,t.y=p*this.a+this.y0,t},inverse:function(t){var e,n,i=t.x,r=t.y,o=i-this.x0,s=(r-this.y0)/this.a,a=o/this.a,h=1,c=0,u=0,l=0;for(e=1;e<=6;e++)n=c*s+h*a,h=h*s-c*a,c=n,u=u+this.C_re[e]*h-this.C_im[e]*c,l=l+this.C_im[e]*h+this.C_re[e]*c;for(var f=0;f<this.iterations;f++){var d,p=u,y=l,g=s,m=a;for(e=2;e<=6;e++)d=y*u+p*l,p=p*u-y*l,y=d,g+=(e-1)*(this.B_re[e]*p-this.B_im[e]*y),m+=(e-1)*(this.B_im[e]*p+this.B_re[e]*y);p=1,y=0;var M=this.B_re[1],x=this.B_im[1];for(e=2;e<=6;e++)d=y*u+p*l,p=p*u-y*l,y=d,M+=e*(this.B_re[e]*p-this.B_im[e]*y),x+=e*(this.B_im[e]*p+this.B_re[e]*y);var v=M*M+x*x;u=(g*M+m*x)/v,l=(m*M-g*x)/v}var _=u,b=l,k=1,w=0;for(e=1;e<=9;e++)k*=_,w+=this.D[e]*k;var O=this.lat0+w*sl*1e5,$=this.long0+b;return t.x=$,t.y=O,t},names:["New_Zealand_Map_Grid","nzmg"]};var Id={init:function(){},forward:function(t){var e=t.x,n=t.y,i=Ll(e-this.long0),r=this.x0+this.a*i,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=r,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Ll(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]},Td=20;var Wd={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Ff(this.es)},forward:function(t){var e,n,i=t.x,r=t.y;if(i=Ll(i-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(r),s=Td;s;--s){var a=(this.m*r+Math.sin(r)-o)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<ll)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var h=Math.sin(r),c=Math.cos(r);n=this.a*Df(r,h,c,this.en),e=this.a*i*c/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=$d((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=$d(Math.sin(e)/this.n)),n=Ll(n+this.long0),e=yd(e)):(e=Uf(t.y/this.a,this.es,this.en),(i=Math.abs(e))<al?(i=Math.sin(e),n=Ll(this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)))):i-ll<al&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var Rd={init:function(){},forward:function(t){for(var e=t.x,n=t.y,i=Ll(e-this.long0),r=n,o=Math.PI*Math.sin(n);;){var s=-(r+Math.sin(r)-o)/(1+Math.cos(r));if(r+=s,Math.abs(s)<ll)break}r/=2,Math.PI/2-Math.abs(n)<ll&&(i=0);var a=.900316316158*this.a*i*Math.cos(r)+this.x0,h=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=a,t.y=h,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=Ll(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return t.x=i,t.y=r,t},names:["Mollweide","moll"]};var qd={init:function(){Math.abs(this.lat1+this.lat2)<ll||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ud(this.es),this.e1=ld(this.es),this.e2=fd(this.es),this.e3=dd(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Gl(this.e,this.sinphi,this.cosphi),this.ml1=cd(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ll?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Gl(this.e,this.sinphi,this.cosphi),this.ml2=cd(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=cd(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=cd(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var o=this.ns*Ll(n-this.long0),s=this.x0+e*Math.sin(o),a=this.y0+this.rh-e*Math.cos(o);return t.x=s,t.y=a,t},inverse:function(t){var e,n,i,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return 0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(r=Ll(this.long0+o/this.ns),i=yd(this.g-n/this.a),t.x=r,t.y=i,t):(i=gd(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),r=Ll(this.long0+o/this.ns),t.x=r,t.y=i,t)},names:["Equidistant_Conic","eqdc"]};var Gd={init:function(){this.R=this.a},forward:function(t){var e,n,i=t.x,r=t.y,o=Ll(i-this.long0);Math.abs(r)<=ll&&(e=this.x0+this.R*o,n=this.y0);var s=$d(2*Math.abs(r/Math.PI));(Math.abs(o)<=ll||Math.abs(Math.abs(r)-al)<=ll)&&(e=this.x0,n=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/o-o/Math.PI),h=a*a,c=Math.sin(s),u=Math.cos(s),l=u/(c+u-1),f=l*l,d=l*(2/c-1),p=d*d,y=Math.PI*this.R*(a*(l-p)+Math.sqrt(h*(l-p)*(l-p)-(p+h)*(f-p)))/(p+h);o<0&&(y=-y),e=this.x0+y;var g=h+l;return y=Math.PI*this.R*(d*g-a*Math.sqrt((p+h)*(h+1)-g*g))/(p+h),n=r>=0?this.y0+y:this.y0-y,t.x=e,t.y=n,t},inverse:function(t){var e,n,i,r,o,s,a,h,c,u,l,f;return t.x-=this.x0,t.y-=this.y0,l=Math.PI*this.R,o=(i=t.x/l)*i+(r=t.y/l)*r,l=3*(r*r/(h=-2*(s=-Math.abs(r)*(1+o))+1+2*r*r+o*o)+(2*(a=s-2*r*r+i*i)*a*a/h/h/h-9*s*a/h/h)/27)/(c=(s-a*a/3/h)/h)/(u=2*Math.sqrt(-c/3)),Math.abs(l)>1&&(l=l>=0?1:-1),f=Math.acos(l)/3,n=t.y>=0?(-u*Math.cos(f+Math.PI/3)-a/3/h)*Math.PI:-(-u*Math.cos(f+Math.PI/3)-a/3/h)*Math.PI,e=Math.abs(i)<ll?this.long0:Ll(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(i*i-r*r)+o*o))/2/i),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var zd={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,o,s,a,h,c,u,l,f,d,p,y,g,m,M,x,v,_,b,k=t.x,w=t.y,O=Math.sin(t.y),$=Math.cos(t.y),C=Ll(k-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=ll?(t.x=this.x0+this.a*(al-w)*Math.sin(C),t.y=this.y0-this.a*(al-w)*Math.cos(C),t):Math.abs(this.sin_p12+1)<=ll?(t.x=this.x0+this.a*(al+w)*Math.sin(C),t.y=this.y0+this.a*(al+w)*Math.cos(C),t):(M=this.sin_p12*O+this.cos_p12*$*Math.cos(C),m=(g=Math.acos(M))/Math.sin(g),t.x=this.x0+this.a*m*$*Math.sin(C),t.y=this.y0+this.a*m*(this.cos_p12*O-this.sin_p12*$*Math.cos(C)),t):(e=ud(this.es),n=ld(this.es),i=fd(this.es),r=dd(this.es),Math.abs(this.sin_p12-1)<=ll?(o=this.a*cd(e,n,i,r,al),s=this.a*cd(e,n,i,r,w),t.x=this.x0+(o-s)*Math.sin(C),t.y=this.y0-(o-s)*Math.cos(C),t):Math.abs(this.sin_p12+1)<=ll?(o=this.a*cd(e,n,i,r,al),s=this.a*cd(e,n,i,r,w),t.x=this.x0+(o+s)*Math.sin(C),t.y=this.y0+(o+s)*Math.cos(C),t):(a=O/$,h=pd(this.a,this.e,this.sin_p12),c=pd(this.a,this.e,O),u=Math.atan((1-this.es)*a+this.es*h*this.sin_p12/(c*$)),x=0===(l=Math.atan2(Math.sin(C),this.cos_p12*Math.tan(u)-this.sin_p12*Math.cos(C)))?Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.abs(Math.abs(l)-Math.PI)<=ll?-Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.asin(Math.sin(C)*Math.cos(u)/Math.sin(l)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),g=h*x*(1-(v=x*x)*(y=(d=this.e*this.cos_p12*Math.cos(l)/Math.sqrt(1-this.es))*d)*(1-y)/6+(_=v*x)/8*(p=f*d)*(1-2*y)+(b=_*x)/120*(y*(4-7*y)-3*f*f*(1-7*y))-b*x/48*p),t.x=this.x0+g*Math.sin(l),t.y=this.y0+g*Math.cos(l),t))},inverse:function(t){var e,n,i,r,o,s,a,h,c,u,l,f,d,p,y,g,m,M,x,v,_,b;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*al*this.a)return;return n=e/this.a,i=Math.sin(n),r=Math.cos(n),o=this.long0,Math.abs(e)<=ll?s=this.lat0:(s=$d(r*this.sin_p12+t.y*i*this.cos_p12/e),a=Math.abs(this.lat0)-al,o=Math.abs(a)<=ll?this.lat0>=0?Ll(this.long0+Math.atan2(t.x,-t.y)):Ll(this.long0-Math.atan2(-t.x,t.y)):Ll(this.long0+Math.atan2(t.x*i,e*this.cos_p12*r-t.y*this.sin_p12*i))),t.x=o,t.y=s,t}return h=ud(this.es),c=ld(this.es),u=fd(this.es),l=dd(this.es),Math.abs(this.sin_p12-1)<=ll?(s=gd(((f=this.a*cd(h,c,u,l,al))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,h,c,u,l),o=Ll(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=s,t):Math.abs(this.sin_p12+1)<=ll?(f=this.a*cd(h,c,u,l,al),s=gd(((e=Math.sqrt(t.x*t.x+t.y*t.y))-f)/this.a,h,c,u,l),o=Ll(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=s,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),d=pd(this.a,this.e,this.sin_p12),g=Math.cos(y),M=-(m=this.e*this.cos_p12*g)*m/(1-this.es),x=3*this.es*(1-M)*this.sin_p12*this.cos_p12*g/(1-this.es),b=1-M*(_=(v=e/d)-M*(1+M)*Math.pow(v,3)/6-x*(1+3*M)*Math.pow(v,4)/24)*_/2-v*_*_*_/6,p=Math.asin(this.sin_p12*Math.cos(_)+this.cos_p12*Math.sin(_)*g),o=Ll(this.long0+Math.asin(Math.sin(y)*Math.sin(_)/Math.cos(p))),s=Math.atan((1-this.es*b*this.sin_p12/Math.sin(p))*Math.tan(p)/(1-this.es)),t.x=o,t.y=s,t)},names:["Azimuthal_Equidistant","aeqd"]};var Ld={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,o,s,a,h=t.x,c=t.y;return i=Ll(h-this.long0),e=Math.sin(c),n=Math.cos(c),r=Math.cos(i),((o=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(o)<=ll)&&(s=1*this.a*n*Math.sin(i),a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)),t.x=s,t.y=a,t},inverse:function(t){var e,n,i,r,o,s,a;return t.x-=this.x0,t.y-=this.y0,n=$d((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),i=Math.sin(n),r=Math.cos(n),s=this.long0,Math.abs(e)<=ll?(a=this.lat0,t.x=s,t.y=a,t):(a=$d(r*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.abs(this.lat0)-al,Math.abs(o)<=ll?(s=this.lat0>=0?Ll(this.long0+Math.atan2(t.x,-t.y)):Ll(this.long0-Math.atan2(-t.x,t.y)),t.x=s,t.y=a,t):(s=Ll(this.long0+Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i)),t.x=s,t.y=a,t))},names:["ortho"]},Fd={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Dd={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Yd(t,e,n,i){var r;return t<ll?(i.value=Dd.AREA_0,r=0):(r=Math.atan2(e,n),Math.abs(r)<=pl?i.value=Dd.AREA_0:r>pl&&r<=al+pl?(i.value=Dd.AREA_1,r-=al):r>al+pl||r<=-(al+pl)?(i.value=Dd.AREA_2,r=r>=0?r-gl:r+gl):(i.value=Dd.AREA_3,r+=al)),r}function Ud(t,e){var n=t+e;return n<-gl?n+=yl:n>+gl&&(n-=yl),n}var Bd={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=al-pl/2?this.face=Fd.TOP:this.lat0<=-(al-pl/2)?this.face=Fd.BOTTOM:Math.abs(this.long0)<=pl?this.face=Fd.FRONT:Math.abs(this.long0)<=al+pl?this.face=this.long0>0?Fd.RIGHT:Fd.LEFT:this.face=Fd.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,i,r,o,s,a={x:0,y:0},h={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===Fd.TOP)r=al-e,n>=pl&&n<=al+pl?(h.value=Dd.AREA_0,i=n-al):n>al+pl||n<=-(al+pl)?(h.value=Dd.AREA_1,i=n>0?n-gl:n+gl):n>-(al+pl)&&n<=-pl?(h.value=Dd.AREA_2,i=n+al):(h.value=Dd.AREA_3,i=n);else if(this.face===Fd.BOTTOM)r=al+e,n>=pl&&n<=al+pl?(h.value=Dd.AREA_0,i=-n+al):n<pl&&n>=-pl?(h.value=Dd.AREA_1,i=-n):n<-pl&&n>=-(al+pl)?(h.value=Dd.AREA_2,i=-n-al):(h.value=Dd.AREA_3,i=n>0?-n+gl:-n-gl);else{var c,u,l,f,d,p;this.face===Fd.RIGHT?n=Ud(n,+al):this.face===Fd.BACK?n=Ud(n,+gl):this.face===Fd.LEFT&&(n=Ud(n,-al)),f=Math.sin(e),d=Math.cos(e),p=Math.sin(n),c=d*Math.cos(n),u=d*p,l=f,this.face===Fd.FRONT?i=Yd(r=Math.acos(c),l,u,h):this.face===Fd.RIGHT?i=Yd(r=Math.acos(u),l,-c,h):this.face===Fd.BACK?i=Yd(r=Math.acos(-c),l,-u,h):this.face===Fd.LEFT?i=Yd(r=Math.acos(-u),l,c,h):(r=i=0,h.value=Dd.AREA_0)}return s=Math.atan(12/gl*(i+Math.acos(Math.sin(i)*Math.cos(pl))-al)),o=Math.sqrt((1-Math.cos(r))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(i))))),h.value===Dd.AREA_1?s+=al:h.value===Dd.AREA_2?s+=gl:h.value===Dd.AREA_3&&(s+=1.5*gl),a.x=o*Math.cos(s),a.y=o*Math.sin(s),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t},inverse:function(t){var e,n,i,r,o,s,a,h,c,u,l,f,d={lam:0,phi:0},p={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?p.value=Dd.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(p.value=Dd.AREA_1,e-=al):t.x<0&&-t.x>=Math.abs(t.y)?(p.value=Dd.AREA_2,e=e<0?e+gl:e-gl):(p.value=Dd.AREA_3,e+=al),c=gl/12*Math.tan(e),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),s=Math.atan(o),(a=1-(i=Math.cos(e))*i*(r=Math.tan(n))*r*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?a=-1:a>1&&(a=1),this.face===Fd.TOP)h=Math.acos(a),d.phi=al-h,p.value===Dd.AREA_0?d.lam=s+al:p.value===Dd.AREA_1?d.lam=s<0?s+gl:s-gl:p.value===Dd.AREA_2?d.lam=s-al:d.lam=s;else if(this.face===Fd.BOTTOM)h=Math.acos(a),d.phi=h-al,p.value===Dd.AREA_0?d.lam=-s+al:p.value===Dd.AREA_1?d.lam=-s:p.value===Dd.AREA_2?d.lam=-s-al:d.lam=s<0?-s-gl:-s+gl;else{var y,g,m;c=(y=a)*y,g=(c+=(m=c>=1?0:Math.sqrt(1-c)*Math.sin(s))*m)>=1?0:Math.sqrt(1-c),p.value===Dd.AREA_1?(c=g,g=-m,m=c):p.value===Dd.AREA_2?(g=-g,m=-m):p.value===Dd.AREA_3&&(c=g,g=m,m=-c),this.face===Fd.RIGHT?(c=y,y=-g,g=c):this.face===Fd.BACK?(y=-y,g=-g):this.face===Fd.LEFT&&(c=y,y=g,g=-c),d.phi=Math.acos(-m)-al,d.lam=Math.atan2(g,y),this.face===Fd.RIGHT?d.lam=Ud(d.lam,-al):this.face===Fd.BACK?d.lam=Ud(d.lam,-gl):this.face===Fd.LEFT&&(d.lam=Ud(d.lam,+al))}return 0!==this.es&&(u=d.phi<0?1:0,l=Math.tan(d.phi),f=this.b/Math.sqrt(l*l+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),u&&(d.phi=-d.phi)),d.lam+=this.long0,t.x=d.lam,t.y=d.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Xd=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Hd=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Qd=.8487,Zd=1.3523,Jd=dl/5,Vd=1/Jd,Kd=18,tp=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},ep=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};var np={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=Ll(t.x-this.long0),n=Math.abs(t.y),i=Math.floor(n*Jd);i<0?i=0:i>=Kd&&(i=Kd-1),n=dl*(n-Vd*i);var r={x:tp(Xd[i],n)*e,y:tp(Hd[i],n)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*Qd+this.x0,r.y=r.y*this.a*Zd+this.y0,r},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*Qd),y:Math.abs(t.y-this.y0)/(this.a*Zd)};if(e.y>=1)e.x/=Xd[Kd][0],e.y=t.y<0?-al:al;else{var n=Math.floor(e.y*Kd);for(n<0?n=0:n>=Kd&&(n=Kd-1);;)if(Hd[n][0]>e.y)--n;else{if(!(Hd[n+1][0]<=e.y))break;++n}var i=Hd[n],r=5*(e.y-i[0])/(Hd[n+1][0]-i[0]);r=function(t,e,n,i){for(var r=e;i;--i){var o=t(r);if(r-=o,Math.abs(o)<n)break}return r}(function(t){return(tp(i,t)-e.y)/ep(i,t)},r,ll,100),e.x/=tp(Xd[n],r),e.y=(5*n+r)*fl,t.y<0&&(e.y=-e.y)}return e.x=Ll(e.x+this.long0),e},names:["Robinson","robin"]};uf.defaultDatum="WGS84",uf.Proj=Kl,uf.WGS84=new uf.Proj("WGS84"),uf.Point=Af,uf.toPoint=rf,uf.defs=Il,uf.transform=sf,uf.mgrs=xf,uf.version="2.5.0",function(t){t.Proj.projections.add(Bf),t.Proj.projections.add(Vf),t.Proj.projections.add(Kf),t.Proj.projections.add(id),t.Proj.projections.add(rd),t.Proj.projections.add(od),t.Proj.projections.add(sd),t.Proj.projections.add(ad),t.Proj.projections.add(hd),t.Proj.projections.add(md),t.Proj.projections.add(Od),t.Proj.projections.add(Cd),t.Proj.projections.add(Pd),t.Proj.projections.add(Ad),t.Proj.projections.add(Ed),t.Proj.projections.add(Sd),t.Proj.projections.add(Nd),t.Proj.projections.add(Id),t.Proj.projections.add(Wd),t.Proj.projections.add(Rd),t.Proj.projections.add(qd),t.Proj.projections.add(Gd),t.Proj.projections.add(zd),t.Proj.projections.add(Ld),t.Proj.projections.add(Bd),t.Proj.projections.add(np)}(uf);const ip={filter:uu(Wu),select:uu(function(t,e){if(e.constructor===String&&(e=[e]),e.constructor!==Array)throw new Error("select can only be used with a string or array of strings");for(let n in t)e.includes(n)||delete t[n]}),arrange:uu(function(t,e){if(e.constructor===Object)qu(t,e);else{if(e.constructor!==Array)throw new Error("arrange requires a key-value object or array of key-value objects");for(let n=e.length-1;n>=0;n--)qu(t,e[n])}}),rename:uu(function(t,e){if(e.constructor!==Object)throw new Error("Rename only accepts an object");for(let n in e)if(t.hasOwnProperty(n)){let i=e[n];pu(i),t[i]=t[n],delete t[n]}else ba(`Rename: column '${n}' not found`)}),mutate:uu(zu),transmute:uu(function(t,e){t=zu(t,e);for(let n in t)e.hasOwnProperty(n)||delete t[n]}),summarise:function(t,e){if(e.constructor!==Object)throw new Error("summarise must be an object");let n=Uu(e,t);if(t.hasOwnProperty("$grouped")){Xu(e,t);for(let e in t)"$grouped"!==e&&(n[e]=t[e]);for(let i of t.$grouped)n=Bu(i.data(),e,n)}else n=Bu(t,e,n);return n},mutarise:function(t,e){if(e.constructor!==Object)throw new Error("mutarise must be an object");let n=Uu(e);if(t.hasOwnProperty("$grouped")){Xu(e,t);for(let i of t.$grouped){let t=Uu(e),r=i.data();n=Hu(n,t=Bu(r,e,t),mu(r))}t=function(t){let e=Uu(t.$grouped[0].data());for(let n of t.$grouped){let t=n.data();for(let n in e)e[n].push(...t[n])}return e}(t)}else{let i=Uu(e);n=Hu(n,i=Bu(t,e,i),mu(t))}return function(t,e){for(let n in e)t[n]=e[n];return t}(t,n)},groupBy:function(t,e){let n={},i=function(t,e){let n=e.constructor;if(![String,Array].includes(n))throw new Error("groupBy can only be used with a string or array of strings");let i=n===String?[e]:e;for(let e of i)if(!t.hasOwnProperty(e))throw new Error(`Column '${e}' not found`);if(i.length===Object.keys(t).length)throw new Error("Cannot group by all columns");return i}(t,e),r=function(t,e){let n={},i=mu(t);for(let r=0;r<i;r++){let i=Qu(t,r,e),o=JSON.stringify(i);n[o]=n[o]||new Zu(t,i),n[o].addRow(t,r)}return Object.keys(n).map(t=>n[t])}(t,i);n.$grouped=r.map(t=>new ap(t));for(let t of i)n[t]=[];for(let t=0;t<i.length;t++){let e=i[t];for(let i of r)n[e].push(i.groupedValues[t])}return n},bin:function(t,e){let n=function(t){let e=t.length,n=[];for(let i=0;i<e-1;i++)n.push([t[i],t[i+1]]);return n}(function(t,e){if(e.constructor!==Object)throw new Error("Bin only accepts an Object");let n=e.groupBy;if(n.constructor!==String)throw new Error("groupBy only accepts a String variable name");let i=e.method;i||(ba("No binning method specified, defaulting to EqualInterval"),i="EqualInterval"),i.constructor!==String&&(ba("Binning method not recognized, defaulting to EqualInterval"),i="EqualInterval");let r=e.numClasses;r||(ba("numClasses not specified, defaulting to 5"),r=5);let o=t[n];if(!o)throw new Error(`groupBy variable ${n} does not exist`);let s,a=new Ku(o);if("IntervalSize"===i){let i=e.binSize,r=function(t){let e=t.sort((t,e)=>t-e),n=[];return n.push(e[0]),n.push(e[e.length-1]),n}(o);i||(ba(`binSize not specified for IntervalSize binning, defaulting to ${r[1]-r[0]}`),i=r[1]-r[0]);let a=Math.floor((r[1]-r[0])/i);s=function(t,e,n){let i=[],r=t[0];for(let t=0;t<n;t++){let t=r+e;i.push([r,t]),r=t}return r<t[1]&&i.push([r,t[1]]),i}(r,i,a);let h=tl(t,n,s);return h}return"EqualInterval"===i?s=a.getClassEqInterval(r):"StandardDeviation"===i?s=a.getClassStdDeviation(r):"ArithmeticProgression"===i?s=a.getClassArithmeticProgression(r):"GeometricProgression"===i?s=a.getClassGeometricProgression(r):"Quantile"===i?s=a.getClassQuantile(r):"Jenks"===i?s=a.getClassJenks(r):"Manual"===i&&(s=e.manualClasses),s}(t,e));return tl(t,e.groupBy,n)},dropNA:uu(function(t,e){let n;if(void 0===e)n=t=>{let e=!0;for(let n in t)if(nn(t[n])){e=!1;break}return e};else if(e.constructor===String)el(t,[e]),n=t=>!nn(t[e]);else{if(e.constructor!==Array)throw new Error("dropNA can only be passed undefined, a String or an Array of Strings");el(t,e),n=t=>{let n=!0;for(let i of e)if(nn(t[i])){n=!1;break}return n}}Wu(t,n)}),reproject:function(t,e){if(!t.hasOwnProperty("$geometry"))return ba("No geometry column found. Skipping reproject-transformation."),t;if(!e.hasOwnProperty("to"))return ba("reproject: missing required option 'to'"),t;let n="WGS84";e.hasOwnProperty("from")&&(n=e.from);let i=uf(n,e.to).forward,r=Pn(t.$geometry,i);return t.$geometry=r,t},transform:function(t,e){if(e.constructor!==Function)throw new Error("Invalid 'transform' transformation: must be a Function");return e(t)}};class rp{constructor(t){this._data=t}done(){return new ap(this)}arrange(t){return this._data=ip.arrange(this._data,t),this}bin(t){return this._data=ip.bin(this._data,t),this}dropNA(t){return this._data=ip.dropNA(this._data,t),this}filter(t){return this._data=ip.filter(this._data,t),this}groupBy(t){return this._data=ip.groupBy(this._data,t),this}mutarise(t){return this._data=ip.mutarise(this._data,t),this}mutarize(t){return this._data=ip.mutarise(this._data,t),this}mutate(t){return this._data=ip.mutate(this._data,t),this}transmute(t){return this._data=ip.transmute(this._data,t),this}rename(t){return this._data=ip.rename(this._data,t),this}reproject(t){return this._data=ip.reproject(this._data,t),this}select(t){return this._data=ip.select(this._data,t),this}summarise(t){return this._data=ip.summarise(this._data,t),this}summarize(t){return this._data=ip.summarise(this._data,t),this}transform(t){return this._data=ip.transform(this._data,t),this}}function op(t,e,n){let i=new rp(t);return i=i[e](n)}const sp={arrange(t){return op(this._data,"arrange",t)},bin(t){return op(this._data,"bin",t)},dropNA(t){return op(this._data,"dropNA",t)},filter(t){return op(this._data,"filter",t)},groupBy(t){return op(this._data,"groupBy",t)},mutarise(t){return op(this._data,"mutarise",t)},mutarize(t){return op(this._data,"mutarize",t)},mutate(t){return op(this._data,"mutate",t)},transmute(t){return op(this._data,"transmute",t)},rename(t){return op(this._data,"rename",t)},reproject(t){return op(this._data,"reproject",t)},select(t){return op(this._data,"select",t)},summarise(t){return op(this._data,"summarise",t)},summarize(t){return op(this._data,"summarize",t)},transform(t){return op(this._data,"transform",t)}};class ap{constructor(t){if(this._data={},this._length=void 0,this._indexToRowNumber={},this._domainsAndTypesCalculated=!1,this._domains={},this._types={},function(t){if(t.constructor===Object)return Object.keys(t).map(e=>t[e]).every(t=>t.constructor===Array);return!1}(t))this._setColumnData(t);else if(function(t){return t.constructor===Array&&t.every(t=>t.constructor===Object)}(t))this._setRowData(t);else if(function(t){let e="FeatureCollection"===t.type,n=t.features&&t.features.length>0;return e&&n}(t))this._setGeoJSON(t);else if(t instanceof rp)this._setTransformableDataContainer(t);else{if(!(t instanceof Zu))throw cp;this._setGroup(t)}}data(){return this._data}row(t){let e=this._indexToRowNumber[t];return this._row(e)}rows(){let t=[];for(let e=0;e<this._length;e++)t.push(this._row(e));return t}hasColumn(t){return function(t,e){try{return Pu(t,e),!0}catch(t){return!1}}(t,this)}column(t){return Pu(t,this),Eu(t,this)}map(t,e){return Pu(t,this),ju(t,this,e)}updateRow(t,e){let n=this._indexToRowNumber[t];for(let t in e){if(Au(t,this),"$index"===t){ba("Cannot update '$index' of row");continue}let i=e[t];this._data[t][n]=i}}_row(t){let e={};for(let n in this._data){let i=this._data[n][t];e[n]=i}return e}}var hp;hp=ap,Object.assign(hp.prototype,vu),function(t){Object.assign(t.prototype,Tu)}(ap),function(t){Object.assign(t.prototype,sp)}(ap);const cp=new Error("Data passed to DataContainer is of unknown format");function up(t){const e=t.x,n=t.y;let i,r;const o=Ur().domain(e),s=Ur().domain(n);function a(){if(i&&r){const t=Math.abs(i[1]-i[0]),a=Math.abs(r[1]-r[0]),h=(i[0]+i[1])/2,c=(r[0]+r[1])/2,u=t/(e[1]-e[0]),l=a/(n[1]-n[0]);if(u<l){const t=(n[1]-n[0])/2*u,e=[c-t,c+t];o.range(i),s.range(e)}if(u>=l){const t=(e[1]-e[0])/2*l,n=[h-t,h+t];o.range(n),s.range(r)}}}return{scaleX:{range:t=>(i=t,a(),o),copy:function(){return this}},scaleY:{range:t=>(r=t,a(),s),copy:function(){return this}}}}export{Zs as CoordinateTransformation,ap as DataContainer,pr as Graphic,Na as Grid,Zh as Label,kc as LabelLayer,lc as Layer,qh as Mark,Lh as Point,pc as PointLayer,Xh as Polygon,vc as PolygonLayer,Yh as Rectangle,mc as RectangleLayer,Xs as Section,up as createGeoScales};
